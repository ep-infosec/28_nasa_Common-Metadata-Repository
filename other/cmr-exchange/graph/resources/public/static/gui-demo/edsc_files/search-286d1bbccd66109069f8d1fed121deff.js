if(window.Modernizr=function(t,e,n){function i(t){_.cssText=t}function r(t,e){return i(S.join(t+";")+(e||""))}function o(t,e){return typeof t===e}function s(t,e){return!!~(""+t).indexOf(e)}function a(t,e){for(var i in t){var r=t[i];if(!s(r,"-")&&_[r]!==n)return"pfx"!=e||r}return!1}function l(t,e,i){for(var r in t){var s=e[t[r]];if(s!==n)return!1===i?t[r]:o(s,"function")?s.bind(i||e):s}return!1}function u(t,e,n){var i=t.charAt(0).toUpperCase()+t.slice(1),r=(t+" "+E.join(i+" ")+i).split(" ");return o(e,"string")||o(e,"undefined")?a(r,e):l(r=(t+" "+M.join(i+" ")+i).split(" "),e,n)}function h(){f.input=function(n){for(var i=0,r=n.length;i<r;i++)D[n[i]]=n[i]in b;return D.list&&(D.list=!!e.createElement("datalist")&&!!t.HTMLDataListElement),D}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),f.inputtypes=function(t){for(var i,r,o,s=0,a=t.length;s<a;s++)b.setAttribute("type",r=t[s]),(i="text"!==b.type)&&(b.value=w,b.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(r)&&b.style.WebkitAppearance!==n?(g.appendChild(b),i=(o=e.defaultView).getComputedStyle&&"textfield"!==o.getComputedStyle(b,null).WebkitAppearance&&0!==b.offsetHeight,g.removeChild(b)):/^(search|tel)$/.test(r)||(i=/^(url|email)$/.test(r)?b.checkValidity&&!1===b.checkValidity():b.value!=w)),k[t[s]]=!!i;return k}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var c,d,p="2.6.2",f={},m=!0,g=e.documentElement,v="modernizr",y=e.createElement(v),_=y.style,b=e.createElement("input"),w=":)",x={}.toString,S=" -webkit- -moz- -o- -ms- ".split(" "),C="Webkit Moz O ms",E=C.split(" "),M=C.toLowerCase().split(" "),L={svg:"http://www.w3.org/2000/svg"},T={},k={},D={},P=[],O=P.slice,I=function(t,n,i,r){var o,s,a,l,u=e.createElement("div"),h=e.body,c=h||e.createElement("body");if(parseInt(i,10))for(;i--;)(a=e.createElement("div")).id=r?r[i]:v+(i+1),u.appendChild(a);return o=["&#173;",'<style id="s',v,'">',t,"</style>"].join(""),u.id=v,(h?u:c).innerHTML+=o,c.appendChild(u),h||(c.style.background="",c.style.overflow="hidden",l=g.style.overflow,g.style.overflow="hidden",g.appendChild(c)),s=n(u,t),h?u.parentNode.removeChild(u):(c.parentNode.removeChild(c),g.style.overflow=l),!!s},N=function(e){var n,i=t.matchMedia||t.msMatchMedia;return i?i(e).matches:(I("@media "+e+" { #"+v+" { position: absolute; } }",function(e){n="absolute"==(t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position}),n)},A=function(){function t(t,r){r=r||e.createElement(i[t]||"div");var s=(t="on"+t)in r;return s||(r.setAttribute||(r=e.createElement("div")),r.setAttribute&&r.removeAttribute&&(r.setAttribute(t,""),s=o(r[t],"function"),o(r[t],"undefined")||(r[t]=n),r.removeAttribute(t))),r=null,s}var i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t}(),F={}.hasOwnProperty;for(var R in d=o(F,"undefined")||o(F.call,"undefined")?function(t,e){return e in t&&o(t.constructor.prototype[e],"undefined")}:function(t,e){return F.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=O.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=e.prototype;var o=new r,s=e.apply(o,n.concat(O.call(arguments)));return Object(s)===s?s:o}return e.apply(t,n.concat(O.call(arguments)))};return i}),T.flexbox=function(){return u("flexWrap")},T.canvas=function(){var t=e.createElement("canvas");return!!t.getContext&&!!t.getContext("2d")},T.canvastext=function(){return!!f.canvas&&!!o(e.createElement("canvas").getContext("2d").fillText,"function")},T.webgl=function(){return!!t.WebGLRenderingContext},T.touch=function(){var n;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?n=!0:I(["@media (",S.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){n=9===t.offsetTop}),n},T.geolocation=function(){return"geolocation"in navigator},T.postmessage=function(){return!!t.postMessage},T.websqldatabase=function(){return!!t.openDatabase},T.indexedDB=function(){return!!u("indexedDB",t)},T.hashchange=function(){return A("hashchange",t)&&(e.documentMode===n||e.documentMode>7)},T.history=function(){return!!t.history&&!!history.pushState},T.draganddrop=function(){var t=e.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},T.websockets=function(){return"WebSocket"in t||"MozWebSocket"in t},T.rgba=function(){return i("background-color:rgba(150,255,150,.5)"),s(_.backgroundColor,"rgba")},T.hsla=function(){return i("background-color:hsla(120,40%,100%,.5)"),s(_.backgroundColor,"rgba")||s(_.backgroundColor,"hsla")},T.multiplebgs=function(){return i("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(_.background)},T.backgroundsize=function(){return u("backgroundSize")},T.borderimage=function(){return u("borderImage")},T.borderradius=function(){return u("borderRadius")},T.boxshadow=function(){return u("boxShadow")},T.textshadow=function(){return""===e.createElement("div").style.textShadow},T.opacity=function(){return r("opacity:.55"),/^0.55$/.test(_.opacity)},T.cssanimations=function(){return u("animationName")},T.csscolumns=function(){return u("columnCount")},T.cssgradients=function(){var t="background-image:",e="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return i((t+"-webkit- ".split(" ").join(e+t)+S.join(n+t)).slice(0,-t.length)),s(_.backgroundImage,"gradient")},T.cssreflections=function(){return u("boxReflect")},T.csstransforms=function(){return!!u("transform")},T.csstransforms3d=function(){var t=!!u("perspective");return t&&"webkitPerspective"in g.style&&I("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e){t=9===e.offsetLeft&&3===e.offsetHeight}),t},T.csstransitions=function(){return u("transition")},T.fontface=function(){var t;return I('@font-face {font-family:"font";src:url("https://")}',function(n,i){var r=e.getElementById("smodernizr"),o=r.sheet||r.styleSheet,s=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"";t=/src/i.test(s)&&0===s.indexOf(i.split(" ")[0])}),t},T.generatedcontent=function(){var t;return I(["#",v,"{font:0/0 a}#",v,':after{content:"',w,'";visibility:hidden;font:3px/1 a}'].join(""),function(e){t=e.offsetHeight>=3}),t},T.video=function(){var t=e.createElement("video"),n=!1;try{(n=!!t.canPlayType)&&((n=new Boolean(n)).ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(p){}return n},T.audio=function(){var t=e.createElement("audio"),n=!1;try{(n=!!t.canPlayType)&&((n=new Boolean(n)).ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(p){}return n},T.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(t){return!1}},T.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(t){return!1}},T.webworkers=function(){return!!t.Worker},T.applicationcache=function(){return!!t.applicationCache},T.svg=function(){return!!e.createElementNS&&!!e.createElementNS(L.svg,"svg").createSVGRect},T.inlinesvg=function(){var t=e.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==L.svg},T.smil=function(){return!!e.createElementNS&&/SVGAnimate/.test(x.call(e.createElementNS(L.svg,"animate")))},T.svgclippaths=function(){return!!e.createElementNS&&/SVGClipPath/.test(x.call(e.createElementNS(L.svg,"clipPath")))},T)d(T,R)&&(c=R.toLowerCase(),f[c]=T[R](),P.push((f[c]?"":"no-")+c));return f.input||h(),f.addTest=function(t,e){if("object"==typeof t)for(var i in t)d(t,i)&&f.addTest(i,t[i]);else{if(t=t.toLowerCase(),f[t]!==n)return f;e="function"==typeof e?e():e,void 0!==m&&m&&(g.className+=" "+(e?"":"no-")+t),f[t]=e}return f},i(""),y=b=null,function(t,e){function n(t,e){var n=t.createElement("p"),i=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var t=v.elements;return"string"==typeof t?t.split(" "):t}function r(t){var e=g[t[f]];return e||(e={},m++,t[f]=m,g[m]=e),e}function o(t,n,i){return n||(n=e),h?n.createElement(t):(i||(i=r(n)),(o=i.cache[t]?i.cache[t].cloneNode():p.test(t)?(i.cache[t]=i.createElem(t)).cloneNode():i.createElem(t)).canHaveChildren&&!d.test(t)?i.frag.appendChild(o):o);var o}function s(t,n){if(t||(t=e),h)return t.createDocumentFragment();for(var o=(n=n||r(t)).frag.cloneNode(),s=0,a=i(),l=a.length;s<l;s++)o.createElement(a[s]);return o}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return v.shivMethods?o(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/\w+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(v,e.frag)}function l(t){t||(t=e);var i=r(t);return v.shivCSS&&!u&&!i.hasCSS&&(i.hasCSS=!!n(t,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),h||a(t,i),t}var u,h,c=t.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f="_html5shiv",m=0,g={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",u="hidden"in t,h=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(c){u=!0,h=!0}}();var v={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:!1!==c.shivCSS,supportsUnknownElements:h,shivMethods:!1!==c.shivMethods,type:"default",shivDocument:l,createElement:o,createDocumentFragment:s};t.html5=v,l(e)}(this,e),f._version=p,f._prefixes=S,f._domPrefixes=M,f._cssomPrefixes=E,f.mq=N,f.hasEvent=A,f.testProp=function(t){return a([t])},f.testAllProps=u,f.testStyles=I,f.prefixed=function(t,e,n){return e?u(t,e,n):u(t,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+P.join(" "):""),f}(this,this.document),function(t,e,n){function i(t){return"[object Function]"==g.call(t)}function r(t){return"string"==typeof t}function o(){}function s(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function a(){var t=v.shift();y=1,t?t.t?f(function(){("c"==t.t?d.injectCss:d.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),a()):y=0}function l(t,n,i,r,o,l,u){function h(e){if(!p&&s(c.readyState)&&(_.r=p=1,!y&&a(),c.onload=c.onreadystatechange=null,e))for(var i in"img"!=t&&f(function(){w.removeChild(c)},50),M[n])M[n].hasOwnProperty(i)&&M[n][i].onload()}u=u||d.errorTimeout;var c=e.createElement(t),p=0,g=0,_={t:i,s:n,e:o,a:l,x:u};1===M[n]&&(g=1,M[n]=[]),"object"==t?c.data=n:(c.src=n,c.type=t),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){h.call(this,g)},v.splice(r,0,_),"img"!=t&&(g||2===M[n]?(w.insertBefore(c,b?null:m),f(h,u)):M[n].push(c))}function u(t,e,n,i,o){return y=0,e=e||"j",r(t)?l("c"==e?S:x,t,e,this.i++,n,i,o):(v.splice(this.i++,0,t),1==v.length&&a()),this}function h(){var t=d;return t.loader={load:u,i:0},t}var c,d,p=e.documentElement,f=t.setTimeout,m=e.getElementsByTagName("script")[0],g={}.toString,v=[],y=0,_="MozAppearance"in p.style,b=_&&!!e.createRange().compareNode,w=b?p:m.parentNode,x=(p=t.opera&&"[object Opera]"==g.call(t.opera),p=!!e.attachEvent&&!p,_?"object":p?"script":"img"),S=p?"script":x,C=Array.isArray||function(t){return"[object Array]"==g.call(t)},E=[],M={},L={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};(d=function(t){function e(t){t=t.split("!");var e,n,i,r=E.length,o=t.pop(),s=t.length;o={url:o,origUrl:o,prefixes:t};for(n=0;n<s;n++)i=t[n].split("="),(e=L[i.shift()])&&(o=e(o,i));for(n=0;n<r;n++)o=E[n](o);return o}function s(t,r,o,s,a){var l=e(t),u=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(r&&(r=i(r)?r:r[t]||r[s]||r[t.split("/").pop().split("?")[0]]),l.instead?l.instead(t,r,o,s,a):(M[l.url]?l.noexec=!0:M[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(i(r)||i(u))&&o.load(function(){h(),r&&r(l.origUrl,a,s),u&&u(l.origUrl,a,s),M[l.url]=2})))}function a(t,e){function n(t,n){if(t){if(r(t))n||(c=function(){var t=[].slice.call(arguments);d.apply(this,t),p()}),s(t,c,e,0,u);else if(Object(t)===t)for(l in a=function(){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(),t)t.hasOwnProperty(l)&&(!n&&!--a&&(i(c)?c=function(){var t=[].slice.call(arguments);d.apply(this,t),p()}:c[l]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),p()}}(d[l])),s(t[l],c,e,l,u))}else!n&&p()}var a,l,u=!!t.test,h=t.load||t.both,c=t.callback||o,d=c,p=t.complete||o;n(u?t.yep:t.nope,!!h),h&&n(h)}var l,u,c=this.yepnope.loader;if(r(t))s(t,0,c,0);else if(C(t))for(l=0;l<t.length;l++)r(u=t[l])?s(u,0,c,0):C(u)?d(u):Object(u)===u&&a(u,c);else Object(t)===t&&a(t,c)}).addPrefix=function(t,e){L[t]=e},d.addFilter=function(t){E.push(t)},d.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",c=function(){e.removeEventListener("DOMContentLoaded",c,0),e.readyState="complete"},0)),t.yepnope=h(),t.yepnope.executeStack=a,t.yepnope.injectJs=function(t,n,i,r,l,u){var h,c,p=e.createElement("script");r=r||d.errorTimeout;for(c in p.src=t,i)p.setAttribute(c,i[c]);n=u?a:n||o,p.onreadystatechange=p.onload=function(){!h&&s(p.readyState)&&(h=1,n(),p.onload=p.onreadystatechange=null)},f(function(){h||(h=1,n(1))},r),l?p.onload():m.parentNode.insertBefore(p,m)},t.yepnope.injectCss=function(t,n,i,r,s,l){var u;r=e.createElement("link"),n=l?a:n||o;for(u in r.href=t,r.rel="stylesheet",r.type="text/css",i)r.setAttribute(u,i[u]);s||(m.parentNode.insertBefore(r,m),f(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},window.matchMedia=window.matchMedia||function(t){var e,n=t.documentElement,i=n.firstElementChild||n.firstChild,r=t.createElement("body"),o=t.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",r.style.background="none",r.appendChild(o),function(t){return o.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(r,i),e=42==o.offsetWidth,n.removeChild(r),{matches:e,media:t}}}(document),function(t){function e(){b(!0)}if(t.respond={},respond.update=function(){},respond.mediaQueriesSupported=t.matchMedia&&t.matchMedia("only all").matches,!respond.mediaQueriesSupported){var n,i,r,o=t.document,s=o.documentElement,a=[],l=[],u=[],h={},c=30,d=o.getElementsByTagName("head")[0]||s,p=o.getElementsByTagName("base")[0],f=d.getElementsByTagName("link"),m=[],g=function(){for(var e,n,i,r,o=f,s=o.length,a=0;a<s;a++)n=(e=o[a]).href,i=e.media,r=e.rel&&"stylesheet"===e.rel.toLowerCase(),n&&r&&!h[n]&&(e.styleSheet&&e.styleSheet.rawCssText?(y(e.styleSheet.rawCssText,n,i),h[n]=!0):(/^([a-zA-Z:]*\/\/)/.test(n)||p)&&n.replace(RegExp.$1,"").split("/")[0]!==t.location.host||m.push({href:n,media:i}));v()},v=function(){if(m.length){var t=m.shift();w(t.href,function(e){y(e,t.href,t.media),h[t.href]=!0,v()})}},y=function(t,e,n){var i,r,o,s,u,h=t.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),c=h&&h.length||0,d=(e=e.substring(0,e.lastIndexOf("/")),function(t){return t.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+e+"$2$3")}),p=!c&&n,f=0;for(e.length&&(e+="/"),p&&(c=1);f<c;f++)for(i=0,p?(r=n,l.push(d(t))):(r=h[f].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,l.push(RegExp.$2&&d(RegExp.$2))),u=(s=r.split(",")).length;i<u;i++)o=s[i],a.push({media:o.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:l.length-1,hasquery:o.indexOf("(")>-1,minw:o.match(/\(min\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:o.match(/\(max\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")});b()},_=function(){var t,e=o.createElement("div"),n=o.body,i=!1;return e.style.cssText="position:absolute;font-size:1em;width:1em",n||((n=i=o.createElement("body")).style.background="none"),n.appendChild(e),s.insertBefore(n,s.firstChild),t=e.offsetWidth,i?s.removeChild(n):n.removeChild(e),t=r=parseFloat(t)},b=function(t){var e="clientWidth",h=s[e],p="CSS1Compat"===o.compatMode&&h||o.body[e]||h,m={},g=f[f.length-1],v=(new Date).getTime();if(t&&n&&v-n<c)return clearTimeout(i),void(i=setTimeout(b,c));for(var y in n=v,a){var w=a[y],x=w.minw,S=w.maxw,C=null===x,E=null===S,M="em";x&&(x=parseFloat(x)*(x.indexOf(M)>-1?r||_():1)),S&&(S=parseFloat(S)*(S.indexOf(M)>-1?r||_():1)),w.hasquery&&(C&&E||!(C||p>=x)||!(E||p<=S))||(m[w.media]||(m[w.media]=[]),m[w.media].push(l[w.rules]))}for(var y in u)u[y]&&u[y].parentNode===d&&d.removeChild(u[y]);for(var y in m){var L=o.createElement("style"),T=m[y].join("\n");L.type="text/css",L.media=y,d.insertBefore(L,g.nextSibling),L.styleSheet?L.styleSheet.cssText=T:L.appendChild(o.createTextNode(T)),u.push(L)}},w=function(t,e){var n=x();n&&(n.open("GET",t,!0),n.onreadystatechange=function(){4!=n.readyState||200!=n.status&&304!=n.status||e(n.responseText)},4!=n.readyState&&n.send(null))},x=function(){var t=!1;try{t=new XMLHttpRequest}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}();g(),respond.update=g,t.addEventListener?t.addEventListener("resize",e,!1):t.attachEvent&&t.attachEvent("onresize",e)}}(this),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=!!t&&"length"in t&&t.length,n=pt.type(t);return"function"!==n&&!pt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t,e,n){if(pt.isFunction(e))return pt.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return pt.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(St.test(e))return pt.filter(e,t,n);e=pt.filter(e,t)}return pt.grep(t,function(t){return pt.inArray(t,e)>-1!==n})}function r(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}function o(t){var e={};return pt.each(t.match(Dt)||[],function(t,n){e[n]=!0}),e}function s(){it.addEventListener?(it.removeEventListener("DOMContentLoaded",a),t.removeEventListener("load",a)):(it.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(it.addEventListener||"load"===t.event.type||"complete"===it.readyState)&&(s(),pt.ready())}function l(t,e,n){if(n===undefined&&1===t.nodeType){var i="data-"+e.replace(Nt,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:It.test(n)?pt.parseJSON(n):n)}catch(r){}pt.data(t,e,n)}else n=undefined}return n}function u(t){var e;for(e in t)if(("data"!==e||!pt.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function h(t,e,n,i){if(Ot(t)){var r,o,s=pt.expando,a=t.nodeType,l=a?pt.cache:t,u=a?t[s]:t[s]&&s;if(u&&l[u]&&(i||l[u].data)||n!==undefined||"string"!=typeof e)return u||(u=a?t[s]=nt.pop()||pt.guid++:s),l[u]||(l[u]=a?{}:{toJSON:pt.noop}),"object"!=typeof e&&"function"!=typeof e||(i?l[u]=pt.extend(l[u],e):l[u].data=pt.extend(l[u].data,e)),o=l[u],i||(o.data||(o.data={}),o=o.data),n!==undefined&&(o[pt.camelCase(e)]=n),"string"==typeof e?null==(r=o[e])&&(r=o[pt.camelCase(e)]):r=o,r}}function c(t,e,n){if(Ot(t)){var i,r,o=t.nodeType,s=o?pt.cache:t,a=o?t[pt.expando]:pt.expando;if(s[a]){if(e&&(i=n?s[a]:s[a].data)){r=(e=pt.isArray(e)?e.concat(pt.map(e,pt.camelCase)):e in i?[e]:(e=pt.camelCase(e))in i?[e]:e.split(" ")).length;for(;r--;)delete i[e[r]];if(n?!u(i):!pt.isEmptyObject(i))return}(n||(delete s[a].data,u(s[a])))&&(o?pt.cleanData([t],!0):ct.deleteExpando||s!=s.window?delete s[a]:s[a]=undefined)}}}function d(t,e,n,i){var r,o=1,s=20,a=i?function(){return i.cur()}:function(){return pt.css(t,e,"")},l=a(),u=n&&n[3]||(pt.cssNumber[e]?"":"px"),h=(pt.cssNumber[e]||"px"!==u&&+l)&&zt.exec(pt.css(t,e));if(h&&h[3]!==u){u=u||h[3],n=n||[],h=+l||1;do{h/=o=o||".5",pt.style(t,e,h+u)}while(o!==(o=a()/l)&&1!==o&&--s)}return n&&(h=+h||+l||0,r=n[1]?h+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=h,i.end=r)),r}function p(t){var e=$t.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function f(t,e){var n,i,r=0,o="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):undefined;if(!o)for(o=[],n=t.childNodes||t;null!=(i=n[r]);r++)!e||pt.nodeName(i,e)?o.push(i):pt.merge(o,f(i,e));return e===undefined||e&&pt.nodeName(t,e)?pt.merge([t],o):o}function m(t,e){for(var n,i=0;null!=(n=t[i]);i++)pt._data(n,"globalEval",!e||pt._data(e[i],"globalEval"))}function g(t){qt.test(t.type)&&(t.defaultChecked=t.checked)}function v(t,e,n,i,r){for(var o,s,a,l,u,h,c,d=t.length,v=p(e),y=[],_=0;_<d;_++)if((s=t[_])||0===s)if("object"===pt.type(s))pt.merge(y,s.nodeType?[s]:s);else if(Jt.test(s)){for(l=l||v.appendChild(e.createElement("div")),u=(Wt.exec(s)||["",""])[1].toLowerCase(),c=Zt[u]||Zt._default,l.innerHTML=c[1]+pt.htmlPrefilter(s)+c[2],o=c[0];o--;)l=l.lastChild;if(!ct.leadingWhitespace&&Vt.test(s)&&y.push(e.createTextNode(Vt.exec(s)[0])),!ct.tbody)for(o=(s="table"!==u||Xt.test(s)?"<table>"!==c[1]||Xt.test(s)?0:l:l.firstChild)&&s.childNodes.length;o--;)pt.nodeName(h=s.childNodes[o],"tbody")&&!h.childNodes.length&&s.removeChild(h);for(pt.merge(y,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=v.lastChild}else y.push(e.createTextNode(s));for(l&&v.removeChild(l),ct.appendChecked||pt.grep(f(y,"input"),g),_=0;s=y[_++];)if(i&&pt.inArray(s,i)>-1)r&&r.push(s);else if(a=pt.contains(s.ownerDocument,s),l=f(v.appendChild(s),"script"),a&&m(l),n)for(o=0;s=l[o++];)Gt.test(s.type||"")&&n.push(s);return l=null,v}function y(){return!0}function _(){return!1}function b(){try{return it.activeElement}catch(t){}}function w(t,e,n,i,r,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=undefined),e)w(t,a,n,i,e[a],o);return t}if(null==i&&null==r?(r=n,i=n=undefined):null==r&&("string"==typeof n?(r=i,i=undefined):(r=i,i=n,n=undefined)),!1===r)r=_;else if(!r)return t;return 1===o&&(s=r,(r=function(t){return pt().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=pt.guid++)),t.each(function(){pt.event.add(this,e,r,i,n)})}function x(t,e){return pt.nodeName(t,"table")&&pt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function S(t){return t.type=(null!==pt.find.attr(t,"type"))+"/"+t.type,t}function C(t){var e=ae.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function E(t,e){if(1===e.nodeType&&pt.hasData(t)){var n,i,r,o=pt._data(t),s=pt._data(e,o),a=o.events;if(a)for(n in delete s.handle,s.events={},a)for(i=0,r=a[n].length;i<r;i++)pt.event.add(e,n,a[n][i]);s.data&&(s.data=pt.extend({},s.data))}}function M(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ct.noCloneEvent&&e[pt.expando]){for(i in(r=pt._data(e)).events)pt.removeEvent(e,i,r.handle);e.removeAttribute(pt.expando)}"script"===n&&e.text!==t.text?(S(e).text=t.text,C(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ct.html5Clone&&t.innerHTML&&!pt.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&qt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}function L(t,e,n,i){e=ot.apply([],e);var r,o,s,a,l,u,h=0,c=t.length,d=c-1,p=e[0],m=pt.isFunction(p);if(m||c>1&&"string"==typeof p&&!ct.checkClone&&se.test(p))return t.each(function(r){var o=t.eq(r);m&&(e[0]=p.call(this,r,o.html())),L(o,e,n,i)});if(c&&(r=(u=v(e,t[0].ownerDocument,!1,t,i)).firstChild,1===u.childNodes.length&&(u=r),r||i)){for(s=(a=pt.map(f(u,"script"),S)).length;h<c;h++)o=u,h!==d&&(o=pt.clone(o,!0,!0),s&&pt.merge(a,f(o,"script"))),n.call(t[h],o,h);if(s)for(l=a[a.length-1].ownerDocument,pt.map(a,C),h=0;h<s;h++)o=a[h],Gt.test(o.type||"")&&!pt._data(o,"globalEval")&&pt.contains(l,o)&&(o.src?pt._evalUrl&&pt._evalUrl(o.src):pt.globalEval((o.text||o.textContent||o.innerHTML||"").replace(le,"")));u=r=null}return t}function T(t,e,n){for(var i,r=e?pt.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||pt.cleanData(f(i)),i.parentNode&&(n&&pt.contains(i.ownerDocument,i)&&m(f(i,"script")),i.parentNode.removeChild(i));return t}function k(t,e){var n=pt(e.createElement(t)).appendTo(e.body),i=pt.css(n[0],"display");return n.detach(),i}function D(t){var e=it,n=ce[t];return n||("none"!==(n=k(t,e))&&n||((e=((he=(he||pt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentWindow||he[0].contentDocument).document).write(),e.close(),n=k(t,e),he.detach()),ce[t]=n),n}function P(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function O(t){if(t in Me)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=Ee.length;n--;)if((t=Ee[n]+e)in Me)return t}function I(t,e){for(var n,i,r,o=[],s=0,a=t.length;s<a;s++)(i=t[s]).style&&(o[s]=pt._data(i,"olddisplay"),n=i.style.display,e?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Ut(i)&&(o[s]=pt._data(i,"olddisplay",D(i.nodeName)))):(r=Ut(i),(n&&"none"!==n||!r)&&pt._data(i,"olddisplay",r?n:pt.css(i,"display"))));for(s=0;s<a;s++)(i=t[s]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[s]||"":"none"));return t}function N(t,e,n){var i=xe.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function A(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=pt.css(t,n+Bt[o],!0,r)),i?("content"===n&&(s-=pt.css(t,"padding"+Bt[o],!0,r)),"margin"!==n&&(s-=pt.css(t,"border"+Bt[o]+"Width",!0,r))):(s+=pt.css(t,"padding"+Bt[o],!0,r),"padding"!==n&&(s+=pt.css(t,"border"+Bt[o]+"Width",!0,r)));return s}function F(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=ge(t),s=ct.boxSizing&&"border-box"===pt.css(t,"boxSizing",!1,o);if(r<=0||null==r){if(((r=ve(t,e,o))<0||null==r)&&(r=t.style[e]),pe.test(r))return r;i=s&&(ct.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+A(t,e,n||(s?"border":"content"),i,o)+"px"}function R(t,e,n,i,r){return new R.prototype.init(t,e,n,i,r)}function j(){return t.setTimeout(function(){Le=undefined}),Le=pt.now()}function z(t,e){var n,i={height:t},r=0;for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=Bt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function B(t,e,n){for(var i,r=(q.tweeners[e]||[]).concat(q.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,e,t))return i}function U(t,e,n){var i,r,o,s,a,l,u,h=this,c={},d=t.style,p=t.nodeType&&Ut(t),f=pt._data(t,"fxshow");for(i in n.queue||(null==(a=pt._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,pt.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===("none"===(u=pt.css(t,"display"))?pt._data(t,"olddisplay")||D(t.nodeName):u)&&"none"===pt.css(t,"float")&&(ct.inlineBlockNeedsLayout&&"inline"!==D(t.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ct.shrinkWrapBlocks()||h.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),e)if(r=e[i],Ne.exec(r)){if(delete e[i],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!f||f[i]===undefined)continue;p=!0}c[i]=f&&f[i]||pt.style(t,i)}else u=undefined;if(pt.isEmptyObject(c))"inline"===("none"===u?D(t.nodeName):u)&&(d.display=u);else for(i in f?"hidden"in f&&(p=f.hidden):f=pt._data(t,"fxshow",{}),o&&(f.hidden=!p),p?pt(t).show():h.done(function(){pt(t).hide()}),h.done(function(){var e;for(e in pt._removeData(t,"fxshow"),c)pt.style(t,e,c[e])}),c)s=B(p?f[i]:0,i,h),i in f||(f[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}function H(t,e){var n,i,r,o,s;for(n in t)if(r=e[i=pt.camelCase(n)],o=t[n],pt.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),(s=pt.cssHooks[i])&&"expand"in s)for(n in o=s.expand(o),delete t[i],o)n in t||(t[n]=o[n],e[n]=r);else e[i]=r}function q(t,e,n){var i,r,o=0,s=q.prefilters.length,a=pt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Le||j(),n=Math.max(0,u.startTime+u.duration-e),i=1-(n/u.duration||0),o=0,s=u.tweens.length;o<s;o++)u.tweens[o].run(i);return a.notifyWith(t,[u,i,n]),i<1&&s?n:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:pt.extend({},e),opts:pt.extend(!0,{specialEasing:{},easing:pt.easing._default},n),originalProperties:e,originalOptions:n,startTime:Le||j(),duration:n.duration,tweens:[],createTween:function(e,n){var i=pt.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return e?(a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u,e])):a.rejectWith(t,[u,e]),this}}),h=u.props;for(H(h,u.opts.specialEasing);o<s;o++)if(i=q.prefilters[o].call(u,t,h,u.opts))return pt.isFunction(i.stop)&&(pt._queueHooks(u.elem,u.opts.queue).stop=pt.proxy(i.stop,i)),i;return pt.map(h,B,u),pt.isFunction(u.opts.start)&&u.opts.start.call(t,u),pt.fx.timer(pt.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function W(t){return pt.attr(t,"class")||""}function G(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(Dt)||[];if(pt.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function V(t,e,n,i){function r(a){var l;return o[a]=!0,pt.each(t[a]||[],function(t,a){var u=a(e,n,i);return"string"!=typeof u||s||o[u]?s?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var o={},s=t===sn;return r(e.dataTypes[0])||!o["*"]&&r("*")}function $(t,e){var n,i,r=pt.ajaxSettings.flatOptions||{};for(i in e)e[i]!==undefined&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&pt.extend(!0,t,n),t}function Z(t,e,n){for(var i,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),r===undefined&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(s in a)if(a[s]&&a[s].test(r)){l.unshift(s);break}if(l[0]in n)o=l[0];else{for(s in n){if(!l[0]||t.converters[s+" "+l[0]]){o=s;break}i||(i=s)}o=o||i}if(o)return o!==l[0]&&l.unshift(o),n[o]}function J(t,e,n,i){var r,o,s,a,l,u={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(o=h.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=u[l+" "+o]||u["* "+o]))for(r in u)if((a=r.split(" "))[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){!0===s?s=u[r]:!0!==u[r]&&(o=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(c){return{state:"parsererror",error:s?c:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function X(t){return t.style&&t.style.display||pt.css(t,"display")}function Y(t){if(!pt.contains(t.ownerDocument||it,t))return!0;for(;t&&1===t.nodeType;){if("none"===X(t)||"hidden"===t.type)return!0;t=t.parentNode}return!1}function Q(t,e,n,i){var r;if(pt.isArray(e))pt.each(e,function(e,r){n||cn.test(t)?i(t,r):Q(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==pt.type(e))i(t,e);else for(r in e)Q(t+"["+r+"]",e[r],n,i)}function K(){try{return new t.XMLHttpRequest}catch(e){}}function tt(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function et(t){
return pt.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var nt=[],it=t.document,rt=nt.slice,ot=nt.concat,st=nt.push,at=nt.indexOf,lt={},ut=lt.toString,ht=lt.hasOwnProperty,ct={},dt="1.12.4",pt=function(t,e){return new pt.fn.init(t,e)},ft=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,mt=/^-ms-/,gt=/-([\da-z])/gi,vt=function(t,e){return e.toUpperCase()};pt.fn=pt.prototype={jquery:dt,constructor:pt,selector:"",length:0,toArray:function(){return rt.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:rt.call(this)},pushStack:function(t){var e=pt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return pt.each(this,t)},map:function(t){return this.pushStack(pt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(rt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:st,sort:nt.sort,splice:nt.splice},pt.extend=pt.fn.extend=function(){var t,e,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||pt.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(r=arguments[a]))for(i in r)t=s[i],s!==(n=r[i])&&(u&&n&&(pt.isPlainObject(n)||(e=pt.isArray(n)))?(e?(e=!1,o=t&&pt.isArray(t)?t:[]):o=t&&pt.isPlainObject(t)?t:{},s[i]=pt.extend(u,o,n)):n!==undefined&&(s[i]=n));return s},pt.extend({expando:"jQuery"+(dt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===pt.type(t)},isArray:Array.isArray||function(t){return"array"===pt.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){var e=t&&t.toString();return!pt.isArray(t)&&e-parseFloat(e)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==pt.type(t)||t.nodeType||pt.isWindow(t))return!1;try{if(t.constructor&&!ht.call(t,"constructor")&&!ht.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!ct.ownFirst)for(e in t)return ht.call(t,e);for(e in t);return e===undefined||ht.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?lt[ut.call(t)]||"object":typeof t},globalEval:function(e){e&&pt.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(mt,"ms-").replace(gt,vt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var i,r=0;if(n(t))for(i=t.length;r<i&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ft,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?pt.merge(i,"string"==typeof t?[t]:t):st.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(at)return at.call(e,t,n);for(i=e.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;)t[r++]=e[i++];if(n!=n)for(;e[i]!==undefined;)t[r++]=e[i++];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,o=t.length,s=!n;r<o;r++)!e(t[r],r)!==s&&i.push(t[r]);return i},map:function(t,e,i){var r,o,s=0,a=[];if(n(t))for(r=t.length;s<r;s++)null!=(o=e(t[s],s,i))&&a.push(o);else for(s in t)null!=(o=e(t[s],s,i))&&a.push(o);return ot.apply([],a)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(r=t[e],e=t,t=r),pt.isFunction(t)?(n=rt.call(arguments,2),(i=function(){return t.apply(e||this,n.concat(rt.call(arguments)))}).guid=t.guid=t.guid||pt.guid++,i):undefined},now:function(){return+new Date},support:ct}),"function"==typeof Symbol&&(pt.fn[Symbol.iterator]=nt[Symbol.iterator]),pt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){lt["[object "+e+"]"]=e.toLowerCase()});var yt=function(t){function e(t,e,n,i){var r,o,s,a,l,u,c,p,f=e&&e.ownerDocument,m=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==m&&9!==m&&11!==m)return n;if(!i&&((e?e.ownerDocument||e:B)!==O&&P(e),e=e||O,N)){if(11!==m&&(u=vt.exec(t)))if(r=u[1]){if(9===m){if(!(s=e.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(f&&(s=f.getElementById(r))&&j(e,s)&&s.id===r)return n.push(s),n}else{if(u[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((r=u[3])&&w.getElementsByClassName&&e.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(r)),n}if(w.qsa&&!G[t+" "]&&(!A||!A.test(t))){if(1!==m)f=e,p=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(_t,"\\$&"):e.setAttribute("id",a=z),o=(c=E(t)).length,l=dt.test(a)?"#"+a:"[id='"+a+"']";o--;)c[o]=l+" "+d(c[o]);p=c.join(","),f=yt.test(t)&&h(e.parentNode)||e}if(p)try{return Q.apply(n,f.querySelectorAll(p)),n}catch(g){}finally{a===z&&e.removeAttribute("id")}}}return L(t.replace(at,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[z]=!0,t}function r(t){var e=O.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||$)-(~t.sourceIndex||$);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function h(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function c(){}function d(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=H++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,s){var a,l,u,h=[U,o];if(s){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if((a=(l=(u=e[z]||(e[z]={}))[e.uniqueID]||(u[e.uniqueID]={}))[i])&&a[0]===U&&a[1]===o)return h[2]=a[2];if(l[i]=h,h[2]=t(e,n,s))return!0}}}function f(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,n,i){for(var r=0,o=n.length;r<o;r++)e(t,n[r],i);return i}function g(t,e,n,i,r){for(var o,s=[],a=0,l=t.length,u=null!=e;a<l;a++)(o=t[a])&&(n&&!n(o,i,r)||(s.push(o),u&&e.push(a)));return s}function v(t,e,n,r,o,s){return r&&!r[z]&&(r=v(r)),o&&!o[z]&&(o=v(o,s)),i(function(i,s,a,l){var u,h,c,d=[],p=[],f=s.length,v=i||m(e||"*",a.nodeType?[a]:a,[]),y=!t||!i&&e?v:g(v,d,t,a,l),_=n?o||(i?t:f||r)?[]:s:y;if(n&&n(y,_,a,l),r)for(u=g(_,p),r(u,[],a,l),h=u.length;h--;)(c=u[h])&&(_[p[h]]=!(y[p[h]]=c));if(i){if(o||t){if(o){for(u=[],h=_.length;h--;)(c=_[h])&&u.push(y[h]=c);o(null,_=[],u,l)}for(h=_.length;h--;)(c=_[h])&&(u=o?tt(i,c):d[h])>-1&&(i[u]=!(s[u]=c))}}else _=g(_===s?_.splice(f,_.length):_),o?o(null,s,_,l):Q.apply(s,_)})}function y(t){for(var e,n,i,r=t.length,o=x.relative[t[0].type],s=o||x.relative[" "],a=o?1:0,l=p(function(t){return t===e},s,!0),u=p(function(t){return tt(e,t)>-1},s,!0),h=[function(t,n,i){var r=!o&&(i||n!==T)||((e=n).nodeType?l(t,n,i):u(t,n,i));return e=null,r}];a<r;a++)if(n=x.relative[t[a].type])h=[p(f(h),n)];else{if((n=x.filter[t[a].type].apply(null,t[a].matches))[z]){for(i=++a;i<r&&!x.relative[t[i].type];i++);return v(a>1&&f(h),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(at,"$1"),n,a<i&&y(t.slice(a,i)),i<r&&y(t=t.slice(i)),i<r&&d(t))}h.push(n)}return f(h)}function _(t,n){var r=n.length>0,o=t.length>0,s=function(i,s,a,l,u){var h,c,d,p=0,f="0",m=i&&[],v=[],y=T,_=i||o&&x.find.TAG("*",u),b=U+=null==y?1:Math.random()||.1,w=_.length;for(u&&(T=s===O||s||u);f!==w&&null!=(h=_[f]);f++){if(o&&h){for(c=0,s||h.ownerDocument===O||(P(h),a=!N);d=t[c++];)if(d(h,s||O,a)){l.push(h);break}u&&(U=b)}r&&((h=!d&&h)&&p--,i&&m.push(h))}if(p+=f,r&&f!==p){for(c=0;d=n[c++];)d(m,v,s,a);if(i){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=X.call(l));v=g(v)}Q.apply(l,v),u&&!i&&v.length>0&&p+n.length>1&&e.uniqueSort(l)}return u&&(U=b,T=y),m};return r?i(s):s}var b,w,x,S,C,E,M,L,T,k,D,P,O,I,N,A,F,R,j,z="sizzle"+1*new Date,B=t.document,U=0,H=0,q=n(),W=n(),G=n(),V=function(t,e){return t===e&&(D=!0),0},$=1<<31,Z={}.hasOwnProperty,J=[],X=J.pop,Y=J.push,Q=J.push,K=J.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",st=new RegExp(nt+"+","g"),at=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ct=new RegExp(ot),dt=new RegExp("^"+it+"$"),pt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,_t=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xt=function(){P()};try{Q.apply(J=K.call(B.childNodes),B.childNodes),J[B.childNodes.length].nodeType}catch(St){Q={apply:J.length?function(t,e){Y.apply(t,K.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}for(b in w=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},P=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:B;return i!==O&&9===i.nodeType&&i.documentElement?(I=(O=i).documentElement,N=!C(O),(n=O.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xt,!1):n.attachEvent&&n.attachEvent("onunload",xt)),w.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=r(function(t){return t.appendChild(O.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=gt.test(O.getElementsByClassName),w.getById=r(function(t){return I.appendChild(t).id=z,!O.getElementsByName||!O.getElementsByName(z).length}),w.getById?(x.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&N){var n=e.getElementById(t);return n?[n]:[]}},x.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=w.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&N)return e.getElementsByClassName(t)},F=[],A=[],(w.qsa=gt.test(O.querySelectorAll))&&(r(function(t){I.appendChild(t).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&A.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||A.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+z+"-]").length||A.push("~="),t.querySelectorAll(":checked").length||A.push(":checked"),t.querySelectorAll("a#"+z+"+*").length||A.push(".#.+[+~]")}),r(function(t){var e=O.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&A.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),A.push(",.*:")})),(w.matchesSelector=gt.test(R=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&r(function(t){w.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),F.push("!=",ot)}),A=A.length&&new RegExp(A.join("|")),F=F.length&&new RegExp(F.join("|")),e=gt.test(I.compareDocumentPosition),j=e||gt.test(I.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===O||t.ownerDocument===B&&j(B,t)?-1:e===O||e.ownerDocument===B&&j(B,e)?1:k?tt(k,t)-tt(k,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,a=[t],l=[e];if(!r||!o)return t===O?-1:e===O?1:r?-1:o?1:k?tt(k,t)-tt(k,e):0;if(r===o)return s(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?s(a[i],l[i]):a[i]===B?-1:l[i]===B?1:0},O):O},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==O&&P(t),n=n.replace(ht,"='$1']"),w.matchesSelector&&N&&!G[n+" "]&&(!F||!F.test(n))&&(!A||!A.test(n)))try{var i=R.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(St){}return e(n,O,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==O&&P(t),j(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==O&&P(t);var n=x.attrHandle[e.toLowerCase()],i=n&&Z.call(x.attrHandle,e.toLowerCase())?n(t,e,!N):undefined;return i!==undefined?i:w.attributes||!N?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(D=!w.detectDuplicates,k=!w.sortStable&&t.slice(0),t.sort(V),D){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return k=null,t},S=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=S(e);return n},(x=e.selectors={cacheLength:50,createPseudo:i,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ct.test(n)&&(e=E(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(st," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,h,c,d,p,f,m=o!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a,_=!1;if(g){if(o){for(;m;){for(d=e;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(_=(p=(u=(h=(c=(d=g)[z]||(d[z]={}))[d.uniqueID]||(c[d.uniqueID]={}))[t]||[])[0]===U&&u[1])&&u[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(_=p=0)||f.pop();)if(1===d.nodeType&&++_&&d===e){h[t]=[U,p,_];break}}else if(y&&(_=p=(u=(h=(c=(d=e)[z]||(d[z]={}))[d.uniqueID]||(c[d.uniqueID]={}))[t]||[])[0]===U&&u[1]),!1===_)for(;(d=++p&&d&&d[m]||(_=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++_||(y&&((h=(c=d[z]||(d[z]={}))[d.uniqueID]||(c[d.uniqueID]={}))[t]=[U,_]),d!==e)););return(_-=r)===i||_%i==0&&_/i>=0}}},PSEUDO:function(t,n){var r,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[z]?o(n):o.length>1?(r=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),s=r.length;s--;)t[i=tt(t,r[s])]=!(e[i]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=M(t.replace(at,"$1"));return r[z]?i(function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(bt,wt),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:i(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(bt,wt).toLowerCase(),function(e){var n;do{if(n=N?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[n<0?n+e:n]}),even:u(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=l(b);return c.prototype=x.filters=x.pseudos,x.setFilters=new c,E=e.tokenize=function(t,n){var i,r,o,s,a,l,u,h=W[t+" "];if(h)return n?0:h.slice(0);for(a=t,l=[],u=x.preFilter;a;){for(s in i&&!(r=lt.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=ut.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(at," ")}),a=a.slice(i.length)),x.filter)!(r=pt[s].exec(a))||u[s]&&!(r=u[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):W(t,l).slice(0)},M=e.compile=function(t,e){var n,i=[],r=[],o=G[t+" "];if(!o){for(e||(e=E(t)),n=e.length;n--;)(o=y(e[n]))[z]?i.push(o):r.push(o);(o=G(t,_(r,i))).selector=t}return o},L=e.select=function(t,e,n,i){var r,o,s,a,l,u="function"==typeof t&&t,c=!i&&E(t=u.selector||t);if(n=n||[],1===c.length){if((o=c[0]=c[0].slice(0)).length>2&&"ID"===(s=o[0]).type&&w.getById&&9===e.nodeType&&N&&x.relative[o[1].type]){if(!(e=(x.find.ID(s.matches[0].replace(bt,wt),e)||[])[0]))return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=pt.needsContext.test(t)?0:o.length;r--&&(s=o[r],!x.relative[a=s.type]);)if((l=x.find[a])&&(i=l(s.matches[0].replace(bt,wt),yt.test(o[0].type)&&h(e.parentNode)||e))){if(o.splice(r,1),!(t=i.length&&d(o)))return Q.apply(n,i),n;break}}return(u||M(t,c))(i,e,!N,n,!e||yt.test(t)&&h(e.parentNode)||e),n},w.sortStable=z.split("").sort(V).join("")===z,w.detectDuplicates=!!D,P(),w.sortDetached=r(function(t){return 1&t.compareDocumentPosition(O.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);pt.find=yt,pt.expr=yt.selectors,pt.expr[":"]=pt.expr.pseudos,pt.uniqueSort=pt.unique=yt.uniqueSort,pt.text=yt.getText,pt.isXMLDoc=yt.isXML,pt.contains=yt.contains;var _t=function(t,e,n){for(var i=[],r=n!==undefined;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&pt(t).is(n))break;i.push(t)}return i},bt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},wt=pt.expr.match.needsContext,xt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,St=/^.[^:#\[\.,]*$/;pt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?pt.find.matchesSelector(i,t)?[i]:[]:pt.find.matches(t,pt.grep(e,function(t){return 1===t.nodeType}))},pt.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(pt(t).filter(function(){for(e=0;e<r;e++)if(pt.contains(i[e],this))return!0}));for(e=0;e<r;e++)pt.find(t,i[e],n);return(n=this.pushStack(r>1?pt.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&wt.test(t)?pt(t):t||[],!1).length}});var Ct,Et=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(pt.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||Ct,"string"==typeof t){if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:Et.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof pt?e[0]:e,pt.merge(this,pt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:it,!0)),xt.test(i[1])&&pt.isPlainObject(e))for(i in e)pt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if((r=it.getElementById(i[2]))&&r.parentNode){if(r.id!==i[2])return Ct.find(t);this.length=1,this[0]=r}return this.context=it,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):pt.isFunction(t)?"undefined"!=typeof n.ready?n.ready(t):t(pt):(t.selector!==undefined&&(this.selector=t.selector,this.context=t.context),pt.makeArray(t,this))}).prototype=pt.fn,Ct=pt(it);var Mt=/^(?:parents|prev(?:Until|All))/,Lt={children:!0,contents:!0,next:!0,prev:!0};pt.fn.extend({has:function(t){var e,n=pt(t,this),i=n.length;return this.filter(function(){for(e=0;e<i;e++)if(pt.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,o=[],s=wt.test(t)||"string"!=typeof t?pt(t,e||this.context):0;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&pt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?pt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?pt.inArray(this[0],pt(t)):pt.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(pt.uniqueSort(pt.merge(this.get(),pt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),pt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return _t(t,"parentNode")},parentsUntil:function(t,e,n){return _t(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return _t(t,"nextSibling")},prevAll:function(t){return _t(t,"previousSibling")},nextUntil:function(t,e,n){return _t(t,"nextSibling",n)},prevUntil:function(t,e,n){return _t(t,"previousSibling",n)},siblings:function(t){return bt((t.parentNode||{}).firstChild,t)},children:function(t){return bt(t.firstChild)},contents:function(t){return pt.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:pt.merge([],t.childNodes)}},function(t,e){pt.fn[t]=function(n,i){var r=pt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=pt.filter(i,r)),this.length>1&&(Lt[t]||(r=pt.uniqueSort(r)),Mt.test(t)&&(r=r.reverse())),this.pushStack(r)}});var Tt,kt,Dt=/\S+/g;for(kt in pt.Callbacks=function(t){t="string"==typeof t?o(t):pt.extend({},t);var e,n,i,r,s=[],a=[],l=-1,u=function(){for(r=t.once,i=e=!0;a.length;l=-1)for(n=a.shift();++l<s.length;)!1===s[l].apply(n[0],n[1])&&t.stopOnFalse&&(l=s.length,n=!1);t.memory||(n=!1),e=!1,r&&(s=n?[]:"")},h={add:function(){return s&&(n&&!e&&(l=s.length-1,a.push(n)),function i(e){pt.each(e,function(e,n){pt.isFunction(n)?t.unique&&h.has(n)||s.push(n):n&&n.length&&"string"!==pt.type(n)&&i(n)})}(arguments),n&&!e&&u()),this},remove:function(){return pt.each(arguments,function(t,e){for(var n;(n=pt.inArray(e,s,n))>-1;)s.splice(n,1),n<=l&&l--}),this},has:function(t){return t?pt.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=!0,n||h.disable(),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},pt.extend({Deferred:function(t){var e=[["resolve","done",pt.Callbacks("once memory"),"resolved"],["reject","fail",pt.Callbacks("once memory"),"rejected"],["notify","progress",pt.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return pt.Deferred(function(n){pt.each(e,function(e,o){var s=pt.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);t&&pt.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?pt.extend(t,i):i}},r={};return i.pipe=i.then,pt.each(e,function(t,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=rt.call(arguments),s=o.length,a=1!==s||t&&pt.isFunction(t.promise)?s:0,l=1===a?t:pt.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?rt.call(arguments):r,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);r<s;r++)o[r]&&pt.isFunction(o[r].promise)?o[r].promise().progress(u(r,n,e)).done(u(r,i,o)).fail(l.reject):--a;return a||l.resolveWith(i,o),l.promise()}}),pt.fn.ready=function(t){return pt.ready.promise().done(t),this},pt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?pt.readyWait++:pt.ready(!0)},ready:function(t){(!0===t?--pt.readyWait:pt.isReady)||(pt.isReady=!0,!0!==t&&--pt.readyWait>0||(Tt.resolveWith(it,[pt]),pt.fn.triggerHandler&&(pt(it).triggerHandler("ready"),pt(it).off("ready"))))}}),pt.ready.promise=function(e){if(!Tt)if(Tt=pt.Deferred(),"complete"===it.readyState||"loading"!==it.readyState&&!it.documentElement.doScroll)t.setTimeout(pt.ready);else if(it.addEventListener)it.addEventListener("DOMContentLoaded",a),t.addEventListener("load",a);else{it.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var n=!1;try{n=null==t.frameElement&&it.documentElement}catch(i){}n&&n.doScroll&&function r(){if(!pt.isReady){try{n.doScroll("left")}catch(i){return t.setTimeout(r,50)}s(),pt.ready()}}()}return Tt.promise(e)},pt.ready.promise(),pt(ct))break;ct.ownFirst="0"===kt,ct.inlineBlockNeedsLayout=!1,pt(function(){var t,e,n,i;(n=it.getElementsByTagName("body")[0])&&n.style&&(e=it.createElement("div"),(i=it.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(e),"undefined"!=typeof e.style.zoom&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ct.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(i))}),function(){var t=it.createElement("div");ct.deleteExpando=!0;try{delete t.test}catch(e){ct.deleteExpando=!1}t=null}();var Pt,Ot=function(t){var e=pt.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||!0!==e&&t.getAttribute("classid")===e)},It=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Nt=/([A-Z])/g;pt.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?pt.cache[t[pt.expando]]:t[pt.expando])&&!u(t)},data:function(t,e,n){return h(t,e,n)},removeData:function(t,e){return c(t,e)},_data:function(t,e,n){return h(t,e,n,!0)},_removeData:function(t,e){return c(t,e,!0)}}),pt.fn.extend({data:function(t,e){var n,i,r,o=this[0],s=o&&o.attributes;if(t===undefined){if(this.length&&(r=pt.data(o),1===o.nodeType&&!pt._data(o,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&l(o,i=pt.camelCase(i.slice(5)),r[i]);pt._data(o,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){pt.data(this,t)}):arguments.length>1?this.each(function(){pt.data(this,t,e)}):o?l(o,t,pt.data(o,t)):undefined},removeData:function(t){return this.each(function(){pt.removeData(this,t)})}}),pt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=pt._data(t,e),n&&(!i||pt.isArray(n)?i=pt._data(t,e,pt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=pt.queue(t,e),i=n.length,r=n.shift(),o=pt._queueHooks(t,e),s=function(){pt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return pt._data(t,n)||pt._data(t,n,{empty:pt.Callbacks("once memory").add(function(){pt._removeData(t,e+"queue"),pt._removeData(t,n)})})}}),pt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?pt.queue(this[0],t):e===undefined?this:this.each(function(){var n=pt.queue(this,t,e);pt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&pt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){pt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){
var n,i=1,r=pt.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=undefined),t=t||"fx";s--;)(n=pt._data(o[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}}),ct.shrinkWrapBlocks=function(){return null!=Pt?Pt:(Pt=!1,(e=it.getElementsByTagName("body")[0])&&e.style?(t=it.createElement("div"),(n=it.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(n).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(it.createElement("div")).style.width="5px",Pt=3!==t.offsetWidth),e.removeChild(n),Pt):void 0);var t,e,n};var At,Ft,Rt,jt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,zt=new RegExp("^(?:([+-])=|)("+jt+")([a-z%]*)$","i"),Bt=["Top","Right","Bottom","Left"],Ut=function(t,e){return t=e||t,"none"===pt.css(t,"display")||!pt.contains(t.ownerDocument,t)},Ht=function(t,e,n,i,r,o,s){var a=0,l=t.length,u=null==n;if("object"===pt.type(n))for(a in r=!0,n)Ht(t,e,a,n[a],!0,o,s);else if(i!==undefined&&(r=!0,pt.isFunction(i)||(s=!0),u&&(s?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(pt(t),n)})),e))for(;a<l;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return r?t:u?e.call(t):l?e(t[0],n):o},qt=/^(?:checkbox|radio)$/i,Wt=/<([\w:-]+)/,Gt=/^$|\/(?:java|ecma)script/i,Vt=/^\s+/,$t="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";At=it.createElement("div"),Ft=it.createDocumentFragment(),Rt=it.createElement("input"),At.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ct.leadingWhitespace=3===At.firstChild.nodeType,ct.tbody=!At.getElementsByTagName("tbody").length,ct.htmlSerialize=!!At.getElementsByTagName("link").length,ct.html5Clone="<:nav></:nav>"!==it.createElement("nav").cloneNode(!0).outerHTML,Rt.type="checkbox",Rt.checked=!0,Ft.appendChild(Rt),ct.appendChecked=Rt.checked,At.innerHTML="<textarea>x</textarea>",ct.noCloneChecked=!!At.cloneNode(!0).lastChild.defaultValue,Ft.appendChild(At),(Rt=it.createElement("input")).setAttribute("type","radio"),Rt.setAttribute("checked","checked"),Rt.setAttribute("name","t"),At.appendChild(Rt),ct.checkClone=At.cloneNode(!0).cloneNode(!0).lastChild.checked,ct.noCloneEvent=!!At.addEventListener,At[pt.expando]=1,ct.attributes=!At.getAttribute(pt.expando);var Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ct.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td;var Jt=/<|&#?\w+;/,Xt=/<tbody/i;!function(){var e,n,i=it.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ct[e]=n in t)||(i.setAttribute(n,"t"),ct[e]=!1===i.attributes[n].expando);i=null}();var Yt=/^(?:input|select|textarea)$/i,Qt=/^key/,Kt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,te=/^(?:focusinfocus|focusoutblur)$/,ee=/^([^.]*)(?:\.(.+)|)/;pt.event={global:{},add:function(t,e,n,i,r){var o,s,a,l,u,h,c,d,p,f,m,g=pt._data(t);if(g){for(n.handler&&(n=(l=n).handler,r=l.selector),n.guid||(n.guid=pt.guid++),(s=g.events)||(s=g.events={}),(h=g.handle)||((h=g.handle=function(t){return void 0===pt||t&&pt.event.triggered===t.type?undefined:pt.event.dispatch.apply(h.elem,arguments)}).elem=t),a=(e=(e||"").match(Dt)||[""]).length;a--;)p=m=(o=ee.exec(e[a])||[])[1],f=(o[2]||"").split(".").sort(),p&&(u=pt.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=pt.event.special[p]||{},c=pt.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&pt.expr.match.needsContext.test(r),namespace:f.join(".")},l),(d=s[p])||((d=s[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,i,f,h)||(t.addEventListener?t.addEventListener(p,h,!1):t.attachEvent&&t.attachEvent("on"+p,h))),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),pt.event.global[p]=!0);t=null}},remove:function(t,e,n,i,r){var o,s,a,l,u,h,c,d,p,f,m,g=pt.hasData(t)&&pt._data(t);if(g&&(h=g.events)){for(u=(e=(e||"").match(Dt)||[""]).length;u--;)if(p=m=(a=ee.exec(e[u])||[])[1],f=(a[2]||"").split(".").sort(),p){for(c=pt.event.special[p]||{},d=h[p=(i?c.delegateType:c.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)s=d[o],!r&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(d.splice(o,1),s.selector&&d.delegateCount--,c.remove&&c.remove.call(t,s));l&&!d.length&&(c.teardown&&!1!==c.teardown.call(t,f,g.handle)||pt.removeEvent(t,p,g.handle),delete h[p])}else for(p in h)pt.event.remove(t,p+e[u],n,i,!0);pt.isEmptyObject(h)&&(delete g.handle,pt._removeData(t,"events"))}},trigger:function(e,n,i,r){var o,s,a,l,u,h,c,d=[i||it],p=ht.call(e,"type")?e.type:e,f=ht.call(e,"namespace")?e.namespace.split("."):[];if(a=h=i=i||it,3!==i.nodeType&&8!==i.nodeType&&!te.test(p+pt.event.triggered)&&(p.indexOf(".")>-1&&(p=(f=p.split(".")).shift(),f.sort()),s=p.indexOf(":")<0&&"on"+p,(e=e[pt.expando]?e:new pt.Event(p,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=i),n=null==n?[e]:pt.makeArray(n,[e]),u=pt.event.special[p]||{},r||!u.trigger||!1!==u.trigger.apply(i,n))){if(!r&&!u.noBubble&&!pt.isWindow(i)){for(l=u.delegateType||p,te.test(l+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),h=a;h===(i.ownerDocument||it)&&d.push(h.defaultView||h.parentWindow||t)}for(c=0;(a=d[c++])&&!e.isPropagationStopped();)e.type=c>1?l:u.bindType||p,(o=(pt._data(a,"events")||{})[e.type]&&pt._data(a,"handle"))&&o.apply(a,n),(o=s&&a[s])&&o.apply&&Ot(a)&&(e.result=o.apply(a,n),!1===e.result&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!u._default||!1===u._default.apply(d.pop(),n))&&Ot(i)&&s&&i[p]&&!pt.isWindow(i)){(h=i[s])&&(i[s]=null),pt.event.triggered=p;try{i[p]()}catch(m){}pt.event.triggered=undefined,h&&(i[s]=h)}return e.result}},dispatch:function(t){t=pt.event.fix(t);var e,n,i,r,o,s=[],a=rt.call(arguments),l=(pt._data(this,"events")||{})[t.type]||[],u=pt.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(s=pt.event.handlers.call(this,t,l),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,(i=((pt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a))!==undefined&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,o,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(i=[],n=0;n<a;n++)i[r=(o=e[n]).selector+" "]===undefined&&(i[r]=o.needsContext?pt(r,this).index(l)>-1:pt.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[pt.expando])return t;var e,n,i,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Kt.test(r)?this.mouseHooks:Qt.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new pt.Event(o),e=i.length;e--;)t[n=i[e]]=o[n];return t.target||(t.target=o.srcElement||it),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,o=e.button,s=e.fromElement;return null==t.pageX&&null!=e.clientX&&(r=(i=t.target.ownerDocument||it).documentElement,n=i.body,t.pageX=e.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?e.toElement:s),t.which||o===undefined||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==b()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===b()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(pt.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return pt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==undefined&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n){var i=pt.extend(new pt.Event,n,{type:t,isSimulated:!0});pt.event.trigger(i,null,e),i.isDefaultPrevented()&&n.preventDefault()}},pt.removeEvent=it.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)}:function(t,e,n){var i="on"+e;t.detachEvent&&("undefined"==typeof t[i]&&(t[i]=null),t.detachEvent(i,n))},pt.Event=function(t,e){if(!(this instanceof pt.Event))return new pt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&!1===t.returnValue?y:_):this.type=t,e&&pt.extend(this,e),this.timeStamp=t&&t.timeStamp||pt.now(),this[pt.expando]=!0},pt.Event.prototype={constructor:pt.Event,isDefaultPrevented:_,isPropagationStopped:_,isImmediatePropagationStopped:_,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=y,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=y,t&&!this.isSimulated&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=y,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},pt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){pt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===i||pt.contains(i,r))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),ct.submit||(pt.event.special.submit={setup:function(){if(pt.nodeName(this,"form"))return!1;pt.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=pt.nodeName(e,"input")||pt.nodeName(e,"button")?pt.prop(e,"form"):undefined;n&&!pt._data(n,"submit")&&(pt.event.add(n,"submit._submit",function(t){t._submitBubble=!0}),pt._data(n,"submit",!0))})},postDispatch:function(t){t._submitBubble&&(delete t._submitBubble,this.parentNode&&!t.isTrigger&&pt.event.simulate("submit",this.parentNode,t))},teardown:function(){if(pt.nodeName(this,"form"))return!1;pt.event.remove(this,"._submit")}}),ct.change||(pt.event.special.change={setup:function(){if(Yt.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(pt.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._justChanged=!0)}),pt.event.add(this,"click._change",function(t){this._justChanged&&!t.isTrigger&&(this._justChanged=!1),pt.event.simulate("change",this,t)})),!1;pt.event.add(this,"beforeactivate._change",function(t){var e=t.target;Yt.test(e.nodeName)&&!pt._data(e,"change")&&(pt.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||pt.event.simulate("change",this.parentNode,t)}),pt._data(e,"change",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return pt.event.remove(this,"._change"),!Yt.test(this.nodeName)}}),ct.focusin||pt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){pt.event.simulate(e,t.target,pt.event.fix(t))};pt.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=pt._data(i,e);r||i.addEventListener(t,n,!0),pt._data(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=pt._data(i,e)-1;r?pt._data(i,e,r):(i.removeEventListener(t,n,!0),pt._removeData(i,e))}}}),pt.fn.extend({on:function(t,e,n,i){return w(this,t,e,n,i)},one:function(t,e,n,i){return w(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,pt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=undefined),!1===n&&(n=_),this.each(function(){pt.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){pt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return pt.event.trigger(t,e,n,!0)}});var ne=/ jQuery\d+="(?:null|\d+)"/g,ie=new RegExp("<(?:"+$t+")[\\s/>]","i"),re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,oe=/<script|<style|<link/i,se=/checked\s*(?:[^=]|=\s*.checked.)/i,ae=/^true\/(.*)/,le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ue=p(it).appendChild(it.createElement("div"));pt.extend({htmlPrefilter:function(t){return t.replace(re,"<$1></$2>")},clone:function(t,e,n){var i,r,o,s,a,l=pt.contains(t.ownerDocument,t);if(ct.html5Clone||pt.isXMLDoc(t)||!ie.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(ue.innerHTML=t.outerHTML,ue.removeChild(o=ue.firstChild)),!(ct.noCloneEvent&&ct.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||pt.isXMLDoc(t)))for(i=f(o),a=f(t),s=0;null!=(r=a[s]);++s)i[s]&&M(r,i[s]);if(e)if(n)for(a=a||f(t),i=i||f(o),s=0;null!=(r=a[s]);s++)E(r,i[s]);else E(t,o);return(i=f(o,"script")).length>0&&m(i,!l&&f(t,"script")),i=a=r=null,o},cleanData:function(t,e){for(var n,i,r,o,s=0,a=pt.expando,l=pt.cache,u=ct.attributes,h=pt.event.special;null!=(n=t[s]);s++)if((e||Ot(n))&&(o=(r=n[a])&&l[r])){if(o.events)for(i in o.events)h[i]?pt.event.remove(n,i):pt.removeEvent(n,i,o.handle);l[r]&&(delete l[r],u||"undefined"==typeof n.removeAttribute?n[a]=undefined:n.removeAttribute(a),nt.push(r))}}}),pt.fn.extend({domManip:L,detach:function(t){return T(this,t,!0)},remove:function(t){return T(this,t)},text:function(t){return Ht(this,function(t){return t===undefined?pt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||it).createTextNode(t))},null,t,arguments.length)},append:function(){return L(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||x(this,t).appendChild(t)})},prepend:function(){return L(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=x(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return L(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return L(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&pt.cleanData(f(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&pt.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return pt.clone(this,t,e)})},html:function(t){return Ht(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===undefined)return 1===e.nodeType?e.innerHTML.replace(ne,""):undefined;if("string"==typeof t&&!oe.test(t)&&(ct.htmlSerialize||!ie.test(t))&&(ct.leadingWhitespace||!Vt.test(t))&&!Zt[(Wt.exec(t)||["",""])[1].toLowerCase()]){t=pt.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(pt.cleanData(f(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return L(this,arguments,function(e){var n=this.parentNode;pt.inArray(this,t)<0&&(pt.cleanData(f(this)),n&&n.replaceChild(e,this))},t)}}),pt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){pt.fn[t]=function(t){for(var n,i=0,r=[],o=pt(t),s=o.length-1;i<=s;i++)n=i===s?this:this.clone(!0),pt(o[i])[e](n),st.apply(r,n.get());return this.pushStack(r)}});var he,ce={HTML:"block",BODY:"block"},de=/^margin/,pe=new RegExp("^("+jt+")(?!px)[a-z%]+$","i"),fe=function(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in r=n.apply(t,i||[]),e)t.style[o]=s[o];return r},me=it.documentElement;!function(){function e(){var e,h,c=it.documentElement;c.appendChild(l),u.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",n=r=a=!1,i=s=!0,t.getComputedStyle&&(h=t.getComputedStyle(u),n="1%"!==(h||{}).top,a="2px"===(h||{}).marginLeft,r="4px"===(h||{width:"4px"}).width,u.style.marginRight="50%",i="4px"===(h||{marginRight:"4px"}).marginRight,(e=u.appendChild(it.createElement("div"))).style.cssText=u.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",u.style.width="1px",s=!parseFloat((t.getComputedStyle(e)||{}).marginRight),u.removeChild(e)),u.style.display="none",(o=0===u.getClientRects().length)&&(u.style.display="",u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",u.childNodes[0].style.borderCollapse="separate",(e=u.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(o=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",o=0===e[0].offsetHeight)),c.removeChild(l)}var n,i,r,o,s,a,l=it.createElement("div"),u=it.createElement("div");u.style&&(u.style.cssText="float:left;opacity:.5",ct.opacity="0.5"===u.style.opacity,ct.cssFloat=!!u.style.cssFloat,u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",ct.clearCloneStyle="content-box"===u.style.backgroundClip,(l=it.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",u.innerHTML="",l.appendChild(u),ct.boxSizing=""===u.style.boxSizing||""===u.style.MozBoxSizing||""===u.style.WebkitBoxSizing,pt.extend(ct,{reliableHiddenOffsets:function(){return null==n&&e(),o},boxSizingReliable:function(){return null==n&&e(),r},pixelMarginRight:function(){return null==n&&e(),i},pixelPosition:function(){return null==n&&e(),n},reliableMarginRight:function(){return null==n&&e(),s},reliableMarginLeft:function(){return null==n&&e(),a}}))}();var ge,ve,ye=/^(top|right|bottom|left)$/;t.getComputedStyle?(ge=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},ve=function(t,e,n){var i,r,o,s,a=t.style;return""!==(s=(n=n||ge(t))?n.getPropertyValue(e)||n[e]:undefined)&&s!==undefined||pt.contains(t.ownerDocument,t)||(s=pt.style(t,e)),n&&!ct.pixelMarginRight()&&pe.test(s)&&de.test(e)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o),s===undefined?s:s+""}):me.currentStyle&&(ge=function(t){return t.currentStyle},ve=function(t,e,n){var i,r,o,s,a=t.style;return null==(s=(n=n||ge(t))?n[e]:undefined)&&a&&a[e]&&(s=a[e]),pe.test(s)&&!ye.test(e)&&(i=a.left,(o=(r=t.runtimeStyle)&&r.left)&&(r.left=t.currentStyle.left),a.left="fontSize"===e?"1em":s,s=a.pixelLeft+"px",a.left=i,o&&(r.left=o)),s===undefined?s:s+""||"auto"});var _e=/alpha\([^)]*\)/i,be=/opacity\s*=\s*([^)]*)/i,we=/^(none|table(?!-c[ea]).+)/,xe=new RegExp("^("+jt+")(.*)$","i"),Se={position:"absolute",visibility:"hidden",display:"block"},Ce={letterSpacing:"0",fontWeight:"400"},Ee=["Webkit","O","Moz","ms"],Me=it.createElement("div").style;pt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=ve(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ct.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=pt.camelCase(e),l=t.style;if(e=pt.cssProps[a]||(pt.cssProps[a]=O(a)||a),s=pt.cssHooks[e]||pt.cssHooks[a],n===undefined)return s&&"get"in s&&(r=s.get(t,!1,i))!==undefined?r:l[e];if("string"===(o=typeof n)&&(r=zt.exec(n))&&r[1]&&(n=d(t,e,r),o="number"),null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(pt.cssNumber[a]?"":"px")),ct.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(s&&"set"in s&&(n=s.set(t,n,i))===undefined)))try{l[e]=n}catch(u){}}},css:function(t,e,n,i){var r,o,s,a=pt.camelCase(e);return e=pt.cssProps[a]||(pt.cssProps[a]=O(a)||a),(s=pt.cssHooks[e]||pt.cssHooks[a])&&"get"in s&&(o=s.get(t,!0,n)),o===undefined&&(o=ve(t,e,i)),"normal"===o&&e in Ce&&(o=Ce[e]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),pt.each(["height","width"],function(t,e){pt.cssHooks[e]={get:function(t,n,i){if(n)return we.test(pt.css(t,"display"))&&0===t.offsetWidth?fe(t,Se,function(){return F(t,e,i)}):F(t,e,i)},set:function(t,n,i){var r=i&&ge(t);return N(t,n,i?A(t,e,i,ct.boxSizing&&"border-box"===pt.css(t,"boxSizing",!1,r),r):0)}}}),ct.opacity||(pt.cssHooks.opacity={get:function(t,e){return be.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=pt.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===pt.trim(o.replace(_e,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=_e.test(o)?o.replace(_e,r):o+" "+r)}}),pt.cssHooks.marginRight=P(ct.reliableMarginRight,function(t,e){if(e)return fe(t,{display:"inline-block"},ve,[t,"marginRight"])}),pt.cssHooks.marginLeft=P(ct.reliableMarginLeft,function(t,e){if(e)return(parseFloat(ve(t,"marginLeft"))||(pt.contains(t.ownerDocument,t)?t.getBoundingClientRect().left-fe(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}):0))+"px"}),pt.each({margin:"",padding:"",border:"Width"},function(t,e){pt.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+Bt[i]+e]=o[i]||o[i-2]||o[0];return r}},de.test(t)||(pt.cssHooks[t+e].set=N)}),pt.fn.extend({css:function(t,e){return Ht(this,function(t,e,n){var i,r,o={},s=0;if(pt.isArray(e)){for(i=ge(t),r=e.length;s<r;s++)o[e[s]]=pt.css(t,e[s],!1,i);return o}return n!==undefined?pt.style(t,e,n):pt.css(t,e)},t,e,arguments.length>1)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ut(this)?pt(this).show():pt(this).hide()})}}),pt.Tween=R,R.prototype={constructor:R,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||pt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(pt.cssNumber[n]?"":"px")},cur:function(){var t=R.propHooks[this.prop];return t&&t.get?t.get(this):R.propHooks._default.get(this)},run:function(t){var e,n=R.propHooks[this.prop];return this.options.duration?this.pos=e=pt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=pt.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){pt.fx.step[t.prop]?pt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[pt.cssProps[t.prop]]&&!pt.cssHooks[t.prop]?t.elem[t.prop]=t.now:pt.style(t.elem,t.prop,t.now+t.unit)}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},pt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},pt.fx=R.prototype.init,pt.fx.step={};var Le,Te,ke,De,Pe,Oe,Ie,Ne=/^(?:toggle|show|hide)$/,Ae=/queueHooks$/;pt.Animation=pt.extend(q,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return d(n.elem,t,zt.exec(e),n),n}]},tweener:function(t,e){pt.isFunction(t)?(e=t,t=["*"]):t=t.match(Dt);for(var n,i=0,r=t.length;i<r;i++)n=t[i],q.tweeners[n]=q.tweeners[n]||[],q.tweeners[n].unshift(e)},prefilters:[U],prefilter:function(t,e){e?q.prefilters.unshift(t):q.prefilters.push(t)}}),pt.speed=function(t,e,n){var i=t&&"object"==typeof t?pt.extend({},t):{complete:n||!n&&e||pt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!pt.isFunction(e)&&e};return i.duration=pt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in pt.fx.speeds?pt.fx.speeds[i.duration]:pt.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){pt.isFunction(i.old)&&i.old.call(this),i.queue&&pt.dequeue(this,i.queue)},i},pt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ut).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=pt.isEmptyObject(t),o=pt.speed(e,n,i),s=function(){var e=q(this,pt.extend({},t),o);(r||pt._data(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=undefined),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=pt.timers,s=pt._data(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&Ae.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||pt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=pt._data(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=pt.timers,s=i?i.length:0;for(n.finish=!0,pt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),pt.each(["toggle","show","hide"],function(t,e){var n=pt.fn[e];pt.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(z(e,!0),t,i,r)}}),pt.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){pt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),pt.timers=[],pt.fx.tick=function(){var t,e=pt.timers,n=0;for(Le=pt.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||pt.fx.stop(),Le=undefined},pt.fx.timer=function(t){pt.timers.push(t),t()?pt.fx.start():pt.timers.pop()},pt.fx.interval=13,pt.fx.start=function(){Te||(Te=t.setInterval(pt.fx.tick,pt.fx.interval))},pt.fx.stop=function(){t.clearInterval(Te),Te=null},pt.fx.speeds={slow:600,fast:200,_default:400},pt.fn.delay=function(e,n){return e=pt.fx&&pt.fx.speeds[e]||e,n=n||"fx",this.queue(n,function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},De=it.createElement("input"),Pe=it.createElement("div"),Oe=it.createElement("select"),Ie=Oe.appendChild(it.createElement("option")),(Pe=it.createElement("div")).setAttribute("className","t"),Pe.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ke=Pe.getElementsByTagName("a")[0],De.setAttribute("type","checkbox"),Pe.appendChild(De),(ke=Pe.getElementsByTagName("a")[0]).style.cssText="top:1px",ct.getSetAttribute="t"!==Pe.className,ct.style=/top/.test(ke.getAttribute("style")),ct.hrefNormalized="/a"===ke.getAttribute("href"),ct.checkOn=!!De.value,ct.optSelected=Ie.selected,ct.enctype=!!it.createElement("form").enctype,Oe.disabled=!0,ct.optDisabled=!Ie.disabled,(De=it.createElement("input")).setAttribute("value",""),ct.input=""===De.getAttribute("value"),De.value="t",De.setAttribute("type","radio"),ct.radioValue="t"===De.value;var Fe=/\r/g,Re=/[\x20\t\r\n\f]+/g;pt.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=pt.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,pt(this).val()):t)?r="":"number"==typeof r?r+="":pt.isArray(r)&&(r=pt.map(r,function(t){return null==t?"":t+""})),(e=pt.valHooks[this.type]||pt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&e.set(this,r,"value")!==undefined||(this.value=r))})):r?(e=pt.valHooks[r.type]||pt.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&(n=e.get(r,"value"))!==undefined?n:"string"==typeof(n=r.value)?n.replace(Fe,""):null==n?"":n:void 0}}),pt.extend({valHooks:{option:{get:function(t){var e=pt.find.attr(t,"value");return null!=e?e:pt.trim(pt.text(t)).replace(Re," ")}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||r<0,s=o?null:[],a=o?r+1:i.length,l=r<0?a:o?r:0;l<a;l++)if(((n=i[l]).selected||l===r)&&(ct.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!pt.nodeName(n.parentNode,"optgroup"))){if(e=pt(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=pt.makeArray(e),s=r.length;s--;)if(i=r[s],pt.inArray(pt.valHooks.option.get(i),o)>-1)try{i.selected=n=!0}catch(a){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),r}}}}),pt.each(["radio","checkbox"],function(){pt.valHooks[this]={set:function(t,e){if(pt.isArray(e))return t.checked=pt.inArray(pt(t).val(),e)>-1}},ct.checkOn||(pt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var je,ze,Be=pt.expr.attrHandle,Ue=/^(?:checked|selected)$/i,He=ct.getSetAttribute,qe=ct.input;pt.fn.extend({attr:function(t,e){return Ht(this,pt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){pt.removeAttr(this,t)})}}),pt.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?pt.prop(t,e,n):(1===o&&pt.isXMLDoc(t)||(e=e.toLowerCase(),r=pt.attrHooks[e]||(pt.expr.match.bool.test(e)?ze:je)),n!==undefined?null===n?void pt.removeAttr(t,e):r&&"set"in r&&(i=r.set(t,n,e))!==undefined?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=pt.find.attr(t,e))?undefined:i)},attrHooks:{type:{set:function(t,e){if(!ct.radioValue&&"radio"===e&&pt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(Dt);if(o&&1===t.nodeType)for(;n=o[r++];)i=pt.propFix[n]||n,pt.expr.match.bool.test(n)?qe&&He||!Ue.test(n)?t[i]=!1:t[pt.camelCase("default-"+n)]=t[i]=!1:pt.attr(t,n,""),t.removeAttribute(He?n:i)}}),ze={set:function(t,e,n){return!1===e?pt.removeAttr(t,n):qe&&He||!Ue.test(n)?t.setAttribute(!He&&pt.propFix[n]||n,n):t[pt.camelCase("default-"+n)]=t[n]=!0,n}},pt.each(pt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Be[e]||pt.find.attr;qe&&He||!Ue.test(e)?Be[e]=function(t,e,i){var r,o;return i||(o=Be[e],Be[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,Be[e]=o),r}:Be[e]=function(t,e,n){if(!n)return t[pt.camelCase("default-"+e)]?e.toLowerCase():null}}),qe&&He||(pt.attrHooks.value={set:function(t,e,n){if(!pt.nodeName(t,"input"))return je&&je.set(t,e,n);t.defaultValue=e}}),He||(je={set:function(t,e,n){var i=t.getAttributeNode(n);if(i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n))return e}},Be.id=Be.name=Be.coords=function(t,e,n){var i;if(!n)return(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},pt.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);if(n&&n.specified)return n.value},set:je.set},pt.attrHooks.contenteditable={set:function(t,e,n){je.set(t,""!==e&&e,n)}},pt.each(["width","height"],function(t,e){pt.attrHooks[e]={set:function(t,n){if(""===n)return t.setAttribute(e,"auto"),n}}
})),ct.style||(pt.attrHooks.style={get:function(t){return t.style.cssText||undefined},set:function(t,e){return t.style.cssText=e+""}});var We=/^(?:input|select|textarea|button|object)$/i,Ge=/^(?:a|area)$/i;pt.fn.extend({prop:function(t,e){return Ht(this,pt.prop,t,e,arguments.length>1)},removeProp:function(t){return t=pt.propFix[t]||t,this.each(function(){try{this[t]=undefined,delete this[t]}catch(e){}})}}),pt.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&pt.isXMLDoc(t)||(e=pt.propFix[e]||e,r=pt.propHooks[e]),n!==undefined?r&&"set"in r&&(i=r.set(t,n,e))!==undefined?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=pt.find.attr(t,"tabindex");return e?parseInt(e,10):We.test(t.nodeName)||Ge.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ct.hrefNormalized||pt.each(["href","src"],function(t,e){pt.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ct.optSelected||(pt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),pt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pt.propFix[this.toLowerCase()]=this}),ct.enctype||(pt.propFix.enctype="encoding");var Ve=/[\t\r\n\f]/g;pt.fn.extend({addClass:function(t){var e,n,i,r,o,s,a,l=0;if(pt.isFunction(t))return this.each(function(e){pt(this).addClass(t.call(this,e,W(this)))});if("string"==typeof t&&t)for(e=t.match(Dt)||[];n=this[l++];)if(r=W(n),i=1===n.nodeType&&(" "+r+" ").replace(Ve," ")){for(s=0;o=e[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(a=pt.trim(i))&&pt.attr(n,"class",a)}return this},removeClass:function(t){var e,n,i,r,o,s,a,l=0;if(pt.isFunction(t))return this.each(function(e){pt(this).removeClass(t.call(this,e,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Dt)||[];n=this[l++];)if(r=W(n),i=1===n.nodeType&&(" "+r+" ").replace(Ve," ")){for(s=0;o=e[s++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(a=pt.trim(i))&&pt.attr(n,"class",a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):pt.isFunction(t)?this.each(function(n){pt(this).toggleClass(t.call(this,n,W(this),e),e)}):this.each(function(){var e,i,r,o;if("string"===n)for(i=0,r=pt(this),o=t.match(Dt)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else t!==undefined&&"boolean"!==n||((e=W(this))&&pt._data(this,"__className__",e),pt.attr(this,"class",e||!1===t?"":pt._data(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+W(n)+" ").replace(Ve," ").indexOf(e)>-1)return!0;return!1}}),pt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){pt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),pt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});var $e=t.location,Ze=pt.now(),Je=/\?/,Xe=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;pt.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,r=pt.trim(e+"");return r&&!pt.trim(r.replace(Xe,function(t,e,r,o){return n&&e&&(i=0),0===i?t:(n=r||e,i+=!o-!r,"")}))?Function("return "+r)():pt.error("Invalid JSON: "+e)},pt.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new t.DOMParser,n=i.parseFromString(e,"text/xml")):((n=new t.ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(e))}catch(r){n=undefined}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||pt.error("Invalid XML: "+e),n};var Ye=/#.*$/,Qe=/([?&])_=[^&]*/,Ke=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,tn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,en=/^(?:GET|HEAD)$/,nn=/^\/\//,rn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,on={},sn={},an="*/".concat("*"),ln=$e.href,un=rn.exec(ln.toLowerCase())||[];pt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ln,type:"GET",isLocal:tn.test(un[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":an,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":pt.parseJSON,"text xml":pt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?$($(t,pt.ajaxSettings),e):$(pt.ajaxSettings,t)},ajaxPrefilter:G(on),ajaxTransport:G(sn),ajax:function(e,n){function i(e,n,i,r){var o,c,y,_,w,S=n;2!==b&&(b=2,l&&t.clearTimeout(l),h=undefined,a=r||"",x.readyState=e>0?4:0,o=e>=200&&e<300||304===e,i&&(_=Z(d,x,i)),_=J(d,_,x,o),o?(d.ifModified&&((w=x.getResponseHeader("Last-Modified"))&&(pt.lastModified[s]=w),(w=x.getResponseHeader("etag"))&&(pt.etag[s]=w)),204===e||"HEAD"===d.type?S="nocontent":304===e?S="notmodified":(S=_.state,c=_.data,o=!(y=_.error))):(y=S,!e&&S||(S="error",e<0&&(e=0))),x.status=e,x.statusText=(n||S)+"",o?m.resolveWith(p,[c,S,x]):m.rejectWith(p,[x,S,y]),x.statusCode(v),v=undefined,u&&f.trigger(o?"ajaxSuccess":"ajaxError",[x,d,o?c:y]),g.fireWith(p,[x,S]),u&&(f.trigger("ajaxComplete",[x,d]),--pt.active||pt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=undefined),n=n||{};var r,o,s,a,l,u,h,c,d=pt.ajaxSetup({},n),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?pt(p):pt.event,m=pt.Deferred(),g=pt.Callbacks("once memory"),v=d.statusCode||{},y={},_={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!c)for(c={};e=Ke.exec(a);)c[e[1].toLowerCase()]=e[2];e=c[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=_[n]=_[n]||t,y[t]=e),this},overrideMimeType:function(t){return b||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(b<2)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return h&&h.abort(e),i(0,e),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,d.url=((e||d.url||ln)+"").replace(Ye,"").replace(nn,un[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=pt.trim(d.dataType||"*").toLowerCase().match(Dt)||[""],null==d.crossDomain&&(r=rn.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]===un[1]&&r[2]===un[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(un[3]||("http:"===un[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=pt.param(d.data,d.traditional)),V(on,d,n,x),2===b)return x;for(o in(u=pt.event&&d.global)&&0==pt.active++&&pt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!en.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(Je.test(s)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=Qe.test(s)?s.replace(Qe,"$1_="+Ze++):s+(Je.test(s)?"&":"?")+"_="+Ze++)),d.ifModified&&(pt.lastModified[s]&&x.setRequestHeader("If-Modified-Since",pt.lastModified[s]),pt.etag[s]&&x.setRequestHeader("If-None-Match",pt.etag[s])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+an+"; q=0.01":""):d.accepts["*"]),d.headers)x.setRequestHeader(o,d.headers[o]);if(d.beforeSend&&(!1===d.beforeSend.call(p,x,d)||2===b))return x.abort();for(o in w="abort",{success:1,error:1,complete:1})x[o](d[o]);if(h=V(sn,d,n,x)){if(x.readyState=1,u&&f.trigger("ajaxSend",[x,d]),2===b)return x;d.async&&d.timeout>0&&(l=t.setTimeout(function(){x.abort("timeout")},d.timeout));try{b=1,h.send(y,i)}catch(S){if(!(b<2))throw S;i(-1,S)}}else i(-1,"No Transport");return x},getJSON:function(t,e,n){return pt.get(t,e,n,"json")},getScript:function(t,e){return pt.get(t,undefined,e,"script")}}),pt.each(["get","post"],function(t,e){pt[e]=function(t,n,i,r){return pt.isFunction(n)&&(r=r||i,i=n,n=undefined),pt.ajax(pt.extend({url:t,type:e,dataType:r,data:n,success:i},pt.isPlainObject(t)&&t))}}),pt._evalUrl=function(t){return pt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},pt.fn.extend({wrapAll:function(t){if(pt.isFunction(t))return this.each(function(e){pt(this).wrapAll(t.call(this,e))});if(this[0]){var e=pt(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return pt.isFunction(t)?this.each(function(e){pt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=pt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=pt.isFunction(t);return this.each(function(n){pt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){pt.nodeName(this,"body")||pt(this).replaceWith(this.childNodes)}).end()}}),pt.expr.filters.hidden=function(t){return ct.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:Y(t)},pt.expr.filters.visible=function(t){return!pt.expr.filters.hidden(t)};var hn=/%20/g,cn=/\[\]$/,dn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,fn=/^(?:input|select|textarea|keygen)/i;pt.param=function(t,e){var n,i=[],r=function(t,e){e=pt.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(e===undefined&&(e=pt.ajaxSettings&&pt.ajaxSettings.traditional),pt.isArray(t)||t.jquery&&!pt.isPlainObject(t))pt.each(t,function(){r(this.name,this.value)});else for(n in t)Q(n,t[n],e,r);return i.join("&").replace(hn,"+")},pt.fn.extend({serialize:function(){return pt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=pt.prop(this,"elements");return t?pt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!pt(this).is(":disabled")&&fn.test(this.nodeName)&&!pn.test(t)&&(this.checked||!qt.test(t))}).map(function(t,e){var n=pt(this).val();return null==n?null:pt.isArray(n)?pt.map(n,function(t){return{name:e.name,value:t.replace(dn,"\r\n")}}):{name:e.name,value:n.replace(dn,"\r\n")}}).get()}}),pt.ajaxSettings.xhr=t.ActiveXObject!==undefined?function(){return this.isLocal?tt():it.documentMode>8?K():/^(get|post|head|put|delete|options)$/i.test(this.type)&&K()||tt()}:K;var mn=0,gn={},vn=pt.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in gn)gn[t](undefined,!0)}),ct.cors=!!vn&&"withCredentials"in vn,(vn=ct.ajax=!!vn)&&pt.ajaxTransport(function(e){var n;if(!e.crossDomain||ct.cors)return{send:function(i,r){var o,s=e.xhr(),a=++mn;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)i[o]!==undefined&&s.setRequestHeader(o,i[o]+"");s.send(e.hasContent&&e.data||null),n=function(t,i){var o,l,u;if(n&&(i||4===s.readyState))if(delete gn[a],n=undefined,s.onreadystatechange=pt.noop,i)4!==s.readyState&&s.abort();else{u={},o=s.status,"string"==typeof s.responseText&&(u.text=s.responseText);try{l=s.statusText}catch(h){l=""}o||!e.isLocal||e.crossDomain?1223===o&&(o=204):o=u.text?200:404}u&&r(o,l,u,s.getAllResponseHeaders())},e.async?4===s.readyState?t.setTimeout(n):s.onreadystatechange=gn[a]=n:n()},abort:function(){n&&n(undefined,!0)}}}),pt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return pt.globalEval(t),t}}}),pt.ajaxPrefilter("script",function(t){t.cache===undefined&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),pt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=it.head||pt("head")[0]||it.documentElement;return{send:function(i,r){(e=it.createElement("script")).async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||r(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(undefined,!0)}}}});var yn=[],_n=/(=)\?(?=&|$)|\?\?/;pt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=yn.pop()||pt.expando+"_"+Ze++;return this[t]=!0,t}}),pt.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,s,a=!1!==e.jsonp&&(_n.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&_n.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=pt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(_n,"$1"+r):!1!==e.jsonp&&(e.url+=(Je.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||pt.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},i.always(function(){o===undefined?pt(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,yn.push(r)),s&&pt.isFunction(o)&&o(s[0]),s=o=undefined}),"script"}),pt.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||it;var i=xt.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=v([t],e,r),r&&r.length&&pt(r).remove(),pt.merge([],i.childNodes))};var bn=pt.fn.load;pt.fn.load=function(t,e,n){if("string"!=typeof t&&bn)return bn.apply(this,arguments);var i,r,o,s=this,a=t.indexOf(" ");return a>-1&&(i=pt.trim(t.slice(a,t.length)),t=t.slice(0,a)),pt.isFunction(e)?(n=e,e=undefined):e&&"object"==typeof e&&(r="POST"),s.length>0&&pt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?pt("<div>").append(pt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},pt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){pt.fn[e]=function(t){return this.on(e,t)}}),pt.expr.filters.animated=function(t){return pt.grep(pt.timers,function(e){return t===e.elem}).length},pt.offset={setOffset:function(t,e,n){var i,r,o,s,a,l,u=pt.css(t,"position"),h=pt(t),c={};"static"===u&&(t.style.position="relative"),a=h.offset(),o=pt.css(t,"top"),l=pt.css(t,"left"),("absolute"===u||"fixed"===u)&&pt.inArray("auto",[o,l])>-1?(s=(i=h.position()).top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),pt.isFunction(e)&&(e=e.call(t,n,pt.extend({},a))),null!=e.top&&(c.top=e.top-a.top+s),null!=e.left&&(c.left=e.left-a.left+r),"using"in e?e.using.call(t,c):h.css(c)}},pt.fn.extend({offset:function(t){if(arguments.length)return t===undefined?this:this.each(function(e){pt.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;return o?(e=o.documentElement,pt.contains(e,r)?("undefined"!=typeof r.getBoundingClientRect&&(i=r.getBoundingClientRect()),n=et(o),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===pt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),pt.nodeName(t[0],"html")||(n=t.offset()),n.top+=pt.css(t[0],"borderTopWidth",!0),n.left+=pt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-pt.css(i,"marginTop",!0),left:e.left-n.left-pt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&!pt.nodeName(t,"html")&&"static"===pt.css(t,"position");)t=t.offsetParent;return t||me})}}),pt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);pt.fn[t]=function(i){return Ht(this,function(t,i,r){var o=et(t);if(r===undefined)return o?e in o?o[e]:o.document.documentElement[i]:t[i];o?o.scrollTo(n?pt(o).scrollLeft():r,n?r:pt(o).scrollTop()):t[i]=r},t,i,arguments.length,null)}}),pt.each(["top","left"],function(t,e){pt.cssHooks[e]=P(ct.pixelPosition,function(t,n){if(n)return n=ve(t,e),pe.test(n)?pt(t).position()[e]+"px":n})}),pt.each({Height:"height",Width:"width"},function(t,e){pt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){pt.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===r?"margin":"border");return Ht(this,function(e,n,i){var r;return pt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):i===undefined?pt.css(e,n,s):pt.style(e,n,i,s)},e,o?i:undefined,o,null)}})}),pt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),pt.fn.size=function(){return this.length},pt.fn.andSelf=pt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pt});var wn=t.jQuery,xn=t.$;return pt.noConflict=function(e){return t.$===pt&&(t.$=xn),e&&t.jQuery===pt&&(t.jQuery=wn),pt},e||(t.jQuery=t.$=pt),pt}),function(t,e){"use strict";var n;t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return t("meta[name=csrf-token]").attr("content")},csrfParam:function(){return t("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=n.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){t('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(e,n,i){var r=t.Event(n);return e.trigger(r,i),!1!==r.result},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},isRemote:function(t){return t.data("remote")!==e&&!1!==t.data("remote")},handleRemote:function(i){var r,o,s,a,l,u;if(n.fire(i,"ajax:before")){if(a=i.data("with-credentials")||null,l=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){r=i.data("ujs:submit-button-formmethod")||i.attr("method"),o=i.data("ujs:submit-button-formaction")||i.attr("action"),s=t(i[0]).serializeArray();var h=i.data("ujs:submit-button");h&&(s.push(h),i.data("ujs:submit-button",null)),i.data("ujs:submit-button-formmethod",null),i.data("ujs:submit-button-formaction",null)}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",o=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(r=i.data("method"),o=n.href(i),s=i.data("params")||null);return u={type:r||"GET",data:s,dataType:l,beforeSend:function(t,r){if(r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),!n.fire(i,"ajax:beforeSend",[t,r]))return!1;i.trigger("ajax:send",t)},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:n.isCrossDomain(o)},a&&(u.xhrFields={withCredentials:a}),o&&(u.url=o),n.ajax(u)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(i){var r=n.href(i),o=i.data("method"),s=i.attr("target"),a=n.csrfToken(),l=n.csrfParam(),u=t('<form method="post" action="'+r+'"></form>'),h='<input name="_method" value="'+o+'" type="hidden" />';l===e||a===e||n.isCrossDomain(r)||(h+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&u.attr("target",s),u.hide().append(h).appendTo("body"),u.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,i;n=t.is("button")?"html":"val",(i=t.data("disable-with"))!==e&&(t.data("ujs:enable-with",t[n]()),t[n](i)),t.prop("disabled",!0),t.data("ujs:disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var n=t.is("button")?"html":"val";t.data("ujs:enable-with")!==e&&(t[n](t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.prop("disabled",!1),t.removeData("ujs:disabled")},allowAction:function(t){var e,i=t.data("confirm"),r=!1;if(!i)return!0;if(n.fire(t,"confirm")){try{r=n.confirm(i)}catch(o){(console.error||console.log).call(console,o.stack||o)}e=n.fire(t,"confirm:complete",[r])}return r&&e},blankInputs:function(e,n,i){var r,o,s,a=t(),l=n||"input,textarea",u={};return e.find(l).each(function(){(r=t(this)).is("input[type=radio]")?(s=r.attr("name"),u[s]||(0===e.find('input[type=radio]:checked[name="'+s+'"]').length&&(o=e.find('input[type=radio][name="'+s+'"]'),a=a.add(o)),u[s]=s)):(r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):!!r.val())===i&&(a=a.add(r))}),!!a.length&&a},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");i!==e&&(t.data("ujs:enable-with",t.html()),t.html(i)),t.bind("click.railsDisable",function(t){return n.stopEverything(t)}),t.data("ujs:disabled",!0)},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable"),t.removeData("ujs:disabled")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableElement(e)})}),i.on("ajax:complete",n.linkDisableSelector,function(){n.enableElement(t(this))}),i.on("ajax:complete",n.buttonDisableSelector,function(){n.enableFormElement(t(this))}),i.on("click.rails",n.linkClickSelector,function(e){var i=t(this),r=i.data("method"),o=i.data("params"),s=e.metaKey||e.ctrlKey;if(!n.allowAction(i))return n.stopEverything(e);if(!s&&i.is(n.linkDisableSelector)&&n.disableElement(i),n.isRemote(i)){if(s&&(!r||"GET"===r)&&!o)return!0;var a=n.handleRemote(i);return!1===a?n.enableElement(i):a.fail(function(){n.enableElement(i)}),!1}return r?(n.handleMethod(i),!1):void 0}),i.on("click.rails",n.buttonClickSelector,function(e){var i=t(this);if(!n.allowAction(i)||!n.isRemote(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var r=n.handleRemote(i);return!1===r?n.enableFormElement(i):r.fail(function(){n.enableFormElement(i)}),!1}),i.on("change.rails",n.inputChangeSelector,function(e){var i=t(this);return n.allowAction(i)&&n.isRemote(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.on("submit.rails",n.formSubmitSelector,function(i){var r,o,s=t(this),a=n.isRemote(s);if(!n.allowAction(s))return n.stopEverything(i);if(s.attr("novalidate")===e)if(s.data("ujs:formnovalidate-button")===e){if((r=n.blankInputs(s,n.requiredInputSelector,!1))&&n.fire(s,"ajax:aborted:required",[r]))return n.stopEverything(i)}else s.data("ujs:formnovalidate-button",e);if(a){if(o=n.nonBlankInputs(s,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(s)},13);var l=n.fire(s,"ajax:aborted:file",[o]);return l||setTimeout(function(){n.enableFormElements(s)},13),l}return n.handleRemote(s),!1}setTimeout(function(){n.disableFormElements(s)},13)}),i.on("click.rails",n.formInputClickSelector,function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null,s=i.closest("form");0===s.length&&(s=t("#"+i.attr("form"))),s.data("ujs:submit-button",o),s.data("ujs:formnovalidate-button",i.attr("formnovalidate")),s.data("ujs:submit-button-formaction",i.attr("formaction")),s.data("ujs:submit-button-formmethod",i.attr("formmethod"))}),i.on("ajax:send.rails",n.formSubmitSelector,function(e){this===e.target&&n.disableFormElements(t(this))}),i.on("ajax:complete.rails",n.formSubmitSelector,function(e){this===e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),function(t,e){function n(t,e,n){var i=c[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:0>t?0:i.max<t?i.max:t)}function i(e){var n=u(),i=n._rgba=[];return e=e.toLowerCase(),f(l,function(t,r){var o,s=r.re.exec(e),a=s&&r.parse(s),l=r.space||"rgba";if(a)return o=n[l](a),n[h[l].cache]=o[h[l].cache],i=n._rgba=o._rgba,!1}),i.length?("0,0,0,0"===i.join()&&t.extend(i,o.transparent),n):o[e]}function r(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var o,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],u=t.Color=function(e,n,i,r){return new t.Color.fn.parse(e,n,i,r)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=u.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(h,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),u.fn=t.extend(u.prototype,{parse:function(r,s,a,l){if(r===e)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=t(r).css(s),s=e);var c=this,d=t.type(r),p=this._rgba=[];return s!==e&&(r=[r,s,a,l],d="array"),"string"===d?this.parse(i(r)||o._default):"array"===d?(f(h.rgba.props,function(t,e){p[e.idx]=n(r[e.idx],e)}),this):"object"===d?(f(h,r instanceof u?function(t,e){r[e.cache]&&(c[e.cache]=r[e.cache].slice())}:function(e,i){var o=i.cache;f(i.props,function(t,e){if(!c[o]&&i.to){if("alpha"===t||null==r[t])return;c[o]=i.to(c._rgba)}c[o][e.idx]=n(r[t],e,!0)}),c[o]&&t.inArray(null,c[o].slice(0,3))<0&&(c[o][3]=1,i.from&&(c._rgba=i.from(c[o])))}),this):void 0},is:function(t){var e=u(t),n=!0,i=this;return f(h,function(t,r){var o,s=e[r.cache];return s&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],f(r.props,function(t,e){if(null!=s[e.idx])return n=s[e.idx]===o[e.idx]})),n}),n},_space:function(){var t=[],e=this;return f(h,function(n,i){e[i.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var i=u(t),r=i._space(),o=h[r],s=0===this.alpha()?u("transparent"):this,a=s[o.cache]||o.to(s._rgba),l=a.slice();return i=i[o.cache],f(o.props,function(t,r){var o=r.idx,s=a[o],u=i[o],h=c[r.type]||{};null!==u&&(null===s?l[o]=u:(h.mod&&(u-s>h.mod/2?s+=h.mod:s-u>h.mod/2&&(s-=h.mod)),l[o]=n((u-s)*e+s,r)))}),this[r](l)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=u(e)._rgba;return u(t.map(n,function(t,e){return(1-i)*r[e]+i*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,h.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,s=t[3],a=Math.max(i,r,o),l=Math.min(i,r,o),u=a-l,h=a+l,c=.5*h;return e=l===a?0:i===a?60*(r-o)/u+360:r===a?60*(o-i)/u+120:60*(i-r)/u+240,n=0===u?0:c<=.5?u/h:u/(2-h),[Math.round(e)%360,n,c,null==s?1:s]},h.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],o=t[3],s=i<=.5?i*(1+n):i+n-i*n,a=2*i-s;return[Math.round(255*r(a,s,e+1/3)),Math.round(255*r(a,s,e)),Math.round(255*r(a,s,e-1/3)),o]},f(h,function(i,r){var o=r.props,s=r.cache,l=r.to,h=r.from;u.fn[i]=function(i){if(l&&!this[s]&&(this[s]=l(this._rgba)),i===e)return this[s].slice();var r,a=t.type(i),c="array"===a||"object"===a?i:arguments,d=this[s].slice();return f(o,function(t,e){var i=c["object"===a?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=n(i,e)}),h?((r=u(h(d)))[s]=d,r):u(d)},f(o,function(e,n){u.fn[e]||(u.fn[e]=function(r){var o,s=t.type(r),l="alpha"===e?this._hsla?"hsla":"rgba":i,u=this[l](),h=u[n.idx];return"undefined"===s?h:("function"===s&&(r=r.call(this,h),s=t.type(r)),null==r&&n.empty?this:("string"===s&&(o=a.exec(r))&&(r=h+parseFloat(o[2])*("+"===o[1]?1:-1)),u[n.idx]=r,this[l](u)))})})}),u.hook=function(e){var n=e.split(" ");f(n,function(e,n){t.cssHooks[n]={set:function(e,r){var o,s,a="";if("transparent"!==r&&("string"!==t.type(r)||(o=i(r)))){if(r=u(o||r),!d.rgba&&1!==r._rgba[3]){for(s="backgroundColor"===n?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(l){}r=r.blend(a&&"transparent"!==a?a:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=u(e.elem,n),e.end=u(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})},u.hook(s),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(n,i){e["border"+i+"Color"]=t}),e}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",
green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(t){var e=!1;if("function"==typeof define&&define.amd&&(define(t),e=!0),"object"==typeof exports&&(module.exports=t(),e=!0),!e){var n=window.Cookies,i=window.Cookies=t();i.noConflict=function(){return window.Cookies=n,i}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function e(n){function i(e,r,o){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=t({path:"/"},i.defaults,o)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}o.expires=o.expires?o.expires.toUTCString():"";try{s=JSON.stringify(r),/^[\{\[]/.test(s)&&(r=s)}catch(g){}r=n.write?n.write(r,e):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var u in o)o[u]&&(l+="; "+u,!0!==o[u]&&(l+="="+o[u]));return document.cookie=e+"="+r+l}e||(s={});for(var h=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,d=0;d<h.length;d++){var p=h[d].split("="),f=p.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var m=p[0].replace(c,decodeURIComponent);if(f=n.read?n.read(f,m):n(f,m)||f.replace(c,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(g){}if(e===m){s=f;break}e||(s[m]=f)}catch(g){}}return s}}return i.set=i,i.get=function(t){return i.call(i,t)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(e,n){i(e,"",t(n,{expires:-1}))},i.withConverter=e,i}return e(function(){})}),function(){var t=!0;!function(e){var n,i=this||(0,eval)("this"),r=i.document,o=i.navigator,s=i.jQuery,a=i.JSON;n=function(n,l){function u(t,e){return!!(null===t||typeof t in g)&&t===e}function h(t,n){var i;return function(){i||(i=setTimeout(function(){i=e,t()},n))}}function c(t,e){var n;return function(){clearTimeout(n),n=setTimeout(t,e)}}function d(t){var e=this;return t&&m.utils.objectForEach(t,function(t,n){var i=m.extenders[t];"function"==typeof i&&(e=i(e,n)||e)}),e}function p(t){m.bindingHandlers[t]={init:function(e,n,i,r,o){var s=function(){var e={};return e[t]=n(),e};return m.bindingHandlers.event.init.call(this,e,s,i,r,o)}}}function f(t,e,n,i){m.bindingHandlers[t]={init:function(t,r,o,s,a){var l,u;return m.computed(function(){var o=m.utils.unwrapObservable(r()),s=!n!=!o,h=!u;(h||e||s!==l)&&(h&&m.computedContext.getDependenciesCount()&&(u=m.utils.cloneNodes(m.virtualElements.childNodes(t),!0)),s?(h||m.virtualElements.setDomNodeChildren(t,m.utils.cloneNodes(u)),m.applyBindingsToDescendants(i?i(a,o):a,t)):m.virtualElements.emptyNode(t),l=s)},null,{disposeWhenNodeIsRemoved:t}),{controlsDescendantBindings:!0}}},m.expressionRewriting.bindingRewriteValidators[t]=!1,m.virtualElements.allowedBindings[t]=!0}var m=void 0!==n?n:{};m.exportSymbol=function(t,e){for(var n=t.split("."),i=m,r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=e},m.exportProperty=function(t,e,n){t[e]=n},m.version="3.3.0",m.exportSymbol("version",m.version),m.utils=function(){function t(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function n(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function l(t,e){return t.__proto__=e,t}function u(t,e){if("input"!==m.utils.tagNameLower(t)||!t.type)return!1;if("click"!=e.toLowerCase())return!1;var n=t.type;return"checkbox"==n||"radio"==n}function h(t,e,n){var i;e&&("object"==typeof t.classList?(i=t.classList[n?"add":"remove"],m.utils.arrayForEach(e.match(y),function(e){i.call(t.classList,e)})):"string"==typeof t.className.baseVal?c(t.className,"baseVal",e,n):c(t,"className",e,n))}function c(t,e,n,i){var r=t[e].match(y)||[];m.utils.arrayForEach(n.match(y),function(t){m.utils.addOrRemoveItem(r,t,i)}),t[e]=r.join(" ")}var d={__proto__:[]}instanceof Array,p={},f={};p[o&&/Firefox\/2/i.test(o.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],p.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],t(p,function(t,e){if(e.length)for(var n=0,i=e.length;n<i;n++)f[e[n]]=t});var g={propertychange:!0},v=r&&function(){for(var t=3,n=r.createElement("div"),i=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",i[0];);return t>4?t:e}(),y=/\S+/g;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n)},arrayIndexOf:function(t,e){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},arrayFirst:function(t,e,n){for(var i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i))return t[i];return null},arrayRemoveItem:function(t,e){var n=m.utils.arrayIndexOf(t,e);n>0?t.splice(n,1):0===n&&t.shift()},arrayGetDistinctValues:function(t){for(var e=[],n=0,i=(t=t||[]).length;n<i;n++)m.utils.arrayIndexOf(e,t[n])<0&&e.push(t[n]);return e},arrayMap:function(t,e){for(var n=[],i=0,r=(t=t||[]).length;i<r;i++)n.push(e(t[i],i));return n},arrayFilter:function(t,e){for(var n=[],i=0,r=(t=t||[]).length;i<r;i++)e(t[i],i)&&n.push(t[i]);return n},arrayPushAll:function(t,e){if(e instanceof Array)t.push.apply(t,e);else for(var n=0,i=e.length;n<i;n++)t.push(e[n]);return t},addOrRemoveItem:function(t,e,n){var i=m.utils.arrayIndexOf(m.utils.peekObservable(t),e);i<0?n&&t.push(e):n||t.splice(i,1)},canSetPrototype:d,extend:n,setPrototypeOf:l,setPrototypeOfOrExtend:d?l:n,objectForEach:t,objectMap:function(t,e){if(!t)return t;var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i],i,t));return n},emptyDomNode:function(t){for(;t.firstChild;)m.removeNode(t.firstChild)},moveCleanedNodesToContainerElement:function(t){for(var e=m.utils.makeArray(t),n=(e[0]&&e[0].ownerDocument||r).createElement("div"),i=0,o=e.length;i<o;i++)n.appendChild(m.cleanNode(e[i]));return n},cloneNodes:function(t,e){for(var n=0,i=t.length,r=[];n<i;n++){var o=t[n].cloneNode(!0);r.push(e?m.cleanNode(o):o)}return r},setDomNodeChildren:function(t,e){if(m.utils.emptyDomNode(t),e)for(var n=0,i=e.length;n<i;n++)t.appendChild(e[n])},replaceDomNodes:function(t,e){var n=t.nodeType?[t]:t;if(n.length>0){for(var i=n[0],r=i.parentNode,o=0,s=e.length;o<s;o++)r.insertBefore(e[o],i);for(o=0,s=n.length;o<s;o++)m.removeNode(n[o])}},fixUpContinuousNodeArray:function(t,e){if(t.length){for(e=8===e.nodeType&&e.parentNode||e;t.length&&t[0].parentNode!==e;)t.splice(0,1);if(t.length>1){var n=t[0],i=t[t.length-1];for(t.length=0;n!==i;)if(t.push(n),!(n=n.nextSibling))return;t.push(i)}}return t},setOptionNodeSelectionState:function(t,e){v<7?t.setAttribute("selected",e):t.selected=e},stringTrim:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(t,e){return t=t||"",!(e.length>t.length)&&t.substring(0,e.length)===e},domNodeIsContainedBy:function(t,e){if(t===e)return!0;if(11===t.nodeType)return!1;if(e.contains)return e.contains(3===t.nodeType?t.parentNode:t);if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(t));for(;t&&t!=e;)t=t.parentNode;return!!t},domNodeIsAttachedToDocument:function(t){return m.utils.domNodeIsContainedBy(t,t.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(t){return!!m.utils.arrayFirst(t,m.utils.domNodeIsAttachedToDocument)},tagNameLower:function(t){return t&&t.tagName&&t.tagName.toLowerCase()},registerEventHandler:function(t,e,n){var i=v&&g[e];if(!i&&s)s(t).bind(e,n);else if(i||"function"!=typeof t.addEventListener){if("undefined"==typeof t.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");var r=function(e){n.call(t,e)},o="on"+e;t.attachEvent(o,r),m.utils.domNodeDisposal.addDisposeCallback(t,function(){t.detachEvent(o,r)})}else t.addEventListener(e,n,!1)},triggerEvent:function(t,e){if(!t||!t.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");var n=u(t,e);if(s&&!n)s(t).trigger(e);else if("function"==typeof r.createEvent){if("function"!=typeof t.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var o=f[e]||"HTMLEvents",a=r.createEvent(o);a.initEvent(e,!0,!0,i,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(a)}else if(n&&t.click)t.click();else{if("undefined"==typeof t.fireEvent)throw new Error("Browser doesn't support triggering events");t.fireEvent("on"+e)}},unwrapObservable:function(t){return m.isObservable(t)?t():t},peekObservable:function(t){return m.isObservable(t)?t.peek():t},toggleDomNodeCssClass:h,setTextContent:function(t,n){var i=m.utils.unwrapObservable(n);null!==i&&i!==e||(i="");var r=m.virtualElements.firstChild(t);!r||3!=r.nodeType||m.virtualElements.nextSibling(r)?m.virtualElements.setDomNodeChildren(t,[t.ownerDocument.createTextNode(i)]):r.data=i,m.utils.forceRefresh(t)},setElementName:function(t,e){if(t.name=e,v<=7)try{t.mergeAttributes(r.createElement("<input name='"+t.name+"'/>"),!1)}catch(n){}},forceRefresh:function(t){if(v>=9){var e=1==t.nodeType?t:t.parentNode;e.style&&(e.style.zoom=e.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(t){if(v){var e=t.style.width;t.style.width=0,t.style.width=e}},range:function(t,e){t=m.utils.unwrapObservable(t),e=m.utils.unwrapObservable(e);for(var n=[],i=t;i<=e;i++)n.push(i);return n},makeArray:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(t[n]);return e},isIe6:6===v,isIe7:7===v,ieVersion:v,getFormFields:function(t,e){for(var n=m.utils.makeArray(t.getElementsByTagName("input")).concat(m.utils.makeArray(t.getElementsByTagName("textarea"))),i="string"==typeof e?function(t){return t.name===e}:function(t){return e.test(t.name)},r=[],o=n.length-1;o>=0;o--)i(n[o])&&r.push(n[o]);return r},parseJson:function(t){return"string"==typeof t&&(t=m.utils.stringTrim(t))?a&&a.parse?a.parse(t):new Function("return "+t)():null},stringifyJson:function(t,e,n){if(!a||!a.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return a.stringify(m.utils.unwrapObservable(t),e,n)},postJson:function(e,n,i){var o=(i=i||{}).params||{},s=i.includeFields||this.fieldsIncludedWithJsonPost,a=e;if("object"==typeof e&&"form"===m.utils.tagNameLower(e)){var l=e;a=l.action;for(var u=s.length-1;u>=0;u--)for(var h=m.utils.getFormFields(l,s[u]),c=h.length-1;c>=0;c--)o[h[c].name]=h[c].value}n=m.utils.unwrapObservable(n);var d=r.createElement("form");for(var p in d.style.display="none",d.action=a,d.method="post",n){var f=r.createElement("input");f.type="hidden",f.name=p,f.value=m.utils.stringifyJson(m.utils.unwrapObservable(n[p])),d.appendChild(f)}t(o,function(t,e){var n=r.createElement("input");n.type="hidden",n.name=t,n.value=e,d.appendChild(n)}),r.body.appendChild(d),i.submitter?i.submitter(d):d.submit(),setTimeout(function(){d.parentNode.removeChild(d)},0)}}}(),m.exportSymbol("utils",m.utils),m.exportSymbol("utils.arrayForEach",m.utils.arrayForEach),m.exportSymbol("utils.arrayFirst",m.utils.arrayFirst),m.exportSymbol("utils.arrayFilter",m.utils.arrayFilter),m.exportSymbol("utils.arrayGetDistinctValues",m.utils.arrayGetDistinctValues),m.exportSymbol("utils.arrayIndexOf",m.utils.arrayIndexOf),m.exportSymbol("utils.arrayMap",m.utils.arrayMap),m.exportSymbol("utils.arrayPushAll",m.utils.arrayPushAll),m.exportSymbol("utils.arrayRemoveItem",m.utils.arrayRemoveItem),m.exportSymbol("utils.extend",m.utils.extend),m.exportSymbol("utils.fieldsIncludedWithJsonPost",m.utils.fieldsIncludedWithJsonPost),m.exportSymbol("utils.getFormFields",m.utils.getFormFields),m.exportSymbol("utils.peekObservable",m.utils.peekObservable),m.exportSymbol("utils.postJson",m.utils.postJson),m.exportSymbol("utils.parseJson",m.utils.parseJson),m.exportSymbol("utils.registerEventHandler",m.utils.registerEventHandler),m.exportSymbol("utils.stringifyJson",m.utils.stringifyJson),m.exportSymbol("utils.range",m.utils.range),m.exportSymbol("utils.toggleDomNodeCssClass",m.utils.toggleDomNodeCssClass),m.exportSymbol("utils.triggerEvent",m.utils.triggerEvent),m.exportSymbol("utils.unwrapObservable",m.utils.unwrapObservable),m.exportSymbol("utils.objectForEach",m.utils.objectForEach),m.exportSymbol("utils.addOrRemoveItem",m.utils.addOrRemoveItem),m.exportSymbol("utils.setTextContent",m.utils.setTextContent),m.exportSymbol("unwrap",m.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if(1===arguments.length)return function(){return e.apply(t,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),e.apply(t,i)}}),m.utils.domData=new function(){function t(t,o){var s=t[i];if(!(s&&"null"!==s&&r[s])){if(!o)return e;s=t[i]="ko"+n++,r[s]={}}return r[s]}var n=0,i="__ko__"+(new Date).getTime(),r={};return{get:function(n,i){var r=t(n,!1);return r===e?e:r[i]},set:function(n,i,r){r===e&&t(n,!1)===e||(t(n,!0)[i]=r)},clear:function(t){var e=t[i];return!!e&&(delete r[e],t[i]=null,!0)},nextKey:function(){return n+++i}}},m.exportSymbol("utils.domData",m.utils.domData),m.exportSymbol("utils.domData.clear",m.utils.domData.clear),m.utils.domNodeDisposal=new function(){function t(t,n){var i=m.utils.domData.get(t,o);return i===e&&n&&(i=[],m.utils.domData.set(t,o,i)),i}function n(t){m.utils.domData.set(t,o,e)}function i(e){var n=t(e,!1);if(n){n=n.slice(0);for(var i=0;i<n.length;i++)n[i](e)}m.utils.domData.clear(e),m.utils.domNodeDisposal.cleanExternalData(e),l[e.nodeType]&&r(e)}function r(t){for(var e,n=t.firstChild;e=n;)n=e.nextSibling,8===e.nodeType&&i(e)}var o=m.utils.domData.nextKey(),a={1:!0,8:!0,9:!0},l={1:!0,9:!0};return{addDisposeCallback:function(e,n){if("function"!=typeof n)throw new Error("Callback must be a function");t(e,!0).push(n)},removeDisposeCallback:function(e,i){var r=t(e,!1);r&&(m.utils.arrayRemoveItem(r,i),0==r.length&&n(e))},cleanNode:function(t){if(a[t.nodeType]&&(i(t),l[t.nodeType])){var e=[];m.utils.arrayPushAll(e,t.getElementsByTagName("*"));for(var n=0,r=e.length;n<r;n++)i(e[n])}return t},removeNode:function(t){m.cleanNode(t),t.parentNode&&t.parentNode.removeChild(t)},cleanExternalData:function(t){s&&"function"==typeof s.cleanData&&s.cleanData([t])}}},m.cleanNode=m.utils.domNodeDisposal.cleanNode,m.removeNode=m.utils.domNodeDisposal.removeNode,m.exportSymbol("cleanNode",m.cleanNode),m.exportSymbol("removeNode",m.removeNode),m.exportSymbol("utils.domNodeDisposal",m.utils.domNodeDisposal),m.exportSymbol("utils.domNodeDisposal.addDisposeCallback",m.utils.domNodeDisposal.addDisposeCallback),m.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",m.utils.domNodeDisposal.removeDisposeCallback),function(){function t(t,e){e||(e=r);var n=e.parentWindow||e.defaultView||i,o=m.utils.stringTrim(t).toLowerCase(),s=e.createElement("div"),a=o.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!o.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!o.indexOf("<td")||!o.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],l="ignored<div>"+a[1]+t+a[2]+"</div>";for("function"==typeof n.innerShiv?s.appendChild(n.innerShiv(l)):s.innerHTML=l;a[0]--;)s=s.lastChild;return m.utils.makeArray(s.lastChild.childNodes)}function n(t,e){if(s.parseHTML)return s.parseHTML(t,e)||[];var n=s.clean([t],e);if(n&&n[0]){for(var i=n[0];i.parentNode&&11!==i.parentNode.nodeType;)i=i.parentNode;i.parentNode&&i.parentNode.removeChild(i)}return n}m.utils.parseHtmlFragment=function(e,i){return s?n(e,i):t(e,i)},m.utils.setHtml=function(t,n){if(m.utils.emptyDomNode(t),null!==(n=m.utils.unwrapObservable(n))&&n!==e)if("string"!=typeof n&&(n=n.toString()),s)s(t).html(n);else for(var i=m.utils.parseHtmlFragment(n,t.ownerDocument),r=0;r<i.length;r++)t.appendChild(i[r])}}(),m.exportSymbol("utils.parseHtmlFragment",m.utils.parseHtmlFragment),m.exportSymbol("utils.setHtml",m.utils.setHtml),m.memoization=function(){function t(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function n(){return t()+t()}function i(t,e){if(t)if(8==t.nodeType){var n=m.memoization.parseMemoText(t.nodeValue);null!=n&&e.push({domNode:t,memoId:n})}else if(1==t.nodeType)for(var r=0,o=t.childNodes,s=o.length;r<s;r++)i(o[r],e)}var r={};return{memoize:function(t){if("function"!=typeof t)throw new Error("You can only pass a function to ko.memoization.memoize()");var e=n();return r[e]=t,"<!--[ko_memo:"+e+"]-->"},unmemoize:function(t,n){var i=r[t];if(i===e)throw new Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return i.apply(null,n||[]),!0}finally{delete r[t]}},unmemoizeDomNodeAndDescendants:function(t,e){var n=[];i(t,n);for(var r=0,o=n.length;r<o;r++){var s=n[r].domNode,a=[s];e&&m.utils.arrayPushAll(a,e),m.memoization.unmemoize(n[r].memoId,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},parseMemoText:function(t){var e=t.match(/^\[ko_memo\:(.*?)\]$/);return e?e[1]:null}}}(),m.exportSymbol("memoization",m.memoization),m.exportSymbol("memoization.memoize",m.memoization.memoize),m.exportSymbol("memoization.unmemoize",m.memoization.unmemoize),m.exportSymbol("memoization.parseMemoText",m.memoization.parseMemoText),m.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",m.memoization.unmemoizeDomNodeAndDescendants),m.extenders={throttle:function(t,e){t.throttleEvaluation=e;var n=null;return m.dependentObservable({read:t,write:function(i){clearTimeout(n),n=setTimeout(function(){t(i)},e)}})},rateLimit:function(t,e){var n,i,r;"number"==typeof e?n=e:(n=e.timeout,i=e.method),r="notifyWhenChangesStop"==i?c:h,t.limit(function(t){return r(t,n)})},notify:function(t,e){t.equalityComparer="always"==e?null:u}};var g={undefined:1,"boolean":1,number:1,string:1};m.exportSymbol("extenders",m.extenders),m.subscription=function(t,e,n){this._target=t,this.callback=e,this.disposeCallback=n,this.isDisposed=!1,m.exportProperty(this,"dispose",this.dispose)},m.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},m.subscribable=function(){m.utils.setPrototypeOfOrExtend(this,m.subscribable.fn),this._subscriptions={},this._versionNumber=1};var v="change",y={subscribe:function(t,e,n){var i=this;n=n||v;var r=e?t.bind(e):t,o=new m.subscription(i,r,function(){m.utils.arrayRemoveItem(i._subscriptions[n],o),i.afterSubscriptionRemove&&i.afterSubscriptionRemove(n)});return i.beforeSubscriptionAdd&&i.beforeSubscriptionAdd(n),i._subscriptions[n]||(i._subscriptions[n]=[]),i._subscriptions[n].push(o),o},notifySubscribers:function(t,e){if((e=e||v)===v&&this.updateVersion(),this.hasSubscriptionsForEvent(e))try{m.dependencyDetection.begin();for(var n,i=this._subscriptions[e].slice(0),r=0;n=i[r];++r)n.isDisposed||n.callback(t)}finally{m.dependencyDetection.end()}},getVersion:function(){return this._versionNumber},hasChanged:function(t){return this.getVersion()!==t},updateVersion:function(){++this._versionNumber},limit:function(t){var e,n,i,r=this,o=m.isObservable(r),s="beforeChange";r._origNotifySubscribers||(r._origNotifySubscribers=r.notifySubscribers,r.notifySubscribers=function(t,e){e&&e!==v?e===s?r._rateLimitedBeforeChange(t):r._origNotifySubscribers(t,e):r._rateLimitedChange(t)});var a=t(function(){o&&i===r&&(i=r()),e=!1,r.isDifferent(n,i)&&r._origNotifySubscribers(n=i)});r._rateLimitedChange=function(t){e=!0,i=t,a()},r._rateLimitedBeforeChange=function(t){e||(n=t,r._origNotifySubscribers(t,s))}},hasSubscriptionsForEvent:function(t){return this._subscriptions[t]&&this._subscriptions[t].length},getSubscriptionsCount:function(t){if(t)return this._subscriptions[t]&&this._subscriptions[t].length||0;var e=0;return m.utils.objectForEach(this._subscriptions,function(t,n){e+=n.length}),e},isDifferent:function(t,e){return!this.equalityComparer||!this.equalityComparer(t,e)},extend:d};m.exportProperty(y,"subscribe",y.subscribe),m.exportProperty(y,"extend",y.extend),m.exportProperty(y,"getSubscriptionsCount",y.getSubscriptionsCount),m.utils.canSetPrototype&&m.utils.setPrototypeOf(y,Function.prototype),m.subscribable.fn=y,m.isSubscribable=function(t){return null!=t&&"function"==typeof t.subscribe&&"function"==typeof t.notifySubscribers},m.exportSymbol("subscribable",m.subscribable),m.exportSymbol("isSubscribable",m.isSubscribable),m.computedContext=m.dependencyDetection=function(){function t(){return++o}function e(t){r.push(i),i=t}function n(){i=r.pop()}var i,r=[],o=0;return{begin:e,end:n,registerDependency:function(e){if(i){if(!m.isSubscribable(e))throw new Error("Only subscribable things can act as dependencies");i.callback(e,e._id||(e._id=t()))}},ignore:function(t,i,r){try{return e(),t.apply(i,r||[])}finally{n()}},getDependenciesCount:function(){if(i)return i.computed.getDependenciesCount()},isInitial:function(){if(i)return i.isInitial}}}(),m.exportSymbol("computedContext",m.computedContext),m.exportSymbol("computedContext.getDependenciesCount",m.computedContext.getDependenciesCount),m.exportSymbol("computedContext.isInitial",m.computedContext.isInitial),m.exportSymbol("computedContext.isSleeping",m.computedContext.isSleeping),m.exportSymbol("ignoreDependencies",m.ignoreDependencies=m.dependencyDetection.ignore),m.observable=function(e){function n(){return arguments.length>0?(n.isDifferent(i,arguments[0])&&(n.valueWillMutate(),i=arguments[0],t&&(n._latestValue=i),n.valueHasMutated()),this):(m.dependencyDetection.registerDependency(n),i)}var i=e;return m.subscribable.call(n),m.utils.setPrototypeOfOrExtend(n,m.observable.fn),t&&(n._latestValue=i),n.peek=function(){return i},n.valueHasMutated=function(){n.notifySubscribers(i)},n.valueWillMutate=function(){n.notifySubscribers(i,"beforeChange")},m.exportProperty(n,"peek",n.peek),m.exportProperty(n,"valueHasMutated",n.valueHasMutated),m.exportProperty(n,"valueWillMutate",n.valueWillMutate),n},m.observable.fn={equalityComparer:u};var _=m.observable.protoProperty="__ko_proto__";m.observable.fn[_]=m.observable,m.utils.canSetPrototype&&m.utils.setPrototypeOf(m.observable.fn,m.subscribable.fn),m.hasPrototype=function(t,n){return null!==t&&t!==e&&t[_]!==e&&(t[_]===n||m.hasPrototype(t[_],n))},m.isObservable=function(t){return m.hasPrototype(t,m.observable)},m.isWriteableObservable=function(t){return"function"==typeof t&&t[_]===m.observable||!("function"!=typeof t||t[_]!==m.dependentObservable||!t.hasWriteFunction)},m.exportSymbol("observable",m.observable),m.exportSymbol("isObservable",m.isObservable),m.exportSymbol("isWriteableObservable",m.isWriteableObservable),m.exportSymbol("isWritableObservable",m.isWriteableObservable),m.observableArray=function(t){if("object"!=typeof(t=t||[])||!("length"in t))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var e=m.observable(t);return m.utils.setPrototypeOfOrExtend(e,m.observableArray.fn),e.extend({trackArrayChanges:!0})},m.observableArray.fn={remove:function(t){for(var e=this.peek(),n=[],i="function"!=typeof t||m.isObservable(t)?function(e){return e===t}:t,r=0;r<e.length;r++){var o=e[r];i(o)&&(0===n.length&&this.valueWillMutate(),n.push(o),e.splice(r,1),r--)}return n.length&&this.valueHasMutated(),n},removeAll:function(t){if(t===e){var n=this.peek(),i=n.slice(0);return this.valueWillMutate(),n.splice(0,n.length),this.valueHasMutated(),i}return t?this.remove(function(e){return m.utils.arrayIndexOf(t,e)>=0}):[]},destroy:function(t){var e=this.peek(),n="function"!=typeof t||m.isObservable(t)?function(e){return e===t}:t;this.valueWillMutate();for(var i=e.length-1;i>=0;i--){n(e[i])&&(e[i]._destroy=!0)}this.valueHasMutated()},destroyAll:function(t){return t===e?this.destroy(function(){return!0}):t?this.destroy(function(e){return m.utils.arrayIndexOf(t,e)>=0}):[]},indexOf:function(t){var e=this();return m.utils.arrayIndexOf(e,t)},replace:function(t,e){var n=this.indexOf(t);n>=0&&(this.valueWillMutate(),this.peek()[n]=e,this.valueHasMutated())}},m.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(t){m.observableArray.fn[t]=function(){var e=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(e,t,arguments);var n=e[t].apply(e,arguments);return this.valueHasMutated(),n}}),m.utils.arrayForEach(["slice"],function(t){m.observableArray.fn[t]=function(){var e=this();return e[t].apply(e,arguments)}}),m.utils.canSetPrototype&&m.utils.setPrototypeOf(m.observableArray.fn,m.observable.fn),m.exportSymbol("observableArray",m.observableArray);var b="arrayChange";m.extenders.trackArrayChanges=function(t){function e(){if(!r){r=!0;var e=t.notifySubscribers;t.notifySubscribers=function(t,n){return n&&n!==v||++s,e.apply(this,arguments)};var a=[].concat(t.peek()||[]);o=null,i=t.subscribe(function(e){if(e=[].concat(e||[]),t.hasSubscriptionsForEvent(b))var i=n(a,e);a=e,o=null,s=0,i&&i.length&&t.notifySubscribers(i,b)})}}function n(t,e){return(!o||s>1)&&(o=m.utils.compareArrays(t,e,{sparse:!0})),o}if(!t.cacheDiffForKnownOperation){var i,r=!1,o=null,s=0,a=t.beforeSubscriptionAdd,l=t.afterSubscriptionRemove;t.beforeSubscriptionAdd=function(n){a&&a.call(t,n),n===b&&e()},t.afterSubscriptionRemove=function(e){l&&l.call(t,e),e!==b||t.hasSubscriptionsForEvent(b)||(i.dispose(),r=!1)},t.cacheDiffForKnownOperation=function(t,e,n){function i(t,e,n){return a[a.length]={status:t,value:e,index:n}}if(r&&!s){var a=[],l=t.length,u=n.length,h=0;switch(e){case"push":h=l;case"unshift":for(var c=0;c<u;c++)i("added",n[c],h+c);break;case"pop":h=l-1;case"shift":l&&i("deleted",t[h],h);break;case"splice":for(var d=Math.min(Math.max(0,n[0]<0?l+n[0]:n[0]),l),p=1===u?l:Math.min(d+(n[1]||0),l),f=d+u-2,g=Math.max(p,f),v=[],y=[],_=(c=d,2);c<g;++c,++_)c<p&&y.push(i("deleted",t[c],c)),c<f&&v.push(i("added",n[_],c));m.utils.findMovesInArrayComparison(y,v);break;default:return}o=a}}}},m.computed=m.dependentObservable=function(n,i,r){function o(t,e,n){if(w&&e===h)throw Error("A 'pure' computed must not be called recursively");T[t]=n,n._order=k++,n._version=e.getVersion()}function s(){var t,e;for(t in T)if(T.hasOwnProperty(t)&&(e=T[t])._target.hasChanged(e._version))return!0}function a(){!x&&T&&m.utils.objectForEach(T,function(t,e){e.dispose&&e.dispose()}),T=null,k=0,_=!0,g=!1,x=!1}function l(){var t=h.throttleEvaluation;t&&t>=0?(clearTimeout(D),D=setTimeout(function(){u(!0)},t)):h._evalRateLimited?h._evalRateLimited():u(!0)}function u(n){if(!v&&!_){if(M&&M()){if(!y)return void L()}else y=!1;v=!0;try{var r=T,s=k,a=w?e:!k;m.dependencyDetection.begin({callback:function(t,e){_||(s&&r[e]?(o(e,t,r[e]),delete r[e],--s):T[e]||o(e,t,x?{_target:t}:t.subscribe(l)))},computed:h,isInitial:a}),T={},k=0;try{var u=i?b.call(i):b()}finally{m.dependencyDetection.end(),s&&!x&&m.utils.objectForEach(r,function(t,e){e.dispose&&e.dispose()}),g=!1}h.isDifferent(f,u)&&(x||p(f,"beforeChange"),f=u,t&&(h._latestValue=f),x?h.updateVersion():n&&p(f)),a&&p(f,"awake")}finally{v=!1}k||L()}}function h(){if(arguments.length>0){if("function"!=typeof S)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return S.apply(i,arguments),this}return m.dependencyDetection.registerDependency(h),(g||x&&s())&&u(),f}function c(){return(g&&!k||x&&s())&&u(),f}function d(){return g||k>0}function p(t,e){h.notifySubscribers(t,e)}var f,g=!0,v=!1,y=!1,_=!1,b=n,w=!1,x=!1;if(b&&"object"==typeof b?b=(r=b).read:(r=r||{},b||(b=r.read)),"function"!=typeof b)throw new Error("Pass a function that returns the value of the ko.computed");var S=r.write,C=r.disposeWhenNodeIsRemoved||r.disposeWhenNodeIsRemoved||null,E=r.disposeWhen||r.disposeWhen,M=E,L=a,T={},k=0,D=null;i||(i=r.owner),m.subscribable.call(h),m.utils.setPrototypeOfOrExtend(h,m.dependentObservable.fn),h.peek=c,h.getDependenciesCount=function(){return k},h.hasWriteFunction="function"==typeof S,h.dispose=function(){L()},h.isActive=d;var P=h.limit;return h.limit=function(t){P.call(h,t),h._evalRateLimited=function(){h._rateLimitedBeforeChange(f),g=!0,h._rateLimitedChange(h)}},r.pure?(w=!0,x=!0,h.beforeSubscriptionAdd=function(t){if(!_&&x&&"change"==t){if(x=!1,g||s())T=null,k=0,g=!0,u();else{var e=[];m.utils.objectForEach(T,function(t,n){e[n._order]=t}),m.utils.arrayForEach(e,function(t,e){var n=T[t],i=n._target.subscribe(l);i._order=e,i._version=n._version,T[t]=i})}_||p(f,"awake")}},h.afterSubscriptionRemove=function(t){_||"change"!=t||h.hasSubscriptionsForEvent("change")||(m.utils.objectForEach(T,function(t,e){e.dispose&&(T[t]={_target:e._target,_order:e._order,_version:e._version},e.dispose())}),x=!0,p(e,"asleep"))},h._originalGetVersion=h.getVersion,h.getVersion=function(){return x&&(g||s())&&u(),h._originalGetVersion()}):r.deferEvaluation&&(h.beforeSubscriptionAdd=function(t){"change"!=t&&"beforeChange"!=t||c()}),m.exportProperty(h,"peek",h.peek),m.exportProperty(h,"dispose",h.dispose),m.exportProperty(h,"isActive",h.isActive),m.exportProperty(h,"getDependenciesCount",h.getDependenciesCount),C&&(y=!0,C.nodeType&&(M=function(){return!m.utils.domNodeIsAttachedToDocument(C)||E&&E()})),x||r.deferEvaluation||u(),C&&d()&&C.nodeType&&(L=function(){m.utils.domNodeDisposal.removeDisposeCallback(C,L),a()},m.utils.domNodeDisposal.addDisposeCallback(C,L)),h},m.isComputed=function(t){return m.hasPrototype(t,m.dependentObservable)};var w,x=m.observable.protoProperty;m.dependentObservable[x]=m.observable,m.dependentObservable.fn={equalityComparer:u},m.dependentObservable.fn[x]=m.dependentObservable,m.utils.canSetPrototype&&m.utils.setPrototypeOf(m.dependentObservable.fn,m.subscribable.fn),m.exportSymbol("dependentObservable",m.dependentObservable),m.exportSymbol("computed",m.dependentObservable),m.exportSymbol("isComputed",m.isComputed),m.pureComputed=function(t,e){return"function"==typeof t?m.computed(t,e,{pure:!0}):((t=m.utils.extend({},t)).pure=!0,m.computed(t,e))},m.exportSymbol("pureComputed",m.pureComputed),function(){function t(r,o,s){if(s=s||new i,!!("object"!=typeof(r=o(r))||null===r||r===e||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean))return r;var a=r instanceof Array?[]:{};return s.save(r,a),n(r,function(n){var i=o(r[n]);switch(typeof i){case"boolean":case"number":case"string":case"function":a[n]=i;break;case"object":case"undefined":var l=s.get(i);a[n]=l!==e?l:t(i,o,s)}}),a}function n(t,e){if(t instanceof Array){for(var n=0;n<t.length;n++)e(n);"function"==typeof t.toJSON&&e("toJSON")}else for(var i in t)e(i)}function i(){this.keys=[],this.values=[]}var r=10;m.toJS=function(e){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return t(e,function(t){for(var e=0;m.isObservable(t)&&e<r;e++)t=t();return t})},m.toJSON=function(t,e,n){var i=m.toJS(t);return m.utils.stringifyJson(i,e,n)},i.prototype={constructor:i,save:function(t,e){var n=m.utils.arrayIndexOf(this.keys,t);n>=0?this.values[n]=e:(this.keys.push(t),this.values.push(e))},get:function(t){var n=m.utils.arrayIndexOf(this.keys,t);return n>=0?this.values[n]:e}}}(),m.exportSymbol("toJS",m.toJS),m.exportSymbol("toJSON",m.toJSON),w="__ko__hasDomDataOptionValue__",m.selectExtensions={readValue:function(t){switch(m.utils.tagNameLower(t)){case"option":return!0===t[w]?m.utils.domData.get(t,m.bindingHandlers.options.optionValueDomDataKey):m.utils.ieVersion<=7?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return t.selectedIndex>=0?m.selectExtensions.readValue(t.options[t.selectedIndex]):e;default:return t.value}},writeValue:function(t,n,i){switch(m.utils.tagNameLower(t)){case"option":switch(typeof n){case"string":m.utils.domData.set(t,m.bindingHandlers.options.optionValueDomDataKey,e),w in t&&delete t[w],t.value=n;break;default:m.utils.domData.set(t,m.bindingHandlers.options.optionValueDomDataKey,n),t[w]=!0,t.value="number"==typeof n?n:""}break;case"select":""!==n&&null!==n||(n=e);for(var r,o=-1,s=0,a=t.options.length;s<a;++s)if((r=m.selectExtensions.readValue(t.options[s]))==n||""==r&&n===e){o=s;break}(i||o>=0||n===e&&t.size>1)&&(t.selectedIndex=o);break;default:null!==n&&n!==e||(n=""),t.value=n}}},m.exportSymbol("selectExtensions",m.selectExtensions),m.exportSymbol("selectExtensions.readValue",m.selectExtensions.readValue),m.exportSymbol("selectExtensions.writeValue",m.selectExtensions.writeValue),m.expressionRewriting=function(){function t(t){if(m.utils.arrayIndexOf(i,t)>=0)return!1;var e=t.match(r)
;return null!==e&&(e[1]?"Object("+e[1]+")"+e[2]:t)}function e(t){var e=m.utils.stringTrim(t);123===e.charCodeAt(0)&&(e=e.slice(1,-1));var n,i=[],r=e.match(s),o=[],u=0;if(r){r.push(",");for(var h,c=0;h=r[c];++c){var d=h.charCodeAt(0);if(44===d){if(u<=0){i.push(n&&o.length?{key:n,value:o.join("")}:{unknown:n||o.join("")}),n=u=0,o=[];continue}}else if(58===d){if(!u&&!n&&1===o.length){n=o.pop();continue}}else if(47===d&&c&&h.length>1){var p=r[c-1].match(a);p&&!l[p[0]]&&((r=(e=e.substr(e.indexOf(h)+1)).match(s)).push(","),c=-1,h="/")}else 40===d||123===d||91===d?++u:41===d||125===d||93===d?--u:n||o.length||34!==d&&39!==d||(h=h.slice(1,-1));o.push(h)}}return i}function n(n,i){function r(e,n){function i(t){return!t||!t.preprocess||(n=t.preprocess(n,e,r))}var h;if(!l){if(!i(m.getBindingHandler(e)))return;u[e]&&(h=t(n))&&s.push("'"+e+"':function(_z){"+h+"=_z}")}a&&(n="function(){return "+n+" }"),o.push("'"+e+"':"+n)}var o=[],s=[],a=(i=i||{}).valueAccessors,l=i.bindingParams,h="string"==typeof n?e(n):n;return m.utils.arrayForEach(h,function(t){r(t.key||t.unknown,t.value)}),s.length&&r("_ko_property_writers","{"+s.join(",")+" }"),o.join(",")}var i=["true","false","null","undefined"],r=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,o=",\"'{}()/:[\\]",s=RegExp('"(?:[^"\\\\]|\\\\.)*"'+"|"+"'(?:[^'\\\\]|\\\\.)*'"+"|"+"/(?:[^/\\\\]|\\\\.)*/w*"+"|"+("[^\\s:,/][^"+o+"]*[^\\s"+o+"]")+"|"+"[^\\s]","g"),a=/[\])"'A-Za-z0-9_$]+$/,l={"in":1,"return":1,"typeof":1},u={};return{bindingRewriteValidators:[],twoWayBindings:u,parseObjectLiteral:e,preProcessBindings:n,keyValueArrayContainsKey:function(t,e){for(var n=0;n<t.length;n++)if(t[n].key==e)return!0;return!1},writeValueToProperty:function(t,e,n,i,r){if(t&&m.isObservable(t))!m.isWriteableObservable(t)||r&&t.peek()===i||t(i);else{var o=e.get("_ko_property_writers");o&&o[n]&&o[n](i)}}}}(),m.exportSymbol("expressionRewriting",m.expressionRewriting),m.exportSymbol("expressionRewriting.bindingRewriteValidators",m.expressionRewriting.bindingRewriteValidators),m.exportSymbol("expressionRewriting.parseObjectLiteral",m.expressionRewriting.parseObjectLiteral),m.exportSymbol("expressionRewriting.preProcessBindings",m.expressionRewriting.preProcessBindings),m.exportSymbol("expressionRewriting._twoWayBindings",m.expressionRewriting.twoWayBindings),m.exportSymbol("jsonExpressionRewriting",m.expressionRewriting),m.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",m.expressionRewriting.preProcessBindings),function(){function t(t){return 8==t.nodeType&&a.test(s?t.text:t.nodeValue)}function e(t){return 8==t.nodeType&&l.test(s?t.text:t.nodeValue)}function n(n,i){for(var r=n,o=1,s=[];r=r.nextSibling;){if(e(r)&&0===--o)return s;s.push(r),t(r)&&o++}if(!i)throw new Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function i(t,e){var i=n(t,e);return i?i.length>0?i[i.length-1].nextSibling:t.nextSibling:null}function o(n){var r=n.firstChild,o=null;if(r)do{if(o)o.push(r);else if(t(r)){var s=i(r,!0);s?r=s:o=[r]}else e(r)&&(o=[r])}while(r=r.nextSibling);return o}var s=r&&"<!--test-->"===r.createComment("test").text,a=s?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,l=s?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,u={ul:!0,ol:!0};m.virtualElements={allowedBindings:{},childNodes:function(e){return t(e)?n(e):e.childNodes},emptyNode:function(e){if(t(e))for(var n=m.virtualElements.childNodes(e),i=0,r=n.length;i<r;i++)m.removeNode(n[i]);else m.utils.emptyDomNode(e)},setDomNodeChildren:function(e,n){if(t(e)){m.virtualElements.emptyNode(e);for(var i=e.nextSibling,r=0,o=n.length;r<o;r++)i.parentNode.insertBefore(n[r],i)}else m.utils.setDomNodeChildren(e,n)},prepend:function(e,n){t(e)?e.parentNode.insertBefore(n,e.nextSibling):e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)},insertAfter:function(e,n,i){i?t(e)?e.parentNode.insertBefore(n,i.nextSibling):i.nextSibling?e.insertBefore(n,i.nextSibling):e.appendChild(n):m.virtualElements.prepend(e,n)},firstChild:function(n){return t(n)?!n.nextSibling||e(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return t(n)&&(n=i(n)),n.nextSibling&&e(n.nextSibling)?null:n.nextSibling},hasBindingValue:t,virtualNodeBindingValue:function(t){var e=(s?t.text:t.nodeValue).match(a);return e?e[1]:null},normaliseVirtualElementDomStructure:function(t){if(u[m.utils.tagNameLower(t)]){var e=t.firstChild;if(e)do{if(1===e.nodeType){var n=o(e);if(n)for(var i=e.nextSibling,r=0;r<n.length;r++)i?t.insertBefore(n[r],i):t.appendChild(n[r])}}while(e=e.nextSibling)}}}}(),m.exportSymbol("virtualElements",m.virtualElements),m.exportSymbol("virtualElements.allowedBindings",m.virtualElements.allowedBindings),m.exportSymbol("virtualElements.emptyNode",m.virtualElements.emptyNode),m.exportSymbol("virtualElements.insertAfter",m.virtualElements.insertAfter),m.exportSymbol("virtualElements.prepend",m.virtualElements.prepend),m.exportSymbol("virtualElements.setDomNodeChildren",m.virtualElements.setDomNodeChildren),function(){function t(t,n,i){var r=t+(i&&i.valueAccessors||"");return n[r]||(n[r]=e(t,i))}function e(t,e){var n=m.expressionRewriting.preProcessBindings(t,e);return new Function("$context","$element","with($context){with($data||{}){return{"+n+"}}}")}var n="data-bind";m.bindingProvider=function(){this.bindingCache={}},m.utils.extend(m.bindingProvider.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return null!=t.getAttribute(n)||m.components.getComponentNameForNode(t);case 8:return m.virtualElements.hasBindingValue(t);default:return!1}},getBindings:function(t,e){var n=this.getBindingsString(t,e),i=n?this.parseBindingsString(n,e,t):null;return m.components.addBindingsForCustomElement(i,t,e,!1)},getBindingAccessors:function(t,e){var n=this.getBindingsString(t,e),i=n?this.parseBindingsString(n,e,t,{valueAccessors:!0}):null;return m.components.addBindingsForCustomElement(i,t,e,!0)},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute(n);case 8:return m.virtualElements.virtualNodeBindingValue(t);default:return null}},parseBindingsString:function(e,n,i,r){try{return t(e,this.bindingCache,r)(n,i)}catch(o){throw o.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+o.message,o}}}),m.bindingProvider.instance=new m.bindingProvider}(),m.exportSymbol("bindingProvider",m.bindingProvider),function(){function t(t){return function(){return t}}function n(t){return t()}function r(t){return m.utils.objectMap(m.dependencyDetection.ignore(t),function(e,n){return function(){return t()[n]}})}function o(e,n,i){return"function"==typeof e?r(e.bind(null,n,i)):m.utils.objectMap(e,t)}function a(t,e){return r(this.getBindings.bind(this,t,e))}function l(t){if(!m.virtualElements.allowedBindings[t])throw new Error("The binding '"+t+"' cannot be used with virtual elements")}function u(t,e,n){var i,r=m.virtualElements.firstChild(e),o=m.bindingProvider.instance,s=o.preprocessNode;if(s){for(;i=r;)r=m.virtualElements.nextSibling(i),s.call(o,i);r=m.virtualElements.firstChild(e)}for(;i=r;)r=m.virtualElements.nextSibling(i),h(t,i,n)}function h(t,e,n){var i=!0,r=1===e.nodeType;r&&m.virtualElements.normaliseVirtualElementDomStructure(e),(r&&n||m.bindingProvider.instance.nodeHasBindings(e))&&(i=d(e,null,t,n).shouldBindDescendants),i&&!f[m.utils.tagNameLower(e)]&&u(t,e,!r)}function c(t){var e=[],n={},i=[];return m.utils.objectForEach(t,function r(o){if(!n[o]){var s=m.getBindingHandler(o);s&&(s.after&&(i.push(o),m.utils.arrayForEach(s.after,function(e){if(t[e]){if(-1!==m.utils.arrayIndexOf(i,e))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));r(e)}}),i.length--),e.push({key:o,handler:s})),n[o]=!0}}),e}function d(t,i,r,o){function s(){return m.utils.objectMap(v?v():u,n)}var u,h,d=m.utils.domData.get(t,g);if(!i){if(d)throw Error("You cannot apply bindings multiple times to the same element.");m.utils.domData.set(t,g,!0)}if(!d&&o&&m.storedBindingContextForNode(t,r),i&&"function"!=typeof i)u=i;else{var p=m.bindingProvider.instance,f=p.getBindingAccessors||a,v=m.dependentObservable(function(){return(u=i?i(r,t):f.call(p,t,r))&&r._subscribable&&r._subscribable(),u},null,{disposeWhenNodeIsRemoved:t});u&&v.isActive()||(v=null)}if(u){var y=v?function(t){return function(){return n(v()[t])}}:function(t){return u[t]};s.get=function(t){return u[t]&&n(y(t))},s.has=function(t){return t in u};var _=c(u);m.utils.arrayForEach(_,function(n){var i=n.handler.init,o=n.handler.update,a=n.key;8===t.nodeType&&l(a);try{"function"==typeof i&&m.dependencyDetection.ignore(function(){var n=i(t,y(a),s,r.$data,r);if(n&&n.controlsDescendantBindings){if(h!==e)throw new Error("Multiple bindings ("+h+" and "+a+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");h=a}}),"function"==typeof o&&m.dependentObservable(function(){o(t,y(a),s,r.$data,r)},null,{disposeWhenNodeIsRemoved:t})}catch(c){throw c.message='Unable to process binding "'+a+": "+u[a]+'"\nMessage: '+c.message,c}})}return{shouldBindDescendants:h===e}}function p(t){return t&&t instanceof m.bindingContext?t:new m.bindingContext(t)}m.bindingHandlers={};var f={script:!0,textarea:!0};m.getBindingHandler=function(t){return m.bindingHandlers[t]},m.bindingContext=function(t,n,i,r){function o(){var e=u?t():t,o=m.utils.unwrapObservable(e);return n?(n._subscribable&&n._subscribable(),m.utils.extend(l,n),h&&(l._subscribable=h)):(l.$parents=[],l.$root=o,l.ko=m),l.$rawData=e,l.$data=o,i&&(l[i]=o),r&&r(l,n,o),l.$data}function s(){return a&&!m.utils.anyDomNodeIsAttachedToDocument(a)}var a,l=this,u="function"==typeof t&&!m.isObservable(t),h=m.dependentObservable(o,null,{disposeWhen:s,disposeWhenNodeIsRemoved:!0});h.isActive()&&(l._subscribable=h,h.equalityComparer=null,a=[],h._addNode=function(t){a.push(t),m.utils.domNodeDisposal.addDisposeCallback(t,function(t){m.utils.arrayRemoveItem(a,t),a.length||(h.dispose(),l._subscribable=h=e)})})},m.bindingContext.prototype.createChildContext=function(t,e,n){return new m.bindingContext(t,this,e,function(t,e){t.$parentContext=e,t.$parent=e.$data,t.$parents=(e.$parents||[]).slice(0),t.$parents.unshift(t.$parent),n&&n(t)})},m.bindingContext.prototype.extend=function(t){return new m.bindingContext(this._subscribable||this.$data,this,null,function(e,n){e.$rawData=n.$rawData,m.utils.extend(e,"function"==typeof t?t():t)})};var g=m.utils.domData.nextKey(),v=m.utils.domData.nextKey();m.storedBindingContextForNode=function(t,e){if(2!=arguments.length)return m.utils.domData.get(t,v);m.utils.domData.set(t,v,e),e._subscribable&&e._subscribable._addNode(t)},m.applyBindingAccessorsToNode=function(t,e,n){return 1===t.nodeType&&m.virtualElements.normaliseVirtualElementDomStructure(t),d(t,e,p(n),!0)},m.applyBindingsToNode=function(t,e,n){var i=p(n);return m.applyBindingAccessorsToNode(t,o(e,i,t),i)},m.applyBindingsToDescendants=function(t,e){1!==e.nodeType&&8!==e.nodeType||u(p(t),e,!0)},m.applyBindings=function(t,e){if(!s&&i.jQuery&&(s=i.jQuery),e&&1!==e.nodeType&&8!==e.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");e=e||i.document.body,h(p(t),e,!0)},m.contextFor=function(t){switch(t.nodeType){case 1:case 8:var n=m.storedBindingContextForNode(t);if(n)return n;if(t.parentNode)return m.contextFor(t.parentNode)}return e},m.dataFor=function(t){var n=m.contextFor(t);return n?n.$data:e},m.exportSymbol("bindingHandlers",m.bindingHandlers),m.exportSymbol("applyBindings",m.applyBindings),m.exportSymbol("applyBindingsToDescendants",m.applyBindingsToDescendants),m.exportSymbol("applyBindingAccessorsToNode",m.applyBindingAccessorsToNode),m.exportSymbol("applyBindingsToNode",m.applyBindingsToNode),m.exportSymbol("contextFor",m.contextFor),m.exportSymbol("dataFor",m.dataFor)}(),function(t){function e(e,n){return e.hasOwnProperty(n)?e[n]:t}function n(t,n){var r,a=e(o,t);a?a.subscribe(n):((a=o[t]=new m.subscribable).subscribe(n),i(t,function(e,n){var i=!(!n||!n.synchronous);s[t]={definition:e,isSynchronousComponent:i},delete o[t],r||i?a.notifySubscribers(e):setTimeout(function(){a.notifySubscribers(e)},0)}),r=!0)}function i(t,e){r("getConfig",[t],function(n){n?r("loadComponent",[t,n],function(t){e(t,n)}):e(null,null)})}function r(e,n,i,o){o||(o=m.components.loaders.slice(0));var s=o.shift();if(s){var a=s[e];if(a){var l=!1;if(a.apply(s,n.concat(function(t){l?i(null):null!==t?i(t):r(e,n,i,o)}))!==t&&(l=!0,!s.suppressLoaderExceptions))throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else r(e,n,i,o)}else i(null)}var o={},s={};m.components={get:function(t,i){var r=e(s,t);r?r.isSynchronousComponent?m.dependencyDetection.ignore(function(){i(r.definition)}):setTimeout(function(){i(r.definition)},0):n(t,i)},clearCachedDefinition:function(t){delete s[t]},_getFirstResultFromLoaders:r},m.components.loaders=[],m.exportSymbol("components",m.components),m.exportSymbol("components.get",m.components.get),m.exportSymbol("components.clearCachedDefinition",m.components.clearCachedDefinition)}(),function(){function t(t,e,n,i){var r={},o=2,s=function(){0==--o&&i(r)},a=n.template,l=n.viewModel;a?u(e,a,function(e){m.components._getFirstResultFromLoaders("loadTemplate",[t,e],function(t){r.template=t,s()})}):s(),l?u(e,l,function(e){m.components._getFirstResultFromLoaders("loadViewModel",[t,e],function(t){r[d]=t,s()})}):s()}function e(t,e,n){if("string"==typeof e)n(m.utils.parseHtmlFragment(e));else if(e instanceof Array)n(e);else if(a(e))n(m.utils.makeArray(e.childNodes));else if(e.element){var i=e.element;if(s(i))n(o(i));else if("string"==typeof i){var l=r.getElementById(i);l?n(o(l)):t("Cannot find element with ID "+i)}else t("Unknown element type: "+i)}else t("Unknown template value: "+e)}function n(t,e,i){if("function"==typeof e)i(function(t){return new e(t)});else if("function"==typeof e[d])i(e[d]);else if("instance"in e){var r=e.instance;i(function(){return r})}else"viewModel"in e?n(t,e.viewModel,i):t("Unknown viewModel value: "+e)}function o(t){switch(m.utils.tagNameLower(t)){case"script":return m.utils.parseHtmlFragment(t.text);case"textarea":return m.utils.parseHtmlFragment(t.value);case"template":if(a(t.content))return m.utils.cloneNodes(t.content.childNodes)}return m.utils.cloneNodes(t.childNodes)}function s(t){return i.HTMLElement?t instanceof HTMLElement:t&&t.tagName&&1===t.nodeType}function a(t){return i.DocumentFragment?t instanceof DocumentFragment:t&&11===t.nodeType}function u(t,e,n){"string"==typeof e.require?l||i.require?(l||i.require)([e.require],n):t("Uses require, but no AMD loader is present"):n(e)}function h(t){return function(e){throw new Error("Component '"+t+"': "+e)}}var c={};m.components.register=function(t,e){if(!e)throw new Error("Invalid configuration for "+t);if(m.components.isRegistered(t))throw new Error("Component "+t+" is already registered");c[t]=e},m.components.isRegistered=function(t){return t in c},m.components.unregister=function(t){delete c[t],m.components.clearCachedDefinition(t)},m.components.defaultLoader={getConfig:function(t,e){e(c.hasOwnProperty(t)?c[t]:null)},loadComponent:function(e,n,i){var r=h(e);u(r,n,function(n){t(e,r,n,i)})},loadTemplate:function(t,n,i){e(h(t),n,i)},loadViewModel:function(t,e,i){n(h(t),e,i)}};var d="createViewModel";m.exportSymbol("components.register",m.components.register),m.exportSymbol("components.isRegistered",m.components.isRegistered),m.exportSymbol("components.unregister",m.components.unregister),m.exportSymbol("components.defaultLoader",m.components.defaultLoader),m.components.loaders.push(m.components.defaultLoader),m.components._allRegisteredComponents=c}(),function(){function t(t,e){var n=t.getAttribute("params");if(n){var r=i.parseBindingsString(n,e,t,{valueAccessors:!0,bindingParams:!0}),o=m.utils.objectMap(r,function(e){return m.computed(e,null,{disposeWhenNodeIsRemoved:t})}),s=m.utils.objectMap(o,function(e){var n=e.peek();return e.isActive()?m.computed({read:function(){return m.utils.unwrapObservable(e())},write:m.isWriteableObservable(n)&&function(t){e()(t)},disposeWhenNodeIsRemoved:t}):n});return s.hasOwnProperty("$raw")||(s.$raw=o),s}return{$raw:{}}}m.components.getComponentNameForNode=function(t){var e=m.utils.tagNameLower(t);return m.components.isRegistered(e)&&e},m.components.addBindingsForCustomElement=function(e,n,i,r){if(1===n.nodeType){var o=m.components.getComponentNameForNode(n);if(o){if((e=e||{}).component)throw new Error('Cannot use the "component" binding on a custom element matching a component');var s={name:o,params:t(n,i)};e.component=r?function(){return s}:s}}return e};var e,n,i=new m.bindingProvider;m.utils.ieVersion<9&&(m.components.register=(n=m.components.register,function(t){return r.createElement(t),n.apply(this,arguments)}),r.createDocumentFragment=(e=r.createDocumentFragment,function(){var t=e(),n=m.components._allRegisteredComponents;for(var i in n)n.hasOwnProperty(i)&&t.createElement(i);return t}))}(),function(t){function e(t,e,n){var i=e.template;if(!i)throw new Error("Component '"+t+"' has no template");var r=m.utils.cloneNodes(i);m.virtualElements.setDomNodeChildren(n,r)}function n(t,e,n,i){var r=t.createViewModel;return r?r.call(t,i,{element:e,templateNodes:n}):i}var i=0;m.bindingHandlers.component={init:function(r,o,s,a,l){var u,h,c=function(){var t=u&&u.dispose;"function"==typeof t&&t.call(u),h=null},d=m.utils.makeArray(m.virtualElements.childNodes(r));return m.utils.domNodeDisposal.addDisposeCallback(r,c),m.computed(function(){var s,a,p=m.utils.unwrapObservable(o());if("string"==typeof p?s=p:(s=m.utils.unwrapObservable(p.name),a=m.utils.unwrapObservable(p.params)),!s)throw new Error("No component name specified");var f=h=++i;m.components.get(s,function(i){if(h===f){if(c(),!i)throw new Error("Unknown component '"+s+"'");e(s,i,r);var o=n(i,r,d,a),p=l.createChildContext(o,t,function(t){t.$component=o,t.$componentTemplateNodes=d});u=o,m.applyBindingsToDescendants(p,r)}})},null,{disposeWhenNodeIsRemoved:r}),{controlsDescendantBindings:!0}}},m.virtualElements.allowedBindings.component=!0}();var S={"class":"className","for":"htmlFor"};m.bindingHandlers.attr={update:function(t,n){var i=m.utils.unwrapObservable(n())||{};m.utils.objectForEach(i,function(n,i){var r=!1===(i=m.utils.unwrapObservable(i))||null===i||i===e;r&&t.removeAttribute(n),m.utils.ieVersion<=8&&n in S?(n=S[n],r?t.removeAttribute(n):t[n]=i):r||t.setAttribute(n,i.toString()),"name"===n&&m.utils.setElementName(t,r?"":i.toString())})}},m.bindingHandlers.checked={after:["value","attr"],init:function(t,n,i){function r(){var e=t.checked,r=c?s():e;if(!m.computedContext.isInitial()&&(!l||e)){var o=m.dependencyDetection.ignore(n);u?h!==r?(e&&(m.utils.addOrRemoveItem(o,r,!0),m.utils.addOrRemoveItem(o,h,!1)),h=r):m.utils.addOrRemoveItem(o,r,e):m.expressionRewriting.writeValueToProperty(o,i,"checked",r,!0)}}function o(){var e=m.utils.unwrapObservable(n());t.checked=u?m.utils.arrayIndexOf(e,s())>=0:a?e:s()===e}var s=m.pureComputed(function(){return i.has("checkedValue")?m.utils.unwrapObservable(i.get("checkedValue")):i.has("value")?m.utils.unwrapObservable(i.get("value")):t.value}),a="checkbox"==t.type,l="radio"==t.type;if(a||l){var u=a&&m.utils.unwrapObservable(n())instanceof Array,h=u?s():e,c=l||u;l&&!t.name&&m.bindingHandlers.uniqueName.init(t,function(){return!0}),m.computed(r,null,{disposeWhenNodeIsRemoved:t}),m.utils.registerEventHandler(t,"click",r),m.computed(o,null,{disposeWhenNodeIsRemoved:t})}}},m.expressionRewriting.twoWayBindings.checked=!0,m.bindingHandlers.checkedValue={update:function(t,e){t.value=m.utils.unwrapObservable(e())}};var C="__ko__cssValue";m.bindingHandlers.css={update:function(t,e){var n=m.utils.unwrapObservable(e());null!==n&&"object"==typeof n?m.utils.objectForEach(n,function(e,n){n=m.utils.unwrapObservable(n),m.utils.toggleDomNodeCssClass(t,e,n)}):(n=String(n||""),m.utils.toggleDomNodeCssClass(t,t[C],!1),t[C]=n,m.utils.toggleDomNodeCssClass(t,n,!0))}},m.bindingHandlers.enable={update:function(t,e){var n=m.utils.unwrapObservable(e());n&&t.disabled?t.removeAttribute("disabled"):n||t.disabled||(t.disabled=!0)}},m.bindingHandlers.disable={update:function(t,e){m.bindingHandlers.enable.update(t,function(){return!m.utils.unwrapObservable(e())})}},m.bindingHandlers.event={init:function(t,e,n,i,r){var o=e()||{};m.utils.objectForEach(o,function(o){"string"==typeof o&&m.utils.registerEventHandler(t,o,function(t){var s,a=e()[o];if(a){try{var l=m.utils.makeArray(arguments);i=r.$data,l.unshift(i),s=a.apply(i,l)}finally{!0!==s&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}!1!==n.get(o+"Bubble")||(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())}})})}},m.bindingHandlers.foreach={makeTemplateValueAccessor:function(t){return function(){var e=t(),n=m.utils.peekObservable(e);return n&&"number"!=typeof n.length?(m.utils.unwrapObservable(e),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:m.nativeTemplateEngine.instance}):{foreach:e,templateEngine:m.nativeTemplateEngine.instance}}},init:function(t,e){return m.bindingHandlers.template.init(t,m.bindingHandlers.foreach.makeTemplateValueAccessor(e))},update:function(t,e,n,i,r){return m.bindingHandlers.template.update(t,m.bindingHandlers.foreach.makeTemplateValueAccessor(e),n,i,r)}},m.expressionRewriting.bindingRewriteValidators.foreach=!1,m.virtualElements.allowedBindings.foreach=!0;var E="__ko_hasfocusUpdating",M="__ko_hasfocusLastValue";m.bindingHandlers.hasfocus={init:function(t,e,n){var i=function(i){t[E]=!0;var r=t.ownerDocument;if("activeElement"in r){var o;try{o=r.activeElement}catch(a){o=r.body}i=o===t}var s=e();m.expressionRewriting.writeValueToProperty(s,n,"hasfocus",i,!0),t[M]=i,t[E]=!1},r=i.bind(null,!0),o=i.bind(null,!1);m.utils.registerEventHandler(t,"focus",r),m.utils.registerEventHandler(t,"focusin",r),m.utils.registerEventHandler(t,"blur",o),m.utils.registerEventHandler(t,"focusout",o)},update:function(t,e){var n=!!m.utils.unwrapObservable(e());t[E]||t[M]===n||(n?t.focus():t.blur(),m.dependencyDetection.ignore(m.utils.triggerEvent,null,[t,n?"focusin":"focusout"]))}},m.expressionRewriting.twoWayBindings.hasfocus=!0,m.bindingHandlers.hasFocus=m.bindingHandlers.hasfocus,m.expressionRewriting.twoWayBindings.hasFocus=!0,m.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){m.utils.setHtml(t,e())}},f("if"),f("ifnot",!1,!0),f("with",!0,!1,function(t,e){return t.createChildContext(e)});var L={};m.bindingHandlers.options={init:function(t){if("select"!==m.utils.tagNameLower(t))throw new Error("options binding applies only to SELECT elements");for(;t.length>0;)t.remove(0);return{controlsDescendantBindings:!0}},update:function(t,n,i){function r(){return m.utils.arrayFilter(t.options,function(t){return t.selected})}function o(t,e,n){var i=typeof e;return"function"==i?e(t):"string"==i?t[e]:n}function s(n,r,s){s.length&&(y=!f&&s[0].selected?[m.selectExtensions.readValue(s[0])]:[],_=!0);var a=t.ownerDocument.createElement("option");if(n===L)m.utils.setTextContent(a,i.get("optionsCaption")),m.selectExtensions.writeValue(a,e);else{var l=o(n,i.get("optionsValue"),n);m.selectExtensions.writeValue(a,m.utils.unwrapObservable(l));var u=o(n,i.get("optionsText"),l);m.utils.setTextContent(a,u)}return[a]}function a(e,n){if(_&&f)m.selectExtensions.writeValue(t,m.utils.unwrapObservable(i.get("value")),!0);else if(y.length){var r=m.utils.arrayIndexOf(y,m.selectExtensions.readValue(n[0]))>=0;m.utils.setOptionNodeSelectionState(n[0],r),_&&!r&&m.dependencyDetection.ignore(m.utils.triggerEvent,null,[t,"change"])}}var l,u,h=0==t.length,c=t.multiple,d=!h&&c?t.scrollTop:null,p=m.utils.unwrapObservable(n()),f=i.get("valueAllowUnset")&&i.has("value"),g=i.get("optionsIncludeDestroyed"),v={},y=[];f||(c?y=m.utils.arrayMap(r(),m.selectExtensions.readValue):t.selectedIndex>=0&&y.push(m.selectExtensions.readValue(t.options[t.selectedIndex]))),p&&("undefined"==typeof p.length&&(p=[p]),u=m.utils.arrayFilter(p,function(t){return g||t===e||null===t||!m.utils.unwrapObservable(t._destroy)}),i.has("optionsCaption")&&null!==(l=m.utils.unwrapObservable(i.get("optionsCaption")))&&l!==e&&u.unshift(L));var _=!1;v.beforeRemove=function(e){t.removeChild(e)};var b=a;i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(b=function(t,n){a(t,n),m.dependencyDetection.ignore(i.get("optionsAfterRender"),null,[n[0],t!==L?t:e])}),m.utils.setDomNodeChildrenFromArrayMapping(t,u,s,v,b),m.dependencyDetection.ignore(function(){f?m.selectExtensions.writeValue(t,m.utils.unwrapObservable(i.get("value")),!0):(c?y.length&&r().length<y.length:y.length&&t.selectedIndex>=0?m.selectExtensions.readValue(t.options[t.selectedIndex])!==y[0]:y.length||t.selectedIndex>=0)&&m.utils.triggerEvent(t,"change")}),m.utils.ensureSelectElementIsRenderedCorrectly(t),d&&Math.abs(d-t.scrollTop)>20&&(t.scrollTop=d)}},m.bindingHandlers.options.optionValueDomDataKey=m.utils.domData.nextKey(),m.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(t,e,n){m.utils.registerEventHandler(t,"change",function(){var i=e(),r=[];m.utils.arrayForEach(t.getElementsByTagName("option"),function(t){t.selected&&r.push(m.selectExtensions.readValue(t))}),m.expressionRewriting.writeValueToProperty(i,n,"selectedOptions",r)})},update:function(t,e){if("select"!=m.utils.tagNameLower(t))throw new Error("values binding applies only to SELECT elements");var n=m.utils.unwrapObservable(e());n&&"number"==typeof n.length&&m.utils.arrayForEach(t.getElementsByTagName("option"),function(t){var e=m.utils.arrayIndexOf(n,m.selectExtensions.readValue(t))>=0;m.utils.setOptionNodeSelectionState(t,e)})}},m.expressionRewriting.twoWayBindings.selectedOptions=!0,m.bindingHandlers.style={update:function(t,n){var i=m.utils.unwrapObservable(n()||{});m.utils.objectForEach(i,function(n,i){null!==(i=m.utils.unwrapObservable(i))&&i!==e&&!1!==i||(i=""),t.style[n]=i})}},m.bindingHandlers.submit={init:function(t,e,n,i,r){if("function"!=typeof e())throw new Error("The value for a submit binding must be a function");m.utils.registerEventHandler(t,"submit",function(n){var i,o=e();try{i=o.call(r.$data,t)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},m.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){m.utils.setTextContent(t,e())}},m.virtualElements.allowedBindings.text=!0,function(){if(i&&i.navigator)var n=function(t){if(t)return parseFloat(t[1])},r=i.opera&&i.opera.version&&parseInt(i.opera.version()),o=i.navigator.userAgent,s=n(o.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),a=n(o.match(/Firefox\/([^ ]*)/));if(m.utils.ieVersion<10)var l=m.utils.domData.nextKey(),u=m.utils.domData.nextKey(),h=function(t){var e=this.activeElement,n=e&&m.utils.domData.get(e,u);n&&n(t)},c=function(t,e){var n=t.ownerDocument;m.utils.domData.get(n,l)||(m.utils.domData.set(n,l,!0),m.utils.registerEventHandler(n,"selectionchange",h)),m.utils.domData.set(t,u,e)};m.bindingHandlers.textInput={init:function(n,i,o){var l,u,h=n.value,d=function(r){clearTimeout(l),u=l=e;var s=n.value;h!==s&&(t&&r&&(n._ko_textInputProcessedEvent=r.type),h=s,m.expressionRewriting.writeValueToProperty(i(),o,"textInput",s))},p=function(e){if(!l){u=n.value;var i=t?d.bind(n,{type:e.type}):d;l=setTimeout(i,4)}},f=function(){var t=m.utils.unwrapObservable(i());null!==t&&t!==e||(t=""),u===e||t!==u?n.value!==t&&(h=t,n.value=t):setTimeout(f,4)},g=function(t,e){m.utils.registerEventHandler(n,t,e)};t&&m.bindingHandlers.textInput._forceUpdateOn?m.utils.arrayForEach(m.bindingHandlers.textInput._forceUpdateOn,function(t){"after"==t.slice(0,5)?g(t.slice(5),p):g(t,d)}):m.utils.ieVersion<10?(g("propertychange",function(t){"value"===t.propertyName&&d(t)}),8==m.utils.ieVersion&&(g("keyup",d),g("keydown",d)),m.utils.ieVersion>=8&&(c(n,d),g("dragend",p))):(g("input",d),s<5&&"textarea"===m.utils.tagNameLower(n)?(g("keydown",p),g("paste",p),g("cut",p)):r<11?g("keydown",p):a<4&&(g("DOMAutoComplete",d),g("dragdrop",d),g("drop",d))),g("change",d),m.computed(f,null,{disposeWhenNodeIsRemoved:n})}},m.expressionRewriting.twoWayBindings.textInput=!0,m.bindingHandlers.textinput={preprocess:function(t,e,n){n("textInput",t)}}}(),m.bindingHandlers.uniqueName={init:function(t,e){if(e()){var n="ko_unique_"+ ++m.bindingHandlers.uniqueName.currentIndex;m.utils.setElementName(t,n)}}},m.bindingHandlers.uniqueName.currentIndex=0,m.bindingHandlers.value={after:["options","foreach"],init:function(t,e,n){if("input"!=t.tagName.toLowerCase()||"checkbox"!=t.type&&"radio"!=t.type){var i=["change"],r=n.get("valueUpdate"),o=!1,s=null;r&&("string"==typeof r&&(r=[r]),m.utils.arrayPushAll(i,r),i=m.utils.arrayGetDistinctValues(i));var a=function(){s=null,o=!1;var i=e(),r=m.selectExtensions.readValue(t);m.expressionRewriting.writeValueToProperty(i,n,"value",r)};m.utils.ieVersion&&"input"==t.tagName.toLowerCase()&&"text"==t.type&&"off"!=t.autocomplete&&(!t.form||"off"!=t.form.autocomplete)&&-1==m.utils.arrayIndexOf(i,"propertychange")&&(m.utils.registerEventHandler(t,"propertychange",function(){o=!0}),m.utils.registerEventHandler(t,"focus",function(){o=!1}),m.utils.registerEventHandler(t,"blur",function(){o&&a()})),m.utils.arrayForEach(i,function(e){var n=a;m.utils.stringStartsWith(e,"after")&&(n=function(){s=m.selectExtensions.readValue(t),setTimeout(a,0)},e=e.substring("after".length)),m.utils.registerEventHandler(t,e,n)});var l=function(){var i=m.utils.unwrapObservable(e()),r=m.selectExtensions.readValue(t);if(null===s||i!==s){if(i!==r)if("select"===m.utils.tagNameLower(t)){var o=n.get("valueAllowUnset"),a=function(){m.selectExtensions.writeValue(t,i,o)};a(),o||i===m.selectExtensions.readValue(t)?setTimeout(a,0):m.dependencyDetection.ignore(m.utils.triggerEvent,null,[t,"change"])}else m.selectExtensions.writeValue(t,i)}else setTimeout(l,0)};m.computed(l,null,{disposeWhenNodeIsRemoved:t})}else m.applyBindingAccessorsToNode(t,{checkedValue:e})},update:function(){}},m.expressionRewriting.twoWayBindings.value=!0,m.bindingHandlers.visible={update:function(t,e){var n=m.utils.unwrapObservable(e()),i=!("none"==t.style.display);n&&!i?t.style.display="":!n&&i&&(t.style.display="none")}},p("click"),m.templateEngine=function(){},m.templateEngine.prototype.renderTemplateSource=function(){throw new Error("Override renderTemplateSource")},m.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(){throw new Error("Override createJavaScriptEvaluatorBlock")},m.templateEngine.prototype.makeTemplateSource=function(t,e){if("string"==typeof t){var n=(e=e||r).getElementById(t);if(!n)throw new Error("Cannot find template with ID "+t);return new m.templateSources.domElement(n)}if(1==t.nodeType||8==t.nodeType)return new m.templateSources.anonymousTemplate(t);throw new Error("Unknown template type: "+t)},m.templateEngine.prototype.renderTemplate=function(t,e,n,i){var r=this.makeTemplateSource(t,i);return this.renderTemplateSource(r,e,n,i)},m.templateEngine.prototype.isTemplateRewritten=function(t,e){return!1===this.allowTemplateRewriting||this.makeTemplateSource(t,e).data("isRewritten")},m.templateEngine.prototype.rewriteTemplate=function(t,e,n){var i=this.makeTemplateSource(t,n),r=e(i.text());i.text(r),i.data("isRewritten",!0)},m.exportSymbol("templateEngine",m.templateEngine),m.templateRewriting=function(){function t(t){for(var e=m.expressionRewriting.bindingRewriteValidators,n=0;n<t.length;n++){var i=t[n].key;if(e.hasOwnProperty(i)){var r=e[i];if("function"==typeof r){var o=r(t[n].value);if(o)throw new Error(o)}else if(!r)throw new Error("This template engine does not support the '"+i+"' binding within its templates")}}}function e(e,n,i,r){var o=m.expressionRewriting.parseObjectLiteral(e);t(o);var s="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+m.expressionRewriting.preProcessBindings(o,{valueAccessors:!0})+" } })()},'"+i.toLowerCase()+"')";return r.createJavaScriptEvaluatorBlock(s)+n}var n=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,i=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(t,e,n){e.isTemplateRewritten(t,n)||e.rewriteTemplate(t,function(t){return m.templateRewriting.memoizeBindingAttributeSyntax(t,e)},n)},memoizeBindingAttributeSyntax:function(t,r){return t.replace(n,function(){return e(arguments[4],arguments[1],arguments[2],r)}).replace(i,function(){return e(arguments[1],"<!-- ko -->","#comment",r)})},applyMemoizedBindingsToNextSibling:function(t,e){return m.memoization.memoize(function(n,i){
var r=n.nextSibling;r&&r.nodeName.toLowerCase()===e&&m.applyBindingAccessorsToNode(r,t,i)})}}}(),m.exportSymbol("__tr_ambtns",m.templateRewriting.applyMemoizedBindingsToNextSibling),function(){m.templateSources={},m.templateSources.domElement=function(t){this.domElement=t},m.templateSources.domElement.prototype.text=function(){var t=m.utils.tagNameLower(this.domElement),e="script"===t?"text":"textarea"===t?"value":"innerHTML";if(0==arguments.length)return this.domElement[e];var n=arguments[0];"innerHTML"===e?m.utils.setHtml(this.domElement,n):this.domElement[e]=n};var t=m.utils.domData.nextKey()+"_";m.templateSources.domElement.prototype.data=function(e){if(1===arguments.length)return m.utils.domData.get(this.domElement,t+e);m.utils.domData.set(this.domElement,t+e,arguments[1])};var n=m.utils.domData.nextKey();m.templateSources.anonymousTemplate=function(t){this.domElement=t},m.templateSources.anonymousTemplate.prototype=new m.templateSources.domElement,m.templateSources.anonymousTemplate.prototype.constructor=m.templateSources.anonymousTemplate,m.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var t=m.utils.domData.get(this.domElement,n)||{};return t.textData===e&&t.containerData&&(t.textData=t.containerData.innerHTML),t.textData}var i=arguments[0];m.utils.domData.set(this.domElement,n,{textData:i})},m.templateSources.domElement.prototype.nodes=function(){if(0==arguments.length)return(m.utils.domData.get(this.domElement,n)||{}).containerData;var t=arguments[0];m.utils.domData.set(this.domElement,n,{containerData:t})},m.exportSymbol("templateSources",m.templateSources),m.exportSymbol("templateSources.domElement",m.templateSources.domElement),m.exportSymbol("templateSources.anonymousTemplate",m.templateSources.anonymousTemplate)}(),function(){function t(t,e,n){for(var i,r=t,o=m.virtualElements.nextSibling(e);r&&(i=r)!==o;)n(i,r=m.virtualElements.nextSibling(i))}function n(e,n){if(e.length){var i=e[0],r=e[e.length-1],o=i.parentNode,s=m.bindingProvider.instance,a=s.preprocessNode;if(a){if(t(i,r,function(t,e){var n=t.previousSibling,o=a.call(s,t);o&&(t===i&&(i=o[0]||e),t===r&&(r=o[o.length-1]||n))}),e.length=0,!i)return;i===r?e.push(i):(e.push(i,r),m.utils.fixUpContinuousNodeArray(e,o))}t(i,r,function(t){1!==t.nodeType&&8!==t.nodeType||m.applyBindings(n,t)}),t(i,r,function(t){1!==t.nodeType&&8!==t.nodeType||m.memoization.unmemoizeDomNodeAndDescendants(t,[n])}),m.utils.fixUpContinuousNodeArray(e,o)}}function i(t){return t.nodeType?t:t.length>0?t[0]:null}function r(t,e,r,o,s){s=s||{};var l=(t&&i(t)||r||{}).ownerDocument,u=s.templateEngine||a;m.templateRewriting.ensureTemplateIsRewritten(r,u,l);var h=u.renderTemplate(r,o,s,l);if("number"!=typeof h.length||h.length>0&&"number"!=typeof h[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var c=!1;switch(e){case"replaceChildren":m.virtualElements.setDomNodeChildren(t,h),c=!0;break;case"replaceNode":m.utils.replaceDomNodes(t,h),c=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+e)}return c&&(n(h,o),s.afterRender&&m.dependencyDetection.ignore(s.afterRender,null,[h,o.$data])),h}function o(t,e,n){return m.isObservable(t)?t():"function"==typeof t?t(e,n):t}function s(t,n){var i=m.utils.domData.get(t,l);i&&"function"==typeof i.dispose&&i.dispose(),m.utils.domData.set(t,l,n&&n.isActive()?n:e)}var a;m.setTemplateEngine=function(t){if(t!=e&&!(t instanceof m.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");a=t},m.renderTemplate=function(t,n,s,l,u){if(((s=s||{}).templateEngine||a)==e)throw new Error("Set a template engine before calling renderTemplate");if(u=u||"replaceChildren",l){var h=i(l),c=function(){return!h||!m.utils.domNodeIsAttachedToDocument(h)},d=h&&"replaceNode"==u?h.parentNode:h;return m.dependentObservable(function(){var e=n&&n instanceof m.bindingContext?n:new m.bindingContext(m.utils.unwrapObservable(n)),a=o(t,e.$data,e),c=r(l,u,a,e,s);"replaceNode"==u&&(h=i(l=c))},null,{disposeWhen:c,disposeWhenNodeIsRemoved:d})}return m.memoization.memoize(function(e){m.renderTemplate(t,n,s,e,"replaceNode")})},m.renderTemplateForEach=function(t,i,s,a,l){var u,h=function(e,n){return u=l.createChildContext(e,s.as,function(t){t.$index=n}),r(null,"ignoreTargetNode",o(t,e,u),u,s)},c=function(t,e){n(e,u),s.afterRender&&s.afterRender(e,t),u=null};return m.dependentObservable(function(){var t=m.utils.unwrapObservable(i)||[];"undefined"==typeof t.length&&(t=[t]);var n=m.utils.arrayFilter(t,function(t){return s.includeDestroyed||t===e||null===t||!m.utils.unwrapObservable(t._destroy)});m.dependencyDetection.ignore(m.utils.setDomNodeChildrenFromArrayMapping,null,[a,n,h,s,c])},null,{disposeWhenNodeIsRemoved:a})};var l=m.utils.domData.nextKey();m.bindingHandlers.template={init:function(t,e){var n=m.utils.unwrapObservable(e());if("string"==typeof n||n.name)m.virtualElements.emptyNode(t);else if("nodes"in n){var i=n.nodes||[];if(m.isObservable(i))throw new Error('The "nodes" option must be a plain, non-observable array.');var r=m.utils.moveCleanedNodesToContainerElement(i);new m.templateSources.anonymousTemplate(t).nodes(r)}else{var o=m.virtualElements.childNodes(t);r=m.utils.moveCleanedNodesToContainerElement(o);new m.templateSources.anonymousTemplate(t).nodes(r)}return{controlsDescendantBindings:!0}},update:function(t,e,n,i,r){var o,a,l=e(),u=m.utils.unwrapObservable(l),h=!0,c=null;if("string"==typeof u?(a=l,u={}):(a=u.name,"if"in u&&(h=m.utils.unwrapObservable(u["if"])),h&&"ifnot"in u&&(h=!m.utils.unwrapObservable(u.ifnot)),o=m.utils.unwrapObservable(u.data)),"foreach"in u){var d=h&&u.foreach||[];c=m.renderTemplateForEach(a||t,d,u,t,r)}else if(h){var p="data"in u?r.createChildContext(o,u.as):r;c=m.renderTemplate(a||t,p,u,t)}else m.virtualElements.emptyNode(t);s(t,c)}},m.expressionRewriting.bindingRewriteValidators.template=function(t){var e=m.expressionRewriting.parseObjectLiteral(t);return 1==e.length&&e[0].unknown?null:m.expressionRewriting.keyValueArrayContainsKey(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},m.virtualElements.allowedBindings.template=!0}(),m.exportSymbol("setTemplateEngine",m.setTemplateEngine),m.exportSymbol("renderTemplate",m.renderTemplate),m.utils.findMovesInArrayComparison=function(t,e,n){var i,r,o,s,a;if(t.length&&e.length)for(i=r=0;(!n||i<n)&&(s=t[r]);++r){for(o=0;a=e[o];++o)if(s.value===a.value){s.moved=a.index,a.moved=s.index,e.splice(o,1),i=o=0;break}i+=o}},m.utils.compareArrays=function(){function t(t,r,o){return o="boolean"==typeof o?{dontLimitMoves:o}:o||{},t=t||[],r=r||[],t.length<=r.length?e(t,r,n,i,o):e(r,t,i,n,o)}function e(t,e,n,i,r){var o,s,a,l,u,h=Math.min,c=Math.max,d=[],p=t.length,f=e.length,g=f-p||1,v=p+f+1;for(o=0;o<=p;o++)for(l=a,d.push(a=[]),u=h(f,o+g),s=c(0,o-1);s<=u;s++)if(s)if(o)if(t[o-1]===e[s-1])a[s]=l[s-1];else{var y=l[s]||v,_=a[s-1]||v;a[s]=h(y,_)+1}else a[s]=s+1;else a[s]=o+1;var b,w=[],x=[],S=[];for(o=p,s=f;o||s;)b=d[o][s]-1,s&&b===d[o][s-1]?x.push(w[w.length]={status:n,value:e[--s],index:s}):o&&b===d[o-1][s]?S.push(w[w.length]={status:i,value:t[--o],index:o}):(--s,--o,r.sparse||w.push({status:"retained",value:e[s]}));return m.utils.findMovesInArrayComparison(x,S,10*p),w.reverse()}var n="added",i="deleted";return t}(),m.exportSymbol("utils.compareArrays",m.utils.compareArrays),function(){function t(t,n,i,r,o){var s=[],a=m.dependentObservable(function(){var e=n(i,o,m.utils.fixUpContinuousNodeArray(s,t))||[];s.length>0&&(m.utils.replaceDomNodes(s,e),r&&m.dependencyDetection.ignore(r,null,[i,e,o])),s.length=0,m.utils.arrayPushAll(s,e)},null,{disposeWhenNodeIsRemoved:t,disposeWhen:function(){return!m.utils.anyDomNodeIsAttachedToDocument(s)}});return{mappedNodes:s,dependentObservable:a.isActive()?a:e}}var n=m.utils.domData.nextKey();m.utils.setDomNodeChildrenFromArrayMapping=function(i,r,o,s,a){function l(t,e){h=f[e],b!==e&&(C[t]=h),h.indexObservable(b++),m.utils.fixUpContinuousNodeArray(h.mappedNodes,i),y.push(h),x.push(h)}function u(t,e){if(t)for(var n=0,i=e.length;n<i;n++)e[n]&&m.utils.arrayForEach(e[n].mappedNodes,function(i){t(i,n,e[n].arrayEntry)})}r=r||[],s=s||{};for(var h,c,d,p=m.utils.domData.get(i,n)===e,f=m.utils.domData.get(i,n)||[],g=m.utils.arrayMap(f,function(t){return t.arrayEntry}),v=m.utils.compareArrays(g,r,s.dontLimitMoves),y=[],_=0,b=0,w=[],x=[],S=[],C=[],E=[],M=0;c=v[M];M++)switch(d=c.moved,c.status){case"deleted":d===e&&((h=f[_]).dependentObservable&&h.dependentObservable.dispose(),w.push.apply(w,m.utils.fixUpContinuousNodeArray(h.mappedNodes,i)),s.beforeRemove&&(S[M]=h,x.push(h))),_++;break;case"retained":l(M,_++);break;case"added":d!==e?l(M,d):(h={arrayEntry:c.value,indexObservable:m.observable(b++)},y.push(h),x.push(h),p||(E[M]=h))}u(s.beforeMove,C),m.utils.arrayForEach(w,s.beforeRemove?m.cleanNode:m.removeNode);M=0;for(var L,T,k=m.virtualElements.firstChild(i);h=x[M];M++){h.mappedNodes||m.utils.extend(h,t(i,o,h.arrayEntry,a,h.indexObservable));for(var D=0;T=h.mappedNodes[D];k=T.nextSibling,L=T,D++)T!==k&&m.virtualElements.insertAfter(i,T,L);!h.initialized&&a&&(a(h.arrayEntry,h.mappedNodes,h.indexObservable),h.initialized=!0)}u(s.beforeRemove,S),u(s.afterMove,C),u(s.afterAdd,E),m.utils.domData.set(i,n,y)}}(),m.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",m.utils.setDomNodeChildrenFromArrayMapping),m.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},m.nativeTemplateEngine.prototype=new m.templateEngine,m.nativeTemplateEngine.prototype.constructor=m.nativeTemplateEngine,m.nativeTemplateEngine.prototype.renderTemplateSource=function(t,e,n,i){var r=(!(m.utils.ieVersion<9)?t.nodes:null)?t.nodes():null;if(r)return m.utils.makeArray(r.cloneNode(!0).childNodes);var o=t.text();return m.utils.parseHtmlFragment(o,i)},m.nativeTemplateEngine.instance=new m.nativeTemplateEngine,m.setTemplateEngine(m.nativeTemplateEngine.instance),m.exportSymbol("nativeTemplateEngine",m.nativeTemplateEngine),function(){m.jqueryTmplTemplateEngine=function(){function t(){if(n<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function e(t,e,n){return s.tmpl(t,e,n)}var n=this.jQueryTmplVersion=function(){if(!s||!s.tmpl)return 0;try{if(s.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(t){}return 1}();this.renderTemplateSource=function(n,i,o,a){a=a||r,o=o||{},t();var l=n.data("precompiled");if(!l){var u=n.text()||"";u="{{ko_with $item.koBindingContext}}"+u+"{{/ko_with}}",l=s.template(null,u),n.data("precompiled",l)}var h=e(l,[i.$data],s.extend({koBindingContext:i},o.templateOptions));return h.appendTo(a.createElement("div")),s.fragments={},h},this.createJavaScriptEvaluatorBlock=function(t){return"{{ko_code ((function() { return "+t+" })()) }}"},this.addTemplate=function(t,e){r.write("<script type='text/html' id='"+t+"'>"+e+"</script>")},n>0&&(s.tmpl.tag.ko_code={open:"__.push($1 || '');"},s.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},m.jqueryTmplTemplateEngine.prototype=new m.templateEngine,m.jqueryTmplTemplateEngine.prototype.constructor=m.jqueryTmplTemplateEngine;var t=new m.jqueryTmplTemplateEngine;t.jQueryTmplVersion>0&&m.setTemplateEngine(t),m.exportSymbol("jqueryTmplTemplateEngine",m.jqueryTmplTemplateEngine)}()},"function"==typeof define&&define.amd?define(["exports","require"],n):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?n(module.exports||exports):n(i.ko={})}()}(),function(t){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?t(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],t):t(ko,ko.mapping={})}(function(t,e){function n(t,e){for(var n={},i=t.length-1;i>=0;--i)n[t[i]]=t[i];for(i=e.length-1;i>=0;--i)n[e[i]]=e[i];var r=[];for(var o in n)r.push(n[o]);return r}function i(t,r){var o;for(var s in r)if(r.hasOwnProperty(s)&&r[s])if(o=e.getType(t[s]),s&&t[s]&&"array"!==o&&"string"!==o)i(t[s],r[s]);else{var a="array"===e.getType(t[s])&&"array"===e.getType(r[s]);t[s]=a?n(t[s],r[s]):r[s]}}function r(t,e){var n={};return i(n,t),i(n,e),n}function o(t,e){for(var n=r({},t),i=C.length-1;i>=0;i--){var o=C[i];n[o]&&(n[""]instanceof Object||(n[""]={}),n[""][o]=n[o],delete n[o])}return e&&(n.ignore=s(e.ignore,n.ignore),n.include=s(e.include,n.include),n.copy=s(e.copy,n.copy),n.observe=s(e.observe,n.observe)),n.ignore=s(n.ignore,L.ignore),n.include=s(n.include,L.include),n.copy=s(n.copy,L.copy),n.observe=s(n.observe,L.observe),n.mappedProperties=n.mappedProperties||{},n.copiedProperties=n.copiedProperties||{},n}function s(n,i){return"array"!==e.getType(n)&&(n="undefined"===e.getType(n)?[]:[n]),"array"!==e.getType(i)&&(i="undefined"===e.getType(i)?[]:[i]),t.utils.arrayGetDistinctValues(n.concat(i))}function a(e,n){var i=t.dependentObservable;t.dependentObservable=function(n,i,r){r=r||{},n&&"object"==typeof n&&(r=n);var o=r.deferEvaluation,s=!1,a=function(n){var i=t.dependentObservable;t.dependentObservable=x;var r=t.isWriteableObservable(n);t.dependentObservable=i;var o=x({read:function(){return s||(t.utils.arrayRemoveItem(e,n),s=!0),n.apply(n,arguments)},write:r&&function(t){return n(t)},deferEvaluation:!0});return b&&(o._wrapper=!0),o.__DO=n,o};r.deferEvaluation=!0;var l=new x(n,i,r);return o||(l=a(l),e.push(l)),l},t.dependentObservable.fn=x.fn,t.computed=t.dependentObservable;var r=n();return t.dependentObservable=i,t.computed=t.dependentObservable,r}function l(n,i,o,s,h,m,g){var v="array"===e.getType(t.utils.unwrapObservable(i));if(m=m||"",e.isMapped(n)){var b=t.utils.unwrapObservable(n)[w];o=r(b,o)}var x={data:i,parent:g||h},S=function(){return o[s]&&o[s].create instanceof Function},C=function(e){return a(y,function(){return t.utils.unwrapObservable(h)instanceof Array?o[s].create({data:e||x.data,parent:x.parent,skip:E}):o[s].create({data:e||x.data,parent:x.parent})})},M=function(){return o[s]&&o[s].update instanceof Function},L=function(e,n){var i={data:n||x.data,parent:x.parent,target:t.utils.unwrapObservable(e)};return t.isWriteableObservable(e)&&(i.observable=e),o[s].update(i)},T=_.get(i);if(T)return T;if(s=s||"",v){var k=[],D=!1,P=function(t){return t};o[s]&&o[s].key&&(P=o[s].key,D=!0),t.isObservable(n)||((n=t.observableArray([])).mappedRemove=function(t){var e="function"==typeof t?t:function(e){return e===P(t)};return n.remove(function(t){return e(P(t))})},n.mappedRemoveAll=function(e){var i=d(e,P);return n.remove(function(e){return-1!=t.utils.arrayIndexOf(i,P(e))})},n.mappedDestroy=function(t){var e="function"==typeof t?t:function(e){return e===P(t)};return n.destroy(function(t){return e(P(t))})},n.mappedDestroyAll=function(e){var i=d(e,P);return n.destroy(function(e){return-1!=t.utils.arrayIndexOf(i,P(e))})},n.mappedIndexOf=function(e){var i=d(n(),P),r=P(e);return t.utils.arrayIndexOf(i,r)},n.mappedGet=function(t){return n()[n.mappedIndexOf(t)]},n.mappedCreate=function(e){if(-1!==n.mappedIndexOf(e))throw new Error("There already is an object with the key that you specified.");var i=S()?C(e):e;if(M()){var r=L(i,e);t.isWriteableObservable(i)?i(r):i=r}return n.push(i),i});var O=d(t.utils.unwrapObservable(n),P).sort(),I=d(i,P);D&&I.sort();var N,A,F=t.utils.compareArrays(O,I),R={},j=t.utils.unwrapObservable(i),z={},B=!0;for(N=0,A=j.length;N<A;N++){if((W=P(j[N]))===undefined||W instanceof Object){B=!1;break}z[W]=j[N]}var U=[],H=0;for(N=0,A=F.length;N<A;N++){var q,W=F[N],G=m+"["+N+"]";switch(W.status){case"added":var V=B?z[W.value]:c(t.utils.unwrapObservable(i),W.value,P);q=l(undefined,V,o,s,n,G,h),S()||(q=t.utils.unwrapObservable(q));var $=u(t.utils.unwrapObservable(i),V,R);q===E?H++:U[$-H]=q,R[$]=!0;break;case"retained":V=B?z[W.value]:c(t.utils.unwrapObservable(i),W.value,P);l(q=c(n,W.value,P),V,o,s,n,G,h),U[$=u(t.utils.unwrapObservable(i),V,R)]=q,R[$]=!0;break;case"deleted":q=c(n,W.value,P)}k.push({event:W.status,item:q})}n(U),o[s]&&o[s].arrayChanged&&t.utils.arrayForEach(k,function(t){o[s].arrayChanged(t.event,t.item)})}else if(f(i)){if(!(n=t.utils.unwrapObservable(n))){if(S()){var Z=C();return M()&&(Z=L(Z)),Z}if(M())return L(Z);n={}}if(M()&&(n=L(n)),_.save(i,n),M())return n;p(i,function(e){var r=m.length?m+"."+e:e;if(-1==t.utils.arrayIndexOf(o.ignore,r))if(-1==t.utils.arrayIndexOf(o.copy,r)){if("object"!=typeof i[e]&&"array"!=typeof i[e]&&o.observe.length>0&&-1==t.utils.arrayIndexOf(o.observe,r))return n[e]=i[e],void(o.copiedProperties[r]=!0);var s=_.get(i[e]),a=l(n[e],i[e],o,e,n,r,n),u=s||a;if(o.observe.length>0&&-1==t.utils.arrayIndexOf(o.observe,r))return n[e]=u(),void(o.copiedProperties[r]=!0);t.isWriteableObservable(n[e])?(u=t.utils.unwrapObservable(u),n[e]()!==u&&n[e](u)):(u=n[e]===undefined?u:t.utils.unwrapObservable(u),n[e]=u),o.mappedProperties[r]=!0}else n[e]=i[e]})}else switch(e.getType(i)){case"function":M()?t.isWriteableObservable(i)?(i(L(i)),n=i):n=L(i):n=i;break;default:if(t.isWriteableObservable(n)){if(M()){var J=L(n);return n(J),J}J=t.utils.unwrapObservable(i);return n(J),J}var X=S()||M();if(n=S()?C():t.observable(t.utils.unwrapObservable(i)),M()&&n(L(n)),X)return n}return n}function u(t,e,n){for(var i=0,r=t.length;i<r;i++)if(!0!==n[i]&&t[i]===e)return i;return null}function h(n,i){var r;return i&&(r=i(n)),"undefined"===e.getType(r)&&(r=n),t.utils.unwrapObservable(r)}function c(e,n,i){for(var r=0,o=(e=t.utils.unwrapObservable(e)).length;r<o;r++){var s=e[r];if(h(s,i)===n)return s}throw new Error("When calling ko.update*, the key '"+n+"' was not found!")}function d(e,n){return t.utils.arrayMap(t.utils.unwrapObservable(e),function(t){return n?h(t,n):t})}function p(t,n){if("array"===e.getType(t))for(var i=0;i<t.length;i++)n(i);else for(var r in t)n(r)}function f(t){var n=e.getType(t);return("object"===n||"array"===n)&&null!==t}function m(t,n,i){var r=t||"";return"array"===e.getType(n)?t&&(r+="["+i+"]"):(t&&(r+="."),r+=i),r}function g(){var e=[],n=[];this.save=function(i,r){var o=t.utils.arrayIndexOf(e,i);o>=0?n[o]=r:(e.push(i),n.push(r))},this.get=function(i){var r=t.utils.arrayIndexOf(e,i);return r>=0?n[r]:undefined}}function v(){var t={},e=function(e){var n;try{n=e}catch(r){n="$$$"}var i=t[n];return i===undefined&&(i=new g,t[n]=i),i};this.save=function(t,n){e(t).save(t,n)},this.get=function(t){return e(t).get(t)}}var y,_,b=!0,w="__ko_mapping__",x=t.dependentObservable,S=0,C=["create","update","key","arrayChanged"],E={},M={include:["_destroy"],ignore:[],copy:[],observe:[]},L=M;e.isMapped=function(e){var n=t.utils.unwrapObservable(e);return n&&n[w]},e.fromJS=function(t){if(0==arguments.length)throw new Error("When calling ko.fromJS, pass the object you want to convert.");try{var e,n;S++||(y=[],_=new v),2==arguments.length&&(arguments[1][w]?n=arguments[1]:e=arguments[1]),3==arguments.length&&(e=arguments[1],n=arguments[2]),n&&(e=r(e,n[w]));var i=l(n,t,e=o(e));if(n&&(i=n),!--S)for(;y.length;){var s=y.pop();s&&(s(),s.__DO.throttleEvaluation=s.throttleEvaluation)}return i[w]=r(i[w],e),i}catch(a){throw S=0,a}},e.fromJSON=function(n){var i=t.utils.parseJson(n);return arguments[0]=i,e.fromJS.apply(this,arguments)},e.updateFromJS=function(){throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!")},e.updateFromJSON=function(){throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!")},e.toJS=function(n,i){if(L||e.resetDefaultOptions(),0==arguments.length)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");if("array"!==e.getType(L.ignore))throw new Error("ko.mapping.defaultOptions().ignore should be an array.");if("array"!==e.getType(L.include))throw new Error("ko.mapping.defaultOptions().include should be an array.");if("array"!==e.getType(L.copy))throw new Error("ko.mapping.defaultOptions().copy should be an array.");return i=o(i,n[w]),e.visitModel(n,function(e){return t.utils.unwrapObservable(e)},i)},e.toJSON=function(n,i){var r=e.toJS(n,i);return t.utils.stringifyJson(r)},e.defaultOptions=function(){if(!(arguments.length>0))return L;L=arguments[0]},e.resetDefaultOptions=function(){L={include:M.include.slice(0),ignore:M.ignore.slice(0),copy:M.copy.slice(0)}},e.getType=function(t){if(t&&"object"==typeof t){if(t.constructor===Date)return"date";if(t.constructor===Array)return"array"}return typeof t},e.visitModel=function(n,i,r){var s;(r=r||{}).visitedObjects=r.visitedObjects||new v;var a=t.utils.unwrapObservable(n);if(!f(a))return i(n,r.parentName);r=o(r,a[w]),i(n,r.parentName),s="array"===e.getType(a)?[]:{},r.visitedObjects.save(n,s);var l=r.parentName;return p(a,function(n){if(!r.ignore||-1==t.utils.arrayIndexOf(r.ignore,n)){var o=a[n];if(r.parentName=m(l,a,n),-1!==t.utils.arrayIndexOf(r.copy,n)||-1!==t.utils.arrayIndexOf(r.include,n)||!a[w]||!a[w].mappedProperties||a[w].mappedProperties[n]||!a[w].copiedProperties||a[w].copiedProperties[n]||"array"===e.getType(a))switch(e.getType(t.utils.unwrapObservable(o))){case"object":case"array":case"undefined":var u=r.visitedObjects.get(o);s[n]="undefined"!==e.getType(u)?u:e.visitModel(o,i,r);break;default:s[n]=i(o,r.parentName)}}}),s}}),function(t,e){var n,i,r,o,s,a;t.toastr=(n={tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,fadeIn:300,fadeOut:1e3,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message"},i=function(t,e){return a({iconClass:o().iconClasses.error,message:t,title:e})},r=function(t){var n=e("#"+t.containerId);return n.length?n:((n=e("<div/>").attr("id",t.containerId).addClass(t.positionClass)).appendTo(e("body")),n)},o=function(){return e.extend({},n,toastr.options)},s=function(t,e){return a({iconClass:o().iconClasses.info,message:t,title:e})},a=function(t){var n=o(),i=t.iconClass||n.iconClass,s=null,a=r(n),l=e("<div/>"),u=e("<div/>"),h=e("<div/>"),c={options:n,map:t};t.iconClass&&l.addClass(n.toastClass).addClass(i),t.title&&(u.append(t.title).addClass(n.titleClass),l.append(u)),t.message&&(h.append(t.message).addClass(n.messageClass),l.append(h));var d=function(){if(!(e(":focus",l).length>0)){var t=function(){return l.fadeOut(n.fadeOut)};e.when(t()).done(function(){l.is(":visible")||(l.remove(),0===a.children().length&&a.remove())})}},p=function(){(n.timeOut>0||n.extendedTimeOut>0)&&(s=setTimeout(d,n.extendedTimeOut))},f=function(){clearTimeout(s),l.stop(!0,!0).fadeIn(n.fadeIn)};return l.hide(),a.prepend(l),l.fadeIn(n.fadeIn),n.timeOut>0&&(s=setTimeout(d,n.timeOut)),l.hover(f,p),n.tapToDismiss&&l.click(d),n.debug&&console.log(c),l},{error:i,info:s,options:{},success:function(t,e){return a({iconClass:o().iconClasses.success,message:t,title:e})},warning:function(t,e){return a({iconClass:o().iconClasses.warning,message:t,title:e})}})}(window,jQuery),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,r,o,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;n<o;n+=1)s[n]=str(n,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&((r=str(i=rep[n],l))&&s.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&((r=str(i,l))&&s.push(quote(i)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,!e||"function"==typeof e||"object"==typeof e&&"number"==typeof e.length)return str("",{"":t});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&((i=walk(r,n))!==undefined?r[n]=i:delete r[n]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e){"use strict";var n=t.History=t.History||{},i=t.jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(t,e,n){i(t).bind(e,n)},trigger:function(t,e,n){i(t).trigger(e,n)},extractEventData:function(t,n,i){return n&&n.originalEvent&&n.originalEvent[t]||i&&i[t]||e},onDomLoad:function(t){i(t)}},"undefined"!=typeof n.init&&n.init()}(window),function(t){"use strict";var e=t.document,n=t.setTimeout||n,i=t.clearTimeout||i,r=t.setInterval||r,o=t.History=t.History||{};if("undefined"!=typeof o.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");o.initHtml4=function(){if("undefined"!=typeof o.initHtml4.initialized)return!1;o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(t){return t===o.getHashByIndex()},o.isHashEqual=function(t,e){return(t=encodeURIComponent(t).replace(/%25/g,"%"))===(e=encodeURIComponent(e).replace(/%25/g,"%"))},o.saveHash=function(t){return!o.isLastHash(t)&&(o.savedHashes.push(t),!0)},o.getHashByIndex=function(t){return void 0===t?o.savedHashes[o.savedHashes.length-1]:t<0?o.savedHashes[o.savedHashes.length+t]:o.savedHashes[t]},o.discardedHashes={},o.discardedStates={},o.discardState=function(t,e,n){var i,r=o.getHashByState(t);return i={discardedState:t,backState:n,forwardState:e},o.discardedStates[r]=i,!0},o.discardHash=function(t,e,n){var i={discardedHash:t,backState:n,forwardState:e};return o.discardedHashes[t]=i,!0},o.discardedState=function(t){var e=o.getHashByState(t);return o.discardedStates[e]||!1},o.discardedHash=function(t){return o.discardedHashes[t]||!1},o.recycleState=function(t){var e=o.getHashByState(t);return o.discardedState(t)&&delete o.discardedStates[e],!0},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var n,i,s,a,l="",u=Boolean(o.getHash());return o.isInternetExplorer()?(n="historyjs-iframe",(i=e.createElement("iframe")).setAttribute("id",n),i.setAttribute("src","#"),i.style.display="none",e.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),s="",a=!1,o.checkerFunction=function(){if(a)return!1;a=!0;var e=o.getHash(),n=o.getHash(i.contentWindow.document);return e!==l?(l=e,n!==e&&(s=n=e,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=o.escapeHash(e)),o.Adapter.trigger(t,"hashchange")):n!==s&&(s=n,u&&""===n?o.back():o.setHash(n,!1)),a=!1,!0}):o.checkerFunction=function(){var e=o.getHash()||"";return e!==l&&(l=e,o.Adapter.trigger(t,"hashchange")),!0},o.intervalList.push(r(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(e){var n,i=e&&e.newURL||o.getLocationHref(),r=o.getHashByUrl(i),s=null;return o.isLastHash(r)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(r),r&&o.isTraditionalAnchor(r)?(o.Adapter.trigger(t,"anchorchange"),o.busy(!1),!1):(s=o.extractState(o.getFullUrl(r||o.getLocationHref()),!0),o.isLastSavedState(s)?(o.busy(!1),!1):(o.getHashByState(s),(n=o.discardedState(s))?(o.getHashByIndex(-2)===o.getHashByState(n.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(s.data,s.title,s.url,!1),!0))))},o.Adapter.bind(t,"hashchange",o.onHashChange),o.pushState=function(e,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==r&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:r}),!1;o.busy(!0);var s=o.createStateObject(e,n,i),a=o.getHashByState(s),l=o.getState(!1),u=o.getHashByState(l),h=o.getHash(),c=o.expectedStateId==s.id;return o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),a===u?(o.busy(!1),!1):(o.saveState(s),c||o.Adapter.trigger(t,"statechange"),!o.isHashEqual(a,h)&&!o.isHashEqual(a,o.getShortUrl(o.getLocationHref()))&&o.setHash(a,!1),o.busy(!1),!0)},o.replaceState=function(e,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),o.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==r&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:r}),!1;o.busy(!0);var s=o.createStateObject(e,n,i),a=o.getHashByState(s),l=o.getState(!1),u=o.getHashByState(l),h=o.getStateByIndex(-2);return o.discardState(l,s,h),a===u?(o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),o.saveState(s),o.Adapter.trigger(t,"statechange"),o.busy(!1)):o.pushState(s.data,s.title,s.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(t,"hashchange")})},"undefined"!=typeof o.init&&o.init()}(window),function(t,e){"use strict";var n=t.console||e,i=t.document,r=t.navigator,o=!1,s=t.setTimeout,a=t.clearTimeout,l=t.setInterval,u=t.clearInterval,h=t.JSON,c=t.alert,d=t.History=t.History||{},p=t.history;try{(o=t.sessionStorage).setItem("TEST","1"),o.removeItem("TEST")}catch(f){o=!1}if(h.stringify=h.stringify||h.encode,h.parse=h.parse||h.decode,"undefined"!=typeof d.init)throw new Error("History.js Core has already been loaded...");d.init=function(){return"undefined"!=typeof d.Adapter&&("undefined"!=typeof d.initCore&&d.initCore(),"undefined"!=typeof d.initHtml4&&d.initHtml4(),!0)},d.initCore=function(){if("undefined"!=typeof d.initCore.initialized)return!1;if(d.initCore.initialized=!0,d.options=d.options||{},d.options.hashChangeInterval=d.options.hashChangeInterval||100,d.options.safariPollInterval=d.options.safariPollInterval||500,d.options.doubleCheckInterval=d.options.doubleCheckInterval||500,d.options.disableSuid=d.options.disableSuid||!1,d.options.storeInterval=d.options.storeInterval||1e3,d.options.busyDelay=d.options.busyDelay||250,d.options.debug=d.options.debug||!1,d.options.initialTitle=d.options.initialTitle||i.title,d.options.html4Mode=d.options.html4Mode||!1,d.options.delayInit=d.options.delayInit||!1,d.intervalList=[],d.clearAllIntervals=function(){var t,e=d.intervalList;if(void 0!==e&&null!==e){for(t=0;t<e.length;t++)u(e[t]);d.intervalList=null}},d.debug=function(){d.options.debug&&d.log.apply(d,arguments)},d.log=function(){var t,e,r,o,s,a=void 0!==n&&"undefined"!=typeof n.log&&"undefined"!=typeof n.log.apply,l=i.getElementById("log");for(a?(t=(o=Array.prototype.slice.call(arguments)).shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[t,o]):n.log.apply(n,[t,o])):t="\n"+arguments[0]+"\n",e=1,r=arguments.length;e<r;++e){if("object"==typeof(s=arguments[e])&&void 0!==h)try{s=h.stringify(s)}catch(u){}t+="\n"+s+"\n"}return l?(l.value+=t+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):a||c(t),!0},d.getInternetExplorerMajorVersion=function(){
return d.getInternetExplorerMajorVersion.cached="undefined"!=typeof d.getInternetExplorerMajorVersion.cached?d.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=i.createElement("div"),n=e.getElementsByTagName("i");(e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&n[0];);return t>4&&t}()},d.isInternetExplorer=function(){return d.isInternetExplorer.cached="undefined"!=typeof d.isInternetExplorer.cached?d.isInternetExplorer.cached:Boolean(d.getInternetExplorerMajorVersion())},d.options.html4Mode?d.emulated={pushState:!0,hashChange:!0}:d.emulated={pushState:!Boolean(t.history&&t.history.pushState&&t.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent)),hashChange:Boolean(!("onhashchange"in t||"onhashchange"in i)||d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8)},d.enabled=!d.emulated.pushState,d.bugs={setHash:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<7)},d.isEmptyObject=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},d.cloneObject=function(t){var e,n;return t?(e=h.stringify(t),n=h.parse(e)):n={},n},d.getRootUrl=function(){var t=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(t+=":"+i.location.port),t+="/"},d.getBaseHref=function(){var t=i.getElementsByTagName("base"),e="";return 1===t.length&&(e=t[0].href.replace(/[^\/]+$/,"")),(e=e.replace(/\/+$/,""))&&(e+="/"),e},d.getBaseUrl=function(){return d.getBaseHref()||d.getBasePageUrl()||d.getRootUrl()},d.getPageUrl=function(){return((d.getState(!1,!1)||{}).url||d.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(t){return/\./.test(t)?t:t+"/"})},d.getBasePageUrl=function(){return d.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/"},d.getFullUrl=function(t,e){var n=t,i=t.substring(0,1);return e=void 0===e||e,/[a-z]+\:\/\//.test(t)||(n="/"===i?d.getRootUrl()+t.replace(/^\/+/,""):"#"===i?d.getPageUrl().replace(/#.*/,"")+t:"?"===i?d.getPageUrl().replace(/[\?#].*/,"")+t:e?d.getBaseUrl()+t.replace(/^(\.\/)+/,""):d.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},d.getShortUrl=function(t){var e=t,n=d.getBaseUrl(),i=d.getRootUrl();return d.emulated.pushState&&(e=e.replace(n,"")),e=e.replace(i,"/"),d.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},d.getLocationHref=function(t){return(t=t||i).URL===t.location.href?t.location.href:t.location.href===decodeURIComponent(t.URL)?t.URL:t.location.hash&&decodeURIComponent(t.location.href.replace(/^[^#]+/,""))===t.location.hash?t.location.href:-1==t.URL.indexOf("#")&&-1!=t.location.href.indexOf("#")?t.location.href:t.URL||t.location.href},d.store={},d.idToState=d.idToState||{},d.stateToId=d.stateToId||{},d.urlToId=d.urlToId||{},d.storedStates=d.storedStates||[],d.savedStates=d.savedStates||[],d.normalizeStore=function(){d.store.idToState=d.store.idToState||{},d.store.urlToId=d.store.urlToId||{},d.store.stateToId=d.store.stateToId||{}},d.getState=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var n=d.getLastSavedState();return!n&&e&&(n=d.createStateObject()),t&&((n=d.cloneObject(n)).url=n.cleanUrl||n.url),n},d.getIdByState=function(t){var e,n=d.extractId(t.url);if(!n)if(e=d.getStateString(t),"undefined"!=typeof d.stateToId[e])n=d.stateToId[e];else if("undefined"!=typeof d.store.stateToId[e])n=d.store.stateToId[e];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof d.idToState[n]||"undefined"!=typeof d.store.idToState[n];);d.stateToId[e]=n,d.idToState[n]=t}return n},d.normalizeState=function(t){var e,n;return t&&"object"==typeof t||(t={}),"undefined"!=typeof t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),(e={}).normalized=!0,e.title=t.title||"",e.url=d.getFullUrl(t.url?t.url:d.getLocationHref()),e.hash=d.getShortUrl(e.url),e.data=d.cloneObject(t.data),e.id=d.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,n=!d.isEmptyObject(e.data),(e.title||n)&&!0!==d.options.disableSuid&&(e.hash=d.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=d.getFullUrl(e.hash),(d.emulated.pushState||d.bugs.safariPoll)&&d.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},d.createStateObject=function(t,e,n){var i={data:t,title:e,url:n};return i=d.normalizeState(i)},d.getStateById=function(t){return t=String(t),d.idToState[t]||d.store.idToState[t]||e},d.getStateString=function(t){var e;return e={data:d.normalizeState(t).data,title:t.title,url:t.url},h.stringify(e)},d.getStateId=function(t){return d.normalizeState(t).id},d.getHashByState=function(t){return d.normalizeState(t).hash},d.extractId=function(t){var e,n;return n=-1!=t.indexOf("#")?t.split("#")[0]:t,(e=/(.*)\&_suid=([0-9]+)$/.exec(n))&&e[1]||t,(e?String(e[2]||""):"")||!1},d.isTraditionalAnchor=function(t){return!/[\/\?\.]/.test(t)},d.extractState=function(t,e){var n,i,r=null;return e=e||!1,(n=d.extractId(t))&&(r=d.getStateById(n)),r||(i=d.getFullUrl(t),(n=d.getIdByUrl(i)||!1)&&(r=d.getStateById(n)),!r&&e&&!d.isTraditionalAnchor(t)&&(r=d.createStateObject(null,null,i))),r},d.getIdByUrl=function(t){return d.urlToId[t]||d.store.urlToId[t]||e},d.getLastSavedState=function(){return d.savedStates[d.savedStates.length-1]||e},d.getLastStoredState=function(){return d.storedStates[d.storedStates.length-1]||e},d.hasUrlDuplicate=function(t){var e;return(e=d.extractState(t.url))&&e.id!==t.id},d.storeState=function(t){return d.urlToId[t.url]=t.id,d.storedStates.push(d.cloneObject(t)),t},d.isLastSavedState=function(t){var e=!1;return d.savedStates.length&&(e=t.id===d.getLastSavedState().id),e},d.saveState=function(t){return!d.isLastSavedState(t)&&(d.savedStates.push(d.cloneObject(t)),!0)},d.getStateByIndex=function(t){return void 0===t?d.savedStates[d.savedStates.length-1]:t<0?d.savedStates[d.savedStates.length+t]:d.savedStates[t]},d.getCurrentIndex=function(){return d.savedStates.length<1?0:d.savedStates.length-1},d.getHash=function(t){var e=d.getLocationHref(t);return d.getHashByUrl(e)},d.unescapeHash=function(t){var e=d.normalizeHash(t);return e=decodeURIComponent(e)},d.normalizeHash=function(t){return t.replace(/[^#]*#/,"").replace(/#.*/,"")},d.setHash=function(t,e){var n,r;return!1!==e&&d.busy()?(d.pushQueue({scope:d,callback:d.setHash,args:arguments,queue:e}),!1):(d.busy(!0),(n=d.extractState(t,!0))&&!d.emulated.pushState?d.pushState(n.data,n.title,n.url,!1):d.getHash()!==t&&(d.bugs.setHash?(r=d.getPageUrl(),d.pushState(null,null,r+"#"+t,!1)):i.location.hash=t),d)},d.escapeHash=function(e){var n=d.normalizeHash(e);return n=t.encodeURIComponent(n),d.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},d.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=d.unescapeHash(e)},d.setTitle=function(t){var e,n=t.title;n||(e=d.getStateByIndex(0))&&e.url===t.url&&(n=e.title||d.options.initialTitle);try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(r){}return i.title=n,d},d.queues=[],d.busy=function(t){if(void 0!==t?d.busy.flag=t:"undefined"==typeof d.busy.flag&&(d.busy.flag=!1),!d.busy.flag){a(d.busy.timeout);var e=function(){var t,n,i;if(!d.busy.flag)for(t=d.queues.length-1;t>=0;--t)0!==(n=d.queues[t]).length&&(i=n.shift(),d.fireQueueItem(i),d.busy.timeout=s(e,d.options.busyDelay))};d.busy.timeout=s(e,d.options.busyDelay)}return d.busy.flag},d.busy.flag=!1,d.fireQueueItem=function(t){return t.callback.apply(t.scope||d,t.args||[])},d.pushQueue=function(t){return d.queues[t.queue||0]=d.queues[t.queue||0]||[],d.queues[t.queue||0].push(t),d},d.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),void 0!==e&&(t.queue=e),d.busy()?d.pushQueue(t):d.fireQueueItem(t),d},d.clearQueue=function(){return d.busy.flag=!1,d.queues=[],d},d.stateChanged=!1,d.doubleChecker=!1,d.doubleCheckComplete=function(){return d.stateChanged=!0,d.doubleCheckClear(),d},d.doubleCheckClear=function(){return d.doubleChecker&&(a(d.doubleChecker),d.doubleChecker=!1),d},d.doubleCheck=function(t){return d.stateChanged=!1,d.doubleCheckClear(),d.bugs.ieDoubleCheck&&(d.doubleChecker=s(function(){return d.doubleCheckClear(),d.stateChanged||t(),!0},d.options.doubleCheckInterval)),d},d.safariStatePoll=function(){var e=d.extractState(d.getLocationHref());if(!d.isLastSavedState(e))return e||d.createStateObject(),d.Adapter.trigger(t,"popstate"),d},d.back=function(t){return!1!==t&&d.busy()?(d.pushQueue({scope:d,callback:d.back,args:arguments,queue:t}),!1):(d.busy(!0),d.doubleCheck(function(){d.back(!1)}),p.go(-1),!0)},d.forward=function(t){return!1!==t&&d.busy()?(d.pushQueue({scope:d,callback:d.forward,args:arguments,queue:t}),!1):(d.busy(!0),d.doubleCheck(function(){d.forward(!1)}),p.go(1),!0)},d.go=function(t,e){var n;if(t>0)for(n=1;n<=t;++n)d.forward(e);else{if(!(t<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=t;--n)d.back(e)}return d},d.emulated.pushState){var f=function(){};d.pushState=d.pushState||f,d.replaceState=d.replaceState||f}else d.onPopState=function(e,n){var i,r,o=!1,s=!1;return d.doubleCheckComplete(),(i=d.getHash())?((r=d.extractState(i||d.getLocationHref(),!0))?d.replaceState(r.data,r.title,r.url,!1):(d.Adapter.trigger(t,"anchorchange"),d.busy(!1)),d.expectedStateId=!1,!1):((s=(o=d.Adapter.extractEventData("state",e,n)||!1)?d.getStateById(o):d.expectedStateId?d.getStateById(d.expectedStateId):d.extractState(d.getLocationHref()))||(s=d.createStateObject(null,null,d.getLocationHref())),d.expectedStateId=!1,d.isLastSavedState(s)?(d.busy(!1),!1):(d.storeState(s),d.saveState(s),d.setTitle(s),d.Adapter.trigger(t,"statechange"),d.busy(!1),!0))},d.Adapter.bind(t,"popstate",d.onPopState),d.pushState=function(e,n,i,r){if(d.getHashByUrl(i)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==r&&d.busy())return d.pushQueue({scope:d,callback:d.pushState,args:arguments,queue:r}),!1;d.busy(!0);var o=d.createStateObject(e,n,i);return d.isLastSavedState(o)?d.busy(!1):(d.storeState(o),d.expectedStateId=o.id,p.pushState(o.id,o.title,o.url),d.Adapter.trigger(t,"popstate")),!0},d.replaceState=function(e,n,i,r){if(d.getHashByUrl(i)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==r&&d.busy())return d.pushQueue({scope:d,callback:d.replaceState,args:arguments,queue:r}),!1;d.busy(!0);var o=d.createStateObject(e,n,i);return d.isLastSavedState(o)?d.busy(!1):(d.storeState(o),d.expectedStateId=o.id,p.replaceState(o.id,o.title,o.url),d.Adapter.trigger(t,"popstate")),!0};if(o){try{d.store=h.parse(o.getItem("History.store"))||{}}catch(m){d.store={}}d.normalizeStore()}else d.store={},d.normalizeStore();d.Adapter.bind(t,"unload",d.clearAllIntervals),d.saveState(d.storeState(d.extractState(d.getLocationHref(),!0))),o&&(d.onUnload=function(){var t,e,n;try{t=h.parse(o.getItem("History.store"))||{}}catch(i){t={}}for(e in t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{},d.idToState)d.idToState.hasOwnProperty(e)&&(t.idToState[e]=d.idToState[e]);for(e in d.urlToId)d.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=d.urlToId[e]);for(e in d.stateToId)d.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=d.stateToId[e]);d.store=t,d.normalizeStore(),n=h.stringify(t);try{o.setItem("History.store",n)}catch(r){if(r.code!==DOMException.QUOTA_EXCEEDED_ERR)throw r;o.length&&(o.removeItem("History.store"),o.setItem("History.store",n))}},d.intervalList.push(l(d.onUnload,d.options.storeInterval)),d.Adapter.bind(t,"beforeunload",d.onUnload),d.Adapter.bind(t,"unload",d.onUnload)),d.emulated.pushState||(d.bugs.safariPoll&&d.intervalList.push(l(d.safariStatePoll,d.options.safariPollInterval)),"Apple Computer, Inc."!==r.vendor&&"Mozilla"!==(r.appCodeName||"")||(d.Adapter.bind(t,"hashchange",function(){d.Adapter.trigger(t,"popstate")}),d.getHash()&&d.Adapter.onDomLoad(function(){d.Adapter.trigger(t,"hashchange")})))},(!d.options||!d.options.delayInit)&&d.init()}(window),function(){function t(e,n,i){var r=t.resolve(e);if(null==r){i=i||e,n=n||"root";var o=new Error('Failed to require "'+i+'" from "'+n+'"');throw o.path=i,o.parent=n,o.require=!0,o}var s=t.modules[r];if(!s._resolving&&!s.exports){var a={exports:{}};a.client=a.component=!0,s._resolving=!0,s.call(this,a.exports,t.relative(r),a),delete s._resolving,s.exports=a.exports}return s.exports}t.modules={},t.aliases={},t.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var n=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],i=0;i<n.length;i++){e=n[i];if(t.modules.hasOwnProperty(e))return e;if(t.aliases.hasOwnProperty(e))return t.aliases[e]}},t.normalize=function(t,e){var n=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var i=0;i<e.length;++i)".."==e[i]?t.pop():"."!=e[i]&&""!=e[i]&&n.push(e[i]);return t.concat(n).join("/")},t.register=function(e,n){t.modules[e]=n},t.alias=function(e,n){if(!t.modules.hasOwnProperty(e))throw new Error('Failed to alias "'+e+'", it does not exist');t.aliases[n]=e},t.relative=function(e){function n(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function i(n){return t(i.resolve(n),e,n)}var r=t.normalize(e,"..");return i.resolve=function(i){var o=i.charAt(0);if("/"==o)return i.slice(1);if("."==o)return t.normalize(r,i);var s=e.split("/"),a=n(s,"deps")+1;return a||(a=0),i=s.slice(0,a+1).join("/")+"/deps/"+i},i.exists=function(e){return t.modules.hasOwnProperty(i.resolve(e))},i},t.register("component-emitter/index.js",function(t,e,n){function i(t){if(t)return r(t)}function r(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}n.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){i.off(t,n),e.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e);return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),t.register("dropzone/index.js",function(t,e,n){n.exports=e("./lib/dropzone.js")}),t.register("dropzone/lib/dropzone.js",function(t,e,n){(function(){var t,i,r,o,s,a,l,u,h={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d=[].slice;i="undefined"!=typeof Emitter&&null!==Emitter?Emitter:e("emitter"),l=function(){},(t=function(){function t(n,i){var r,o,s;if(this.element=n,this.version=t.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(t.instances.push(this),this.element.dropzone=this,r=null!=(s=t.optionsForElement(this.element))?s:{},this.options=e({},this.defaultOptions,r,null!=i?i:{}),this.options.forceFallback||!t.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(o=this.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),this.options.previewsContainer?this.previewsContainer=t.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element,this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=t.getElements(this.options.clickable,"clickable")),this.init()}var e;return c(t,i),t.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"],t.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return l},forceFallback:!1,fallback:function(){var e,n,i,r,o,s;for(this.element.className=this.element.className+" dz-browser-not-supported",r=0,o=(s=this.element.getElementsByTagName("div")).length;r<o;r++)e=s[r],/(^| )dz-message($| )/.test(e.className)&&(n=e,e.className="dz-message");return n||(n=t.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(n)),(i=n.getElementsByTagName("span")[0])&&(i.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,n,i;return e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},n=t.width/t.height,i=this.options.thumbnailWidth/this.options.thumbnailHeight,t.height<this.options.thumbnailHeight||t.width<this.options.thumbnailWidth?(e.trgHeight=e.srcHeight,e.trgWidth=e.srcWidth):n>i?(e.srcHeight=t.height,e.srcWidth=e.srcHeight*i):(e.srcWidth=t.width,e.srcHeight=e.srcWidth/i),e.srcX=(t.width-e.srcWidth)/2,e.srcY=(t.height-e.srcHeight)/2,e},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:l,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:l,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var n,i,r,o,s,a,l,u,h,c,d,p,f=this;for(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),e.previewElement=t.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),r=0,a=(h=e.previewElement.querySelectorAll("[data-dz-name]")).length;r<a;r++)h[r].textContent=e.name;for(o=0,l=(c=e.previewElement.querySelectorAll("[data-dz-size]")).length;o<l;o++)c[o].innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),n=function(n){return n.preventDefault(),n.stopPropagation(),e.status===t.UPLOADING?t.confirm(f.options.dictCancelUploadConfirmation,function(){return f.removeFile(e)}):f.options.dictRemoveFileConfirmation?t.confirm(f.options.dictRemoveFileConfirmation,function(){return f.removeFile(e)}):f.removeFile(e)},p=[],s=0,u=(d=e.previewElement.querySelectorAll("[data-dz-remove]")).length;s<u;s++)i=d[s],p.push(i.addEventListener("click",n));return p},removedfile:function(t){var e;return null!=(e=t.previewElement)&&e.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var n,i,r,o,s;for(t.previewElement.classList.remove("dz-file-preview"),t.previewElement.classList.add("dz-image-preview"),s=[],i=0,r=(o=t.previewElement.querySelectorAll("[data-dz-thumbnail]")).length;i<r;i++)(n=o[i]).alt=t.name,s.push(n.src=e);return s},error:function(t,e){var n,i,r,o,s;for(t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error),s=[],i=0,r=(o=t.previewElement.querySelectorAll("[data-dz-errormessage]")).length;i<r;i++)n=o[i],s.push(n.textContent=e);return s},errormultiple:l,processing:function(t){if(t.previewElement.classList.add("dz-processing"),t._removeLink)return t._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:l,uploadprogress:function(t,e){var n,i,r,o,s;for(s=[],i=0,r=(o=t.previewElement.querySelectorAll("[data-dz-uploadprogress]")).length;i<r;i++)n=o[i],s.push(n.style.width=e+"%");return s},totaluploadprogress:l,sending:l,sendingmultiple:l,success:function(t){return t.previewElement.classList.add("dz-success")},successmultiple:l,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:l,complete:function(t){if(t._removeLink)return t._removeLink.textContent=this.options.dictRemoveFile},completemultiple:l,maxfilesexceeded:l,maxfilesreached:l,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>\u2714</span></div>\n  <div class="dz-error-mark"><span>\u2718</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},e=function(){var t,e,n,i,r,o,s;for(i=arguments[0],o=0,s=(n=2<=arguments.length?d.call(arguments,1):[]).length;o<s;o++)for(t in e=n[o])r=e[t],i[t]=r;return i},t.prototype.getAcceptedFiles=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.files).length;e<n;e++)(t=i[e]).accepted&&r.push(t);return r},t.prototype.getRejectedFiles=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.files).length;e<n;e++)(t=i[e]).accepted||r.push(t);return r},t.prototype.getQueuedFiles=function(){var e,n,i,r,o;for(o=[],n=0,i=(r=this.files).length;n<i;n++)(e=r[n]).status===t.QUEUED&&o.push(e);return o},t.prototype.getUploadingFiles=function(){var e,n,i,r,o;for(o=[],n=0,i=(r=this.files).length;n<i;n++)(e=r[n]).status===t.UPLOADING&&o.push(e);return o},t.prototype.init=function(){var e,n,i,r,o,s,a,l=this;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(){return l.hiddenFileInput&&document.body.removeChild(l.hiddenFileInput),l.hiddenFileInput=document.createElement("input"),l.hiddenFileInput.setAttribute("type","file"),(null==l.options.maxFiles||l.options.maxFiles>1)&&l.hiddenFileInput.setAttribute("multiple","multiple"),null!=l.options.acceptedFiles&&l.hiddenFileInput.setAttribute("accept",l.options.acceptedFiles),l.hiddenFileInput.style.visibility="hidden",l.hiddenFileInput.style.position="absolute",l.hiddenFileInput.style.top="0",l.hiddenFileInput.style.left="0",l.hiddenFileInput.style.height="0",l.hiddenFileInput.style.width="0",document.body.appendChild(l.hiddenFileInput),l.hiddenFileInput.addEventListener("change",function(){var t,e,n,r;if((e=l.hiddenFileInput.files).length)for(n=0,r=e.length;n<r;n++)t=e[n],l.addFile(t);return i()})})(),this.URL=null!=(s=window.URL)?s:window.webkitURL,r=0,o=(a=this.events).length;r<o;r++)e=a[r],this.on(e,this.options[e]);return this.on("uploadprogress",function(){return l.updateTotalUploadProgress()}),this.on("removedfile",function(){return l.updateTotalUploadProgress()}),this.on("canceled",function(t){return l.emit("complete",t)}),this.on("complete",function(){if(0===l.getUploadingFiles().length&&0===l.getQueuedFiles().length)return setTimeout(function(){return l.emit("queuecomplete")},0)}),n=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return l.emit("dragstart",t)},dragenter:function(t){return n(t),l.emit("dragenter",t)},dragover:function(t){var e;try{e=t.dataTransfer.effectAllowed}catch(i){}return t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy",n(t),l.emit("dragover",t)},dragleave:function(t){return l.emit("dragleave",t)},drop:function(t){return n(t),l.drop(t)},dragend:function(t){return l.emit("dragend",t)},paste:function(t){return n(t),l.paste(t)}}}],this.clickableElements.forEach(function(e){return l.listeners.push({element:e,events:{click:function(n){if(e!==l.element||n.target===l.element||t.elementInside(n.target,l.element.querySelector(".dz-message")))return l.hiddenFileInput.click()}}})}),this.enable(),this.options.init.call(this)},t.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)},t.prototype.updateTotalUploadProgress=function(){var t,e,n,i,r,o,s;if(n=0,e=0,this.getAcceptedFiles().length){for(r=0,o=(s=this.getAcceptedFiles()).length;r<o;r++)n+=(t=s[r]).upload.bytesSent,e+=t.upload.total;i=100*n/e}else i=100;return this.emit("totaluploadprogress",i,e,n)},t.prototype.getFallbackForm=function(){var e,n,i,r;return(e=this.getExistingFallback())?e:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',n=t.createElement(i),"FORM"!==this.element.tagName?(r=t.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(n):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:n)},t.prototype.getExistingFallback=function(){var t,e,n,i,r,o;for(e=function(t){var e,n,i;for(n=0,i=t.length;n<i;n++)if(e=t[n],/(^| )fallback($| )/.test(e.className))return e},i=0,r=(o=["div","form"]).length;i<r;i++)if(n=o[i],t=e(this.element.getElementsByTagName(n)))return t},t.prototype.setupEventListeners=function(){var t,e,n,i,r,o,s;for(s=[],i=0,r=(o=this.listeners).length;i<r;i++)t=o[i],s.push(function(){var i,r;for(e in r=[],i=t.events)n=i[e],r.push(t.element.addEventListener(e,n,!1));return r}());return s},t.prototype.removeEventListeners=function(){var t,e,n,i,r,o,s;for(s=[],i=0,r=(o=this.listeners).length;i<r;i++)t=o[i],s.push(function(){var i,r;for(e in r=[],i=t.events)n=i[e],r.push(t.element.removeEventListener(e,n,!1));return r}());return s},t.prototype.disable=function(){var t,e,n,i,r;for(this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),r=[],e=0,n=(i=this.files).length;e<n;e++)t=i[e],r.push(this.cancelUpload(t));return r},t.prototype.enable=function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()},t.prototype.filesize=function(t){var e;return t>=109951162777.6?(t/=109951162777.6,e="TiB"):t>=107374182.4?(t/=107374182.4,e="GiB"):t>=104857.6?(t/=104857.6,e="MiB"):t>=102.4?(t/=102.4,e="KiB"):(t*=10,e="b"),"<strong>"+Math.round(t)/10+"</strong> "+e},t.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},t.prototype.drop=function(t){var e,n;t.dataTransfer&&(this.emit("drop",t),(e=t.dataTransfer.files).length&&((n=t.dataTransfer.items)&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(e)))},t.prototype.paste=function(){},t.prototype.handleFiles=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(this.addFile(e));return r},t.prototype._addFilesFromItems=function(t){var e,n,i,r,o;for(o=[],i=0,r=t.length;i<r;i++)null!=(n=t[i]).webkitGetAsEntry&&(e=n.webkitGetAsEntry())?e.isFile?o.push(this.addFile(n.getAsFile())):e.isDirectory?o.push(this._addFilesFromDirectory(e,e.name)):o.push(void 0):null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?o.push(this.addFile(n.getAsFile())):o.push(void 0);return o},t.prototype._addFilesFromDirectory=function(t,e){var n,i=this;return n=function(t){var n,r,o;for(r=0,o=t.length;r<o;r++)(n=t[r]).isFile?n.file(function(t){if(!i.options.ignoreHiddenFiles||"."!==t.name.substring(0,1))return t.fullPath=e+"/"+t.name,i.addFile(t)}):n.isDirectory&&i._addFilesFromDirectory(n,e+"/"+n.name)},t.createReader().readEntries(n,function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(t):void 0})},t.prototype.accept=function(e,n){return e.size>1024*this.options.maxFilesize*1024?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,n):n(this.options.dictInvalidFileType)},t.prototype.addFile=function(e){var n=this;return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=t.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return t?(e.accepted=!1,n._errorProcessing([e],t)):n.enqueueFile(e),n._updateMaxFilesReachedClass()})},t.prototype.enqueueFiles=function(t){var e,n,i;for(n=0,i=t.length;n<i;n++)e=t[n],this.enqueueFile(e);return null},t.prototype.enqueueFile=function(e){var n=this;if(e.accepted=!0,e.status!==t.ADDED)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=t.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return n.processQueue()},0)},t.prototype._thumbnailQueue=[],t.prototype._processingThumbnail=!1,t.prototype._enqueueThumbnail=function(t){var e=this;if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout(function(){return e._processThumbnailQueue()},0)},
t.prototype._processThumbnailQueue=function(){var t=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(){return t._processingThumbnail=!1,t._processThumbnailQueue()})},t.prototype.removeFile=function(e){if(e.status===t.UPLOADING&&this.cancelUpload(e),this.files=u(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")},t.prototype.removeAllFiles=function(e){var n,i,r,o;for(null==e&&(e=!1),i=0,r=(o=this.files.slice()).length;i<r;i++)((n=o[i]).status!==t.UPLOADING||e)&&this.removeFile(n);return null},t.prototype.createThumbnail=function(t,e){var n,i=this;return(n=new FileReader).onload=function(){var r;return(r=document.createElement("img")).onload=function(){var n,o,s,l,u,h,c,d;if(t.width=r.width,t.height=r.height,null==(s=i.options.resize.call(i,t)).trgWidth&&(s.trgWidth=i.options.thumbnailWidth),null==s.trgHeight&&(s.trgHeight=i.options.thumbnailHeight),o=(n=document.createElement("canvas")).getContext("2d"),n.width=s.trgWidth,n.height=s.trgHeight,a(o,r,null!=(u=s.srcX)?u:0,null!=(h=s.srcY)?h:0,s.srcWidth,s.srcHeight,null!=(c=s.trgX)?c:0,null!=(d=s.trgY)?d:0,s.trgWidth,s.trgHeight),l=n.toDataURL("image/png"),i.emit("thumbnail",t,l),null!=e)return e()},r.src=n.result},n.readAsDataURL(t)},t.prototype.processQueue=function(){var t,e,n,i;if(e=this.options.parallelUploads,t=n=this.getUploadingFiles().length,!(n>=e)&&(i=this.getQueuedFiles()).length>0){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-n));for(;t<e;){if(!i.length)return;this.processFile(i.shift()),t++}}},t.prototype.processFile=function(t){return this.processFiles([t])},t.prototype.processFiles=function(e){var n,i,r;for(i=0,r=e.length;i<r;i++)(n=e[i]).processing=!0,n.status=t.UPLOADING,this.emit("processing",n);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},t.prototype._getFilesWithXhr=function(t){var e;return function(){var n,i,r,o;for(o=[],n=0,i=(r=this.files).length;n<i;n++)(e=r[n]).xhr===t&&o.push(e);return o}.call(this)},t.prototype.cancelUpload=function(e){var n,i,r,o,s,a,l;if(e.status===t.UPLOADING){for(r=0,s=(i=this._getFilesWithXhr(e.xhr)).length;r<s;r++)(n=i[r]).status=t.CANCELED;for(e.xhr.abort(),o=0,a=i.length;o<a;o++)n=i[o],this.emit("canceled",n);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else(l=e.status)!==t.ADDED&&l!==t.QUEUED||(e.status=t.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()},t.prototype.uploadFile=function(t){return this.uploadFiles([t])},t.prototype.uploadFiles=function(n){var i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x,S,C,E,M,L,T,k,D,P,O,I=this;for(v=new XMLHttpRequest,y=0,x=n.length;y<x;y++)(i=n[y]).xhr=v;for(s in v.open(this.options.method,this.options.url,!0),v.withCredentials=!!this.options.withCredentials,f=null,o=function(){var t,e,r;for(r=[],t=0,e=n.length;t<e;t++)i=n[t],r.push(I._errorProcessing(n,f||I.options.dictResponseError.replace("{{statusCode}}",v.status),v));return r},m=function(t){var e,r,o,s,a,l,u,h,c;if(null!=t)for(r=100*t.loaded/t.total,o=0,l=n.length;o<l;o++)(i=n[o]).upload={progress:r,total:t.total,bytesSent:t.loaded};else{for(e=!0,r=100,s=0,u=n.length;s<u;s++)100===(i=n[s]).upload.progress&&i.upload.bytesSent===i.upload.total||(e=!1),i.upload.progress=r,i.upload.bytesSent=i.upload.total;if(e)return}for(c=[],a=0,h=n.length;a<h;a++)i=n[a],c.push(I.emit("uploadprogress",i,r,i.upload.bytesSent));return c},v.onload=function(e){var i;if(n[0].status!==t.CANCELED&&4===v.readyState){if(f=v.responseText,v.getResponseHeader("content-type")&&~v.getResponseHeader("content-type").indexOf("application/json"))try{f=JSON.parse(f)}catch(r){e=r,f="Invalid JSON response from server."}return m(),200<=(i=v.status)&&i<300?I._finished(n,f,e):o()}},v.onerror=function(){if(n[0].status!==t.CANCELED)return o()},(null!=(T=v.upload)?T:v).onprogress=m,l={Accept:"application/json","X-Requested-With":"XMLHttpRequest"},this.options.headers&&e(l,this.options.headers),l)a=l[s],v.setRequestHeader(s,a);if(r=new FormData,this.options.params)for(d in k=this.options.params)g=k[d],r.append(d,g);for(_=0,S=n.length;_<S;_++)i=n[_],this.emit("sending",i,v,r);if(this.options.uploadMultiple&&this.emit("sendingmultiple",n,v,r),"FORM"===this.element.tagName)for(b=0,C=(D=this.element.querySelectorAll("input, textarea, select, button")).length;b<C;b++)if(h=(u=D[b]).getAttribute("name"),c=u.getAttribute("type"),"SELECT"===u.tagName&&u.hasAttribute("multiple"))for(w=0,E=(P=u.options).length;w<E;w++)(p=P[w]).selected&&r.append(h,p.value);else(!c||"checkbox"!==(O=c.toLowerCase())&&"radio"!==O||u.checked)&&r.append(h,u.value);for(L=0,M=n.length;L<M;L++)i=n[L],r.append(this.options.paramName+(this.options.uploadMultiple?"[]":""),i,i.name);return v.send(r)},t.prototype._finished=function(e,n,i){var r,o,s;for(o=0,s=e.length;o<s;o++)(r=e[o]).status=t.SUCCESS,this.emit("success",r,n,i),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,n,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},t.prototype._errorProcessing=function(e,n,i){var r,o,s;for(o=0,s=e.length;o<s;o++)(r=e[o]).status=t.ERROR,this.emit("error",r,n,i),this.emit("complete",r);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,n,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},t}()).version="3.8.3",t.options={},t.optionsForElement=function(e){return e.getAttribute("id")?t.options[r(e.getAttribute("id"))]:void 0},t.instances=[],t.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},t.autoDiscover=!0,t.discover=function(){var e,n,i,r,o,s;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],(e=function(t){var e,n,r,o;for(o=[],n=0,r=t.length;n<r;n++)e=t[n],/(^| )dropzone($| )/.test(e.className)?o.push(i.push(e)):o.push(void 0);return o})(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),s=[],r=0,o=i.length;r<o;r++)n=i[r],!1!==t.optionsForElement(n)?s.push(new t(n)):s.push(void 0);return s},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,n,i,r;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(n=0,i=(r=t.blacklistedBrowsers).length;n<i;n++)r[n].test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},u=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;i<r;i++)(n=t[i])!==e&&o.push(n);return o},r=function(t){return t.replace(/[\-_](\w)/g,function(t){return t[1].toUpperCase()})},t.createElement=function(t){var e;return(e=document.createElement("div")).innerHTML=t,e.childNodes[0]},t.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},t.getElement=function(t,e){var n;if("string"==typeof t?n=document.querySelector(t):null!=t.nodeType&&(n=t),null==n)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},t.getElements=function(t,e){var n,i,r,o,s,a,l;if(t instanceof Array){i=[];try{for(r=0,s=t.length;r<s;r++)n=t[r],i.push(this.getElement(n,e))}catch(u){u,i=null}}else if("string"==typeof t)for(i=[],o=0,a=(l=document.querySelectorAll(t)).length;o<a;o++)n=l[o],i.push(n);else null!=t.nodeType&&(i=[t]);if(null==i||!i.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return i},t.confirm=function(t,e,n){return window.confirm(t)?e():null!=n?n():void 0},t.isValidFile=function(t,e){var n,i,r,o,s;if(!e)return!0;for(e=e.split(","),n=(i=t.type).replace(/\/.*$/,""),o=0,s=e.length;o<s;o++)if("."===(r=(r=e[o]).trim()).charAt(0)){if(-1!==t.name.toLowerCase().indexOf(r.toLowerCase(),t.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(n===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),void 0!==n&&null!==n?n.exports=t:window.Dropzone=t,t.ADDED="added",t.QUEUED="queued",t.ACCEPTED=t.QUEUED,t.UPLOADING="uploading",t.PROCESSING=t.UPLOADING,t.CANCELED="canceled",t.ERROR="error",t.SUCCESS="success",s=function(t){var e,n,i,r,o,s,a,l;for(t.naturalWidth,o=t.naturalHeight,(e=document.createElement("canvas")).width=1,e.height=o,(n=e.getContext("2d")).drawImage(t,0,0),i=n.getImageData(0,0,1,o).data,l=0,r=o,s=o;s>l;)0===i[4*(s-1)+3]?r=s:l=s,s=r+l>>1;return 0===(a=s/o)?1:a},a=function(t,e,n,i,r,o,a,l,u,h){var c;return c=s(e),t.drawImage(e,n,i,r,o,a,l,u,h/c)},o=function(t,e){var n,i,r,o,s,a,l,u,h;if(r=!1,h=!0,i=t.document,u=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",a=i.addEventListener?"":"on",o=function(n){if("readystatechange"!==n.type||"complete"===i.readyState)return("load"===n.type?t:i)[l](a+n.type,o,!1),!r&&(r=!0)?e.call(t,n.type||n):void 0},s=function(){try{u.doScroll("left")}catch(t){return t,void setTimeout(s,50)}return o("poll")},"complete"!==i.readyState){if(i.createEventObject&&u.doScroll){try{h=!t.frameElement}catch(c){}h&&s()}return i[n](a+"DOMContentLoaded",o,!1),i[n](a+"readystatechange",o,!1),t[n](a+"load",o,!1)}},t._autoDiscoverFunction=function(){if(t.autoDiscover)return t.discover()},o(window,t._autoDiscoverFunction)}).call(this)}),t.alias("component-emitter/index.js","dropzone/deps/emitter/index.js"),t.alias("component-emitter/index.js","emitter/index.js"),"object"==typeof exports?module.exports=t("dropzone"):"function"==typeof define&&define.amd?define(function(){return t("dropzone")}):this.Dropzone=t("dropzone")}(),function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof window?window.proj4=t():"undefined"!=typeof global?global.proj4=t():"undefined"!=typeof self&&(self.proj4=t())}(function(){return function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n||t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e){function n(t,e,i){if(!(this instanceof n))return new n(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=i||0;this.clone=function(){return new n(this.x,this.y,this.z)},this.toArray=function(){return this.z?[this.x,this.y,this.z]:[this.x,this.y]},this.toString=function(){return this.z?"x="+this.x+",y="+this.y+",z="+this.z:"x="+this.x+",y="+this.y},this.toShortString=function(){return this.z?this.x+","+this.y+","+this.z:this.x+","+this.y}}var i=t("./mgrs");n.fromMGRS=function(t){var e=i.inverse(t);return new n((e[2]+e[0])/2,(e[3]+e[1])/2)},n.prototype.toMGRS=function(t){return i.forward({lon:this.x,lat:this.y},t)},e.exports=n},{"./mgrs":17}],2:[function(t,e){function n(t){if(!(this instanceof n))return new n(t);var e;this.srsCodeInput=t,this.x0=0,this.y0=0,"string"==typeof t?t in o?(this.deriveConstants(o[t]),i(this,o[t])):t.indexOf("GEOGCS")>=0||t.indexOf("GEOCCS")>=0||t.indexOf("PROJCS")>=0||t.indexOf("LOCAL_CS")>=0?(e=u(t),this.deriveConstants(e),i(this,e)):"+"===t[0]&&(e=h(t),this.deriveConstants(e),i(this,e)):(this.deriveConstants(t),i(this,t)),this.initTransforms(this.projName)}var i=t("./extend"),r=t("./common"),o=t("./defs"),s=t("./constants/index"),a=t("./datum"),l=t("./projections/index"),u=t("./wkt"),h=t("./projString");n.projections=l,n.projections.start(),n.prototype={initTransforms:function(t){var e=n.projections.get(t);if(!e)throw"unknown projection "+t;i(this,e),this.init()},deriveConstants:function(t){if(t.nadgrids&&0===t.nadgrids.length&&(t.nadgrids=null),t.nadgrids){t.grids=t.nadgrids.split(",");var e=t.grids.length;if(e>0)for(var n=0;e>n;n++){var o=t.grids[n].split("@");""!==o[o.length-1]&&(t.grids[n]={mandatory:1===o.length,name:o[o.length-1],grid:s.grids[o[o.length-1]]},t.grids[n].mandatory&&t.grids[n].grid)}}if(t.datumCode&&"none"!==t.datumCode){var l=s.Datum[t.datumCode];l&&(t.datum_params=l.towgs84?l.towgs84.split(","):null,t.ellps=l.ellipse,t.datumName=l.datumName?l.datumName:t.datumCode)}if(!t.a){var u=s.Ellipsoid[t.ellps]?s.Ellipsoid[t.ellps]:s.Ellipsoid.WGS84;i(t,u)}t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<r.EPSLN)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(r.SIXTH+t.es*(r.RA4+t.es*r.RA6)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum=a(t)}},e.exports=n},{"./common":4,"./constants/index":9,"./datum":11,"./defs":13,"./extend":14,"./projString":18,"./projections/index":27,"./wkt":47}],3:[function(t,e){e.exports=function(t,e,n){var i,r,o,s=n.x,a=n.y,l=n.z||0;for(o=0;3>o;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(i=s,r="x"):1===o?(i=a,r="y"):(i=l,r="z"),t.axis[o]){case"e":n[r]=i;break;case"w":n[r]=-i;break;case"n":n[r]=i;break;case"s":n[r]=-i;break;case"u":void 0!==n[r]&&(n.z=i);break;case"d":void 0!==n[r]&&(n.z=-i);break;default:return null}return n}},{}],4:[function(t,e,n){n.PI=3.141592653589793,n.HALF_PI=1.5707963267948966,n.TWO_PI=6.283185307179586,n.FORTPI=.7853981633974483,n.R2D=57.29577951308232,n.D2R=.017453292519943295,n.SEC_TO_RAD=484813681109536e-20,n.EPSLN=1e-10,n.MAX_ITER=20,n.COS_67P5=.3826834323650898,n.AD_C=1.0026,n.PJD_UNKNOWN=0,n.PJD_3PARAM=1,n.PJD_7PARAM=2,n.PJD_GRIDSHIFT=3,n.PJD_WGS84=4,n.PJD_NODATUM=5,n.SRS_WGS84_SEMIMAJOR=6378137,n.SRS_WGS84_ESQUARED=.006694379990141316,n.SIXTH=.16666666666666666,n.RA4=.04722222222222222,n.RA6=.022156084656084655,n.RV4=.06944444444444445,n.RV6=.04243827160493827,n.msfnz=function(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)},n.tsfnz=function(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(this.HALF_PI-e))/i},n.phi2z=function(t,e){for(var n,i,r=.5*t,o=this.HALF_PI-2*Math.atan(e),s=0;15>=s;s++)if(n=t*Math.sin(o),o+=i=this.HALF_PI-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-o,Math.abs(i)<=1e-10)return o;return-9999},n.qsfnz=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e},n.iqsfnz=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return 0>e?-1*n.HALF_PI:n.HALF_PI;for(var r,o,s,a,l=Math.asin(.5*e),u=0;30>u;u++)if(o=Math.sin(l),s=Math.cos(l),a=t*o,l+=r=Math.pow(1-a*a,2)/(2*s)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return l;return NaN},n.asinz=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},n.e0fn=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},n.e1fn=function(t){return.375*t*(1+.25*t*(1+.46875*t))},n.e2fn=function(t){return.05859375*t*t*(1+.75*t)},n.e3fn=function(t){return t*t*t*(35/3072)},n.mlfn=function(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)},n.imlfn=function(t,e,n,i,r){var o,s;o=t/e;for(var a=0;15>a;a++)if(o+=s=(t-(e*o-n*Math.sin(2*o)+i*Math.sin(4*o)-r*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*i*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN},n.srat=function(t,e){return Math.pow((1-t)/(1+t),e)},n.sign=function(t){return 0>t?-1:1},n.adjust_lon=function(t){return Math.abs(t)<this.PI?t:t-this.sign(t)*this.TWO_PI},n.adjust_lat=function(t){return Math.abs(t)<this.HALF_PI?t:t-this.sign(t)*this.PI},n.latiso=function(t,e,n){if(Math.abs(e)>this.HALF_PI)return Number.NaN;if(e===this.HALF_PI)return Number.POSITIVE_INFINITY;if(e===-1*this.HALF_PI)return Number.NEGATIVE_INFINITY;var i=t*n;return Math.log(Math.tan((this.HALF_PI+e)/2))+t*Math.log((1-i)/(1+i))/2},n.fL=function(t,e){return 2*Math.atan(t*Math.exp(e))-this.HALF_PI},n.invlatiso=function(t,e){var n=this.fL(1,e),i=0,r=0;do{i=n,r=t*Math.sin(i),n=this.fL(Math.exp(t*Math.log((1+r)/(1-r))/2),e)}while(Math.abs(n-i)>1e-12);return n},n.sinh=function(t){var e=Math.exp(t);return(e-1/e)/2},n.cosh=function(t){var e=Math.exp(t);return(e+1/e)/2},n.tanh=function(t){var e=Math.exp(t);return(e-1/e)/(e+1/e)},n.asinh=function(t){return(t>=0?1:-1)*Math.log(Math.abs(t)+Math.sqrt(t*t+1))},n.acosh=function(t){return 2*Math.log(Math.sqrt((t+1)/2)+Math.sqrt((t-1)/2))},n.atanh=function(t){return Math.log((t-1)/(t+1))/2},n.gN=function(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)},n.pj_enfn=function(t){var e=[];e[0]=this.C00-t*(this.C02+t*(this.C04+t*(this.C06+t*this.C08))),e[1]=t*(this.C22-t*(this.C04+t*(this.C06+t*this.C08)));var n=t*t;return e[2]=n*(this.C44-t*(this.C46+t*this.C48)),n*=t,e[3]=n*(this.C66-t*this.C68),e[4]=n*t*this.C88,e},n.pj_mlfn=function(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))},n.pj_inv_mlfn=function(t,e,i){for(var r=1/(1-e),o=t,s=n.MAX_ITER;s;--s){var a=Math.sin(o),l=1-e*a*a;if(o-=l=(this.pj_mlfn(o,a,Math.cos(o),i)-t)*l*Math.sqrt(l)*r,Math.abs(l)<n.EPSLN)return o}return o},n.nadInterBreakout=function(t,e,n,i,r){var o;if(t[n]<0){if(!(-1===t[n]&&e[n]>.99999999999))return!1;t[n]++,e[n]=0}else if((o=t[n]+1)>=r.lim[i]){if(!(o===r.lim[i]&&e[n]<1e-11))return!1;"x"===n?t[n]--:t[n]++,e[n]=1}return[t,e]},n.nad_intr=function(t,e){var i={x:(t.x-1e-7)/e.del[0],y:(t.y-1e-7)/e.del[1]},r={x:Math.floor(i.x),y:Math.floor(i.y)},o={x:i.x-1*r.x,y:i.y-1*r.y},s={x:Number.NaN,y:Number.NaN},a=n.nadInterBreakout(r,o,"x",0,e);if(!a)return s;if(r=a[0],o=a[1],!(a=n.nadInterBreakout(r,o,"y",1,e)))return s;r=a[0],o=a[1];var l=r.y*e.lim[0]+r.x,u={x:e.cvs[l][0],y:e.cvs[l][1]};l++;var h={x:e.cvs[l][0],y:e.cvs[l][1]};l+=e.lim[0];var c={x:e.cvs[l][0],y:e.cvs[l][1]};l--;var d={x:e.cvs[l][0],y:e.cvs[l][1]},p=o.x*o.y,f=o.x*(1-o.y),m=(1-o.x)*(1-o.y),g=(1-o.x)*o.y;return s.x=m*u.x+f*h.x+g*d.x+p*c.x,s.y=m*u.y+f*h.y+g*d.y+p*c.y,s},n.inverseNadCvt=function(t,e,i,r){if(isNaN(t.x))return e;t.x=i.x+t.x,t.y=i.y-t.y;var o,s,a=9,l=1e-12;do{if(s=n.nad_intr(t,r),isNaN(s.x)){this.reportError("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:t.x-s.x-i.x,y:t.y+s.y-i.y},t.x-=o.x,t.y-=o.y}while(a--&&Math.abs(o.x)>l&&Math.abs(o.y)>l);return 0>a?(this.reportError("Inverse grid shift iterator failed to converge."),e):(e.x=n.adjust_lon(t.x+r.ll[0]),e.y=t.y+r.ll[1],e)},n.nad_cvt=function(t,e,i){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var o={x:t.x,y:t.y};o.x-=i.ll[0],o.y-=i.ll[1],o.x=n.adjust_lon(o.x-n.PI)+n.PI;var s=n.nad_intr(o,i);return e?n.inverseNadCvt(s,r,o,i):(isNaN(s.x)||(r.x=t.x-s.x,r.y=t.y+s.y),r)},n.C00=1,n.C02=.25,n.C04=.046875,n.C06=.01953125,n.C08=.01068115234375,n.C22=.75,n.C44=.46875,n.C46=.013020833333333334,n.C48=.007120768229166667,n.C66=.3645833333333333,n.C68=.005696614583333333,n.C88=.3076171875},{}],5:[function(t,e,n){n.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},n.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},n.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},n.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},n.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},n.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},n.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},n.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},n.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},n.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},n.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},n.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},n.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},n.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},n.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"}},{}],6:[function(t,e,n){n.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},n.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},n.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},n.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},n.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},n.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},n.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},n.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},n.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},n.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},n.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},n.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},n.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},n.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},n.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},n.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},n.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},n.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},n.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},n.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},n.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},n.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},n.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},n.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},n.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},n.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},n.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},n.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},n.hough={a:6378270,rf:297,ellipseName:"Hough"},n.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},n.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},n.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},n.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},n.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},n.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},n.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},n.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},n.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},n.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},n.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},n.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},n.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},n.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],7:[function(t,e,n){n.greenwich=0,n.lisbon=-9.131906111111,n.paris=2.337229166667,n.bogota=-74.080916666667,n.madrid=-3.687938888889,n.rome=12.452333333333,n.bern=7.439583333333,n.jakarta=106.807719444444,n.ferro=-17.666666666667,n.brussels=4.367975,n.stockholm=18.058277777778,n.athens=23.7163375,n.oslo=10.722916666667},{}],8:[function(t,e,n){n["null"]={ll:[-3.14159265,-1.57079633],del:[3.14159265,1.57079633],lim:[3,3],count:9,cvs:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]]}},{}],9:[function(t,e,n){n.PrimeMeridian=t("./PrimeMeridian"),n.Ellipsoid=t("./Ellipsoid"),n.Datum=t("./Datum"),n.Datum.OSB36=n.Datum.OSGB36,n.grids=t("./grids")},{"./Datum":5,"./Ellipsoid":6,"./PrimeMeridian":7,"./grids":8}],10:[function(t,e){function n(t,e,n){var i;return Array.isArray(n)?(i=a(t,e,o(n)),3===n.length?[i.x,i.y,i.z]:[i.x,i.y]):a(t,e,n)}function i(t){return t instanceof s?t:t.oProj?t.oProj:s(t)}function r(t,e,r){t=i(t);var o,s=!1;return void 0===e?(e=t,t=l,s=!0):("undefined"!=typeof e.x||Array.isArray(e))&&(r=e,e=t,t=l,s=!0),e=i(e),r?n(t,e,r):(o={forward:function(i){return n(t,e,i)},inverse:function(i){return n(e,t,i)}},s&&(o.oProj=e),o)}var o=t("./Point"),s=t("./Proj"),a=t("./transform"),l=s("WGS84");e.exports=r},{"./Point":1,"./Proj":2,"./transform":45}],11:[function(t,e){var n=t("./common"),i=function(t){if(!(this instanceof i))return new i(t);if(this.datum_type=n.PJD_WGS84,t){if(t.datumCode&&"none"===t.datumCode&&(this.datum_type=n.PJD_NODATUM),t.datum_params){for(var e=0;e<t.datum_params.length;e++)t.datum_params[e]=parseFloat(t.datum_params[e]);(0!==t.datum_params[0]||0!==t.datum_params[1]||0!==t.datum_params[2])&&(this.datum_type=n.PJD_3PARAM),t.datum_params.length>3&&(0!==t.datum_params[3]||0!==t.datum_params[4]||0!==t.datum_params[5]||0!==t.datum_params[6])&&(this.datum_type=n.PJD_7PARAM,t.datum_params[3]*=n.SEC_TO_RAD,t.datum_params[4]*=n.SEC_TO_RAD,t.datum_params[5]*=n.SEC_TO_RAD,t.datum_params[6]=t.datum_params[6]/1e6+1)}this.datum_type=t.grids?n.PJD_GRIDSHIFT:this.datum_type,this.a=t.a,this.b=t.b,this.es=t.es,this.ep2=t.ep2,this.datum_params=t.datum_params,this.datum_type===n.PJD_GRIDSHIFT&&(this.grids=t.grids)}};i.prototype={compare_datums:function(t){return this.datum_type===t.datum_type&&(!(this.a!==t.a||Math.abs(this.es-t.es)>5e-11)&&(this.datum_type===n.PJD_3PARAM?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:this.datum_type===n.PJD_7PARAM?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:this.datum_type!==n.PJD_GRIDSHIFT&&t.datum_type!==n.PJD_GRIDSHIFT||this.nadgrids===t.nadgrids))},geodetic_to_geocentric:function(t){var e,i,r,o,s,a,l,u=t.x,h=t.y,c=t.z?t.z:0,d=0;if(h<-n.HALF_PI&&h>-1.001*n.HALF_PI)h=-n.HALF_PI;else if(h>n.HALF_PI&&h<1.001*n.HALF_PI)h=n.HALF_PI;else if(h<-n.HALF_PI||h>n.HALF_PI)return null;return u>n.PI&&(u-=2*n.PI),s=Math.sin(h),l=Math.cos(h),a=s*s,e=((o=this.a/Math.sqrt(1-this.es*a))+c)*l*Math.cos(u),i=(o+c)*l*Math.sin(u),r=(o*(1-this.es)+c)*s,t.x=e,t.y=i,t.z=r,d},geocentric_to_geodetic:function(t){var e,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y=1e-12,_=y*y,b=30,w=t.x,x=t.y,S=t.z?t.z:0;if(!1,e=Math.sqrt(w*w+x*x),i=Math.sqrt(w*w+x*x+S*S),e/this.a<y){if(!0,m=0,i/this.a<y)return g=n.HALF_PI,void(v=-this.b)}else m=Math.atan2(x,w);r=S/i,o=e/i,s=1/Math.sqrt(1-this.es*(2-this.es)*o*o),u=o*(1-this.es)*s,h=r*s,f=0;do{f++,v=e*u+S*h-(l=this.a/Math.sqrt(1-this.es*h*h))*(1-this.es*h*h),a=this.es*l/(l+v),p=(d=r*(s=1/Math.sqrt(1-a*(2-a)*o*o)))*u-(c=o*(1-a)*s)*h,u=c,h=d}while(p*p>_&&b>f);return g=Math.atan(d/Math.abs(c)),t.x=m,t.y=g,t.z=v,t},geocentric_to_geodetic_noniter:function(t){var e,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_=t.x,b=t.y,w=t.z?t.z:0;if(_=parseFloat(_),b=parseFloat(b),w=parseFloat(w),y=!1,0!==_)e=Math.atan2(b,_);else if(b>0)e=n.HALF_PI;else if(0>b)e=-n.HALF_PI;else if(y=!0,e=0,w>0)i=n.HALF_PI;else{if(!(0>w))return i=n.HALF_PI,void(r=-this.b);i=-n.HALF_PI}return s=_*_+b*b,o=Math.sqrt(s),a=w*n.AD_C,p=o/(u=Math.sqrt(a*a+s)),d=(c=a/u)*c*c,l=w+this.b*this.ep2*d,v=o-this.a*this.es*p*p*p,f=l/(h=Math.sqrt(l*l+v*v)),m=v/h,g=this.a/Math.sqrt(1-this.es*f*f),r=m>=n.COS_67P5?o/m-g:m<=-n.COS_67P5?o/-m-g:w/f+g*(this.es-1),!1===y&&(i=Math.atan(f/m)),t.x=e,t.y=i,t.z=r,t},geocentric_to_wgs84:function(t){if(this.datum_type===n.PJD_3PARAM)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(this.datum_type===n.PJD_7PARAM){var e=this.datum_params[0],i=this.datum_params[1],r=this.datum_params[2],o=this.datum_params[3],s=this.datum_params[4],a=this.datum_params[5],l=this.datum_params[6],u=l*(t.x-a*t.y+s*t.z)+e,h=l*(a*t.x+t.y-o*t.z)+i,c=l*(-s*t.x+o*t.y+t.z)+r;t.x=u,t.y=h,t.z=c}},geocentric_from_wgs84:function(t){if(this.datum_type===n.PJD_3PARAM)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(this.datum_type===n.PJD_7PARAM){var e=this.datum_params[0],i=this.datum_params[1],r=this.datum_params[2],o=this.datum_params[3],s=this.datum_params[4],a=this.datum_params[5],l=this.datum_params[6],u=(t.x-e)/l,h=(t.y-i)/l,c=(t.z-r)/l;t.x=u+a*h-s*c,t.y=-a*u+h+o*c,t.z=s*u-o*h+c}}},e.exports=i},{"./common":4}],12:[function(t,e){var n=t("./common");e.exports=function(t,e,i){function r(t){return t===n.PJD_3PARAM||t===n.PJD_7PARAM}var o,s,a;if(t.compare_datums(e))return i;if(t.datum_type===n.PJD_NODATUM||e.datum_type===n.PJD_NODATUM)return i;var l=t.a,u=t.es,h=e.a,c=e.es,d=t.datum_type;if(d===n.PJD_GRIDSHIFT)if(0===this.apply_gridshift(t,0,i))t.a=n.SRS_WGS84_SEMIMAJOR,t.es=n.SRS_WGS84_ESQUARED;else{if(!t.datum_params)return t.a=l,t.es=t.es,i;for(o=1,s=0,a=t.datum_params.length;a>s;s++)o*=t.datum_params[s];if(0===o)return t.a=l,t.es=t.es,i;d=t.datum_params.length>3?n.PJD_7PARAM:n.PJD_3PARAM}return e.datum_type===n.PJD_GRIDSHIFT&&(e.a=n.SRS_WGS84_SEMIMAJOR,e.es=n.SRS_WGS84_ESQUARED),(t.es!==e.es||t.a!==e.a||r(d)||r(e.datum_type))&&(t.geodetic_to_geocentric(i),r(t.datum_type)&&t.geocentric_to_wgs84(i),r(e.datum_type)&&e.geocentric_from_wgs84(i),e.geocentric_to_geodetic(i)),e.datum_type===n.PJD_GRIDSHIFT&&this.apply_gridshift(e,1,i),t.a=l,t.es=u,e.a=h,e.es=c,i}},{"./common":4}],13:[function(t,e){function n(t){var e=this;if(2===arguments.length)n[t]="+"===arguments[1][0]?r(arguments[1]):o(arguments[1]);else if(1===arguments.length)return Array.isArray(t)?t.map(function(t){Array.isArray(t)?n.apply(e,t):n(t)}):void("string"==typeof t||("EPSG"in t?n["EPSG:"+t.EPSG]=t:"ESRI"in t?n["ESRI:"+t.ESRI]=t:"IAU2000"in t?n["IAU2000:"+t.IAU2000]=t:console.log(t)))}var i=t("./global"),r=t("./projString"),o=t("./wkt");i(n),e.exports=n},{"./global":15,"./projString":18,"./wkt":47}],14:[function(t,e){e.exports=function(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t}},{}],15:[function(t,e){e.exports=function(t){t("WGS84","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},{}],16:[function(t,e){var n=t("./core");n.defaultDatum="WGS84",n.Proj=t("./Proj"),n.WGS84=new n.Proj("WGS84"),n.Point=t("./Point"),n.defs=t("./defs"),n.transform=t("./transform"),n.mgrs=t("./mgrs"),n.version=t("./version"),e.exports=n},{"./Point":1,"./Proj":2,"./core":10,"./defs":13,"./mgrs":17,"./transform":45,"./version":46}],17:[function(t,e,n){function i(t){return t*(Math.PI/180)}function r(t){return t/Math.PI*180}function o(t){var e,n,r,o,s,l,u,h=t.lat,c=t.lon,d=6378137,p=.00669438,f=.9996,m=i(h),g=i(c);u=Math.floor((c+180)/6)+1,180===c&&(u=60),h>=56&&64>h&&c>=3&&12>c&&(u=32),h>=72&&84>h&&(c>=0&&9>c?u=31:c>=9&&21>c?u=33:c>=21&&33>c?u=35:c>=33&&42>c&&(u=37)),l=i(6*(u-1)-180+3),e=p/(1-p),n=d/Math.sqrt(1-p*Math.sin(m)*Math.sin(m)),r=Math.tan(m)*Math.tan(m),o=e*Math.cos(m)*Math.cos(m);var v=f*n*((s=Math.cos(m)*(g-l))+(1-r+o)*s*s*s/6+(5-18*r+r*r+72*o-58*e)*s*s*s*s*s/120)+5e5,y=f*(d*((1-p/4-3*p*p/64-5*p*p*p/256)*m-(3*p/8+3*p*p/32+45*p*p*p/1024)*Math.sin(2*m)+(15*p*p/256+45*p*p*p/1024)*Math.sin(4*m)-35*p*p*p/3072*Math.sin(6*m))+n*Math.tan(m)*(s*s/2+(5-r+9*o+4*o*o)*s*s*s*s/24+(61-58*r+r*r+600*o-330*e)*s*s*s*s*s*s/720));return 0>h&&(y+=1e7),{northing:Math.round(y),easting:Math.round(v),zoneNumber:u,zoneLetter:a(h)}}function s(t){var e=t.northing,n=t.easting,i=t.zoneLetter,o=t.zoneNumber;if(0>o||o>60)return null;var a,l,u,h,c,d,p,f,m,g=.9996,v=6378137,y=.00669438,_=(1-Math.sqrt(1-y))/(1+Math.sqrt(1-y)),b=n-5e5,w=e;"N">i&&(w-=1e7),
p=6*(o-1)-180+3,a=y/(1-y),m=(f=w/g/(v*(1-y/4-3*y*y/64-5*y*y*y/256)))+(3*_/2-27*_*_*_/32)*Math.sin(2*f)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*f)+151*_*_*_/96*Math.sin(6*f),l=v/Math.sqrt(1-y*Math.sin(m)*Math.sin(m)),u=Math.tan(m)*Math.tan(m),h=a*Math.cos(m)*Math.cos(m),c=v*(1-y)/Math.pow(1-y*Math.sin(m)*Math.sin(m),1.5),d=b/(l*g);var x=m-l*Math.tan(m)/c*(d*d/2-(5+3*u+10*h-4*h*h-9*a)*d*d*d*d/24+(61+90*u+298*h+45*u*u-252*a-3*h*h)*d*d*d*d*d*d/720);x=r(x);var S,C=(d-(1+2*u+h)*d*d*d/6+(5-2*h+28*u-3*h*h+8*a+24*u*u)*d*d*d*d*d/120)/Math.cos(m);if(C=p+r(C),t.accuracy){var E=s({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});S={top:E.lat,right:E.lon,bottom:x,left:C}}else S={lat:x,lon:C};return S}function a(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function l(t,e){var n=""+t.easting,i=""+t.northing;return t.zoneNumber+t.zoneLetter+u(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+i.substr(i.length-5,e)}function u(t,e,n){var i=h(n);return c(Math.floor(t/1e5),Math.floor(e/1e5)%20,i)}function h(t){var e=t%g;return 0===e&&(e=g),e}function c(t,e,n){var i=n-1,r=v.charCodeAt(i),o=y.charCodeAt(i),s=r+t-1,a=o+e,l=!1;return s>S&&(s=s-S+_-1,l=!0),(s===b||b>r&&s>b||(s>b||b>r)&&l)&&s++,(s===w||w>r&&s>w||(s>w||w>r)&&l)&&(++s===b&&s++),s>S&&(s=s-S+_-1),a>x?(a=a-x+_-1,l=!0):l=!1,(a===b||b>o&&a>b||(a>b||b>o)&&l)&&a++,(a===w||w>o&&a>w||(a>w||w>o)&&l)&&(++a===b&&a++),a>x&&(a=a-x+_-1),String.fromCharCode(s)+String.fromCharCode(a)}function d(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,o++}var s=parseInt(r,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(o++);if("A">=a||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;i=t.substring(o,o+=2);for(var l=h(s),u=p(i.charAt(0),l),c=f(i.charAt(1),l);c<m(a);)c+=2e6;var d=n-o;if(d%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var g,v,y,_=d/2,b=0,w=0;return _>0&&(g=1e5/Math.pow(10,_),v=t.substring(o,o+_),b=parseFloat(v)*g,y=t.substring(o+_),w=parseFloat(y)*g),{easting:b+u,northing:w+c,zoneLetter:a,zoneNumber:s,accuracy:g}}function p(t,e){for(var n=v.charCodeAt(e-1),i=1e5,r=!1;n!==t.charCodeAt(0);){if(++n===b&&n++,n===w&&n++,n>S){if(r)throw"Bad character: "+t;n=_,r=!0}i+=1e5}return i}function f(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=y.charCodeAt(e-1),i=0,r=!1;n!==t.charCodeAt(0);){if(++n===b&&n++,n===w&&n++,n>x){if(r)throw"Bad character: "+t;n=_,r=!0}i+=1e5}return i}function m(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}var g=6,v="AJSAJS",y="AFAFAF",_=65,b=73,w=79,x=86,S=90;n.forward=function(t,e){return e=e||5,l(o({lat:t.lat,lon:t.lon}),e)},n.inverse=function(t){var e=s(d(t.toUpperCase()));return[e.left,e.bottom,e.right,e.top]}},{}],18:[function(t,e){var n=t("./common"),i=t("./constants/index");e.exports=function(t){var e={},r={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var e=t.split("=");e.push(!0),r[e[0].toLowerCase()]=e[1]});var o,s,a,l={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t,10)},lat_0:function(t){e.lat0=t*n.D2R},lat_1:function(t){e.lat1=t*n.D2R},lat_2:function(t){e.lat2=t*n.D2R},lat_ts:function(t){e.lat_ts=t*n.D2R},lon_0:function(t){e.long0=t*n.D2R},lon_1:function(t){e.long1=t*n.D2R},lon_2:function(t){e.long2=t*n.D2R},alpha:function(t){e.alpha=parseFloat(t)*n.D2R},lonc:function(t){e.longc=t*n.D2R},x_0:function(t){e.x0=parseFloat(t,10)},y_0:function(t){e.y0=parseFloat(t,10)},k_0:function(t){e.k0=parseFloat(t,10)},k:function(t){e.k0=parseFloat(t,10)},r_a:function(){e.R_A=!0},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=!0},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t,10)})},to_meter:function(t){e.to_meter=parseFloat(t,10)},from_greenwich:function(t){e.from_greenwich=t*n.D2R},pm:function(t){e.from_greenwich=(i.PrimeMeridian[t]?i.PrimeMeridian[t]:parseFloat(t,10))*n.D2R},nadgrids:function(t){"@null"===t?e.datumCode="none":e.nadgrids=t},axis:function(t){var n="ewnsud";3===t.length&&-1!==n.indexOf(t.substr(0,1))&&-1!==n.indexOf(t.substr(1,1))&&-1!==n.indexOf(t.substr(2,1))&&(e.axis=t)}};for(o in r)s=r[o],o in l?"function"==typeof(a=l[o])?a(s):e[a]=s:e[o]=s;return e}},{"./common":4,"./constants/index":9}],19:[function(t,e,n){var i=t("../common");n.init=function(){Math.abs(this.lat1+this.lat2)<i.EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=i.msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=i.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=i.msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=i.qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=i.qsfnz(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>i.EPSLN?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},n.forward=function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=i.qsfnz(this.e3,this.sin_phi,this.cos_phi),o=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*i.adjust_lon(e-this.long0),a=o*Math.sin(s)+this.x0,l=this.rh-o*Math.cos(s)+this.y0;return t.x=a,t.y=l,t},n.inverse=function(t){var e,n,r,o,s,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),o=0,0!==e&&(o=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),s=i.adjust_lon(o/this.ns0+this.long0),t.x=s,t.y=a,t},n.phi1z=function(t,e){var n,r,o,s,a,l=i.asinz(.5*e);if(t<i.EPSLN)return l;for(var u=t*t,h=1;25>=h;h++)if(n=Math.sin(l),r=Math.cos(l),l+=a=.5*(s=1-(o=t*n)*o)*s/r*(e/(1-u)-n/s+.5/t*Math.log((1-o)/(1+o))),Math.abs(a)<=1e-7)return l;return null},n.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common":4}],20:[function(t,e,n){var i=t("../common");n.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},n.forward=function(t){var e,n,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x,S,C=t.x,E=t.y,M=Math.sin(t.y),L=Math.cos(t.y),T=i.adjust_lon(C-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=i.EPSLN?(t.x=this.x0+this.a*(i.HALF_PI-E)*Math.sin(T),t.y=this.y0-this.a*(i.HALF_PI-E)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=i.EPSLN?(t.x=this.x0+this.a*(i.HALF_PI+E)*Math.sin(T),t.y=this.y0+this.a*(i.HALF_PI+E)*Math.cos(T),t):(_=this.sin_p12*M+this.cos_p12*L*Math.cos(T),y=(v=Math.acos(_))/Math.sin(v),t.x=this.x0+this.a*y*L*Math.sin(T),t.y=this.y0+this.a*y*(this.cos_p12*M-this.sin_p12*L*Math.cos(T)),t):(e=i.e0fn(this.es),n=i.e1fn(this.es),r=i.e2fn(this.es),o=i.e3fn(this.es),Math.abs(this.sin_p12-1)<=i.EPSLN?(s=this.a*i.mlfn(e,n,r,o,i.HALF_PI),a=this.a*i.mlfn(e,n,r,o,E),t.x=this.x0+(s-a)*Math.sin(T),t.y=this.y0-(s-a)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=i.EPSLN?(s=this.a*i.mlfn(e,n,r,o,i.HALF_PI),a=this.a*i.mlfn(e,n,r,o,E),t.x=this.x0+(s+a)*Math.sin(T),t.y=this.y0+(s+a)*Math.cos(T),t):(l=M/L,u=i.gN(this.a,this.e,this.sin_p12),h=i.gN(this.a,this.e,M),c=Math.atan((1-this.es)*l+this.es*u*this.sin_p12/(h*L)),b=0===(d=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(d)-i.PI)<=i.EPSLN?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(T)*Math.cos(c)/Math.sin(d)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),v=u*b*(1-(w=b*b)*(g=(f=this.e*this.cos_p12*Math.cos(d)/Math.sqrt(1-this.es))*f)*(1-g)/6+(x=w*b)/8*(m=p*f)*(1-2*g)+(S=x*b)/120*(g*(4-7*g)-3*p*p*(1-7*g))-S*b/48*m),t.x=this.x0+v*Math.sin(d),t.y=this.y0+v*Math.cos(d),t))},n.inverse=function(t){var e,n,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x,S,C;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*i.HALF_PI*this.a)return;return n=e/this.a,r=Math.sin(n),o=Math.cos(n),s=this.long0,Math.abs(e)<=i.EPSLN?a=this.lat0:(a=i.asinz(o*this.sin_p12+t.y*r*this.cos_p12/e),l=Math.abs(this.lat0)-i.HALF_PI,s=Math.abs(l)<=i.EPSLN?this.lat0>=0?i.adjust_lon(this.long0+Math.atan2(t.x,-t.y)):i.adjust_lon(this.long0-Math.atan2(-t.x,t.y)):i.adjust_lon(this.long0+Math.atan2(t.x*r,e*this.cos_p12*o-t.y*this.sin_p12*r))),t.x=s,t.y=a,t}return u=i.e0fn(this.es),h=i.e1fn(this.es),c=i.e2fn(this.es),d=i.e3fn(this.es),Math.abs(this.sin_p12-1)<=i.EPSLN?(f=(p=this.a*i.mlfn(u,h,c,d,i.HALF_PI))-(e=Math.sqrt(t.x*t.x+t.y*t.y)),a=i.imlfn(f/this.a,u,h,c,d),s=i.adjust_lon(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=a,t):Math.abs(this.sin_p12+1)<=i.EPSLN?(p=this.a*i.mlfn(u,h,c,d,i.HALF_PI),f=(e=Math.sqrt(t.x*t.x+t.y*t.y))-p,a=i.imlfn(f/this.a,u,h,c,d),s=i.adjust_lon(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),v=Math.atan2(t.x,t.y),m=i.gN(this.a,this.e,this.sin_p12),y=Math.cos(v),b=-(_=this.e*this.cos_p12*y)*_/(1-this.es),w=3*this.es*(1-b)*this.sin_p12*this.cos_p12*y/(1-this.es),C=1-b*(S=(x=e/m)-b*(1+b)*Math.pow(x,3)/6-w*(1+3*b)*Math.pow(x,4)/24)*S/2-x*S*S*S/6,g=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*y),s=i.adjust_lon(this.long0+Math.asin(Math.sin(v)*Math.sin(S)/Math.cos(g))),a=Math.atan((1-this.es*C*this.sin_p12/Math.sin(g))*Math.tan(g)/(1-this.es)),t.x=s,t.y=a,t)},n.names=["Azimuthal_Equidistant","aeqd"]},{"../common":4}],21:[function(t,e,n){var i=t("../common");n.init=function(){this.sphere||(this.e0=i.e0fn(this.es),this.e1=i.e1fn(this.es),this.e2=i.e2fn(this.es),this.e3=i.e3fn(this.es),this.ml0=this.a*i.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))},n.forward=function(t){var e,n,r=t.x,o=t.y;if(r=i.adjust_lon(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(o),Math.cos(r))-this.lat0);else{var s=Math.sin(o),a=Math.cos(o),l=i.gN(this.a,this.e,s),u=Math.tan(o)*Math.tan(o),h=r*Math.cos(o),c=h*h,d=this.es*a*a/(1-this.es);e=l*h*(1-c*u*(1/6-(8-u+8*d)*c/120)),n=this.a*i.mlfn(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+l*s/a*c*(.5+(5-u+6*d)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,o=t.y/this.a;if(this.sphere){var s=o+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(s))}else{var a=this.ml0/this.a+o,l=i.imlfn(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-i.HALF_PI)<=i.EPSLN)return t.x=this.long0,t.y=i.HALF_PI,0>o&&(t.y*=-1),t;var u=i.gN(this.a,this.e,Math.sin(l)),h=u*u*u/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(l),2),d=r*this.a/u,p=d*d;e=l-u*Math.tan(l)/h*d*d*(.5-(1+3*c)*d*d/24),n=d*(1-p*(c/3+(1+3*c)*c*p/15))/Math.cos(l)}return t.x=i.adjust_lon(n+this.long0),t.y=i.adjust_lat(e),t},n.names=["Cassini","Cassini_Soldner","cass"]},{"../common":4}],22:[function(t,e,n){var i=t("../common");n.init=function(){this.sphere||(this.k0=i.msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},n.forward=function(t){var e,n,r=t.x,o=t.y,s=i.adjust_lon(r-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var a=i.qsfnz(this.e,Math.sin(o));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},n.inverse=function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=i.adjust_lon(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=i.iqsfnz(this.e,2*t.y*this.k0/this.a),e=i.adjust_lon(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},n.names=["cea"]},{"../common":4}],23:[function(t,e,n){var i=t("../common");n.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},n.forward=function(t){var e=t.x,n=t.y,r=i.adjust_lon(e-this.long0),o=i.adjust_lat(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*o,t},n.inverse=function(t){var e=t.x,n=t.y;return t.x=i.adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=i.adjust_lat(this.lat0+(n-this.y0)/this.a),t},n.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common":4}],24:[function(t,e,n){var i=t("../common");n.init=function(){return Math.abs(this.lat1+this.lat2)<i.EPSLN?void i.reportError("eqdc:init: Equal Latitudes"):(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i.e0fn(this.es),this.e1=i.e1fn(this.es),this.e2=i.e2fn(this.es),this.e3=i.e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=i.msfnz(this.e,this.sinphi,this.cosphi),this.ml1=i.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<i.EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=i.msfnz(this.e,this.sinphi,this.cosphi),this.ml2=i.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=i.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),void(this.rh=this.a*(this.g-this.ml0)))},n.forward=function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var o=i.mlfn(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-o)}var s=this.ns*i.adjust_lon(n-this.long0),a=this.x0+e*Math.sin(s),l=this.y0+this.rh-e*Math.cos(s);return t.x=a,t.y=l,t},n.inverse=function(t){var e,n,r,o;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(0!==n&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return o=i.adjust_lon(this.long0+s/this.ns),r=i.adjust_lat(this.g-n/this.a),t.x=o,t.y=r,t;var a=this.g-n/this.a;return r=i.imlfn(a,this.e0,this.e1,this.e2,this.e3),o=i.adjust_lon(this.long0+s/this.ns),t.x=o,t.y=r,t},n.names=["Equidistant_Conic","eqdc"]},{"../common":4}],25:[function(t,e,n){var i=t("../common");n.init=function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+i.FORTPI),this.C)*i.srat(this.e*t,this.ratexp))},n.forward=function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i.FORTPI),this.C)*i.srat(this.e*Math.sin(n),this.ratexp))-i.HALF_PI,t.x=this.C*e,t},n.inverse=function(t){for(var e=1e-14,n=t.x/this.C,r=t.y,o=Math.pow(Math.tan(.5*r+i.FORTPI)/this.K,1/this.C),s=i.MAX_ITER;s>0&&(r=2*Math.atan(o*i.srat(this.e*Math.sin(t.y),-.5*this.e))-i.HALF_PI,!(Math.abs(r-t.y)<e));--s)t.y=r;return s?(t.x=n,t.y=r,t):null},n.names=["gauss"]},{"../common":4}],26:[function(t,e,n){var i=t("../common");n.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},n.forward=function(t){var e,n,r,o,s,a,l,u,h=t.x,c=t.y;return r=i.adjust_lon(h-this.long0),e=Math.sin(c),n=Math.cos(c),o=Math.cos(r),s=1,(a=this.sin_p14*e+this.cos_p14*n*o)>0||Math.abs(a)<=i.EPSLN?(l=this.x0+this.a*s*n*Math.sin(r)/a,u=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*o)/a):(l=this.x0+this.infinity_dist*n*Math.sin(r),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*o)),t.x=l,t.y=u,t},n.inverse=function(t){var e,n,r,o,s,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(o=Math.atan2(e,this.rc),n=Math.sin(o),r=Math.cos(o),a=i.asinz(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),s=i.adjust_lon(this.long0+s)):(a=this.phic0,s=0),t.x=s,t.y=a,t},n.names=["gnom"]},{"../common":4}],27:[function(t,e,n){function i(t,e){var n=s.length;return t.names?(s[n]=t,t.names.forEach(function(t){o[t.toLowerCase()]=n}),this):(console.log(e),!0)}var r=[t("./tmerc"),t("./utm"),t("./sterea"),t("./stere"),t("./somerc"),t("./omerc"),t("./lcc"),t("./krovak"),t("./cass"),t("./laea"),t("./merc"),t("./aea"),t("./gnom"),t("./cea"),t("./eqc"),t("./poly"),t("./nzmg"),t("./mill"),t("./sinu"),t("./moll"),t("./eqdc"),t("./vandg"),t("./aeqd"),t("./longlat")],o={},s=[];n.add=i,n.get=function(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!=typeof o[e]&&s[o[e]]?s[o[e]]:void 0},n.start=function(){r.forEach(i)}},{"./aea":19,"./aeqd":20,"./cass":21,"./cea":22,"./eqc":23,"./eqdc":24,"./gnom":26,"./krovak":28,"./laea":29,"./lcc":30,"./longlat":31,"./merc":32,"./mill":33,"./moll":34,"./nzmg":35,"./omerc":36,"./poly":37,"./sinu":38,"./somerc":39,"./stere":40,"./sterea":41,"./tmerc":42,"./utm":43,"./vandg":44}],28:[function(t,e,n){var i=t("../common");n.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},n.forward=function(t){var e,n,r,o,s,a,l,u=t.x,h=t.y,c=i.adjust_lon(u-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),s=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(o)),a=this.n*s,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=l*Math.cos(a)/1,t.x=l*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},n.inverse=function(t){var e,n,i,r,o,s,a,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,a=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,u+=1}while(0===a&&15>u);return u>=15?null:t},n.names=["Krovak","krovak"]},{"../common":4}],29:[function(t,e,n){var i=t("../common");n.S_POLE=1,n.N_POLE=2,n.EQUIT=3,n.OBLIQ=4,n.init=function(){var t,e=Math.abs(this.lat0);if(this.mode=Math.abs(e-i.HALF_PI)<i.EPSLN?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<i.EPSLN?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=i.qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=i.qsfnz(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},n.forward=function(t){var e,n,r,o,s,a,l,u,h,c,d=t.x,p=t.y;if(d=i.adjust_lon(d-this.long0),this.sphere){if(s=Math.sin(p),c=Math.cos(p),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*s+this.cosph0*c*r)<=i.EPSLN)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(d),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(p+this.phi0)<i.EPSLN)return null;n=i.FORTPI-.5*p,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(d),n*=r}}else{switch(l=0,u=0,h=0,r=Math.cos(d),o=Math.sin(d),s=Math.sin(p),a=i.qsfnz(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=a/this.qp,u=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:h=1+this.sinb1*l+this.cosb1*u*r;break;case this.EQUIT:h=1+u*r;break;case this.N_POLE:h=i.HALF_PI+p,a=this.qp-a;break;case this.S_POLE:h=p-i.HALF_PI,a=this.qp+a}if(Math.abs(h)<i.EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),n=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*l-this.sinb1*u*r):(h=Math.sqrt(2/(1+u*r)))*l*this.ymf,e=this.xmf*h*u*o;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(h=Math.sqrt(a))*o,n=r*(this.mode===this.S_POLE?h:-h)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,o,s,a,l,u=t.x/this.a,h=t.y/this.a;if(this.sphere){var c,d=0,p=0;if((n=.5*(c=Math.sqrt(u*u+h*h)))>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(p=Math.sin(n),d=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(c)<=i.EPSLN?0:Math.asin(h*p/c),u*=p,h=d*c;break;case this.OBLIQ:n=Math.abs(c)<=i.EPSLN?this.phi0:Math.asin(d*this.sinph0+h*p*this.cosph0/c),u*=p*this.cosph0,h=(d-Math.sin(n)*this.sinph0)*c;break;case this.N_POLE:h=-h,n=i.HALF_PI-n;break;case this.S_POLE:n-=i.HALF_PI}e=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(u,h):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(u/=this.dd,h*=this.dd,(a=Math.sqrt(u*u+h*h))<i.EPSLN)return t.x=0,t.y=this.phi0,t;o=2*Math.asin(.5*a/this.rq),r=Math.cos(o),u*=o=Math.sin(o),this.mode===this.OBLIQ?(l=r*this.sinb1+h*o*this.cosb1/a,s=this.qp*l,h=a*this.cosb1*r-h*this.sinb1*o):(l=h*o/a,s=this.qp*l,h=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),!(s=u*u+h*h))return t.x=0,t.y=this.phi0,t;l=1-s/this.qp,this.mode===this.S_POLE&&(l=-l)}e=Math.atan2(u,h),n=this.authlat(Math.asin(l),this.apa)}return t.x=i.adjust_lon(this.long0+e),t.y=n,t},n.P00=.3333333333333333,n.P01=.17222222222222222,n.P02=.10257936507936508,n.P10=.06388888888888888,n.P11=.0664021164021164,n.P20=.016415012942191543,n.authset=function(t){var e,n=[];return n[0]=t*this.P00,e=t*t,n[0]+=e*this.P01,n[1]=e*this.P10,e*=t,n[0]+=e*this.P02,n[1]+=e*this.P11,n[2]=e*this.P20,n},n.authlat=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)},n.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common":4}],30:[function(t,e,n){var i=t("../common");n.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),!(Math.abs(this.lat1+this.lat2)<i.EPSLN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=i.msfnz(this.e,e,n),o=i.tsfnz(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),l=i.msfnz(this.e,s,a),u=i.tsfnz(this.e,this.lat2,s),h=i.tsfnz(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>i.EPSLN?Math.log(r/l)/Math.log(o/u):e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}},n.forward=function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-i.PI)<=i.EPSLN&&(n=i.sign(n)*(i.HALF_PI-2*i.EPSLN));var r,o,s=Math.abs(Math.abs(n)-i.HALF_PI);if(s>i.EPSLN)r=i.tsfnz(this.e,n,Math.sin(n)),o=this.a*this.f0*Math.pow(r,this.ns);else{if(0>=(s=n*this.ns))return null;o=0}var a=this.ns*i.adjust_lon(e-this.long0);return t.x=this.k0*o*Math.sin(a)+this.x0,t.y=this.k0*(this.rh-o*Math.cos(a))+this.y0,t},n.inverse=function(t){var e,n,r,o,s,a=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+l*l),n=1):(e=-Math.sqrt(a*a+l*l),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*a,n*l)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(o=i.phi2z(this.e,r)))return null}else o=-i.HALF_PI;return s=i.adjust_lon(u/this.ns+this.long0),t.x=s,t.y=o,t},n.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common":4}],31:[function(t,e,n){function i(t){return t}n.init=function(){},n.forward=i,n.inverse=i,n.names=["longlat","identity"]},{}],32:[function(t,e,n){var i=t("../common");n.init=function(){var t=this.b/this.a;this.es=1-t*t,this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):i.msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},n.forward=function(t){var e,n,r=t.x,o=t.y;if(o*i.R2D>90&&o*i.R2D<-90&&r*i.R2D>180&&r*i.R2D<-180)return null;if(Math.abs(Math.abs(o)-i.HALF_PI)<=i.EPSLN)return null;if(this.sphere)e=this.x0+this.a*this.k0*i.adjust_lon(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(i.FORTPI+.5*o));else{var s=Math.sin(o),a=i.tsfnz(this.e,o,s);e=this.x0+this.a*this.k0*i.adjust_lon(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},n.inverse=function(t){var e,n,r=t.x-this.x0,o=t.y-this.y0;if(this.sphere)n=i.HALF_PI-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var s=Math.exp(-o/(this.a*this.k0));if(-9999===(n=i.phi2z(this.e,s)))return null}return e=i.adjust_lon(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},n.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common":4}],33:[function(t,e,n){var i=t("../common");n.init=function(){},n.forward=function(t){var e=t.x,n=t.y,r=i.adjust_lon(e-this.long0),o=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(i.PI/4+n/2.5))*1.25;return t.x=o,t.y=s,t},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e=i.adjust_lon(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-i.PI/4);return t.x=e,t.y=n,t},n.names=["Miller_Cylindrical","mill"]},{"../common":4}],34:[function(t,e,n){var i=t("../common");n.init=function(){},n.forward=function(t){for(var e=t.x,n=t.y,r=i.adjust_lon(e-this.long0),o=n,s=i.PI*Math.sin(n),a=0;;a++){var l=-(o+Math.sin(o)-s)/(1+Math.cos(o));if(o+=l,Math.abs(l)<i.EPSLN)break}o/=2,i.PI/2-Math.abs(n)<i.EPSLN&&(r=0);var u=.900316316158*this.a*r*Math.cos(o)+this.x0,h=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=u,t.y=h,t},n.inverse=function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=i.adjust_lon(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-i.PI&&(r=-i.PI),r>i.PI&&(r=i.PI),n=(2*e+Math.sin(2*e))/i.PI,Math.abs(n)>1&&(n=1);var o=Math.asin(n);return t.x=r,t.y=o,t},n.names=["Mollweide","moll"]},{"../common":4}],35:[function(t,e,n){var i=t("../common");n.iterations=1,n.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},n.forward=function(t){var e,n=t.x,r=t.y-this.lat0,o=n-this.long0,s=r/i.SEC_TO_RAD*1e-5,a=o,l=1,u=0;for(e=1;10>=e;e++)l*=s,u+=this.A[e]*l;var h,c=u,d=a,p=1,f=0,m=0,g=0;for(e=1;6>=e;e++)h=f*c+p*d,p=p*c-f*d,f=h,m=m+this.B_re[e]*p-this.B_im[e]*f,g=g+this.B_im[e]*p+this.B_re[e]*f;return t.x=g*this.a+this.x0,t.y=m*this.a+this.y0,t},n.inverse=function(t){var e,n,r=t.x,o=t.y,s=r-this.x0,a=(o-this.y0)/this.a,l=s/this.a,u=1,h=0,c=0,d=0;for(e=1;6>=e;e++)n=h*a+u*l,u=u*a-h*l,h=n,c=c+this.C_re[e]*u-this.C_im[e]*h,d=d+this.C_im[e]*u+this.C_re[e]*h;for(var p=0;p<this.iterations;p++){var f,m=c,g=d,v=a,y=l;for(e=2;6>=e;e++)f=g*c+m*d,m=m*c-g*d,g=f,v+=(e-1)*(this.B_re[e]*m-this.B_im[e]*g),y+=(e-1)*(this.B_im[e]*m+this.B_re[e]*g);m=1,g=0;var _=this.B_re[1],b=this.B_im[1];for(e=2;6>=e;e++)f=g*c+m*d,m=m*c-g*d,g=f,_+=e*(this.B_re[e]*m-this.B_im[e]*g),b+=e*(this.B_im[e]*m+this.B_re[e]*g);var w=_*_+b*b;c=(v*_+y*b)/w,d=(y*_-v*b)/w}var x=c,S=d,C=1,E=0;for(e=1;9>=e;e++)C*=x,E+=this.D[e]*C;var M=this.lat0+E*i.SEC_TO_RAD*1e5,L=this.long0+S;return t.x=L,t.y=M,t},n.names=["New_Zealand_Map_Grid","nzmg"]},{"../common":4}],36:[function(t,e,n){var i=t("../common");n.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,o,s=i.tsfnz(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(1>a*a&&(a=1),isNaN(this.longc)){var l=i.tsfnz(this.e,this.lat1,Math.sin(this.lat1)),u=i.tsfnz(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(a+Math.sqrt(a*a-1))*Math.pow(s,this.bl):(a-Math.sqrt(a*a-1))*Math.pow(s,this.bl);var h=Math.pow(l,this.bl),c=Math.pow(u,this.bl);o=.5*((r=this.el/h)-1/r);var d=(this.el*this.el-c*h)/(this.el*this.el+c*h),p=(c-h)/(c+h),f=i.adjust_lon(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(d*Math.tan(.5*this.bl*f)/p)/this.bl,this.long0=i.adjust_lon(this.long0);var m=i.adjust_lon(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*m)/o),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(s,this.bl),o=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(o*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},n.forward=function(t){var e,n,r,o=t.x,s=t.y,a=i.adjust_lon(o-this.long0);if(Math.abs(Math.abs(s)-i.HALF_PI)<=i.EPSLN)r=s>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(i.FORTPI+r*this.gamma0*.5)),e=-1*r*i.HALF_PI*this.al/this.bl;else{var l=i.tsfnz(this.e,s,Math.sin(s)),u=this.el/Math.pow(l,this.bl),h=.5*(u-1/u),c=.5*(u+1/u),d=Math.sin(this.bl*a),p=(h*Math.sin(this.gamma0)-d*Math.cos(this.gamma0))/c;n=Math.abs(Math.abs(p)-1)<=i.EPSLN?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-p)/(1+p))/this.bl,e=Math.abs(Math.cos(this.bl*a))<=i.EPSLN?this.al*this.bl*a:this.al*Math.atan2(h*Math.cos(this.gamma0)+d*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},n.inverse=function(t){var e,n;this.no_rot?(n=t.y-this.y0,
e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),o=.5*(r-1/r),s=.5*(r+1/r),a=Math.sin(this.bl*e/this.al),l=(a*Math.cos(this.gamma0)+o*Math.sin(this.gamma0))/s,u=Math.pow(this.el/Math.sqrt((1+l)/(1-l)),1/this.bl);return Math.abs(l-1)<i.EPSLN?(t.x=this.long0,t.y=i.HALF_PI):Math.abs(l+1)<i.EPSLN?(t.x=this.long0,t.y=-1*i.HALF_PI):(t.y=i.phi2z(this.e,u),t.x=i.adjust_lon(this.long0-Math.atan2(o*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},n.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common":4}],37:[function(t,e,n){var i=t("../common");n.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i.e0fn(this.es),this.e1=i.e1fn(this.es),this.e2=i.e2fn(this.es),this.e3=i.e3fn(this.es),this.ml0=this.a*i.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},n.forward=function(t){var e,n,r,o=t.x,s=t.y,a=i.adjust_lon(o-this.long0);if(r=a*Math.sin(s),this.sphere)Math.abs(s)<=i.EPSLN?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(s),n=this.a*(i.adjust_lat(s-this.lat0)+(1-Math.cos(r))/Math.tan(s)));else if(Math.abs(s)<=i.EPSLN)e=this.a*a,n=-1*this.ml0;else{var l=i.gN(this.a,this.e,Math.sin(s))/Math.tan(s);e=l*Math.sin(r),n=this.a*i.mlfn(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+l*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},n.inverse=function(t){var e,n,r,o,s,a,l,u,h;if(r=t.x-this.x0,o=t.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=i.EPSLN)e=i.adjust_lon(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+o/this.a,l=r*r/this.a/this.a+a*a,u=a,s=i.MAX_ITER;s;--s)if(u+=h=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+l)*c)/((u-a)/c-1),Math.abs(h)<=i.EPSLN){n=u;break}e=i.adjust_lon(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(o+this.ml0)<=i.EPSLN)n=0,e=i.adjust_lon(this.long0+r/this.a);else{var d,p,f,m,g;for(a=(this.ml0+o)/this.a,l=r*r/this.a/this.a+a*a,u=a,s=i.MAX_ITER;s;--s)if(g=this.e*Math.sin(u),d=Math.sqrt(1-g*g)*Math.tan(u),p=this.a*i.mlfn(this.e0,this.e1,this.e2,this.e3,u),f=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=h=(a*(d*(m=p/this.a)+1)-m-.5*d*(m*m+l))/(this.es*Math.sin(2*u)*(m*m+l-2*a*m)/(4*d)+(a-m)*(d*f-2/Math.sin(2*u))-f),Math.abs(h)<=i.EPSLN){n=u;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=i.adjust_lon(this.long0+Math.asin(r*d/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},n.names=["Polyconic","poly"]},{"../common":4}],38:[function(t,e,n){var i=t("../common");n.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=i.pj_enfn(this.es)},n.forward=function(t){var e,n,r=t.x,o=t.y;if(r=i.adjust_lon(r-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(o),a=i.MAX_ITER;a;--a){var l=(this.m*o+Math.sin(o)-s)/(this.m+Math.cos(o));if(o-=l,Math.abs(l)<i.EPSLN)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*r*(this.m+Math.cos(o)),n=this.a*this.C_y*o}else{var u=Math.sin(o),h=Math.cos(o);n=this.a*i.pj_mlfn(o,u,h,this.en),e=this.a*r*h/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},n.inverse=function(t){var e,n,r,o;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=i.asinz((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=i.asinz(Math.sin(e)/this.n)),r=i.adjust_lon(r+this.long0),e=i.adjust_lat(e)):(e=i.pj_inv_mlfn(t.y/this.a,this.es,this.en),(o=Math.abs(e))<i.HALF_PI?(o=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(e)),r=i.adjust_lon(n)):o-i.EPSLN<i.HALF_PI&&(r=this.long0)),t.x=r,t.y=e,t},n.names=["Sinusoidal","sinu"]},{"../common":4}],39:[function(t,e,n){n.init=function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),o=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*l},n.forward=function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},n.inverse=function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+s/this.alpha,l=0,u=o,h=-1e3,c=0;Math.abs(u-h)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),h=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=u,t},n.names=["somerc"]},{}],40:[function(t,e,n){var i=t("../common");n.ssfn_=function(t,e,n){return e*=n,Math.tan(.5*(i.HALF_PI+t))*Math.pow((1-e)/(1+e),.5*n)},n.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i.EPSLN&&(this.k0=.5*(1+i.sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=i.EPSLN&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i.EPSLN&&(this.k0=.5*this.cons*i.msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/i.tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=i.msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-i.HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},n.forward=function(t){var e,n,r,o,s,a,l=t.x,u=t.y,h=Math.sin(u),c=Math.cos(u),d=i.adjust_lon(l-this.long0);return Math.abs(Math.abs(l-this.long0)-i.PI)<=i.EPSLN&&Math.abs(u+this.lat0)<=i.EPSLN?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*h+this.coslat0*c*Math.cos(d)),t.x=this.a*e*c*Math.sin(d)+this.x0,t.y=this.a*e*(this.coslat0*h-this.sinlat0*c*Math.cos(d))+this.y0,t):(n=2*Math.atan(this.ssfn_(u,h,this.e))-i.HALF_PI,o=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=i.EPSLN?(s=i.tsfnz(this.e,u*this.con,this.con*h),a=2*this.a*this.k0*s/this.cons,t.x=this.x0+a*Math.sin(l-this.long0),t.y=this.y0-this.con*a*Math.cos(l-this.long0),t):(Math.abs(this.sinlat0)<i.EPSLN?(e=2*this.a*this.k0/(1+o*Math.cos(d)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*o*Math.cos(d))),t.y=e*(this.cosX0*r-this.sinX0*o*Math.cos(d))+this.y0),t.x=e*o*Math.sin(d)+this.x0,t))},n.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,o,s,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var l=2*Math.atan(a/(.5*this.a*this.k0));return e=this.long0,n=this.lat0,a<=i.EPSLN?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(l)*this.sinlat0+t.y*Math.sin(l)*this.coslat0/a),e=Math.abs(this.coslat0)<i.EPSLN?this.lat0>0?i.adjust_lon(this.long0+Math.atan2(t.x,-1*t.y)):i.adjust_lon(this.long0+Math.atan2(t.x,t.y)):i.adjust_lon(this.long0+Math.atan2(t.x*Math.sin(l),a*this.coslat0*Math.cos(l)-t.y*this.sinlat0*Math.sin(l))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=i.EPSLN){if(a<=i.EPSLN)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*i.phi2z(this.e,r),e=this.con*i.adjust_lon(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=i.EPSLN?s=this.X0:(s=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/a),e=i.adjust_lon(this.long0+Math.atan2(t.x*Math.sin(o),a*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),n=-1*i.phi2z(this.e,Math.tan(.5*(i.HALF_PI+s)));return t.x=e,t.y=n,t},n.names=["stere"]},{"../common":4}],41:[function(t,e,n){var i=t("../common"),r=t("./gauss");n.init=function(){r.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},n.forward=function(t){var e,n,o,s;return t.x=i.adjust_lon(t.x-this.long0),r.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=s*n*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},n.inverse=function(t){var e,n,o,s,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var l=2*Math.atan2(a,this.R2);e=Math.sin(l),n=Math.cos(l),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/a),o=Math.atan2(t.x*e,a*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,o=0;return t.x=o,t.y=s,r.inverse.apply(this,[t]),t.x=i.adjust_lon(t.x+this.long0),t},n.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common":4,"./gauss":25}],42:[function(t,e,n){var i=t("../common");n.init=function(){this.e0=i.e0fn(this.es),this.e1=i.e1fn(this.es),this.e2=i.e2fn(this.es),this.e3=i.e3fn(this.es),this.ml0=this.a*i.mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},n.forward=function(t){var e,n,r,o=t.x,s=t.y,a=i.adjust_lon(o-this.long0),l=Math.sin(s),u=Math.cos(s);if(this.sphere){var h=u*Math.sin(a);if(Math.abs(Math.abs(h)-1)<1e-10)return 93;n=.5*this.a*this.k0*Math.log((1+h)/(1-h)),e=Math.acos(u*Math.cos(a)/Math.sqrt(1-h*h)),0>s&&(e=-e),r=this.a*this.k0*(e-this.lat0)}else{var c=u*a,d=Math.pow(c,2),p=this.ep2*Math.pow(u,2),f=Math.tan(s),m=Math.pow(f,2);e=1-this.es*Math.pow(l,2);var g=this.a/Math.sqrt(e),v=this.a*i.mlfn(this.e0,this.e1,this.e2,this.e3,s);n=this.k0*g*c*(1+d/6*(1-m+p+d/20*(5-18*m+Math.pow(m,2)+72*p-58*this.ep2)))+this.x0,r=this.k0*(v-this.ml0+g*f*d*(.5+d/24*(5-m+9*p+4*Math.pow(p,2)+d/30*(61-58*m+Math.pow(m,2)+600*p-330*this.ep2))))+this.y0}return t.x=n,t.y=r,t},n.inverse=function(t){var e,n,r,o,s,a,l=6;if(this.sphere){var u=Math.exp(t.x/(this.a*this.k0)),h=.5*(u-1/u),c=this.lat0+t.y/(this.a*this.k0),d=Math.cos(c);e=Math.sqrt((1-d*d)/(1+h*h)),s=i.asinz(e),0>c&&(s=-s),a=0===h&&0===d?this.long0:i.adjust_lon(Math.atan2(h,d)+this.long0)}else{var p=t.x-this.x0,f=t.y-this.y0;for(n=e=(this.ml0+f/this.k0)/this.a,o=0;n+=r=(e+this.e1*Math.sin(2*n)-this.e2*Math.sin(4*n)+this.e3*Math.sin(6*n))/this.e0-n,!(Math.abs(r)<=i.EPSLN);o++)if(o>=l)return 95;if(Math.abs(n)<i.HALF_PI){var m=Math.sin(n),g=Math.cos(n),v=Math.tan(n),y=this.ep2*Math.pow(g,2),_=Math.pow(y,2),b=Math.pow(v,2),w=Math.pow(b,2);e=1-this.es*Math.pow(m,2);var x=this.a/Math.sqrt(e),S=x*(1-this.es)/e,C=p/(x*this.k0),E=Math.pow(C,2);s=n-x*v*E/S*(.5-E/24*(5+3*b+10*y-4*_-9*this.ep2-E/30*(61+90*b+298*y+45*w-252*this.ep2-3*_))),a=i.adjust_lon(this.long0+C*(1-E/6*(1+2*b+y-E/20*(5-2*y+28*b-3*_+8*this.ep2+24*w)))/g)}else s=i.HALF_PI*i.sign(f),a=this.long0}return t.x=a,t.y=s,t},n.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common":4}],43:[function(t,e,n){var i=t("../common"),r=t("./tmerc");n.dependsOn="tmerc",n.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*i.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,r.init.apply(this),this.forward=r.forward,this.inverse=r.inverse)},n.names=["Universal Transverse Mercator System","utm"]},{"../common":4,"./tmerc":42}],44:[function(t,e,n){var i=t("../common");n.init=function(){this.R=this.a},n.forward=function(t){var e,n,r=t.x,o=t.y,s=i.adjust_lon(r-this.long0);Math.abs(o)<=i.EPSLN&&(e=this.x0+this.R*s,n=this.y0);var a=i.asinz(2*Math.abs(o/i.PI));(Math.abs(s)<=i.EPSLN||Math.abs(Math.abs(o)-i.HALF_PI)<=i.EPSLN)&&(e=this.x0,n=o>=0?this.y0+i.PI*this.R*Math.tan(.5*a):this.y0+i.PI*this.R*-Math.tan(.5*a));var l=.5*Math.abs(i.PI/s-s/i.PI),u=l*l,h=Math.sin(a),c=Math.cos(a),d=c/(h+c-1),p=d*d,f=d*(2/h-1),m=f*f,g=i.PI*this.R*(l*(d-m)+Math.sqrt(u*(d-m)*(d-m)-(m+u)*(p-m)))/(m+u);0>s&&(g=-g),e=this.x0+g;var v=u+d;return g=i.PI*this.R*(f*v-l*Math.sqrt((m+u)*(u+1)-v*v))/(m+u),n=o>=0?this.y0+g:this.y0-g,t.x=e,t.y=n,t},n.inverse=function(t){var e,n,r,o,s,a,l,u,h,c,d,p;return t.x-=this.x0,t.y-=this.y0,d=i.PI*this.R,s=(r=t.x/d)*r+(o=t.y/d)*o,d=3*(o*o/(u=-2*(a=-Math.abs(o)*(1+s))+1+2*o*o+s*s)+(2*(l=a-2*o*o+r*r)*l*l/u/u/u-9*a*l/u/u)/27)/(h=(a-l*l/3/u)/u)/(c=2*Math.sqrt(-h/3)),Math.abs(d)>1&&(d=d>=0?1:-1),p=Math.acos(d)/3,n=t.y>=0?(-c*Math.cos(p+i.PI/3)-l/3/u)*i.PI:-(-c*Math.cos(p+i.PI/3)-l/3/u)*i.PI,e=Math.abs(r)<i.EPSLN?this.long0:i.adjust_lon(this.long0+i.PI*(s-1+Math.sqrt(1+2*(r*r-o*o)+s*s))/2/r),t.x=e,t.y=n,t},n.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common":4}],45:[function(t,e){var n=t("./common"),i=t("./datum_transform"),r=t("./adjust_axis"),o=t("./Proj");e.exports=function s(t,e,a){function l(t,e){return(t.datum.datum_type===n.PJD_3PARAM||t.datum.datum_type===n.PJD_7PARAM)&&"WGS84"!==e.datumCode}var u;return t.datum&&e.datum&&(l(t,e)||l(e,t))&&(s(t,u=new o("WGS84"),a),t=u),"enu"!==t.axis&&r(t,!1,a),"longlat"===t.projName?(a.x*=n.D2R,a.y*=n.D2R):(t.to_meter&&(a.x*=t.to_meter,a.y*=t.to_meter),t.inverse(a)),t.from_greenwich&&(a.x+=t.from_greenwich),a=i(t.datum,e.datum,a),e.from_greenwich&&(a.x-=e.from_greenwich),"longlat"===e.projName?(a.x*=n.R2D,a.y*=n.R2D):(e.forward(a),e.to_meter&&(a.x/=e.to_meter,a.y/=e.to_meter)),"enu"!==e.axis&&r(e,!0,a),a}},{"./Proj":2,"./adjust_axis":3,"./common":4,"./datum_transform":12}],46:[function(t,e){e.exports="2.0.0"},{}],47:[function(t,e){function n(t,e,n){t[e]=n.map(function(t){var e={};return i(t,e),e}).reduce(function(t,e){return l(t,e)},{})}function i(t,e){var r;return Array.isArray(t)?("PARAMETER"===(r=t.shift())&&(r=t.shift()),void(1===t.length?Array.isArray(t[0])?(e[r]={},i(t[0],e[r])):e[r]=t[0]:t.length?"TOWGS84"===r?e[r]=t:(e[r]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(r)>-1?(e[r]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(e[r].auth=t[2])):"SPHEROID"===r?(e[r]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(e[r].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(r)>-1?(t[0]=["name",t[0]],n(e,r,t)):t.every(function(t){return Array.isArray(t)})?n(e,r,t):i(t,e[r])):e[r]=!0)):void(e[t]=!0)}function r(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}function o(t){return t*a.D2R}function s(t){function e(e){var n=t.to_meter||1;return parseFloat(e,10)*n}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):t.projName="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&(t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.datumCode=t.GEOGCS.DATUM?t.GEOGCS.DATUM.name.toLowerCase():t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10))),t.b&&!isFinite(t.b)&&(t.b=t.a);var n=function(e){return r(t,e)};[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",o],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",o],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",o],["lat0","latitude_of_origin",o],["lat0","standard_parallel_1",o],["lat1","standard_parallel_1",o],["lat2","standard_parallel_2",o],["alpha","azimuth",o],["srsCode","name"]].forEach(n),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.PROJECTION&&"Lambert_Azimuthal_Equal_Area"!==t.PROJECTION||(t.long0=t.longc)}var a=t("./common"),l=t("./extend");e.exports=function(t,e){var n=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]')),r=n.shift(),o=n.shift();n.unshift(["name",o]),n.unshift(["type",r]),n.unshift("output");var a={};return i(n,a),s(a.output),l(e,a.output)}},{"./common":4,"./extend":14}]},{},[16])(16)}),function(t,e,n){var i,r,o=t.L,s={};s.version="0.7","object"==typeof module&&"object"==typeof module.exports?module.exports=s:"function"==typeof define&&define.amd&&define(s),s.noConflict=function(){return t.L=o,this},t.L=s,s.Util={extend:function(t){var e,n,i,r,o=Array.prototype.slice.call(arguments,1);for(n=0,i=o.length;n<i;n++)for(e in r=o[n]||{})r.hasOwnProperty(e)&&(t[e]=r[e]);return t},bind:function(t,e){var n=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,n||arguments)}},stamp:(i=0,r="_leaflet_id",function(t){return t[r]=t[r]||++i,t[r]}),invokeEach:function(t,e,n){var i,r;if("object"==typeof t){for(i in r=Array.prototype.slice.call(arguments,3),t)e.apply(n,[i,t[i]].concat(r));return!0}return!1},limitExecByInterval:function(t,e,n){var i,r;return function o(){var s=arguments;i?r=!0:(i=!0,setTimeout(function(){i=!1,r&&(o.apply(n,s),r=!1)},e),t.apply(n,s))}},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return s.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=s.extend({},t.options,e),t.options},getParamString:function(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")},compileTemplate:function(t,e){return t=(t=t.replace(/"/g,'\\"')).replace(/\{ *([\w_]+) *\}/g,function(t,n){return'" + o["'+n+'"]'+("function"==typeof e[n]?"(o)":"")+' + "'}),new Function("o",'return "'+t+'";')},template:function(t,e){var n=s.Util._templateCache=s.Util._templateCache||{};return n[t]=n[t]||s.Util.compileTemplate(t,e),n[t](e)},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var n,i,r=["webkit","moz","o","ms"];for(n=0;n<r.length&&!i;n++)i=t[r[n]+e];return i}function n(e){var n=+new Date,r=Math.max(0,16-(n-i));return i=n+r,t.setTimeout(e,r)}var i=0,r=t.requestAnimationFrame||e("RequestAnimationFrame")||n,o=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};s.Util.requestAnimFrame=function(e,i,o,a){if(e=s.bind(e,i),!o||r!==n)return r.call(t,e,a);e()},s.Util.cancelAnimFrame=function(e){e&&o.call(t,e)}}(),s.extend=s.Util.extend,s.bind=s.Util.bind,s.stamp=s.Util.stamp,s.setOptions=s.Util.setOptions,s.Class=function(){},s.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},n=function(){};n.prototype=this.prototype;var i=new n;for(var r in i.constructor=e,e.prototype=i,this)this.hasOwnProperty(r)&&"prototype"!==r&&(e[r]=this[r]);t.statics&&(s.extend(e,t.statics),delete t.statics),t.includes&&(s.Util.extend.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=s.extend({},i.options,t.options)),s.extend(i,t),i._initHooks=[];var o=this;return e.__super__=o.prototype,i.callInitHooks=function(){if(!this._initHooksCalled){o.prototype.callInitHooks&&o.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;t<e;t++)i._initHooks[t].call(this)}},e},s.Class.include=function(t){s.extend(this.prototype,t)},s.Class.mergeOptions=function(t){s.extend(this.prototype.options,t)},s.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n)};var a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x,S,C,E,M,L,T,k,D="_leaflet_events";s.Mixin={},s.Mixin.Events={addEventListener:function(t,e,n){if(s.Util.invokeEach(t,this.addEventListener,this,e,n))return this;var i,r,o,a,l,u,h,c=this[D]=this[D]||{},d=n&&n!==this&&s.stamp(n);for(i=0,r=(t=s.Util.splitWords(t)).length;i<r;i++)o={action:e,context:n||this},a=t[i],d?(u=(l=a+"_idx")+"_len",(h=c[l]=c[l]||{})[d]||(h[d]=[],c[u]=(c[u]||0)+1),h[d].push(o)):(c[a]=c[a]||[],c[a].push(o));return this},hasEventListeners:function(t){var e=this[D];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,n){if(!this[D])return this;if(!t)return this.clearAllEventListeners();if(s.Util.invokeEach(t,this.removeEventListener,this,e,n))return this;var i,r,o,a,l,u,h,c,d=this[D],p=n&&n!==this&&s.stamp(n);for(i=0,r=(t=s.Util.splitWords(t)).length;i<r;i++)if(h=(u=(o=t[i])+"_idx")+"_len",c=d[u],e){if(a=p&&c?c[p]:d[o]){for(l=a.length-1;l>=0;l--)a[l].action!==e||n&&a[l].context!==n||(a.splice(l,1)[0].action=s.Util.falseFn);n&&c&&0===a.length&&(delete c[p],d[h]--)}}else delete d[o],delete d[u],delete d[h];return this},clearAllEventListeners:function(){return delete this[D],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var n,i,r,o,a,l=s.Util.extend({},e,{type:t,target:this}),u=this[D];if(u[t])for(i=0,r=(n=u[t].slice()).length;i<r;i++)n[i].action.call(n[i].context,l);for(a in o=u[t+"_idx"])if(n=o[a].slice())for(i=0,r=n.length;i<r;i++)n[i].action.call(n[i].context,l);return this},addOneTimeEventListener:function(t,e,n){if(s.Util.invokeEach(t,this.addOneTimeEventListener,this,e,n))return this;var i=s.bind(function(){this.removeEventListener(t,e,n).removeEventListener(t,i,n)},this);return this.addEventListener(t,e,n).addEventListener(t,i,n)}},s.Mixin.Events.on=s.Mixin.Events.addEventListener,s.Mixin.Events.off=s.Mixin.Events.removeEventListener,s.Mixin.Events.once=s.Mixin.Events.addOneTimeEventListener,s.Mixin.Events.fire=s.Mixin.Events.fireEvent,l=(a="ActiveXObject"in t)&&!e.addEventListener,u=navigator.userAgent.toLowerCase(),h=-1!==u.indexOf("webkit"),c=-1!==u.indexOf("chrome"),d=-1!==u.indexOf("phantom"),p=-1!==u.indexOf("android"),f=-1!==u.search("android [23]"),m=-1!==u.indexOf("gecko"),g=typeof orientation!=n+"",v=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints&&!t.PointerEvent,y=t.PointerEvent&&t.navigator.pointerEnabled&&t.navigator.maxTouchPoints||v,_="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,b=e.documentElement,w=a&&"transition"in b.style,x="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix,S="MozPerspective"in b.style,C="OTransition"in b.style,E=!t.L_DISABLE_3D&&(w||x||S||C)&&!d,M=!t.L_NO_TOUCH&&!d&&function(){var t="ontouchstart";if(y||t in b)return!0;var n=e.createElement("div"),i=!1;return!!n.setAttribute&&(n.setAttribute(t,"return;"),"function"==typeof n[t]&&(i=!0),n.removeAttribute(t),n=null,i)}(),s.Browser={ie:a,ielt9:l,webkit:h,gecko:m&&!h&&!t.opera&&!a,android:p,android23:f,chrome:c,ie3d:w,webkit3d:x,gecko3d:S,opera3d:C,any3d:E,mobile:g,mobileWebkit:g&&h,mobileWebkit3d:g&&x,mobileOpera:g&&t.opera,touch:M,msPointer:v,pointer:y,retina:_},s.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},s.Point.prototype={clone:function(){return new s.Point(this.x,this.y)},add:function(t){return this.clone()._add(s.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(s.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){var e=(t=s.point(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=s.point(t)).x===this.x&&t.y===this.y},contains:function(t){return t=s.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+s.Util.formatNum(this.x)+", "+s.Util.formatNum(this.y)+")"}},s.point=function(t,e,i){return t instanceof s.Point?t:s.Util.isArray(t)?new s.Point(t[0],t[1]):t===n||null===t?t:new s.Point(t,e,i)},s.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])},s.Bounds.prototype={extend:function(t){return t=s.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new s.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new s.Point(this.min.x,this.max.y)},getTopRight:function(){return new s.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof s.Point?s.point(t):s.bounds(t))instanceof s.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=s.bounds(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,a=r.y>=e.y&&i.y<=n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},s.bounds=function(t,e){return!t||t instanceof s.Bounds?t:new s.Bounds(t,e)},s.Transformation=function(t,e,n,i){this._a=t,this._b=e,this._c=n,this._d=i},s.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new s.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},s.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,n){var i=t.style[n];if(!i&&t.currentStyle&&(i=t.currentStyle[n]),(!i||"auto"===i)&&e.defaultView){var r=e.defaultView.getComputedStyle(t,null);i=r?r[n]:null}return"auto"===i?null:i},getViewportOffset:function(t){var n,i=0,r=0,o=t,a=e.body,l=e.documentElement;do{if(i+=o.offsetTop||0,r+=o.offsetLeft||0,i+=parseInt(s.DomUtil.getStyle(o,"borderTopWidth"),10)||0,r+=parseInt(s.DomUtil.getStyle(o,"borderLeftWidth"),10)||0,n=s.DomUtil.getStyle(o,"position"),o.offsetParent===a&&"absolute"===n)break;if("fixed"===n){i+=a.scrollTop||l.scrollTop||0,r+=a.scrollLeft||l.scrollLeft||0;break}if("relative"===n&&!o.offsetLeft){var u=s.DomUtil.getStyle(o,"width"),h=s.DomUtil.getStyle(o,"max-width"),c=o.getBoundingClientRect();"none"===u&&"none"===h||(r+=c.left+o.clientLeft),i+=c.top+(a.scrollTop||l.scrollTop||0);break}o=o.offsetParent}while(o);o=t;do{if(o===a)break;i-=o.scrollTop||0,r-=o.scrollLeft||0,o=o.parentNode}while(o);return new s.Point(r,i)},documentIsLtr:function(){return s.DomUtil._docIsLtrCached||(s.DomUtil._docIsLtrCached=!0,s.DomUtil._docIsLtr="ltr"===s.DomUtil.getStyle(e.body,"direction")),s.DomUtil._docIsLtr},create:function(t,n,i){var r=e.createElement(t);return r.className=n,i&&i.appendChild(r),r},hasClass:function(t,e){if(t.classList!==n)return t.classList.contains(e);var i=s.DomUtil._getClass(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)},addClass:function(t,e){if(t.classList!==n)for(var i=s.Util.splitWords(e),r=0,o=i.length;r<o;r++)t.classList.add(i[r]);else if(!s.DomUtil.hasClass(t,e)){var a=s.DomUtil._getClass(t);s.DomUtil._setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){t.classList!==n?t.classList.remove(e):s.DomUtil._setClass(t,s.Util.trim((" "+s.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===n?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===n?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(r){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}},testProp:function(t){for(var n=e.documentElement.style,i=0;i<t.length;i++)if(t[i]in n)return t[i];return!1},getTranslateString:function(t){var e=s.Browser.webkit3d,n=(e?",0":"")+")";return"translate"+(e?"3d":"")+"("+t.x+"px,"+t.y+"px"+n},getScaleString:function(t,e){return s.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t)))+(" scale("+t+") ")},setPosition:function(t,e,n){t._leaflet_pos=e,!n&&s.Browser.any3d?(t.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(e),s.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},s.DomUtil.TRANSFORM=s.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),s.DomUtil.TRANSITION=s.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),s.DomUtil.TRANSITION_END="webkitTransition"===s.DomUtil.TRANSITION||"OTransition"===s.DomUtil.TRANSITION?s.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in e)s.extend(s.DomUtil,{disableTextSelection:function(){s.DomEvent.on(t,"selectstart",s.DomEvent.preventDefault)},enableTextSelection:function(){s.DomEvent.off(t,"selectstart",s.DomEvent.preventDefault)}});else{var n=s.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);s.extend(s.DomUtil,{disableTextSelection:function(){if(n){var t=e.documentElement.style;this._userSelect=t[n],t[n]="none"}},enableTextSelection:function(){n&&(e.documentElement.style[n]=this._userSelect,delete this._userSelect)}})}s.extend(s.DomUtil,{disableImageDrag:function(){s.DomEvent.on(t,"dragstart",s.DomEvent.preventDefault)},enableImageDrag:function(){s.DomEvent.off(t,"dragstart",s.DomEvent.preventDefault)}})}(),s.LatLng=function(t,e,i){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,i!==n&&(this.alt=parseFloat(i))},s.extend(s.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),s.LatLng.prototype={equals:function(t){return!!t&&(t=s.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=s.LatLng.MAX_MARGIN)},toString:function(t){return"LatLng("+s.Util.formatNum(this.lat,t)+", "+s.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=s.latLng(t);var e=6378137,n=s.LatLng.DEG_TO_RAD,i=(t.lat-this.lat)*n,r=(t.lng-this.lng)*n,o=this.lat*n,a=t.lat*n,l=Math.sin(i/2),u=Math.sin(r/2),h=l*l+u*u*Math.cos(o)*Math.cos(a);return 2*e*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))},wrap:function(t,e){var n=this.lng;return t=t||-180,n=(n+(e=e||180))%(e-t)+(n<t||n===e?e:t),new s.LatLng(this.lat,n)}},s.latLng=function(t,e){return t instanceof s.LatLng?t:s.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new s.LatLng(t[0],t[1],t[2]):null:t===n||null===t?t:"object"==typeof t&&"lat"in t?new s.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===n?null:new s.LatLng(t,e)},s.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])},s.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=s.latLng(t)
;return(t=null!==e?e:s.latLngBounds(t))instanceof s.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new s.LatLng(t.lat,t.lng),this._northEast=new s.LatLng(t.lat,t.lng)):t instanceof s.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new s.LatLngBounds(new s.LatLng(e.lat-i,e.lng-r),new s.LatLng(n.lat+i,n.lng+r))},getCenter:function(){return new s.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new s.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new s.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof s.LatLng?s.latLng(t):s.latLngBounds(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof s.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=s.latLngBounds(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,a=r.lng>=e.lng&&i.lng<=n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=s.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},s.latLngBounds=function(t,e){return!t||t instanceof s.LatLngBounds?t:new s.LatLngBounds(t,e)},s.Projection={},s.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=s.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=t.lng*e,o=i*e;return o=Math.log(Math.tan(Math.PI/4+o/2)),new s.Point(r,o)},unproject:function(t){var e=s.LatLng.RAD_TO_DEG,n=t.x*e,i=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new s.LatLng(i,n)}},s.Projection.LonLat={project:function(t){return new s.Point(t.lng,t.lat)},unproject:function(t){return new s.LatLng(t.y,t.x)}},s.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return s.point(e,e)}},s.CRS.Simple=s.extend({},s.CRS,{projection:s.Projection.LonLat,transformation:new s.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),s.CRS.EPSG3857=s.extend({},s.CRS,{code:"EPSG:3857",projection:s.Projection.SphericalMercator,transformation:new s.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=6378137;return this.projection.project(t).multiplyBy(e)}}),s.CRS.EPSG900913=s.extend({},s.CRS.EPSG3857,{code:"EPSG:900913"}),s.CRS.EPSG4326=s.extend({},s.CRS,{code:"EPSG:4326",projection:s.Projection.LonLat,transformation:new s.Transformation(1/360,.5,-1/360,.5)}),s.Map=s.Class.extend({includes:s.Mixin.Events,options:{crs:s.CRS.EPSG3857,fadeAnimation:s.DomUtil.TRANSITION&&!s.Browser.android23,trackResize:!0,markerZoomAnimation:s.DomUtil.TRANSITION&&s.Browser.any3d},initialize:function(t,e){e=s.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=s.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==n&&this.setView(s.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===n?this.getZoom():e,this._resetView(s.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof s.Point?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(o));return this.setView(a,e,{zoom:n})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():s.latLngBounds(t);var n=s.point(e.paddingTopLeft||e.padding||[0,0]),i=s.point(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i)),o=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),r),l=this.project(t.getNorthEast(),r),u=this.unproject(a.add(l).divideBy(2).add(o),r);return r=e&&e.maxZoom?Math.min(e.maxZoom,r):r,this.setView(u,r,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(s.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=s.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var n=this.getCenter(),i=this._limitCenter(n,this._zoom,t);return n.equals(i)?this:this.panTo(i,e)},addLayer:function(t){var e=s.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&t instanceof s.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=s.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&t instanceof s.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return!!t&&s.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},invalidateSize:function(t){t=s.extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();if(this._sizeChanged=!0,this._initialCenter=null,!this._loaded)return this;var n=this.getSize(),i=e.divideBy(2).round(),r=n.divideBy(2).round(),o=i.subtract(r);return o.x||o.y?(t.animate&&t.pan?this.panBy(o):(t.pan&&this._rawPanBy(o),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=n}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new s.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===n?this._layersMinZoom===n?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===n?this._layersMaxZoom===n?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=s.latLngBounds(t);var i,r=this.getMinZoom()-(e?1:0),o=this.getMaxZoom(),a=this.getSize(),l=t.getNorthWest(),u=t.getSouthEast(),h=!0;n=s.point(n||[0,0]);do{r++,i=this.project(u,r).subtract(this.project(l,r)).add(n),h=e?i.x<a.x||i.y<a.y:a.contains(i)}while(h&&r<=o);return h&&e?null:e?r:r-1},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new s.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new s.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===n?this._zoom:e,this.options.crs.latLngToPoint(s.latLng(t),e)},unproject:function(t,e){return e=e===n?this._zoom:e,this.options.crs.pointToLatLng(s.point(t),e)},layerPointToLatLng:function(t){var e=s.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(s.latLng(t))._round()._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return s.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return s.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(s.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(s.latLng(t)))},mouseEventToContainerPoint:function(t){return s.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=s.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;s.DomUtil.addClass(t,"leaflet-container"+(s.Browser.touch?" leaflet-touch":"")+(s.Browser.retina?" leaflet-retina":"")+(s.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=s.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(s.DomUtil.addClass(t.markerPane,e),s.DomUtil.addClass(t.shadowPane,e),s.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return s.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){for(var e=0,n=(t=t?s.Util.isArray(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_resetView:function(t,e,n,i){var r=this._zoom!==e;i||(this.fire("movestart"),r&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),n?this._initialTopLeftPoint._add(this._getMapPanePos()):s.DomUtil.setPosition(this._mapPane,new s.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var o=!this._loaded;this._loaded=!0,o&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("viewreset",{hard:!n}),this.fire("move"),(r||i)&&this.fire("zoomend"),this.fire("moveend",{hard:!n})},_rawPanBy:function(t){s.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=Infinity,i=-Infinity,r=this._getZoomSpan();for(t in this._zoomBoundLayers){var o=this._zoomBoundLayers[t];isNaN(o.options.minZoom)||(e=Math.min(e,o.options.minZoom)),isNaN(o.options.maxZoom)||(i=Math.max(i,o.options.maxZoom))}t===n?this._layersMaxZoom=this._layersMinZoom=n:(this._layersMaxZoom=i,this._layersMinZoom=e),r!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(s.DomEvent){e=e||"on",s.DomEvent[e](this._container,"click",this._onMouseClick,this);var n,i,r=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(n=0,i=r.length;n<i;n++)s.DomEvent[e](this._container,r[n],this._fireMouseEvent,this);this.options.trackResize&&s.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){s.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=s.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||s.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!s.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&s.DomEvent.preventDefault(t);var n=this.mouseEventToContainerPoint(t),i=this.containerPointToLayerPoint(n),r=this.layerPointToLatLng(i);this.fire(e,{latlng:r,layerPoint:i,containerPoint:n,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return s.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewTopLeftPoint(n,e).add(this._getMapPanePos());return this.project(t,e)._subtract(i)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new s.Bounds(i.subtract(r),i.add(r)),a=this._getBoundsOffset(o,n,e);return this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new s.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=this.project(e.getNorthWest(),n).subtract(t.min),r=this.project(e.getSouthEast(),n).subtract(t.max),o=this._rebound(i.x,-r.x),a=this._rebound(i.y,-r.y);return new s.Point(o,a)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom();return Math.max(e,Math.min(n,t))}}),s.map=function(t,e){return new s.Map(t,e)},s.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=s.LatLng.DEG_TO_RAD,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=this.R_MAJOR,o=this.R_MINOR,a=t.lng*e*r,l=i*e,u=o/r,h=Math.sqrt(1-u*u),c=h*Math.sin(l);c=Math.pow((1-c)/(1+c),.5*h);var d=Math.tan(.5*(.5*Math.PI-l))/c;return l=-r*Math.log(d),new s.Point(a,l)},unproject:function(t){for(var e,n=s.LatLng.RAD_TO_DEG,i=this.R_MAJOR,r=this.R_MINOR,o=t.x*n/i,a=r/i,l=Math.sqrt(1-a*a),u=Math.exp(-t.y/i),h=Math.PI/2-2*Math.atan(u),c=1e-7,d=15,p=.1;Math.abs(p)>c&&--d>0;)e=l*Math.sin(h),h+=p=Math.PI/2-2*Math.atan(u*Math.pow((1-e)/(1+e),.5*l))-h;return new s.LatLng(h*n,o)}},s.CRS.EPSG3395=s.extend({},s.CRS,{code:"EPSG:3395",projection:s.Projection.Mercator,transformation:(L=s.Projection.Mercator.R_MAJOR,T=.5/(Math.PI*L),new s.Transformation(T,.5,-T,.5))}),s.TileLayer=s.Class.extend({includes:s.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:s.Browser.mobile,updateWhenIdle:s.Browser.mobile},initialize:function(t,e){(e=s.setOptions(this,e)).detectRetina&&s.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=s.latLngBounds(e.bounds)),this._url=t;var n=this.options.subdomains;"string"==typeof n&&(this.options.subdomains=n.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=s.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==n&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var n,i,r,o=t.children,s=-e(Infinity,-Infinity);for(i=0,r=o.length;i<r;i++)o[i]!==this._container&&(n=parseInt(o[i].style.zIndex,10),isNaN(n)||(s=e(s,n)));this.options.zIndex=this._container.style.zIndex=(isFinite(s)?s:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(s.Browser.ielt9)for(t in e)s.DomUtil.setOpacity(e[t],this.options.opacity);else s.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=s.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=s.DomUtil.create("div",e,this._container),this._tileContainer=s.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,n=this.options.maxNativeZoom,i=this.options.tileSize;return n&&e>n&&(i=Math.round(t.getZoomScale(e)/t.getZoomScale(n)*i)),i},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),n=t.getZoom(),i=this._getTileSize();if(!(n>this.options.maxZoom||n<this.options.minZoom)){var r=s.bounds(e.min.divideBy(i)._floor(),e.max.divideBy(i)._floor());this._addTilesFromCenterOut(r),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(r)}}},_addTilesFromCenterOut:function(t){var n,i,r,o=[],a=t.getCenter();for(n=t.min.y;n<=t.max.y;n++)for(i=t.min.x;i<=t.max.x;i++)r=new s.Point(i,n),this._tileShouldBeLoaded(r)&&o.push(r);var l=o.length;if(0!==l){o.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)});var u=e.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,i=0;i<l;i++)this._addTile(o[i],u);this._tileContainer.appendChild(u)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var n=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=n.x)||t.y<0||t.y>=n.y)return!1}if(e.bounds){var i=e.tileSize,r=t.multiplyBy(i),o=r.add([i,i]),s=this._map.unproject(r),a=this._map.unproject(o);if(e.continuousWorld||e.noWrap||(s=s.wrap(),a=a.wrap()),!e.bounds.intersects([s,a]))return!1}return!0},_removeOtherTiles:function(t){var e,n,i,r;for(r in this._tiles)e=r.split(":"),n=parseInt(e[0],10),i=parseInt(e[1],10),(n<t.min.x||n>t.max.x||i<t.min.y||i>t.max.y)&&this._removeTile(r)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(s.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),s.Browser.android||(e.onload=null,e.src=s.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var n=this._getTilePos(t),i=this._getTile();s.DomUtil.setPosition(i,n,s.Browser.chrome||s.Browser.android23),this._tiles[t.x+":"+t.y]=i,this._loadTile(i,t),i.parentNode!==this._tileContainer&&e.appendChild(i)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),n=this._getTileSize();return t.multiplyBy(n).subtract(e)},getTileUrl:function(t){return s.Util.template(this._url,s.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return this._map.options.crs.getSize(this._map.getZoom()).divideBy(this.options.tileSize)},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=s.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=s.Util.falseFn,s.Browser.ielt9&&this.options.opacity!==n&&s.DomUtil.setOpacity(t,this.options.opacity),s.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&s.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(s.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==s.Util.emptyImageUrl&&(s.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),s.tileLayer=function(t,e){return new s.TileLayer(t,e)},s.TileLayer.WMS=s.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var n=s.extend({},this.defaultWmsParams),i=e.tileSize||this.options.tileSize;for(var r in e.detectRetina&&s.Browser.retina?n.width=n.height=2*i:n.width=n.height=i,e)this.options.hasOwnProperty(r)||"crs"===r||(n[r]=e[r]);this.wmsParams=n,s.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,s.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,n=this.options.tileSize,i=t.multiplyBy(n),r=i.add([n,n]),o=this._crs.project(e.unproject(i,t.z)),a=this._crs.project(e.unproject(r,t.z)),l=this._wmsVersion>=1.3&&this._crs===s.CRS.EPSG4326?[a.y,o.x,o.y,a.x].join(","):[o.x,a.y,a.x,o.y].join(","),u=s.Util.template(this._url,{s:this._getSubdomain(t)});return u+s.Util.getParamString(this.wmsParams,u,!0)+"&BBOX="+l},setParams:function(t,e){return s.extend(this.wmsParams,t),e||this.redraw(),this}}),s.tileLayer.wms=function(t,e){return new s.TileLayer.WMS(t,e)},s.TileLayer.Canvas=s.TileLayer.extend({options:{async:!1},initialize:function(t){s.setOptions(this,t)},redraw:function(){for(var t in this._map&&(this._reset({hard:!0}),this._update()),this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=s.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=s.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),s.tileLayer.canvas=function(t){return new s.TileLayer.Canvas(t)},s.ImageOverlay=s.Class.extend({includes:s.Mixin.Events,options:{opacity:1},initialize:function(t,e,n){this._url=t,this._bounds=s.latLngBounds(e),s.setOptions(this,n)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&s.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=s.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&s.Browser.any3d?s.DomUtil.addClass(this._image,"leaflet-zoom-animated"):s.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),s.extend(this._image,{galleryimg:"no",onselectstart:s.Util.falseFn,onmousemove:s.Util.falseFn,onload:s.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,n=this._image,i=e.getZoomScale(t.zoom),r=this._bounds.getNorthWest(),o=this._bounds.getSouthEast(),a=e._latLngToNewLayerPoint(r,t.zoom,t.center),l=e._latLngToNewLayerPoint(o,t.zoom,t.center)._subtract(a),u=a._add(l._multiplyBy(.5*(1-1/i)));n.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(u)+" scale("+i+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),n=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);s.DomUtil.setPosition(t,e),t.style.width=n.x+"px",t.style.height=n.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){s.DomUtil.setOpacity(this._image,this.options.opacity)}}),s.imageOverlay=function(t,e,n){return new s.ImageOverlay(t,e,n)},s.Icon=s.Class.extend({options:{className:""},initialize:function(t){s.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n,i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}return n=e&&"IMG"===e.tagName?this._createImg(i,e):this._createImg(i),this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var n,i=this.options,r=s.point(i[e+"Size"]);!(n="shadow"===e?s.point(i.shadowAnchor||i.iconAnchor):s.point(i.iconAnchor))&&r&&(n=r.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+i.className,n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,n){return(n=n||e.createElement("img")).src=t,n},_getIconUrl:function(t){return s.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),s.icon=function(t){return new s.Icon(t)},s.Icon.Default=s.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];s.Browser.retina&&"icon"===t&&(t+="-2x");var n=s.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+".png"}}),s.Icon.Default.imagePath=function(){var t,n,i,r,o=e.getElementsByTagName("script"),s=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,n=o.length;t<n;t++)if((i=o[t].src).match(s))return((r=i.split(s)[0])?r+"/":"")+"images"}(),s.Marker=s.Class.extend({includes:s.Mixin.Events,options:{icon:new s.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){s.setOptions(this,e),this._latlng=s.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=s.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,n=e.options.zoomAnimation&&e.options.markerZoomAnimation?"leaflet-zoom-animated":"leaflet-zoom-hide",i=t.icon.createIcon(this._icon),r=!1;i!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(i.title=t.title),t.alt&&(i.alt=t.alt)),s.DomUtil.addClass(i,n),t.keyboard&&(i.tabIndex="0"),this._icon=i,this._initInteraction(),t.riseOnHover&&s.DomEvent.on(i,"mouseover",this._bringToFront,this).on(i,"mouseout",this._resetZIndex,this);var o=t.icon.createShadow(this._shadow),a=!1;o!==this._shadow&&(this._removeShadow(),a=!0),o&&s.DomUtil.addClass(o,n),this._shadow=o,t.opacity<1&&this._updateOpacity();var l=this._map._panes
;r&&l.markerPane.appendChild(this._icon),o&&a&&l.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&s.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){s.DomUtil.setPosition(this._icon,t),this._shadow&&s.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];s.DomUtil.addClass(t,"leaflet-clickable"),s.DomEvent.on(t,"click",this._onMouseClick,this),s.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var n=0;n<e.length;n++)s.DomEvent.on(t,e[n],this._fireMouseEvent,this);s.Handler.MarkerDrag&&(this.dragging=new s.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&s.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&s.DomEvent.preventDefault(t),"mousedown"!==t.type?s.DomEvent.stopPropagation(t):s.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){s.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&s.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),s.marker=function(t,e){return new s.Marker(t,e)},s.DivIcon=s.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var n=t&&"DIV"===t.tagName?t:e.createElement("div"),i=this.options;return!1!==i.html?n.innerHTML=i.html:n.innerHTML="",i.bgPos&&(n.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(n,"icon"),n},createShadow:function(){return null}}),s.divIcon=function(t){return new s.DivIcon(t)},s.Map.mergeOptions({closePopupOnClick:!0}),s.Popup=s.Class.extend({includes:s.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){s.setOptions(this,t),this._source=e,this._animated=s.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&s.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&s.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),s.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&s.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=s.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=s.DomUtil.create("div",n);this.options.closeButton&&((t=this._closeButton=s.DomUtil.create("a",e+"-close-button",i)).href="#close",t.innerHTML="&#215;",s.DomEvent.disableClickPropagation(t),s.DomEvent.on(t,"click",this._onCloseButtonClick,this));var r=this._wrapper=s.DomUtil.create("div",e+"-content-wrapper",i);s.DomEvent.disableClickPropagation(r),this._contentNode=s.DomUtil.create("div",e+"-content",r),s.DomEvent.disableScrollPropagation(this._contentNode),s.DomEvent.on(r,"contextmenu",s.DomEvent.stopPropagation),this._tipContainer=s.DomUtil.create("div",e+"-tip-container",i),this._tip=s.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&i>r?(e.height=r+"px",s.DomUtil.addClass(t,o)):s.DomUtil.removeClass(t,o),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,n=s.point(this.options.offset);e&&s.DomUtil.setPosition(this._container,t),this._containerBottom=-n.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+n.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);s.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,i=new s.Point(this._containerLeft,-e-this._containerBottom);this._animated&&i._add(s.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(i),o=s.point(this.options.autoPanPadding),a=s.point(this.options.autoPanPaddingTopLeft||o),l=s.point(this.options.autoPanPaddingBottomRight||o),u=t.getSize(),h=0,c=0;r.x+n+l.x>u.x&&(h=r.x+n-u.x+l.x),r.x-h-a.x<0&&(h=r.x-a.x),r.y+e+l.y>u.y&&(c=r.y+e-u.y+l.y),r.y-c-a.y<0&&(c=r.y-a.y),(h||c)&&t.fire("autopanstart").panBy([h,c])}},_onCloseButtonClick:function(t){this._close(),s.DomEvent.stop(t)}}),s.popup=function(t,e){return new s.Popup(t,e)},s.Map.include({openPopup:function(t,e,n){if(this.closePopup(),!(t instanceof s.Popup)){var i=t;t=new s.Popup(n).setLatLng(e).setContent(i)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),s.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var n=s.point(this.options.icon.options.popupAnchor||[0,0]);return n=n.add(s.Popup.prototype.options.offset),e&&e.offset&&(n=n.add(e.offset)),e=s.extend({offset:n},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof s.Popup?(s.setOptions(t,e),this._popup=t):this._popup=new s.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),s.LayerGroup=s.Class.extend({initialize:function(t){var e,n;if(this._layers={},t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return s.stamp(t)}}),s.layerGroup=function(t){return new s.LayerGroup(t)},s.FeatureGroup=s.LayerGroup.extend({includes:s.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.off(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new s.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof s.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=s.extend({},t,{layer:t.target,target:this}),this.fire(t.type,t)}}),s.featureGroup=function(t){return new s.FeatureGroup(t)},s.Path=s.Class.extend({includes:[s.Mixin.Events],statics:{CLIP_PADDING:(k=((s.Browser.mobile?1280:2e3)/Math.max(t.outerWidth,t.outerHeight)-1)/2,Math.max(0,Math.min(.5,k)))},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){s.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,s.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return s.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),s.Map.include({_updatePathViewport:function(){var t=s.Path.CLIP_PADDING,e=this.getSize(),n=s.DomUtil.getPosition(this._mapPane).multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),i=n.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new s.Bounds(n,i)}}),s.Path.SVG_NS="http://www.w3.org/2000/svg",s.Browser.svg=!(!e.createElementNS||!e.createElementNS(s.Path.SVG_NS,"svg").createSVGRect),s.Path=s.Path.extend({statics:{SVG:s.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,n=t.firstChild;return e&&n!==e&&t.insertBefore(e,n),this},getPathString:function(){},_createElement:function(t){return e.createElementNS(s.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&s.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){!s.Browser.svg&&s.Browser.vml||s.DomUtil.addClass(this._path,"leaflet-clickable"),s.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)s.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,n=e.mouseEventToContainerPoint(t),i=e.containerPointToLayerPoint(n),r=e.layerPointToLatLng(i);this.fire(t.type,{latlng:r,layerPoint:i,containerPoint:n,originalEvent:t}),"contextmenu"===t.type&&s.DomEvent.preventDefault(t),"mousemove"!==t.type&&s.DomEvent.stopPropagation(t)}}}),s.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=s.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&s.Browser.any3d?(s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),n=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(n)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max,i=n.x-e.x,r=n.y-e.y,o=this._pathRoot,a=this._panes.overlayPane;s.Browser.mobileWebkit&&a.removeChild(o),s.DomUtil.setPosition(o,e),o.setAttribute("width",i),o.setAttribute("height",r),o.setAttribute("viewBox",[e.x,e.y,i,r].join(" ")),s.Browser.mobileWebkit&&a.appendChild(o)}}}),s.Path.include({bindPopup:function(t,e){return t instanceof s.Popup?this._popup=t:(this._popup&&!e||(this._popup=new s.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),s.Browser.vml=!s.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var n=t.firstChild;return n.style.behavior="url(#default#VML)",n&&"object"==typeof n.adj}catch(i){return!1}}(),s.Path=s.Browser.svg||!s.Browser.vml?s.Path:s.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");s.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&s.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,n=this.options,i=this._container;i.stroked=n.stroke,i.filled=n.fill,n.stroke?(t||((t=this._stroke=this._createElement("stroke")).endcap="round",i.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=s.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",n.lineCap&&(t.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(t.joinstyle=n.lineJoin)):t&&(i.removeChild(t),this._stroke=null),n.fill?(e||(e=this._fill=this._createElement("fill"),i.appendChild(e)),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(i.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),s.Map.include(s.Browser.svg||!s.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=e.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),s.Browser.canvas=!!e.createElement("canvas").getContext,s.Path=s.Path.SVG&&!t.L_PREFER_CANVAS||!s.Browser.canvas?s.Path:s.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return s.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!s.Path._updateRequest&&(s.Path._updateRequest=s.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){s.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,n,i,r,o;for(this._ctx.beginPath(),t=0,n=this._parts.length;t<n;t++){for(e=0,i=this._parts[t].length;e<i;e++)r=this._parts[t][e],o=(0===e?"move":"line")+"To",this._ctx[o](r.x,r.y);this instanceof s.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),s.Map.include(s.Path.SVG&&!t.L_PREFER_CANVAS||!s.Browser.canvas?{}:{_initPathRoot:function(){var t,n=this._pathRoot;n||((n=this._pathRoot=e.createElement("canvas")).style.position="absolute",(t=this._canvasCtx=n.getContext("2d")).lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(n),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,n=t.max.subtract(e),i=this._pathRoot;s.DomUtil.setPosition(i,e),i.width=n.x,i.height=n.y,i.getContext("2d").translate(-e.x,-e.y)}}}),s.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var i=t.length,r=new(typeof Uint8Array!=n+""?Uint8Array:Array)(i);r[0]=r[i-1]=1,this._simplifyDPStep(t,r,e,0,i-1);var o,s=[];for(o=0;o<i;o++)r[o]&&s.push(t[o]);return s},_simplifyDPStep:function(t,e,n,i,r){var o,s,a,l=0;for(s=i+1;s<=r-1;s++)(a=this._sqClosestPointOnSegment(t[s],t[i],t[r],!0))>l&&(o=s,l=a);l>n&&(e[o]=1,this._simplifyDPStep(t,e,n,i,o),this._simplifyDPStep(t,e,n,o,r))},_reducePoints:function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)this._sqDist(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<o-1&&n.push(t[o-1]),n},clipSegment:function(t,e,n,i){var r,o,s,a=i?this._lastCode:this._getBitCode(t,n),l=this._getBitCode(e,n);for(this._lastCode=l;;){if(!(a|l))return[t,e];if(a&l)return!1;r=a||l,o=this._getEdgeIntersection(t,e,r,n),s=this._getBitCode(o,n),r===a?(t=o,a=s):(e=o,l=s)}},_getEdgeIntersection:function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,a=i.min,l=i.max;return 8&n?new s.Point(t.x+r*(l.y-t.y)/o,l.y):4&n?new s.Point(t.x+r*(a.y-t.y)/o,a.y):2&n?new s.Point(l.x,t.y+o*(l.x-t.x)/r):1&n?new s.Point(a.x,t.y+o*(a.x-t.x)/r):void 0},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i},_sqClosestPointOnSegment:function(t,e,n,i){var r,o=e.x,a=e.y,l=n.x-o,u=n.y-a,h=l*l+u*u;return h>0&&((r=((t.x-o)*l+(t.y-a)*u)/h)>1?(o=n.x,a=n.y):r>0&&(o+=l*r,a+=u*r)),l=t.x-o,u=t.y-a,i?l*l+u*u:new s.Point(o,a)}},s.Polyline=s.Path.extend({initialize:function(t,e){s.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;t<e;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,n="";t<e;t++)n+=this._getPathPartStr(this._parts[t]);return n},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(s.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,n,i=Infinity,r=this._parts,o=null,a=0,l=r.length;a<l;a++)for(var u=r[a],h=1,c=u.length;h<c;h++){e=u[h-1],n=u[h];var d=s.LineUtil._sqClosestPointOnSegment(t,e,n,!0);d<i&&(i=d,o=s.LineUtil._sqClosestPointOnSegment(t,e,n))}return o&&(o.distance=Math.sqrt(i)),o},getBounds:function(){return new s.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var n,i,r=e?t:[];for(n=0,i=t.length;n<i;n++){if(s.Util.isArray(t[n])&&"number"!=typeof t[n][0])return;r[n]=s.latLng(t[n])}return r},_initEvents:function(){s.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,n=s.Path.VML,i=0,r=t.length,o="";i<r;i++)e=t[i],n&&e._round(),o+=(i?"L":"M")+e.x+" "+e.y;return o},_clipPoints:function(){var t,e,n,i=this._originalPoints,r=i.length;if(this.options.noClip)this._parts=[i];else{this._parts=[];var o=this._parts,a=this._map._pathViewport,l=s.LineUtil;for(t=0,e=0;t<r-1;t++)(n=l.clipSegment(i[t],i[t+1],a,t))&&(o[e]=o[e]||[],o[e].push(n[0]),n[1]===i[t+1]&&t!==r-2||(o[e].push(n[1]),e++))}},_simplifyPoints:function(){for(var t=this._parts,e=s.LineUtil,n=0,i=t.length;n<i;n++)t[n]=e.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),s.Path.prototype._updatePath.call(this))}}),s.polyline=function(t,e){return new s.Polyline(t,e)},s.PolyUtil={},s.PolyUtil.clipPolygon=function(t,e){var n,i,r,o,a,l,u,h,c,d=[1,4,2,8],p=s.LineUtil;for(i=0,u=t.length;i<u;i++)t[i]._code=p._getBitCode(t[i],e);for(o=0;o<4;o++){for(h=d[o],n=[],i=0,r=(u=t.length)-1;i<u;r=i++)a=t[i],l=t[r],a._code&h?l._code&h||((c=p._getEdgeIntersection(l,a,h,e))._code=p._getBitCode(c,e),n.push(c)):(l._code&h&&((c=p._getEdgeIntersection(l,a,h,e))._code=p._getBitCode(c,e),n.push(c)),n.push(a));t=n}return t},s.Polygon=s.Polyline.extend({options:{fill:!0},initialize:function(t,e){s.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,n,i;if(t&&s.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,n=this._holes.length;e<n;e++)(i=this._holes[e]=this._convertLatLngs(this._holes[e]))[0].equals(i[i.length-1])&&i.pop();(t=this._latlngs).length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){var t,e,n,i;if(s.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(t=0,n=this._holes.length;t<n;t++)for(this._holePoints[t]=[],e=0,i=this._holes[t].length;e<i;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])},setLatLngs:function(t){return t&&s.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):s.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var n=0,i=this._parts.length;n<i;n++){var r=s.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport);r.length&&e.push(r)}this._parts=e}},_getPathPartStr:function(t){return s.Polyline.prototype._getPathPartStr.call(this,t)+(s.Browser.svg?"z":"x")}}),s.polygon=function(t,e){return new s.Polygon(t,e)},function(){function t(t){return s.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var n=0,i=e.length;for(this.eachLayer(function(t){n<i?t.setLatLngs(e[n++]):this.removeLayer(t)},this);n<i;)this.addLayer(new t(e[n++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}s.MultiPolyline=t(s.Polyline),s.MultiPolygon=t(s.Polygon),s.multiPolyline=function(t,e){return new s.MultiPolyline(t,e)},s.multiPolygon=function(t,e){return new s.MultiPolygon(t,e)}}(),s.Rectangle=s.Polygon.extend({initialize:function(t,e){s.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=s.latLngBounds(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),s.rectangle=function(t,e){return new s.Rectangle(t,e)},s.Circle=s.Path.extend({initialize:function(t,e,n){s.Path.prototype.initialize.call(this,n),this._latlng=s.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=s.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,n=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-n.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,n=this._latlng;return new s.LatLngBounds([n.lat-e,n.lng-t],[n.lat+e,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":s.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(s.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,n=this._point;return n.x-e>t.max.x||n.y-e>t.max.y||n.x+e<t.min.x||n.y+e<t.min.y}}),s.circle=function(t,e,n){return new s.Circle(t,e,n)},s.CircleMarker=s.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){s.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){s.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){s.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t)},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),s.circleMarker=function(t,e){return new s.CircleMarker(t,e)},s.Polyline.include(s.Path.CANVAS?{_containsPoint:function(t,e){var n,i,r,o,a,l,u=this.options.weight/2;for(s.Browser.touch&&(u+=10),n=0,o=this._parts.length;n<o;n++)for(i=0,r=(a=(l=this._parts[n]).length)-1;i<a;r=i++)if((e||0!==i)&&s.LineUtil.pointToSegmentDistance(t,l[r],l[i])<=u)return!0;return!1}}:{}),s.Polygon.include(s.Path.CANVAS?{_containsPoint:function(t){var e,n,i,r,o,a,l,u,h=!1;if(s.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(r=0,l=this._parts.length;r<l;r++)for(o=0,a=(u=(e=this._parts[r]).length)-1;o<u;a=o++)n=e[o],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(h=!h);return h}}:{}),s.Circle.include(s.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,n=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+n}}:{}),s.CircleMarker.include(s.Path.CANVAS?{_updateStyle:function(){s.Path.prototype._updateStyle.call(this)}}:{}),s.GeoJSON=s.FeatureGroup.extend({
initialize:function(t,e){s.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=s.Util.isArray(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(r[e]);return this}var o=this.options;if(!o.filter||o.filter(t)){var a=s.GeoJSON.geometryToLayer(t,o.pointToLayer,o.coordsToLatLng,o);return a.feature=s.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)}},resetStyle:function(t){var e=this.options.style;e&&(s.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),s.extend(s.GeoJSON,{geometryToLayer:function(t,e,n,i){var r,o,a,l,u="Feature"===t.type?t.geometry:t,h=u.coordinates,c=[];switch(n=n||this.coordsToLatLng,u.type){case"Point":return r=n(h),e?e(t,r):new s.Marker(r);case"MultiPoint":for(a=0,l=h.length;a<l;a++)r=n(h[a]),c.push(e?e(t,r):new s.Marker(r));return new s.FeatureGroup(c);case"LineString":return o=this.coordsToLatLngs(h,0,n),new s.Polyline(o,i);case"Polygon":if(2===h.length&&!h[1].length)throw new Error("Invalid GeoJSON object.");return o=this.coordsToLatLngs(h,1,n),new s.Polygon(o,i);case"MultiLineString":return o=this.coordsToLatLngs(h,1,n),new s.MultiPolyline(o,i);case"MultiPolygon":return o=this.coordsToLatLngs(h,2,n),new s.MultiPolygon(o,i);case"GeometryCollection":for(a=0,l=u.geometries.length;a<l;a++)c.push(this.geometryToLayer({geometry:u.geometries[a],type:"Feature",properties:t.properties},e,n,i));return new s.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new s.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){var i,r,o,s=[];for(r=0,o=t.length;r<o;r++)i=e?this.coordsToLatLngs(t[r],e-1,n):(n||this.coordsToLatLng)(t[r]),s.push(i);return s},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==n&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(s.GeoJSON.latLngToCoords(t[n]));return e},getFeature:function(t,e){return t.feature?s.extend({},t.feature,{geometry:e}):s.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var P={toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"Point",coordinates:s.GeoJSON.latLngToCoords(this.getLatLng())})}};s.Marker.include(P),s.Circle.include(P),s.CircleMarker.include(P),s.Polyline.include({toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"LineString",coordinates:s.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),s.Polygon.include({toGeoJSON:function(){var t,e,n,i=[s.GeoJSON.latLngsToCoords(this.getLatLngs())];if(i[0].push(i[0][0]),this._holes)for(t=0,e=this._holes.length;t<e;t++)(n=s.GeoJSON.latLngsToCoords(this._holes[t])).push(n[0]),i.push(n);return s.GeoJSON.getFeature(this,{type:"Polygon",coordinates:i})}}),function(){function t(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),s.GeoJSON.getFeature(this,{type:t,coordinates:e})}}s.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),s.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),s.LayerGroup.include({toGeoJSON:function(){var e,n=this.feature&&this.feature.geometry,i=[];if(n&&"MultiPoint"===n.type)return t("MultiPoint").call(this);var r=n&&"GeometryCollection"===n.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),i.push(r?e.geometry:s.GeoJSON.asFeature(e)))}),r?s.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}})}(),s.geoJson=function(t,e){return new s.GeoJSON(t,e)},s.DomEvent={addListener:function(t,e,n,i){var r,o,a,l=s.stamp(n),u="_leaflet_"+e+l;return t[u]?this:(r=function(e){return n.call(i||t,e||s.DomEvent._getEvent())},s.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,r,l):(s.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,r,l),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",r,!1),t.addEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?(o=r,a="mouseenter"===e?"mouseover":"mouseout",r=function(e){if(s.DomEvent._checkMouse(t,e))return o(e)},t.addEventListener(a,r,!1)):"click"===e&&s.Browser.android?(o=r,r=function(t){return s.DomEvent._filterClick(t,o)},t.addEventListener(e,r,!1)):t.addEventListener(e,r,!1):"attachEvent"in t&&t.attachEvent("on"+e,r),t[u]=r,this))},removeListener:function(t,e,n){var i=s.stamp(n),r="_leaflet_"+e+i,o=t[r];return o?(s.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,i):s.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",o,!1),t.removeEventListener(e,o,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",o,!1):t.removeEventListener(e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o),t[r]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,s.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=s.DomEvent.stopPropagation;return s.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=s.DomEvent.stopPropagation,n=s.Draggable.START.length-1;n>=0;n--)s.DomEvent.on(t,s.Draggable.START[n],e);return s.DomEvent.on(t,"click",s.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return s.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,n){var i=e.body,r=e.documentElement,o=s.DomUtil.documentIsLtr()?t.pageX?t.pageX-i.scrollLeft-r.scrollLeft:t.clientX:s.Browser.gecko?t.pageX-i.scrollLeft-r.scrollLeft:t.pageX?t.pageX-i.scrollLeft+r.scrollLeft:t.clientX,a=t.pageY?t.pageY-i.scrollTop-r.scrollTop:t.clientY,l=new s.Point(o,a);if(!n)return l;var u=n.getBoundingClientRect(),h=u.left-n.clientLeft,c=u.top-n.clientTop;return l._subtract(new s.Point(h,c))},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){s.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t},_getEvent:function(){var e=t.event;if(!e)for(var n=arguments.callee.caller;n&&(!(e=n.arguments[0])||t.Event!==e.constructor);)n=n.caller;return e},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent.timeStamp,i=s.DomEvent._lastClick&&n-s.DomEvent._lastClick;if(!(i&&i>100&&i<1e3||t.target._simulatedClick&&!t._simulated))return s.DomEvent._lastClick=n,e(t);s.DomEvent.stop(t)}},s.DomEvent.on=s.DomEvent.addListener,s.DomEvent.off=s.DomEvent.removeListener,s.Draggable=s.Class.extend({includes:s.Mixin.Events,statics:{START:s.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=s.Draggable.START.length-1;t>=0;t--)s.DomEvent.on(this._dragStartTarget,s.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=s.Draggable.START.length-1;t>=0;t--)s.DomEvent.off(this._dragStartTarget,s.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(s.DomEvent.stopPropagation(t),!s.Draggable._disabled&&(s.DomUtil.disableImageDrag(),s.DomUtil.disableTextSelection(),!this._moving))){var n=t.touches?t.touches[0]:t;this._startPoint=new s.Point(n.clientX,n.clientY),this._startPos=this._newPos=s.DomUtil.getPosition(this._element),s.DomEvent.on(e,s.Draggable.MOVE[t.type],this._onMove,this).on(e,s.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)this._moved=!0;else{var n=t.touches&&1===t.touches.length?t.touches[0]:t,i=new s.Point(n.clientX,n.clientY).subtract(this._startPoint);(i.x||i.y)&&(s.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=s.DomUtil.getPosition(this._element).subtract(i),s.DomUtil.addClass(e.body,"leaflet-dragging"),s.DomUtil.addClass(t.target||t.srcElement,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),s.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(t){for(var n in s.DomUtil.removeClass(e.body,"leaflet-dragging"),s.DomUtil.removeClass(t.target||t.srcElement,"leaflet-drag-target"),s.Draggable.MOVE)s.DomEvent.off(e,s.Draggable.MOVE[n],this._onMove).off(e,s.Draggable.END[n],this._onUp);s.DomUtil.enableImageDrag(),s.DomUtil.enableTextSelection(),this._moved&&(s.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),s.Handler=s.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),s.Map.mergeOptions({dragging:!0,inertia:!s.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,inertiaThreshold:s.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),s.Map.Drag=s.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new s.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=+new Date-this._lastTime,r=!n.inertia||i>n.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),r)e.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),a=(this._lastTime+i-this._times[0])/1e3,l=n.easeLinearity,u=o.multiplyBy(l/a),h=u.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,h),d=u.multiplyBy(c/h),p=c/(n.inertiaDeceleration*l),f=d.multiplyBy(-p/2).round();f.x&&f.y?(f=e._limitOffset(f,e.options.maxBounds),s.Util.requestAnimFrame(function(){e.panBy(f,{duration:p,easeLinearity:l,noMoveStart:!0})})):e.fire("moveend")}}}),s.Map.addInitHook("addHandler","dragging",s.Map.Drag),s.Map.mergeOptions({doubleClickZoom:!0}),s.Map.DoubleClickZoom=s.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(n):e.setZoomAround(t.containerPoint,n)}}),s.Map.addInitHook("addHandler","doubleClickZoom",s.Map.DoubleClickZoom),s.Map.mergeOptions({scrollWheelZoom:!0}),s.Map.ScrollWheelZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),s.DomEvent.on(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault),this._delta=0},removeHooks:function(){s.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),s.DomEvent.off(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=s.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s.bind(this._performZoom,this),n),s.DomEvent.preventDefault(t),s.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,n=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(n+e)-n,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(n+e):t.setZoomAround(this._lastMousePos,n+e))}}),s.Map.addInitHook("addHandler","scrollWheelZoom",s.Map.ScrollWheelZoom),s.extend(s.DomEvent,{_touchstart:s.Browser.msPointer?"MSPointerDown":s.Browser.pointer?"pointerdown":"touchstart",_touchend:s.Browser.msPointer?"MSPointerUp":s.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,n,i){function r(t){var e;if(s.Browser.pointer?(f.push(t.pointerId),e=f.length):e=t.touches.length,!(e>1)){var n=Date.now(),i=n-(a||n);l=t.touches?t.touches[0]:t,u=i>0&&i<=h,a=n}}function o(t){if(s.Browser.pointer){var e=f.indexOf(t.pointerId);if(-1===e)return;f.splice(e,1)}if(u){if(s.Browser.pointer){var i,r={};for(var o in l)i=l[o],r[o]="function"==typeof i?i.bind(l):i;l=r}l.type="dblclick",n(l),a=null}}var a,l,u=!1,h=250,c="_leaflet_",d=this._touchstart,p=this._touchend,f=[];t[c+d+i]=r,t[c+p+i]=o;var m=s.Browser.pointer?e.documentElement:t;return t.addEventListener(d,r,!1),m.addEventListener(p,o,!1),s.Browser.pointer&&m.addEventListener(s.DomEvent.POINTER_CANCEL,o,!1),this},removeDoubleTapListener:function(t,n){var i="_leaflet_";return t.removeEventListener(this._touchstart,t[i+this._touchstart+n],!1),(s.Browser.pointer?e.documentElement:t).removeEventListener(this._touchend,t[i+this._touchend+n],!1),s.Browser.pointer&&e.documentElement.removeEventListener(s.DomEvent.POINTER_CANCEL,t[i+this._touchend+n],!1),this}}),s.extend(s.DomEvent,{POINTER_DOWN:s.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:s.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:s.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:s.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,n,i){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,n,i);case"touchend":return this.addPointerListenerEnd(t,e,n,i);case"touchmove":return this.addPointerListenerMove(t,e,n,i);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,n,i,r){var o="_leaflet_",a=this._pointers,l=function(t){s.DomEvent.preventDefault(t);for(var e=!1,n=0;n<a.length;n++)if(a[n].pointerId===t.pointerId){e=!0;break}e||a.push(t),t.touches=a.slice(),t.changedTouches=[t],i(t)};if(t[o+"touchstart"+r]=l,t.addEventListener(this.POINTER_DOWN,l,!1),!this._pointerDocumentListener){var u=function(t){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a.splice(e,1);break}};e.documentElement.addEventListener(this.POINTER_UP,u,!1),e.documentElement.addEventListener(this.POINTER_CANCEL,u,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,n,i){function r(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s[e]=t;break}t.touches=s.slice(),t.changedTouches=[t],n(t)}}var o="_leaflet_",s=this._pointers;return t[o+"touchmove"+i]=r,t.addEventListener(this.POINTER_MOVE,r,!1),this},addPointerListenerEnd:function(t,e,n,i){var r="_leaflet_",o=this._pointers,s=function(t){for(var e=0;e<o.length;e++)if(o[e].pointerId===t.pointerId){o.splice(e,1);break}t.touches=o.slice(),t.changedTouches=[t],n(t)};return t[r+"touchend"+i]=s,t.addEventListener(this.POINTER_UP,s,!1),t.addEventListener(this.POINTER_CANCEL,s,!1),this},removePointerListener:function(t,e,n){var i=t["_leaflet_"+e+n];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,i,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,i,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,i,!1),t.removeEventListener(this.POINTER_CANCEL,i,!1)}return this}}),s.Map.mergeOptions({touchZoom:s.Browser.touch&&!s.Browser.android23,bounceAtZoomLimits:!0}),s.Map.TouchZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var n=this._map;if(t.touches&&2===t.touches.length&&!n._animatingZoom&&!this._zooming){var i=n.mouseEventToLayerPoint(t.touches[0]),r=n.mouseEventToLayerPoint(t.touches[1]),o=n._getCenterLayerPoint();this._startCenter=i.add(r)._divideBy(2),this._startDist=i.distanceTo(r),this._moved=!1,this._zooming=!0,this._centerOffset=o.subtract(this._startCenter),n._panAnim&&n._panAnim.stop(),s.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),s.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),i=e.mouseEventToLayerPoint(t.touches[1]);this._scale=n.distanceTo(i)/this._startDist,this._delta=n._add(i)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(!e.options.bounceAtZoomLimits&&(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1)||(this._moved||(s.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),s.DomEvent.preventDefault(t)))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),n=t.layerPointToLatLng(e),i=t.getScaleZoom(this._scale);t._animateZoom(n,i,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(this._moved&&this._zooming){var t=this._map;this._zooming=!1,s.DomUtil.removeClass(t._mapPane,"leaflet-touching"),s.Util.cancelAnimFrame(this._animRequest),s.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd);var n=this._getScaleOrigin(),i=t.layerPointToLatLng(n),r=t.getZoom(),o=t.getScaleZoom(this._scale)-r,a=o>0?Math.ceil(o):Math.floor(o),l=t._limitZoom(r+a),u=t.getZoomScale(l)/this._scale;t._animateZoom(i,l,n,u)}else this._zooming=!1},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),s.Map.addInitHook("addHandler","touchZoom",s.Map.TouchZoom),s.Map.mergeOptions({tap:!0,tapTolerance:15}),s.Map.Tap=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(s.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var n=t.touches[0],i=n.target;this._startPos=this._newPos=new s.Point(n.clientX,n.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&s.DomUtil.addClass(i,"leaflet-active"),this._holdTimeout=setTimeout(s.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",n))},this),1e3),s.DomEvent.on(e,"touchmove",this._onMove,this).on(e,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),s.DomEvent.off(e,"touchmove",this._onMove,this).off(e,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var n=t.changedTouches[0],i=n.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&s.DomUtil.removeClass(i,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",n)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new s.Point(e.clientX,e.clientY)},_simulateEvent:function(n,i){var r=e.createEvent("MouseEvents");r._simulated=!0,i.target._simulatedClick=!0,r.initMouseEvent(n,!0,!0,t,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(r)}}),s.Browser.touch&&!s.Browser.pointer&&s.Map.addInitHook("addHandler","tap",s.Map.Tap),s.Map.mergeOptions({boxZoom:!0}),s.Map.BoxZoom=s.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){s.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){s.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){if(this._moved=!1,!t.shiftKey||1!==t.which&&1!==t.button)return!1;s.DomUtil.disableTextSelection(),s.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),s.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"mouseup",this._onMouseUp,this).on(e,"keydown",this._onKeyDown,this)},_onMouseMove:function(t){this._moved||(this._box=s.DomUtil.create("div","leaflet-zoom-box",this._pane),s.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,n=this._box,i=this._map.mouseEventToLayerPoint(t),r=i.subtract(e),o=new s.Point(Math.min(i.x,e.x),Math.min(i.y,e.y));s.DomUtil.setPosition(n,o),this._moved=!0,n.style.width=Math.max(0,Math.abs(r.x)-4)+"px",n.style.height=Math.max(0,Math.abs(r.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),s.DomUtil.enableTextSelection(),s.DomUtil.enableImageDrag(),s.DomEvent.off(e,"mousemove",this._onMouseMove).off(e,"mouseup",this._onMouseUp).off(e,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,n=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(n)){var i=new s.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(n));e.fitBounds(i),e.fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),s.Map.addInitHook("addHandler","boxZoom",s.Map.BoxZoom),s.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),s.Map.Keyboard=s.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),s.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;s.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var n=e.body,i=e.documentElement,r=n.scrollTop||i.scrollTop,o=n.scrollLeft||i.scrollLeft;this._map._container.focus(),t.scrollTo(o,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){s.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){s.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,n=this._map;if(e in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;n.panBy(this._panKeys[e]),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else{if(!(e in this._zoomKeys))return;n.setZoom(n.getZoom()+this._zoomKeys[e])}s.DomEvent.stop(t)}}),s.Map.addInitHook("addHandler","keyboard",s.Map.Keyboard),s.Handler.MarkerDrag=s.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new s.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),s.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),s.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,n=s.DomUtil.getPosition(t._icon),i=t._map.layerPointToLatLng(n);e&&s.DomUtil.setPosition(e,n),t._latlng=i,t.fire("move",{latlng:i}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),s.Control=s.Class.extend({options:{position:"topright"},initialize:function(t){s.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return s.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},removeFrom:function(t){var e=this.getPosition();return t._controlCorners[e].removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),s.control=function(t){return new s.Control(t)},s.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,r){var o=n+t+" "+n+r;e[t+r]=s.DomUtil.create("div",o,i)}var e=this._controlCorners={},n="leaflet-",i=this._controlContainer=s.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),s.Control.Zoom=s.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=s.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",n,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",n,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,n,i,r,o){var a=s.DomUtil.create("a",n,i);a.innerHTML=t,a.href="#",a.title=e;var l=s.DomEvent.stopPropagation;return s.DomEvent.on(a,"click",l).on(a,"mousedown",l).on(a,"dblclick",l).on(a,"click",s.DomEvent.preventDefault).on(a,"click",r,o).on(a,"click",this._refocusOnMap,o),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";s.DomUtil.removeClass(this._zoomInButton,e),s.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&s.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&s.DomUtil.addClass(this._zoomInButton,e)}}),s.Map.mergeOptions({zoomControl:!0}),s.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new s.Control.Zoom,this.addControl(this.zoomControl))}),s.control.zoom=function(t){return new s.Control.Zoom(t)},s.Control.Attribution=s.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){s.setOptions(this,t),this._attributions={}},onAdd:function(t){for(var e in this._container=s.DomUtil.create("div","leaflet-control-attribution"),s.DomEvent.disableClickPropagation(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){if(t)return this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this},removeAttribution:function(t){if(t)return this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),s.Map.mergeOptions({attributionControl:!0}),s.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new s.Control.Attribution).addTo(this))}),s.control.attribution=function(t){return new s.Control.Attribution(t)},s.Control.Scale=s.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",n=s.DomUtil.create("div",e),i=this.options;return this._addScales(i,e,n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=s.DomUtil.create("div",e+"-line",n)),t.imperial&&(this._iScale=s.DomUtil.create("div",e+"-line",n))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180)*(t.getNorthEast().lng-t.getSouthWest().lng)/180,i=this._map.getSize(),r=this.options,o=0;i.x>0&&(o=n*(r.maxWidth/i.x)),this._updateScales(r,o)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=e<1e3?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,n,i,r=3.2808399*t,o=this._iScale;r>5280?(e=r/5280,n=this._getRoundNum(e),o.style.width=this._getScaleWidth(n/e)+"px",o.innerHTML=n+" mi"):(i=this._getRoundNum(r),o.style.width=this._getScaleWidth(i/r)+"px",o.innerHTML=i+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),s.control.scale=function(t){return new s.Control.Scale(t)},s.Control.Layers=s.Control.extend({options:{
collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,n){for(var i in s.setOptions(this,n),this._layers={},this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=s.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=s.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),s.Browser.touch?s.DomEvent.on(e,"click",s.DomEvent.stopPropagation):s.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var n=this._form=s.DomUtil.create("form",t+"-list");if(this.options.collapsed){s.Browser.android||s.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var i=this._layersLink=s.DomUtil.create("a",t+"-toggle",e);i.href="#",i.title="Layers",s.Browser.touch?s.DomEvent.on(i,"click",s.DomEvent.stop).on(i,"click",this._expand,this):s.DomEvent.on(i,"focus",this._expand,this),s.DomEvent.on(n,"click",function(){setTimeout(s.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=s.DomUtil.create("div",t+"-base",n),this._separator=s.DomUtil.create("div",t+"-separator",n),this._overlaysList=s.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_addLayer:function(t,e,n){var i=s.stamp(t);this._layers[i]={layer:t,name:e,overlay:n},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,n=!1,i=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),i=i||e.overlay,n=n||!e.overlay;this._separator.style.display=i&&n?"":"none"}},_onLayerChange:function(t){var e=this._layers[s.stamp(t.layer)];if(e){this._handlingClick||this._update();var n=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)}},_createRadioElement:function(t,n){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';n&&(i+=' checked="checked"'),i+="/>";var r=e.createElement("div");return r.innerHTML=i,r.firstChild},_addItem:function(t){var n,i=e.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((n=e.createElement("input")).type="checkbox",n.className="leaflet-control-layers-selector",n.defaultChecked=r):n=this._createRadioElement("leaflet-base-layers",r),n.layerId=s.stamp(t.layer),s.DomEvent.on(n,"click",this._onInputClick,this);var o=e.createElement("span");return o.innerHTML=" "+t.name,i.appendChild(n),i.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),i},_onInputClick:function(){var t,e,n,i=this._form.getElementsByTagName("input"),r=i.length;for(this._handlingClick=!0,t=0;t<r;t++)e=i[t],n=this._layers[e.layerId],e.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!e.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){s.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),s.control.layers=function(t,e,n){return new s.Control.Layers(t,e,n)},s.PosAnimation=s.Class.extend({includes:s.Mixin.Events,run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[s.DomUtil.TRANSITION]="all "+(n||.25)+"s cubic-bezier(0,0,"+(i||.5)+",1)",s.DomEvent.on(t,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),s.DomUtil.setPosition(t,e),s.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(s.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(s.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),s.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();t?(this._el._leaflet_pos=t,this.fire("step")):this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,n,i,r=this._el,o=t.getComputedStyle(r);if(s.Browser.any3d){if(!(i=o[s.DomUtil.TRANSFORM].match(this._transformRe)))return;e=parseFloat(i[1]),n=parseFloat(i[2])}else e=parseFloat(o.left),n=parseFloat(o.top);return new s.Point(e,n,!0)},_onTransitionEnd:function(){s.DomEvent.off(this._el,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[s.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),s.Map.include({setView:function(t,e,i){if((e=e===n?this._zoom:this._limitZoom(e),t=this._limitCenter(s.latLng(t),e,this.options.maxBounds),i=i||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!i.reset&&!0!==i)&&(i.animate!==n&&(i.zoom=s.extend({animate:i.animate},i.zoom),i.pan=s.extend({animate:i.animate},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan)))return clearTimeout(this._sizeTimer),this;return this._resetView(t,e),this},panBy:function(t,e){if(t=s.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new s.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){s.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){s.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)}}),s.PosAnimation=s.DomUtil.TRANSITION?s.PosAnimation:s.PosAnimation.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=s.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=s.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;t<e?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));s.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){s.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),s.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),s.DomUtil.TRANSITION&&s.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&s.DomUtil.TRANSITION&&s.Browser.any3d&&!s.Browser.android23&&!s.Browser.mobileOpera,this._zoomAnimated&&s.DomEvent.on(this._mapPane,s.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),s.Map.include(s.DomUtil.TRANSITION?{_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i),o=this._getCenterLayerPoint()._add(r);return!(!0!==n.animate&&!this.getSize().contains(r))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,o,i,null,!0),!0)},_animateZoom:function(t,e,n,i,r,o){this._animatingZoom=!0,s.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,s.Draggable&&(s.Draggable._disabled=!0),this.fire("zoomanim",{center:t,zoom:e,origin:n,scale:i,delta:r,backwards:o})},_onZoomTransitionEnd:function(){this._animatingZoom=!1,s.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),s.Draggable&&(s.Draggable._disabled=!1)}}:{}),s.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,n=s.DomUtil.TRANSFORM,i=t.delta?s.DomUtil.getTranslateString(t.delta):e.style[n],r=s.DomUtil.getScaleString(t.scale,t.origin);e.style[n]=t.backwards?r+" "+i:i+" "+r},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),s.Util.falseFn(e.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[s.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,n=this._getLoadedTilesPercentage(e),i=this._getLoadedTilesPercentage(t);if(e&&n>.5&&i<.5)return t.style.visibility="hidden",void this._stopLoadingImages(t);e.style.visibility="hidden",e.style[s.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),clearTimeout(this._clearBgBufferTimer)},_getLoadedTilesPercentage:function(t){var e,n,i=t.getElementsByTagName("img"),r=0;for(e=0,n=i.length;e<n;e++)i[e].complete&&r++;return r/n},_stopLoadingImages:function(t){var e,n,i,r=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,n=r.length;e<n;e++)(i=r[e]).complete||(i.onload=s.Util.falseFn,i.onerror=s.Util.falseFn,i.src=s.Util.emptyImageUrl,i.parentNode.removeChild(i))}}),s.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:Infinity,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=s.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=s.bind(this._handleGeolocationResponse,this),n=s.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new s.LatLng(e,n),r=180*t.coords.accuracy/40075017,o=r/Math.cos(s.LatLng.DEG_TO_RAD*e),a=s.latLngBounds([e-r,n-o],[e+r,n+o]),l=this._locateOptions;if(l.setView){var u=Math.min(this.getBoundsZoom(a),l.maxZoom);this.setView(i,u)}var h={latlng:i,bounds:a,timestamp:t.timestamp};for(var c in t.coords)"number"==typeof t.coords[c]&&(h[c]=t.coords[c]);this.fire("locationfound",h)}})}(window,document),function(t,e){L.drawVersion="0.2.3-dev",L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers.",editDisabled:"No layers to edit.",remove:"Delete layers.",removeDisabled:"No layers to delete."}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}},L.Draw={},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(t,e){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,e&&e.shapeOptions&&(e.shapeOptions=L.Util.extend({},this.options.shapeOptions,e.shapeOptions)),L.setOptions(this,e)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:drawstart",{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:drawstop",{layerType:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),t.getContainer().focus(),this._tooltip=new L.Tooltip(this._map),L.DomEvent.addListener(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.removeListener(this._container,"keyup",this._cancelDrawing))},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire("draw:created",{layer:t,layerType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&this.disable()}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),guidelineDistance:20,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,showLength:!0,zIndexOffset:2e3},initialize:function(t,e){this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,e&&e.drawError&&(e.drawError=L.Util.extend({},this.options.drawError,e.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mousemove",this._onMouseMove,this).off("zoomend",this._onZoomEnd,this)},_finishShape:function(){var t=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],!0);!this.options.allowIntersection&&t||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._updateGuide()},_onMouseMove:function(t){var e=t.layerPoint,n=t.latlng;this._currentLatLng=n,this._updateTooltip(n),this._updateGuide(e),this._mouseMarker.setLatLng(n),L.DomEvent.preventDefault(t.originalEvent)},_onClick:function(t){var e=t.target.getLatLng();this._markers.length>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(e)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(e)),this._poly.addLatLng(e),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._updateFinishHandler(),this._vertexAdded(e),this._clearGuides(),this._updateTooltip())},_updateFinishHandler:function(){var t=this._markers.length;t>1&&this._markers[t-1].on("click",this._finishShape,this),t>2&&this._markers[t-2].off("click",this._finishShape,this)},_createMarker:function(t){var e=new L.Marker(t,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(e),e},_updateGuide:function(t){var e=this._markers.length;e>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[e-1].getLatLng()),t))},_updateTooltip:function(t){var e=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(e)},_drawGuide:function(t,e){var n,i,r,o,s=Math.floor(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)));for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane)),n=this.options.guidelineDistance;n<s;n+=this.options.guidelineDistance)i=n/s,r={x:Math.floor(t.x*(1-i)+i*e.x),y:Math.floor(t.y*(1-i)+i*e.y)},(o=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(o,r)},_updateGuideColor:function(t){if(this._guidesContainer)for(var e=0,n=this._guidesContainer.childNodes.length;e<n;e++)this._guidesContainer.childNodes[e].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,e,n=this.options.showLength;return 0===this._markers.length?t={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(e=n?this._getMeasurementString():"",t=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}),t},_getMeasurementString:function(){var t,e=this._currentLatLng,n=this._markers[this._markers.length-1].getLatLng();return t=this._measurementRunningTotal+e.distanceTo(n),L.GeometryUtil.readableDistance(t,this.options.metric)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_vertexAdded:function(t){1===this._markers.length?this._measurementRunningTotal=0:this._measurementRunningTotal+=t.distanceTo(this._markers[this._markers.length-2].getLatLng())},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var t=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(t,e){L.Draw.Polyline.prototype.initialize.call(this,t,e),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var t=this._markers.length;1===t&&this._markers[0].on("click",this._finishShape,this),t>2&&(this._markers[t-1].on("dblclick",this._finishShape,this),t>3&&this._markers[t-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var t,e;return 0===this._markers.length?t=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?t=L.drawLocal.draw.handlers.polygon.tooltip.cont:(t=L.drawLocal.draw.handlers.polygon.tooltip.end,e=this._getMeasurementString()),{text:t,subtext:e}},_getMeasurementString:function(){var t=this._area;return t?L.GeometryUtil.readableArea(t,this.options.metric):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexAdded:function(){if(!this.options.allowIntersection&&this.options.showArea){var t=this._poly.getLatLngs();this._area=L.GeometryUtil.geodesicArea(t)}},_cleanUpShape:function(){var t=this._markers.length;t>0&&(this._markers[0].off("click",this._finishShape,this),t>2&&this._markers[t-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,e){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._isDrawing&&(this._tooltip.updateContent({text:this._endLabelText}),this._drawShape(e))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0}},initialize:function(t,e){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,t)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#f06eaa",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0},initialize:function(t,e){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,e)},_drawShape:function(t){this._shape?this._shape.setRadius(this._startLatLng.distanceTo(t)):(this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(t),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)},_onMouseMove:function(t){var e,n=t.latlng,i=this.options.showRadius,r=this.options.metric;this._tooltip.updatePosition(n),this._isDrawing&&(this._drawShape(n),e=this._shape.getRadius().toFixed(1),this._tooltip.updateContent({text:this._endLabelText,subtext:i?"Radius: "+L.GeometryUtil.readableDistance(e,r):""}))}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(t,e){this.type=L.Draw.Marker.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,e)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._marker&&(this._marker.off("click",this._onClick,this),this._map.off("click",this._onClick,this).removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(t){var e=t.latlng;this._tooltip.updatePosition(e),this._mouseMarker.setLatLng(e),this._marker?(e=this._mouseMarker.getLatLng(),this._marker.setLatLng(e)):(this._marker=new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset}),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_fireCreatedEvent:function(){var t=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,t)}}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(t,e){this._poly=t,L.setOptions(this,e)},addHooks:function(){this._poly._map&&(this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){this._poly._map&&(this._poly._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,n,i,r,o,s=this._poly._latlngs;for(t=0,n=s.length;t<n;t++)(i=this._createMarker(s[t],t)).on("click",this._onMarkerClick,this),this._markers.push(i);for(t=0,e=n-1;t<n;e=t++)(0!==t||L.Polygon&&this._poly instanceof L.Polygon)&&(r=this._markers[e],o=this._markers[t],this._createMiddleMarker(r,o),this._updatePrevNext(r,o))},_createMarker:function(t,e){var n=new L.Marker(t,{draggable:!0,icon:this.options.icon});return n._origLatLng=t,n._index=e,n.on("drag",this._onMarkerDrag,this),n.on("dragend",this._fireEdit,this),this._markerGroup.addLayer(n),n},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._poly.spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit")},_onMarkerDrag:function(t){var e=t.target;L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._poly.redraw()},_onMarkerClick:function(t){var e=L.Polygon&&this._poly instanceof L.Polygon?4:3,n=t.target;this._poly._latlngs.length<e||(this._removeMarker(n),this._updatePrevNext(n._prev,n._next),n._middleLeft&&this._markerGroup.removeLayer(n._middleLeft),n._middleRight&&this._markerGroup.removeLayer(n._middleRight),n._prev&&n._next?this._createMiddleMarker(n._prev,n._next):n._prev?n._next||(n._prev._middleRight=null):n._next._middleLeft=null,this._fireEdit())},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(n){n._index>t&&(n._index+=e)})},_createMiddleMarker:function(t,e){var n,i,r,o=this._getMiddleLatLng(t,e),s=this._createMarker(o);s.setOpacity(.6),t._middleRight=e._middleLeft=s,i=function(){var i=e._index;s._index=i,s.off("click",n,this).on("click",this._onMarkerClick,this),o.lat=s.getLatLng().lat,o.lng=s.getLatLng().lng,this._poly.spliceLatLngs(i,0,o),this._markers.splice(i,0,s),s.setOpacity(1),this._updateIndexes(i,1),e._index++,this._updatePrevNext(t,s),this._updatePrevNext(s,e)},r=function(){s.off("dragstart",i,this),s.off("dragend",r,this),this._createMiddleMarker(t,s),this._createMiddleMarker(s,e)},n=function(){i.call(this),r.call(this),this._fireEdit()},s.on("click",n,this).on("dragstart",i,this).on("dragend",r,this),this._markerGroup.addLayer(s)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var n=this._poly._map,i=n.project(t.getLatLng()),r=n.project(e.getLatLng());return n.unproject(i._add(r)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"})},initialize:function(t,e){this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){this._shape._map&&(this._map=this._shape._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup))},removeHooks:function(){if(this._shape._map){this._unbindMarker(this._moveMarker);for(var t=0,e=this._resizeMarkers.length;t<e;t++)this._unbindMarker(this._resizeMarkers[t]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var n=new L.Marker(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(n),this._markerGroup.addLayer(n),n},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0)},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target,n=e.getLatLng();e===this._moveMarker?this._move(n):this._resize(n),this._shape.redraw()},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,n=t.length;e<n;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),n=t.target._cornerIndex
;this._oppositeCorner=e[(n+2)%4],this._toggleCornerMarkers(0,n)},_onMarkerDragEnd:function(t){var e,n=t.target;n===this._moveMarker&&(e=this._shape.getBounds().getCenter(),n.setLatLng(e)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){for(var e,n=this._shape.getLatLngs(),i=this._shape.getBounds().getCenter(),r=[],o=0,s=n.length;o<s;o++)e=[n[o].lat-i.lat,n[o].lng-i.lng],r.push([t.lat+e[0],t.lng+e[1]]);this._shape.setLatLngs(r),this._repositionCornerMarkers()},_resize:function(t){var e;this._shape.setBounds(L.latLngBounds(t,this._oppositeCorner)),e=this._shape.getBounds(),this._moveMarker.setLatLng(e.getCenter())},_getCorners:function(){var t=this._shape.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_toggleCornerMarkers:function(t){for(var e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,n=this._resizeMarkers.length;e<n;e++)this._resizeMarkers[e].setLatLng(t[e])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){var t=this._shape.getLatLng(),e=this._getResizeMarkerPoint(t);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))},_getResizeMarkerPoint:function(t){var e=this._shape._radius*Math.cos(Math.PI/4),n=this._map.project(t);return this._map.unproject([n.x+e,n.y-e])},_move:function(t){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e),this._shape.setLatLng(t)},_resize:function(t){var e=this._moveMarker.getLatLng().distanceTo(t);this._shape.setRadius(e)}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.LatLngUtil={cloneLatLngs:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(this.cloneLatLng(t[n]));return e},cloneLatLng:function(t){return L.latLng(t.lat,t.lng)}},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var e,n,i=t.length,r=0,o=L.LatLng.DEG_TO_RAD;if(i>2){for(var s=0;s<i;s++)e=t[s],r+=((n=t[(s+1)%i]).lng-e.lng)*o*(2+Math.sin(e.lat*o)+Math.sin(n.lat*o));r=6378137*r*6378137/2}return Math.abs(r)},readableArea:function(t,e){return e?t>=1e4?(1e-4*t).toFixed(2)+" ha":t.toFixed(2)+" m&sup2;":(t*=.836127)>=3097600?(t/3097600).toFixed(2)+" mi&sup2;":t>=4840?(t/4840).toFixed(2)+" acres":Math.ceil(t)+" yd&sup2;"},readableDistance:function(t,e){return e?t>1e3?(t/1e3).toFixed(2)+" km":Math.ceil(t)+" m":(t*=1.09361)>1760?(t/1760).toFixed(2)+" miles":Math.ceil(t)+" yd"}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(t,e,n,i){return this._checkCounterclockwise(t,n,i)!==this._checkCounterclockwise(e,n,i)&&this._checkCounterclockwise(t,e,n)!==this._checkCounterclockwise(t,e,i)},_checkCounterclockwise:function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}}),L.Polyline.include({intersects:function(){var t,e,n,i=this._originalPoints,r=i?i.length:0;if(this._tooFewPointsForIntersection())return!1;for(t=r-1;t>=3;t--)if(e=i[t-1],n=i[t],this._lineSegmentsIntersectsRange(e,n,t-2))return!0;return!1},newLatLngIntersects:function(t,e){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(t),e)},newPointIntersects:function(t,e){var n=this._originalPoints,i=n?n.length:0,r=n?n[i-1]:null,o=i-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(r,t,o,e?1:0)},_tooFewPointsForIntersection:function(t){var e=this._originalPoints,n=e?e.length:0;return n+=t||0,!this._originalPoints||n<=3},_lineSegmentsIntersectsRange:function(t,e,n,i){var r,o,s=this._originalPoints;i=i||0;for(var a=n;a>i;a--)if(r=s[a-1],o=s[a],L.LineUtil.segmentsIntersect(t,e,r,o))return!0;return!1}}),L.Polygon.include({intersects:function(){var t,e,n,i,r=this._originalPoints;return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(t=r.length,e=r[0],n=r[t-1],i=t-2,this._lineSegmentsIntersectsRange(n,e,i,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(t){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var e,n;L.Control.prototype.initialize.call(this,t),this._toolbars={},L.DrawToolbar&&this.options.draw&&(n=new L.DrawToolbar(this.options.draw),e=L.stamp(n),this._toolbars[e]=n,this._toolbars[e].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(n=new L.EditToolbar(this.options.edit),e=L.stamp(n),this._toolbars[e]=n,this._toolbars[e].on("enable",this._toolbarEnabled,this))},onAdd:function(t){var e,n=L.DomUtil.create("div","leaflet-draw"),i=!1,r="leaflet-draw-toolbar-top";for(var o in this._toolbars)this._toolbars.hasOwnProperty(o)&&(e=this._toolbars[o].addToolbar(t),i||(L.DomUtil.hasClass(e,r)||L.DomUtil.addClass(e.childNodes[0],r),i=!0),n.appendChild(e));return n},onRemove:function(){for(var t in this._toolbars)this._toolbars.hasOwnProperty(t)&&this._toolbars[t].removeToolbar()},setDrawingOptions:function(t){for(var e in this._toolbars)this._toolbars[e]instanceof L.DrawToolbar&&this._toolbars[e].setOptions(t)},_toolbarEnabled:function(t){var e=""+L.stamp(t.target);for(var n in this._toolbars)this._toolbars.hasOwnProperty(n)&&n!==e&&this._toolbars[n].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(t){L.setOptions(this,t),this._modes={},this._actionButtons=[],this._activeMode=null},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},removeToolbar:function(){for(var t in this._modes)this._modes.hasOwnProperty(t)&&(this._disposeButton(this._modes[t].button,this._modes[t].handler.enable),this._modes[t].handler.disable(),this._modes[t].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var e=0,n=this._actionButtons.length;e<n;e++)this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(t,e,n,i,r){var o=t.type;this._modes[o]={},this._modes[o].handler=t,this._modes[o].button=this._createButton({title:r,className:i+"-"+o,container:e,callback:this._modes[o].handler.enable,context:this._modes[o].handler}),this._modes[o].buttonIndex=n,this._modes[o].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(t){var e=L.DomUtil.create("a",t.className||"",t.container);return e.href="#",t.text&&(e.innerHTML=t.text),t.title&&(e.title=t.title),L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,"click",t.callback,t.context),e},_disposeButton:function(t,e){L.DomEvent.off(t,"click",L.DomEvent.stopPropagation).off(t,"mousedown",L.DomEvent.stopPropagation).off(t,"dblclick",L.DomEvent.stopPropagation).off(t,"click",L.DomEvent.preventDefault).off(t,"click",e)},_handlerActivated:function(t){this._activeMode&&this._activeMode.handler.enabled()&&this._activeMode.handler.disable(),this._activeMode=this._modes[t.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(t){for(var e,n,i=L.DomUtil.create("ul","leaflet-draw-actions"),r=t.length,o=0;o<r;o++)e=L.DomUtil.create("li","",i),n=this._createButton({title:t[o].title,text:t[o].text,container:e,callback:t[o].callback,context:t[o].context}),this._actionButtons.push({button:n,callback:t[o].callback});return i},_showActionsToolbar:function(){var t=this._activeMode.buttonIndex,e=this._lastButtonIndex,n=t*26+t*1-1;this._actionsContainer.style.top=n+"px",0===t&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),t===e&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")}}),L.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1},dispose:function(){this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",this):this},updatePosition:function(t){var e=this._map.latLngToLayerPoint(t),n=this._container;return this._container&&(n.style.visibility="inherit",L.DomUtil.setPosition(n,e)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this}}),L.DrawToolbar=L.Toolbar.extend({options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(t){for(var e in this.options)this.options.hasOwnProperty(e)&&t[e]&&(t[e]=L.extend({},this.options[e],t[e]));L.Toolbar.prototype.initialize.call(this,t)},addToolbar:function(t){var e=L.DomUtil.create("div","leaflet-draw-section"),n=0,i="leaflet-draw-draw";return this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this.options.polyline&&this._initModeHandler(new L.Draw.Polyline(t,this.options.polyline),this._toolbarContainer,n++,i,L.drawLocal.draw.toolbar.buttons.polyline),this.options.polygon&&this._initModeHandler(new L.Draw.Polygon(t,this.options.polygon),this._toolbarContainer,n++,i,L.drawLocal.draw.toolbar.buttons.polygon),this.options.rectangle&&this._initModeHandler(new L.Draw.Rectangle(t,this.options.rectangle),this._toolbarContainer,n++,i,L.drawLocal.draw.toolbar.buttons.rectangle),this.options.circle&&this._initModeHandler(new L.Draw.Circle(t,this.options.circle),this._toolbarContainer,n++,i,L.drawLocal.draw.toolbar.buttons.circle),this.options.marker&&this._initModeHandler(new L.Draw.Marker(t,this.options.marker),this._toolbarContainer,n++,i,L.drawLocal.draw.toolbar.buttons.marker),this._lastButtonIndex=--n,this._actionsContainer=this._createActions([{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]),e.appendChild(this._toolbarContainer),e.appendChild(this._actionsContainer),e},setOptions:function(t){for(var e in L.setOptions(this,t),this._modes)this._modes.hasOwnProperty(e)&&t.hasOwnProperty(e)&&this._modes[e].handler.setOptions(t[e])}}),L.EditToolbar=L.Toolbar.extend({options:{edit:{selectedPathOptions:{color:"#fe57a1",opacity:.6,dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1}},remove:{},featureGroup:null},initialize:function(t){t.edit&&("undefined"==typeof t.edit.selectedPathOptions&&(t.edit.selectedPathOptions=this.options.edit.selectedPathOptions),t.edit=L.extend({},this.options.edit,t.edit)),t.remove&&(t.remove=L.extend({},this.options.remove,t.remove)),L.Toolbar.prototype.initialize.call(this,t),this._selectedFeatureCount=0},addToolbar:function(t){var e=L.DomUtil.create("div","leaflet-draw-section"),n=0,i="leaflet-draw-edit",r=this.options.featureGroup;return this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=t,this.options.edit&&this._initModeHandler(new L.EditToolbar.Edit(t,{featureGroup:r,selectedPathOptions:this.options.edit.selectedPathOptions}),this._toolbarContainer,n++,i,L.drawLocal.edit.toolbar.buttons.edit),this.options.remove&&this._initModeHandler(new L.EditToolbar.Delete(t,{featureGroup:r}),this._toolbarContainer,n++,i,L.drawLocal.edit.toolbar.buttons.remove),this._lastButtonIndex=--n,this._actionsContainer=this._createActions([{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]),e.appendChild(this._toolbarContainer),e.appendChild(this._actionsContainer),this._checkDisabled(),r.on("layeradd layerremove",this._checkDisabled,this),e},removeToolbar:function(){L.Toolbar.prototype.removeToolbar.call(this),this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode.handler.disable()},_checkDisabled:function(){var t,e=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(t=this._modes[L.EditToolbar.Edit.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(t=this._modes[L.EditToolbar.Delete.TYPE].button,e?L.DomUtil.removeClass(t,"leaflet-disabled"):L.DomUtil.addClass(t,"leaflet-disabled"),t.setAttribute("title",e?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),this._selectedPathOptions=e.selectedPathOptions,this._featureGroup=e.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}))},disable:function(){this._enabled&&(this.fire("disabled",{handler:this.type}),this._map.fire("draw:editstop",{handler:this.type}),this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._featureGroup.eachLayer(function(t){this._revertLayer(t)},this)},save:function(){var t=new L.LayerGroup;this._featureGroup.eachLayer(function(e){e.edited&&(t.addLayer(e),e.edited=!1)}),this._map.fire("draw:edited",{layers:t})},_backupLayer:function(t){var e=L.Util.stamp(t);this._uneditedLayerProps[e]||(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(t.getLatLngs())}:t instanceof L.Circle?this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng()),radius:t.getRadius()}:this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(t.getLatLng())})},_revertLayer:function(t){var e=L.Util.stamp(t);t.edited=!1,this._uneditedLayerProps.hasOwnProperty(e)&&(t instanceof L.Polyline||t instanceof L.Polygon||t instanceof L.Rectangle?t.setLatLngs(this._uneditedLayerProps[e].latlngs):t instanceof L.Circle?(t.setLatLng(this._uneditedLayerProps[e].latlng),t.setRadius(this._uneditedLayerProps[e].radius)):t.setLatLng(this._uneditedLayerProps[e].latlng))},_toggleMarkerHighlight:function(t){if(t._icon){var e=t._icon;e.style.display="none",L.DomUtil.hasClass(e,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(e,"leaflet-edit-marker-selected"),this._offsetMarker(e,-4)):(L.DomUtil.addClass(e,"leaflet-edit-marker-selected"),this._offsetMarker(e,4)),e.style.display=""}},_offsetMarker:function(t,e){var n=parseInt(t.style.marginTop,10)-e,i=parseInt(t.style.marginLeft,10)-e;t.style.marginTop=n+"px",t.style.marginLeft=i+"px"},_enableLayerEdit:function(t){var e,n=t.layer||t.target||t,i=n instanceof L.Marker;i&&!n._icon||(this._backupLayer(n),this._selectedPathOptions&&(e=L.Util.extend({},this._selectedPathOptions),i?this._toggleMarkerHighlight(n):(n.options.previousOptions=n.options,n instanceof L.Circle||n instanceof L.Polygon||n instanceof L.Rectangle||(e.fill=!1),n.setStyle(e))),i?(n.dragging.enable(),n.on("dragend",this._onMarkerDragEnd)):n.editing.enable())},_disableLayerEdit:function(t){var e=t.layer||t.target||t;e.edited=!1,this._selectedPathOptions&&(e instanceof L.Marker?this._toggleMarkerHighlight(e):(e.setStyle(e.options.previousOptions),delete e.options.previousOptions)),e instanceof L.Marker?(e.dragging.disable(),e.off("dragend",this._onMarkerDragEnd,this)):e.editing.disable()},_onMarkerDragEnd:function(t){t.target.edited=!0},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(t,e){if(L.Handler.prototype.initialize.call(this,t),L.Util.setOptions(this,e),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this),this.fire("enabled",{handler:this.type}),this._map.fire("draw:editstart",{handler:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),this.fire("disabled",{handler:this.type}),this._map.fire("draw:editstop",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(t.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.layerGroup,this._tooltip=new L.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(t){this._deletableLayers.addLayer(t)},this)},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})},_enableLayerDelete:function(t){(t.layer||t.target||t).on("click",this._removeLayer,this)},_disableLayerDelete:function(t){var e=t.layer||t.target||t;e.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(e)},_removeLayer:function(t){var e=t.layer||t.target||t;this._deletableLayers.removeLayer(e),this._deletedLayers.addLayer(e)},_onMouseMove:function(t){this._tooltip.updatePosition(t.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document),function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(146),n(74),n(348)},function(t,e,n){var i=n(3),r=n(24),o=n(13),s=n(14),a=n(21),l="prototype",u=function(t,e,n){var h,c,d,p,f=t&u.F,m=t&u.G,g=t&u.S,v=t&u.P,y=t&u.B,_=m?i:g?i[e]||(i[e]={}):(i[e]||{})[l],b=m?r:r[e]||(r[e]={}),w=b[l]||(b[l]={});for(h in m&&(n=e),n)d=((c=!f&&_&&void 0!==_[h])?_:n)[h],p=y&&c?a(d,i):v&&"function"==typeof d?a(Function.call,d):d,_&&s(_,h,d,t&u.U),b[h]!=d&&o(b,h,p),v&&w[h]!=d&&(w[h]=d)};i.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var i=n(5);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var i=n(67)("wks"),r=n(44),o=n(3).Symbol,s="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=i},function(t,e,n){t.exports=!n(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(2),r=n(115),o=n(28),s=Object.defineProperty;e.f=n(7)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(27),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(25);t.exports=function(t){return Object(i(t))}},function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,e,n){var i=n(8),r=n(40);t.exports=n(7)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(3),r=n(13),o=n(12),s=n(44)("src"),a="toString",l=Function[a],u=(""+l).split(a);n(24).inspectSource=function(t){return l.call(t)},(t.exports=function(t,e,n,a){var l="function"==typeof n;l&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(l&&(o(n,s)||r(n,s,t[e]?""+t[e]:u.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,a,function(){return"function"==typeof this&&this[s]||l.call(this)})},function(t,e,n){var i=n(1),r=n(4),o=n(25),s=/"/g,a=function(t,e,n,i){var r=String(o(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+r+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(a),i(i.P+i.F*r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t){t.exports=jQuery},function(t,e,n){var i=n(51),r=n(40),o=n(19),s=n(28),a=n(12),l=n(115),u=Object.getOwnPropertyDescriptor;e.f=n(7)?u:function(t,e){if(t=o(t),e=s(e,!0),l)try{return u(t,e)}catch(n){}return a(t,e)?r(!i.f.call(t,e),t[e]):void 0}},function(t,e,n){var i=n(12),r=n(10),o=n(92)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var i=n(50),r=n(25);t.exports=function(t){return i(r(t))}},function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,e,n){var i=n(11);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";var i=n(4);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){var i=n(21),r=n(50),o=n(10),s=n(9),a=n(77);t.exports=function(t,e){var n=1==t,l=2==t,u=3==t,h=4==t,c=6==t,d=5==t||c,p=e||a;return function(e,a,f){for(var m,g,v=o(e),y=r(v),_=i(a,f,3),b=s(y.length),w=0,x=n?p(e,b):l?p(e,0):void 0;b>w;w++)if((d||w in y)&&(g=_(m=y[w],w,v),t))if(n)x[w]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return w;case 2:x.push(m)}else if(h)return!1;return c?-1:u||h?h:x}}},function(t){var e=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=e)},function(t){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(1),r=n(24),o=n(4);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}},function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},function(t,e,n){var i=n(5);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(136),r=n(1),o=n(67)("metadata"),s=o.store||(o.store=new(n(139))),a=function(t,e,n){var r=s.get(t);if(!r){if(!n)return;s.set(t,r=new i)}var o=r.get(e);if(!o){if(!n)return;r.set(e,o=new i)}return o},l=function(t,e,n){var i=a(e,n,!1);return void 0!==i&&i.has(t)},u=function(t,e,n){var i=a(e,n,!1);return void 0===i?void 0:i.get(t)},h=function(t,e,n,i){a(n,i,!0).set(t,e)},c=function(t,e){var n=a(t,e,!1),i=[];return n&&n.forEach(function(t,e){i.push(e)}),i},d=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},p=function(t){r(r.S,"Reflect",t)};t.exports={store:s,map:a,has:l,get:u,set:h,keys:c,key:d,exp:p}},function(t,e,n){"use strict";if(n(7)){var i=n(36),r=n(3),o=n(4),s=n(1),a=n(69),l=n(98),u=n(21),h=n(34),c=n(40),d=n(13),p=n(41),f=n(27),m=n(9),g=n(134),v=n(43),y=n(28),_=n(12),b=n(49),w=n(5),x=n(10),S=n(84),C=n(37),E=n(18),M=n(38).f,L=n(101),T=n(44),k=n(6),D=n(23),P=n(56),O=n(68),I=n(102),N=n(45),A=n(62),F=n(42),R=n(76),j=n(107),z=n(8),B=n(17),U=z.f,H=B.f,q=r.RangeError,W=r.TypeError,G=r.Uint8Array,V="ArrayBuffer",$="Shared"+V,Z="BYTES_PER_ELEMENT",J="prototype",X=Array[J],Y=l.ArrayBuffer,Q=l.DataView,K=D(0),tt=D(2),et=D(3),nt=D(4),it=D(5),rt=D(6),ot=P(!0),st=P(!1),at=I.values,lt=I.keys,ut=I.entries,ht=X.lastIndexOf,ct=X.reduce,dt=X.reduceRight,pt=X.join,ft=X.sort,mt=X.slice,gt=X.toString,vt=X.toLocaleString,yt=k("iterator"),_t=k("toStringTag"),bt=T("typed_constructor"),wt=T("def_constructor"),xt=a.CONSTR,St=a.TYPED,Ct=a.VIEW,Et="Wrong length!",Mt=D(1,function(t,e){return Pt(O(t,t[wt]),e)}),Lt=o(function(){return 1===new G(new Uint16Array([1]).buffer)[0]}),Tt=!!G&&!!G[J].set&&o(function(){new G(1).set({})}),kt=function(t,e){var n=f(t);if(0>n||n%e)throw q("Wrong offset!");return n},Dt=function(t){if(w(t)&&St in t)return t;throw W(t+" is not a typed array!")},Pt=function(t,e){if(!(w(t)&&bt in t))throw W("It is not a typed array constructor!");return new t(e)},Ot=function(t,e){return It(O(t,t[wt]),e)},It=function(t,e){for(var n=0,i=e.length,r=Pt(t,i);i>n;)r[n]=e[n++];return r},Nt=function(t,e,n){U(t,e,{get:function(){return this._d[n]}})},At=function(t){var e,n,i,r,o,s,a=x(t),l=arguments.length,h=l>1?arguments[1]:void 0,c=void 0!==h,d=L(a);if(void 0!=d&&!S(d)){for(s=d.call(a),i=[],e=0;!(o=s.next()).done;e++)i.push(o.value);a=i}for(c&&l>2&&(h=u(h,arguments[2],2)),e=0,n=m(a.length),r=Pt(this,n);n>e;e++)r[e]=c?h(a[e],e):a[e];return r},Ft=function(){for(var t=0,e=arguments.length,n=Pt(this,e);e>t;)n[t]=arguments[t++];return n},Rt=!!G&&o(function(){vt.call(new G(1))}),jt=function(){return vt.apply(Rt?mt.call(Dt(this)):Dt(this),arguments)},zt={copyWithin:function(t,e){return j.call(Dt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Dt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(){return R.apply(Dt(this),arguments)},filter:function(t){return Ot(this,tt(Dt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return it(Dt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return rt(Dt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){K(Dt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return st(Dt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Dt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(){return pt.apply(Dt(this),arguments)},lastIndexOf:function(){return ht.apply(Dt(this),arguments)},map:function(t){return Mt(Dt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(){return ct.apply(Dt(this),arguments)},reduceRight:function(){return dt.apply(Dt(this),arguments)},reverse:function(){for(var t,e=this,n=Dt(e).length,i=Math.floor(n/2),r=0;i>r;)t=e[r],e[r++]=e[--n],e[n]=t;return e},some:function(t){return et(Dt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ft.call(Dt(this),t)},subarray:function(t,e){var n=Dt(this),i=n.length,r=v(t,i);return new(O(n,n[wt]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,m((void 0===e?i:v(e,i))-r))}},Bt=function(t,e){return Ot(this,mt.call(Dt(this),t,e))},Ut=function(t){Dt(this);var e=kt(arguments[1],1),n=this.length,i=x(t),r=m(i.length),o=0;if(r+e>n)throw q(Et);for(;r>o;)this[e+o]=i[o++]},Ht={entries:function(){return ut.call(Dt(this))},keys:function(){return lt.call(Dt(this))},values:function(){return at.call(Dt(this))}},qt=function(t,e){return w(t)&&t[St]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Wt=function(t,e){return qt(t,e=y(e,!0))?c(2,t[e]):H(t,e)},Gt=function(t,e,n){return!(qt(t,e=y(e,!0))&&w(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?U(t,e,n):(t[e]=n.value,t)};xt||(B.f=Wt,z.f=Gt),s(s.S+s.F*!xt,"Object",{getOwnPropertyDescriptor:Wt,defineProperty:Gt}),o(function(){gt.call({})})&&(gt=vt=function(){return pt.call(this)});var Vt=p({},zt);p(Vt,Ht),d(Vt,yt,Ht.values),p(Vt,{slice:Bt,set:Ut,constructor:function(){},toString:gt,toLocaleString:jt}),Nt(Vt,"buffer","b"),Nt(Vt,"byteOffset","o"),Nt(Vt,"byteLength","l"),Nt(Vt,"length","e"),U(Vt,_t,{get:function(){return this[St]}}),t.exports=function(t,e,n,l){var u=t+((l=!!l)?"Clamped":"")+"Array",c="get"+t,p="set"+t,f=r[u],v=f||{},y=f&&E(f),_=!f||!a.ABV,x={},S=f&&f[J],L=function(t,n){var i=t._d;return i.v[c](n*e+i.o,Lt)},T=function(t,n,i){var r=t._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[p](n*e+r.o,i,Lt)},k=function(t,e){U(t,e,{get:function(){return L(this,e)},set:function(t){return T(this,e,t)},enumerable:!0})};_?(f=n(function(t,n,i,r){h(t,f,u,"_d");var o,s,a,l,c=0,p=0;if(w(n)){if(!(n instanceof Y||(l=b(n))==V||l==$))return St in n?It(f,n):At.call(f,n);o=n,p=kt(i,e);var v=n.byteLength;if(void 0===r){if(v%e)throw q(Et);if(0>(s=v-p))throw q(Et)}else if((s=m(r)*e)+p>v)throw q(Et);a=s/e}else a=g(n),o=new Y(s=a*e);for(d(t,"_d",{b:o,o:p,l:s,e:a,v:new Q(o)});a>c;)k(t,c++)}),S=f[J]=C(Vt),d(S,"constructor",f)):o(function(){f(1)})&&o(function(){new f(-1)})&&A(function(t){new f,new f(null),new f(1.5),new f(t)},!0)||(f=n(function(t,n,i,r){var o;return h(t,f,u),
w(n)?n instanceof Y||(o=b(n))==V||o==$?void 0!==r?new v(n,kt(i,e),r):void 0!==i?new v(n,kt(i,e)):new v(n):St in n?It(f,n):At.call(f,n):new v(g(n))}),K(y!==Function.prototype?M(v).concat(M(y)):M(v),function(t){t in f||d(f,t,v[t])}),f[J]=S,i||(S.constructor=f));var D=S[yt],P=!!D&&("values"==D.name||void 0==D.name),O=Ht.values;d(f,bt,!0),d(S,St,u),d(S,Ct,!0),d(S,wt,f),(l?new f(1)[_t]==u:_t in S)||U(S,_t,{get:function(){return u}}),x[u]=f,s(s.G+s.W+s.F*(f!=v),x),s(s.S,u,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*o(function(){v.of.call(f,1)}),u,{from:At,of:Ft}),Z in S||d(S,Z,e),s(s.P,u,zt),F(u),s(s.P+s.F*Tt,u,{set:Ut}),s(s.P+s.F*!P,u,Ht),i||S.toString==gt||(S.toString=gt),s(s.P+s.F*o(function(){new f(1).slice()}),u,{slice:Bt}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!o(function(){S.toLocaleString.call([1,2])})),u,{toLocaleString:jt}),N[u]=P?D:O,i||P||d(S,yt,O)}}else t.exports=function(){}},function(t,e){"use strict";function n(t){return h[t]}function i(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function r(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1}function o(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return d.test(t)?t.replace(c,n):t}function s(t){return!t&&0!==t||!(!m(t)||0!==t.length)}function a(t){var e=i({},t);return e._parent=t,e}function l(t,e){return t.path=e,t}function u(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=i,e.indexOf=r,e.escapeExpression=o,e.isEmpty=s,e.createFrame=a,e.blockParams=l,e.appendContextPath=u;var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},c=/[&<>"'`=]/g,d=/[&<>"'`=]/,p=Object.prototype.toString;e.toString=p;var f=function(t){return"function"==typeof t};f(/x/)&&(e.isFunction=f=function(t){return"function"==typeof t&&"[object Function]"===p.call(t)}),e.isFunction=f;var m=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===p.call(t)};e.isArray=m},function(t,e,n){var i=n(6)("unscopables"),r=Array.prototype;void 0==r[i]&&n(13)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){var i=n(44)("meta"),r=n(5),o=n(12),s=n(8).f,a=0,l=Object.isExtensible||function(){return!0},u=!n(4)(function(){return l(Object.preventExtensions({}))}),h=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},c=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!l(t))return"F";if(!e)return"E";h(t)}return t[i].i},d=function(t,e){if(!o(t,i)){if(!l(t))return!0;if(!e)return!1;h(t)}return t[i].w},p=function(t){return u&&f.NEED&&l(t)&&!o(t,i)&&h(t),t},f=t.exports={KEY:i,NEED:!1,fastKey:c,getWeak:d,onFreeze:p}},function(t){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(21),r=n(118),o=n(84),s=n(2),a=n(9),l=n(101),u={},h={};(e=t.exports=function(t,e,n,c,d){var p,f,m,g,v=d?function(){return t}:l(t),y=i(n,c,e?2:1),_=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(p=a(t.length);p>_;_++)if((g=e?y(s(f=t[_])[0],f[1]):y(t[_]))===u||g===h)return g}else for(m=v.call(t);!(f=m.next()).done;)if((g=r(m,y,f.value,e))===u||g===h)return g}).BREAK=u,e.RETURN=h},function(t){t.exports=!1},function(t,e,n){var i=n(2),r=n(124),o=n(80),s=n(92)("IE_PROTO"),a=function(){},l="prototype",u=function(){var t,e=n(79)("iframe"),i=o.length,r="<",s=">";for(e.style.display="none",n(82).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write(r+"script"+s+"document.F=Object"+r+"/script"+s),t.close(),u=t.F;i--;)delete u[l][o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[l]=i(t),n=new a,a[l]=null,n[s]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(126),r=n(80).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(126),r=n(80);t.exports=Object.keys||function(t){return i(t,r)}},function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(14);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){"use strict";var i=n(3),r=n(8),o=n(7),s=n(6)("species");t.exports=function(t){var e=i[t];o&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(27),r=Math.max,o=Math.min;t.exports=function(t,e){return 0>(t=i(t))?r(t+e,0):o(t,e)}},function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},function(t){t.exports={}},function(t,e,n){var i=n(8).f,r=n(12),o=n(6)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(1),r=n(25),o=n(4),s=n(96),a="["+s+"]",l="\u200b\x85",u=RegExp("^"+a+a+"*"),h=RegExp(a+a+"*$"),c=function(t,e,n){var r={},a=o(function(){return!!s[t]()||l[t]()!=l}),u=r[t]=a?e(d):s[t];n&&(r[n]=u),i(i.P+i.F*a,"String",r)},d=c.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(h,"")),t};t.exports=c},function(t,e,n){var i=n(5);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){var i=n(20),r=n(6)("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),r))?n:o?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var i=n(20);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e){"use strict";function n(t,e){var r=e&&e.loc,o=void 0,s=void 0;r&&(t+=" - "+(o=r.start.line)+":"+(s=r.start.column));for(var a=Error.prototype.constructor.call(this,t),l=0;l<i.length;l++)this[i[l]]=a[i[l]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=o,Object.defineProperty?Object.defineProperty(this,"column",{value:s,enumerable:!0}):this.column=s)}catch(u){}}e.__esModule=!0;var i=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,e["default"]=n,t.exports=e["default"]},function(t){function e(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=u[i.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](i.parts[s]);for(;s<i.parts.length;s++)r.parts.push(o(i.parts[s],e))}else{var a=[];for(s=0;s<i.parts.length;s++)a.push(o(i.parts[s],e));u[i.id]={id:i.id,refs:1,parts:a}}}}function n(t){for(var e=[],n={},i=0;i<t.length;i++){var r=t[i],o=r[0],s={css:r[1],media:r[2],sourceMap:r[3]};n[o]?n[o].parts.push(s):e.push(n[o]={id:o,parts:[s]})}return e}function i(){var t=document.createElement("style"),e=d();return t.type="text/css",e.appendChild(t),t}function r(){var t=document.createElement("link"),e=d();return t.rel="stylesheet",e.appendChild(t),t}function o(t,e){var n,o,u;if(e.singleton){var h=f++;n=p||(p=i()),o=s.bind(null,n,h,!1),u=s.bind(null,n,h,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=r(),o=l.bind(null,n),u=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=i(),o=a.bind(null,n),u=function(){n.parentNode.removeChild(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else u()}}function s(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=g(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function a(t,e){var n=e.css,i=e.media;if(e.sourceMap,i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function l(t,e){var n=e.css,i=(e.media,e.sourceMap);i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var u={},h=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},c=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=h(function(){return document.head||document.getElementsByTagName("head")[0]}),p=null,f=0;t.exports=function(t,i){"undefined"==typeof(i=i||{}).singleton&&(i.singleton=c());var r=n(t);return e(r,i),function(t){for(var o=[],s=0;s<r.length;s++){var a=r[s];(l=u[a.id]).refs--,o.push(l)}t&&e(n(t),i);for(s=0;s<o.length;s++){var l;if(0===(l=o[s]).refs){for(var h=0;h<l.parts.length;h++)l.parts[h]();delete u[l.id]}}}};var m,g=(m=[],function(t,e){return m[t]=e,m.filter(Boolean).join("\n")})},function(t,e){var n=function(t){return t.getAttribute("transform")||t.parentNode.getAttribute("transform")||""},i=function(t,e){var n;if(null!=e)for(n in e)e.hasOwnProperty(n)&&null!=e[n]&&t.setAttribute(n,e[n]);return t},r=function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);return i(n,e)};e.updateSvgElement=i,e.buildSvgElement=r,e.addDef=function(t,e){var n=t.getElementsByTagName("defs")[0];n||(n=r("defs"),t.insertBefore(n,t.firstChild)),n.appendChild(e)},e.getTransformX=function(t,e){var i,r;return r=e||0,t&&((i=/^[^\d\-]*(-?[\d\.]+)/.exec(n(t)))&&i[1]&&(r=parseFloat(i[1]))),r}},function(t,e,n){var i=n(19),r=n(9),o=n(43);t.exports=function(t){return function(e,n,s){var a,l=i(e),u=r(l.length),h=o(s,u);if(t&&n!=n){for(;u>h;)if((a=l[h++])!=a)return!0}else for(;u>h;h++)if((t||h in l)&&l[h]===n)return t||h||0;return!t&&-1}}},function(t,e,n){"use strict";var i=n(3),r=n(1),o=n(14),s=n(41),a=n(33),l=n(35),u=n(34),h=n(5),c=n(4),d=n(62),p=n(46),f=n(83);t.exports=function(t,e,n,m,g,v){var y=i[t],_=y,b=g?"set":"add",w=_&&_.prototype,x={},S=function(t){var e=w[t];o(w,t,"delete"==t?function(t){return!(v&&!h(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!h(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!h(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof _&&(v||w.forEach&&!c(function(){(new _).entries().next()}))){var C=new _,E=C[b](v?{}:-0,1)!=C,M=c(function(){C.has(1)}),L=d(function(t){new _(t)}),T=!v&&c(function(){for(var t=new _,e=5;e--;)t[b](e,e);return!t.has(-0)});L||((_=e(function(e,n){u(e,_,t);var i=f(new y,e,_);return void 0!=n&&l(n,g,i[b],i),i})).prototype=w,w.constructor=_),(M||T)&&(S("delete"),S("has"),g&&S("get")),(T||E)&&S(b),v&&w.clear&&delete w.clear}else _=m.getConstructor(e,t,g,b),s(_.prototype,n),a.NEED=!0;return p(_,t),x[t]=_,r(r.G+r.W+r.F*(_!=y),x),v||m.setStrong(_,t,g),_}},function(t,e,n){"use strict";var i=n(13),r=n(14),o=n(4),s=n(25),a=n(6);t.exports=function(t,e,n){var l=a(t),u=n(s,l,""[t]),h=u[0],c=u[1];o(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,h),i(RegExp.prototype,l,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)}))}},function(t,e,n){"use strict";var i=n(2);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var i=n(20);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(5),r=n(20),o=n(6)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,n){var i=n(6)("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},t(o)}catch(a){}return n}},function(t,e,n){"use strict";t.exports=n(36)||!n(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(3)[t]})},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var i=n(1),r=n(11),o=n(21),s=n(35);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,a,l=arguments[1];return r(this),(e=void 0!==l)&&r(l),void 0==t?new this:(n=[],e?(i=0,a=o(l,arguments[2],2),s(t,!1,function(t){n.push(a(t,i++))})):s(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";var i=n(1);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){var i=n(3),r="__core-js_shared__",o=i[r]||(i[r]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var i=n(2),r=n(11),o=n(6)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||void 0==(n=i(s)[o])?e:r(n)}},function(t,e,n){for(var i,r=n(3),o=n(13),s=n(44),a=s("typed_array"),l=s("view"),u=!(!r.ArrayBuffer||!r.DataView),h=u,c=0,d=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d>c;)(i=r[p[c++]])?(o(i.prototype,a,!0),o(i.prototype,l,!0)):h=!1;t.exports={ABV:u,CONSTR:h,TYPED:a,VIEW:l}},function(t){var e=function(t){return void 0!==t};t.exports={remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},stringToNodes:function(t){var e=document.createDocumentFragment(),n=document.createElement("DIV");return e.appendChild(n),n.innerHTML=t,n.children},stringToNode:function(t){return this.stringToNodes(t)[0]},addClass:function(t,n){var i;e(t.classList)?t.classList.add(n):this.hasClass(t,n)||((i=this.getClasses(t)).push(n),this.setClasses(t,i))},removeClass:function(t,n){var i,r;e(t.classList)?t.classList.remove(n):-1!==(r=(i=this.getClasses(t)).indexOf(n))&&(i.splice(r,1),this.setClasses(t,i))},toggleClass:function(t,n,i){e(i)||(i=!this.hasClass(t,n)),i?this.removeClass(t,n):this.addClass(t,n)},setClasses:function(t,e){t.className=e.join(" ")},getClasses:function(t){var n=[],i=t.className;return e(t.classList)?n=Array.prototype.slice.call(t.classList,0):i&&i.length>0&&(n=i.split(" ")),n},hasClass:function(t,n){return e(t.classList)?t.classList.contains(n):-1!==this.getClasses(t).indexOf(n)},getStyle:function(t,e){return window.getComputedStyle(t,null).getPropertyValue(e)},setStyles:function(t,e){var n,i=t.style;for(n in e)i[n]=e[n]},scrollParent:function(t){for(var e,n;t instanceof HTMLElement;){if(e=this.getStyle(t,"overflow-y"),n=this.getStyle(t,"overflow-x"),"auto"===e||"scroll"===e||"auto"===n||"scroll"===n)return t;t=t.parentNode}return null}}},,,function(t,e,n){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=(i(n(70)),function(){function e(){r(this,e)}return o(e,[{key:"appliedTemporal",value:function(){return window.edsc.page.query.temporal.applied}},{key:"addMapLayer",value:function(e){var n=t("#map").data("map");return n&&n.addLayer(e),null!=n}},{key:"removeMapLayer",value:function(e){var n=t("#map").data("map");n&&n.removeLayer(e)}},{key:"isMapReady",value:function(){return null!=t("#map").data("map")}},{key:"onMapEvent",value:function(e,n,i){var r=t("#map").data("map");r&&r.map.on(e,n,i)}},{key:"offMapEvent",value:function(e,n,i){var r=t("#map").data("map");r&&r.map.off(e,n,i)}}]),e}());e["default"]=s}).call(e,n(16))},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(n(75)),a="_edsc_registry",l="_edsc_loadingCount",u="_edsc_callbacks",h=function(){function t(){r(this,t),this[a]={},this[l]=0,this[u]=[]}return o(t,[{key:"register",value:function(t,e){this[a][t]=new s["default"](t,e),console.log("Registered plugin: "+t+" ("+e+")")}},{key:"load",value:function(t,e,n){var i=this,r=function(){i[l]--,n&&n();for(var t=i[u],e=0;e<t.length;e++)t[e]()};this[l]++,this[a][t].load(e,r)}},{key:"unload",value:function(t){this[a][t].unload()}},{key:"loaded",value:function(t,e){this[a][t].pluginClass=e}},{key:"hasPending",value:function(){return 0!==this[l]}},{key:"onAllComplete",value:function(t){this[u].push(t)}}]),t}();e["default"]=h,window.edscplugin=new h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(n(73)),a=function(){function t(e,n){r(this,t),this.name=e,this.path=n,this.pluginClass=null,this.loading=!1,this._callbackQueue=[],this._completionQueue=[]}return o(t,[{key:"load",value:function(t,e){var n=this;if(t&&this._callbackQueue.push(t),e&&this._completionQueue.push(e),!this.loading)if(this.loading=!0,this.pluginClass)this._instantiate();else{var i=document.createElement("script");i.onload=function(){i.parentNode.removeChild(i),n._instantiate()},i.onerror=function(){n.loading=!1,n._complete()},i.setAttribute("src",this.path),document.getElementsByTagName("head")[0].appendChild(i)}}},{key:"unload",value:function(){this.pluginClass&&(this.pluginInstance=null,this.loading=!1)}},{key:"_instantiate",value:function(){if(this.loading)for(var t=0;t<this._callbackQueue.length;t++)this._callbackQueue[t](this.pluginClass,new s["default"]);this._callbackQueue=[],this._complete(),this.loading=!1}},{key:"_complete",value:function(){for(var t=0;t<this._completionQueue.length;t++)this._completionQueue[t]();this._completionQueue=[]}}]),t}();e["default"]=a},function(t,e,n){"use strict";var i=n(10),r=n(43),o=n(9);t.exports=function(t){for(var e=i(this),n=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,n),l=s>2?arguments[2]:void 0,u=void 0===l?n:r(l,n);u>a;)e[a++]=t;return e}},function(t,e,n){var i=n(148);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){"use strict";var i=n(8),r=n(40);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var i=n(5),r=n(3).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(6)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(r){}}return!0}},function(t,e,n){var i=n(3).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(5),r=n(91).set;t.exports=function(t,e,n){var o,s=e.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&i(o)&&r&&r(t,o),t}},function(t,e,n){var i=n(45),r=n(6)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){"use strict";var i=n(37),r=n(40),o=n(46),s={};n(13)(s,n(6)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){"use strict";var i=n(36),r=n(1),o=n(14),s=n(13),a=n(12),l=n(45),u=n(85),h=n(46),c=n(18),d=n(6)("iterator"),p=!([].keys&&"next"in[].keys()),f="@@iterator",m="keys",g="values",v=function(){return this};t.exports=function(t,e,n,y,_,b,w){u(n,e,y);var x,S,C,E=function(t){if(!p&&t in k)return k[t];switch(t){case m:case g:return function(){return new n(this,t)}}return function(){return new n(this,t)}},M=e+" Iterator",L=_==g,T=!1,k=t.prototype,D=k[d]||k[f]||_&&k[_],P=!p&&D||E(_),O=_?L?E("entries"):P:void 0,I="Array"==e&&k.entries||D;if(I&&((C=c(I.call(new t)))!==Object.prototype&&C.next&&(h(C,M,!0),i||a(C,d)||s(C,d,v))),L&&D&&D.name!==g&&(T=!0,P=function(){return D.call(this)}),i&&!w||!p&&!T&&k[d]||s(k,d,P),l[e]=P,l[M]=v,_)if(x={values:L?P:E(g),keys:b?P:E(m),entries:O},w)for(S in x)S in k||o(k,S,x[S]);else r(r.P+r.F*(p||T),e,x);return x}},function(t){var e=Math.expm1;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&1e-6>t?t+t*t/2:Math.exp(t)-1}:e},function(t){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:0>t?-1:1}},function(t,e,n){var i=n(3),r=n(97).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,l="process"==n(20)(s);t.exports=function(){var t,e,n,u=function(){var i,r;for(l&&(i=s.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(o){throw t?n():e=void 0,o}}e=void 0,i&&i.enter()};if(l)n=function(){s.nextTick(u)};else if(!o||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var h=a.resolve();n=function(){h.then(u)}}else n=function(){r.call(i,u)};else{var c=!0,d=document.createTextNode("");new o(u).observe(d,{characterData:!0}),n=function(){d.data=c=!c}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=r(e),this.reject=r(n)}var r=n(11);t.exports.f=function(t){return new i(t)}},function(t,e,n){var i=n(5),r=n(2),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n(21)(Function.call,n(17).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){var i=n(67)("keys"),r=n(44);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(27),r=n(25);t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),l=i(n),u=a.length;return 0>l||l>=u?t?"":void 0:55296>(o=a.charCodeAt(l))||o>56319||l+1===u||(s=a.charCodeAt(l+1))<56320||s>57343?t?a.charAt(l):o:t?a.slice(l,l+2):s-56320+(o-55296<<10)+65536}}},function(t,e,n){var i=n(61),r=n(25);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},function(t,e,n){"use strict";var i=n(27),r=n(25);t.exports=function(t){var e=String(r(this)),n="",o=i(t);if(0>o||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t){t.exports="\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(t,e,n){var i,r,o,s=n(21),a=n(116),l=n(82),u=n(79),h=n(3),c=h.process,d=h.setImmediate,p=h.clearImmediate,f=h.MessageChannel,m=h.Dispatch,g=0,v={},y="onreadystatechange",_=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},b=function(t){_.call(t.data)};d&&p||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++g]=function(){a("function"==typeof t?t:Function(t),e)},i(g),g},p=function(t){delete v[t]},"process"==n(20)(c)?i=function(t){c.nextTick(s(_,t,1))}:m&&m.now?i=function(t){m.now(s(_,t,1))}:f?(o=(r=new f).port2,r.port1.onmessage=b,i=s(o.postMessage,o,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(i=function(t){h.postMessage(t+"","*")},h.addEventListener("message",b,!1)):i=y in u("script")?function(t){l.appendChild(u("script"))[y]=function(){l.removeChild(this),_.call(t)}}:function(t){setTimeout(s(_,t,1),0)}),t.exports={set:d,clear:p}},function(t,e,n){"use strict";function i(t,e,n){var i,r,o,s=new Array(n),a=8*n-e-1,l=(1<<a)-1,u=l>>1,h=23===e?U(2,-24)-U(2,-77):0,c=0,d=0>t||0===t&&0>1/t?1:0;for((t=B(t))!=t||t===j?(r=t!=t?1:0,i=l):(i=H(q(t)/W),t*(o=U(2,-i))<1&&(i--,o*=2),(t+=i+u>=1?h/o:h*U(2,1-u))*o>=2&&(i++,o/=2),i+u>=l?(r=0,i=l):i+u>=1?(r=(t*o-1)*U(2,e),i+=u):(r=t*U(2,u-1)*U(2,e),i=0));e>=8;s[c++]=255&r,r/=256,e-=8);for(i=i<<e|r,a+=e;a>0;s[c++]=255&i,i/=256,a-=8);return s[--c]|=128*d,s}function r(t,e,n){var i,r=8*n-e-1,o=(1<<r)-1,s=o>>1,a=r-7,l=n-1,u=t[l--],h=127&u;for(u>>=7;a>0;h=256*h+t[l],l--,a-=8);for(i=h&(1<<-a)-1,h>>=-a,a+=e;a>0;i=256*i+t[l],l--,a-=8);if(0===h)h=1-s;else{if(h===o)return i?NaN:u?-j:j;i+=U(2,e),h-=s}return(u?-1:1)*i*U(2,h-e)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function s(t){return[255&t]}function a(t){return[255&t,t>>8&255]}function l(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function u(t){return i(t,52,8)}function h(t){return i(t,23,4)}function c(t,e,n){M(t[P],e,{get:function(){return this[n]}})}function d(t,e,n,i){var r=C(+n);if(r+e>t[J])throw R(I);var o=t[Z]._b,s=r+t[X],a=o.slice(s,s+e);return i?a:a.reverse()}function p(t,e,n,i,r,o){var s=C(+n);if(s+e>t[J])throw R(I);for(var a=t[Z]._b,l=s+t[X],u=i(+r),h=0;e>h;h++)a[l+h]=u[o?h:e-h-1]}var f=n(3),m=n(7),g=n(36),v=n(69),y=n(13),_=n(41),b=n(4),w=n(34),x=n(27),S=n(9),C=n(134),E=n(38).f,M=n(8).f,L=n(76),T=n(46),k="ArrayBuffer",D="DataView",P="prototype",O="Wrong length!",I="Wrong index!",N=f[k],A=f[D],F=f.Math,R=f.RangeError,j=f.Infinity,z=N,B=F.abs,U=F.pow,H=F.floor,q=F.log,W=F.LN2,G="buffer",V="byteLength",$="byteOffset",Z=m?"_b":G,J=m?"_l":V,X=m?"_o":$;if(v.ABV){if(!b(function(){N(1)})||!b(function(){new N(-1)})||b(function(){return new N,new N(1.5),new N(NaN),N.name!=k})){for(var Y,Q=(N=function(t){return w(this,N),new z(C(t))})[P]=z[P],K=E(z),tt=0;K.length>tt;)(Y=K[tt++])in N||y(N,Y,z[Y]);g||(Q.constructor=N)}var et=new A(new N(2)),nt=A[P].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),(et.getInt8(0)||!et.getInt8(1))&&_(A[P],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else N=function(t){w(this,N,k);var e=C(t);this._b=L.call(new Array(e),0),this[J]=e},A=function(t,e,n){w(this,A,D),w(t,N,D);var i=t[J],r=x(e);if(0>r||r>i)throw R("Wrong offset!");if(r+(n=void 0===n?i-r:S(n))>i)throw R(O);this[Z]=t,this[X]=r,this[J]=n},m&&(c(N,V,"_l"),c(A,G,"_b"),c(A,V,"_l"),c(A,$,"_o")),_(A[P],{getInt8:function(t){return d(this,1,t)[0]<<24>>24},getUint8:function(t){return d(this,1,t)[0]},getInt16:function(t){var e=d(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=d(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return o(d(this,4,t,arguments[1]))},getUint32:function(t){return o(d(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return r(d(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return r(d(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){p(this,1,t,s,e)},setUint8:function(t,e){p(this,1,t,s,e)},setInt16:function(t,e){p(this,2,t,a,e,arguments[2])},setUint16:function(t,e){p(this,2,t,a,e,arguments[2])},setInt32:function(t,e){p(this,4,t,l,e,arguments[2])},setUint32:function(t,e){p(this,4,t,l,e,arguments[2])},setFloat32:function(t,e){p(this,4,t,h,e,arguments[2])},setFloat64:function(t,e){p(this,8,t,u,e,arguments[2])}});T(N,k),T(A,D),y(A[P],v.VIEW,!0),e[k]=N,e[D]=A},function(t,e,n){var i=n(3).navigator;t.exports=i&&i.userAgent||""},function(t,e,n){var i=n(3),r=n(24),o=n(36),s=n(135),a=n(8).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,n){var i=n(49),r=n(6)("iterator"),o=n(45);t.exports=n(24).getIteratorMethod=function(t){return void 0!=t?t[r]||t["@@iterator"]||o[i(t)]:void 0}},function(t,e,n){"use strict";var i=n(32),r=n(119),o=n(45),s=n(19);t.exports=n(86)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){(function(e){var i,r,o,s,a,l=function(t,e){return function(){return t.apply(e,arguments)}};a=n(55),i=function(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]},s=window.requestAnimationFrame||i("RequestAnimationFrame")||function(t){return window.setTimeout(t)},r=window.cancelAnimationFrame||i("CancelAnimationFrame")||i("CancelRequestAnimationFrame")||function(t){return window.clearTimeout(t)},o=function(t){var e,n,i;for(e=t.target,n=i=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)n+=e.offsetLeft-e.scrollLeft,i+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{x:n=t.clientX-n,y:i=t.clientY-i}},t.exports=function(){function t(t,e){this.animate=null==e||e,this._mouseup=l(this._mouseup,this),this._mousemove=l(this._mousemove,this),this._mousedown=l(this._mousedown,this),this._dragging=!1,this._element=t,this.enable()}return t.prototype.dispose=function(){return this.disable(),this._listeners={}},t.prototype.enable=function(){var t;return(t=this._element).addEventListener("mousedown",this._mousedown),t.addEventListener("touchstart",this._mousedown)},t.prototype.disable=function(){var t;return(t=this._element).removeEventListener("mousedown",this._mousedown),t.removeEventListener("touchstart",this._mousedown)},t.prototype.on=function(t,e,n){var i,r,o,s,a;for(null==this._listeners&&(this._listeners={}),null==n&&(n=this),o=0,s=(a=t.split(" ")).length;s>o;o++)r=a[o],null==(i=this._listeners)[r]&&(i[r]=[]),this._listeners[r].push([e,n]);return this},t.prototype.off=function(t,e,n){var i,r,o,s,a,l;for(null==this._listeners&&(this._listeners={}),o=0,s=(l=t.split(" ")).length;s>o;o++)if(i=l[o],null!=(a=this._listeners[i])){for(r=0;r<a.length;)a[r][0]===e&&a[r][1]===n?a.splice(r,1):r++;0===a.length&&delete this._listeners[i]}return this},t.prototype.fire=function(t,n){var i,r,o,s,a,l,u,h;if(null==(l=null!=(u=this._listeners)?u[t]:void 0))return this;for(r=e.extend({},null!=n?n:{},{type:t,target:this}),s=0,a=l.length;a>s;s++)o=(h=l[s])[0],i=h[1],o.call(i,r);return this},t.prototype._mousedown=function(t){var e;return t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(t.stopPropagation(),this._dragging)?void 0:(t=(null!=(e=t.touches)?e[0]:void 0)||t,this._preStartCursor=o(t),document.addEventListener("mousemove",this._mousemove),document.addEventListener("touchmove",this._mousemove),document.addEventListener("mouseup",this._mouseup),document.addEventListener("touchend",this._mouseup))},t.prototype._mousemove=function(t){var e,n,i,a,l;return(null!=(i=t.touches)?i.length:void 0)>1||(t=(null!=(a=t.touches)?a[0]:void 0)||t,n={x:(e=o(t)).x-this._preStartCursor.x,y:e.y-this._preStartCursor.y},Math.abs(n.x)+Math.abs(n.y)<3)?void 0:(t.preventDefault(),this._dragging||(this._startCursor={x:e.x-n.x,y:e.y-n.y},this._startLoc=this._currentLoc=this._getLoc()),this._currentOffset=n={x:e.x-this._startCursor.x,y:e.y-this._startCursor.y},this._currentLoc={x:this._startLoc.x+n.x,y:this._startLoc.y+n.y},this._currentCursor={x:-this._startLoc.x+this._startCursor.x+n.x,y:-this._startLoc.y+this._startCursor.y+n.y},this._dragging||this._start(),this.animate?(r(this._frameId),this._frameId=s((l=this,function(){return l._move()}))):this._move())},t.prototype._mouseup=function(){return document.removeEventListener("mousemove",this._mousemove),document.removeEventListener("touchmove",this._mousemove),document.removeEventListener("mouseup",this._mouseup),document.removeEventListener("touchend",this._mouseup),this.animate&&r(this._frameId),this._dragging?this._end():void 0},t.prototype._start=function(){return this._dragging=!0,this._positions=[],this._times=[],this.fire("dragstart",this._state())},t.prototype._move=function(){var t;return this.fire("predragmove",this._state()),t=+new Date,this._positions.push(this._currentLoc.x),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift()),
this.fire("dragmove",this._state())},t.prototype._animateEnd=function(){var t;return t=(this._currentLoc.x-this._positions[0])/(+new Date-this._times[0]),this._animateFling(t,.01,+new Date)},t.prototype._end=function(){var t;return this.animate&&(null!=(t=this._positions)?t.length:void 0)>0?this._animateEnd():this._staticEnd()},t.prototype._animateFling=function(t,e,n){var i,r,o,a;return o=+new Date,r=e*(i=o-n),0>t?t+=r:t-=r,r<Math.abs(t)?(this._currentLoc.x+=t*i,this._currentOffset.x+=t*i,this._move(),s((a=this,function(){return a._animateFling(t,e,o)}))):this._staticEnd()},t.prototype._staticEnd=function(){return this._dragging=!1,this.fire("dragend",this._state())},t.prototype._getLoc=function(){return{x:a.getTransformX(this._element),y:0}},t.prototype._state=function(){return{start:this._startLoc,offset:this._currentOffset,cursor:this._currentCursor}},t}()}).call(e,n(16))},function(t,e){e.padLeft=function(t,e,n){for(t=""+t,e=""+e;t.length<n;)t=e+t;return t},e.dasherize=function(t){return t.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").replace(/\A-/g,"").replace(/-\Z/g,"").toLowerCase()},e.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}},,function(t,e,n){var i=n(20);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},function(t,e,n){"use strict";var i=n(10),r=n(43),o=n(9);t.exports=[].copyWithin||function(t,e){var n=i(this),s=o(n.length),a=r(t,s),l=r(e,s),u=arguments.length>2?arguments[2]:void 0,h=Math.min((void 0===u?s:r(u,s))-l,s-a),c=1;for(a>l&&l+h>a&&(c=-1,l+=h-1,a+=h-1);h-- >0;)l in n?n[a]=n[l]:delete n[a],a+=c,l+=c;return n}},function(t,e,n){var i=n(35);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e,n){var i=n(11),r=n(10),o=n(50),s=n(9);t.exports=function(t,e,n,a,l){i(e);var u=r(t),h=o(u),c=s(u.length),d=l?c-1:0,p=l?-1:1;if(2>n)for(;;){if(d in h){a=h[d],d+=p;break}if(d+=p,l?0>d:d>=c)throw TypeError("Reduce of empty array with no initial value")}for(;l?d>=0:c>d;d+=p)d in h&&(a=e(a,h[d],d,u));return a}},function(t,e,n){"use strict";var i=n(11),r=n(5),o=n(116),s=[].slice,a={},l=function(t,e,n){if(!(e in a)){for(var i=[],r=0;e>r;r++)i[r]="a["+r+"]";a[e]=Function("F,a","return new F("+i.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=s.call(arguments,1),a=function(){var i=n.concat(s.call(arguments));return this instanceof a?l(e,i.length,i):o(e,i,t)};return r(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,n){"use strict";var i=n(8).f,r=n(37),o=n(41),s=n(21),a=n(34),l=n(35),u=n(86),h=n(119),c=n(42),d=n(7),p=n(33).fastKey,f=n(48),m=d?"_s":"size",g=function(t,e){var n,i=p(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var h=t(function(t,i){a(t,h,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=i&&l(i,n,t[u],t)});return o(h.prototype,{clear:function(){for(var t=f(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[m]=0},"delete":function(t){var n=f(this,e),i=g(n,t);if(i){var r=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==i&&(n._f=r),n._l==i&&(n._l=o),n[m]--}return!!i},forEach:function(t){f(this,e);for(var n,i=s(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!g(f(this,e),t)}}),d&&i(h.prototype,"size",{get:function(){return f(this,e)[m]}}),h},def:function(t,e,n){var i,r,o=g(t,e);return o?o.v=n:(t._l=o={i:r=p(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[m]++,"F"!==r&&(t._i[r]=o)),t},getEntry:g,setStrong:function(t,e,n){u(t,e,function(t,n){this._t=f(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?h(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,h(1))},n?"entries":"values",!n,!0),c(e)}}},function(t,e,n){var i=n(49),r=n(108);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,n){"use strict";var i=n(41),r=n(33).getWeak,o=n(2),s=n(5),a=n(34),l=n(35),u=n(23),h=n(12),c=n(48),d=u(5),p=u(6),f=0,m=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},v=function(t,e){return d(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=v(this,t);return e?e[1]:void 0},has:function(t){return!!v(this,t)},set:function(t,e){var n=v(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var u=t(function(t,i){a(t,u,e,"_i"),t._t=e,t._i=f++,t._l=void 0,void 0!=i&&l(i,n,t[o],t)});return i(u.prototype,{"delete":function(t){if(!s(t))return!1;var n=r(t);return!0===n?m(c(this,e))["delete"](t):n&&h(n,this._i)&&delete n[this._i]},has:function(t){if(!s(t))return!1;var n=r(t);return!0===n?m(c(this,e)).has(t):n&&h(n,this._i)}}),u},def:function(t,e,n){var i=r(o(e),!0);return!0===i?m(t).set(e,n):i[t._i]=n,t},ufstore:m}},function(t,e,n){"use strict";function i(t,e,n,u,h,c,d,p){for(var f,m,g=h,v=0,y=!!d&&a(d,p,3);u>v;){if(v in n){if(f=y?y(n[v],v,e):n[v],m=!1,o(f)&&(m=void 0!==(m=f[l])?!!m:r(f)),m&&c>0)g=i(t,e,f,s(f.length),g,c-1)-1;else{if(g>=9007199254740991)throw TypeError();t[g]=f}g++}v++}return g}var r=n(60),o=n(5),s=n(9),a=n(21),l=n(6)("isConcatSpreadable");t.exports=i},function(t,e,n){t.exports=!n(7)&&!n(4)(function(){return 7!=Object.defineProperty(n(79)("div"),"a",{get:function(){return 7}}).a})},function(t){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(5),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e,n){var i=n(2);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(s){var o=t["return"];throw void 0!==o&&i(o.call(t)),s}}},function(t){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(88),r=Math.pow,o=r(2,-52),s=r(2,-23),a=r(2,127)*(2-s),l=r(2,-126),u=function(t){return t+1/o-1/o};t.exports=Math.fround||function(t){var e,n,r=Math.abs(t),h=i(t);return l>r?h*u(r/l/s)*l*s:(n=(e=(1+s/o)*r)-(e-r))>a||n!=n?h*(1/0):h*n}},function(t){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&1e-8>t?t-t*t/2:Math.log(1+t)}},function(t){t.exports=Math.scale||function(t,e,n,i,r){return 0===arguments.length||t!=t||e!=e||n!=n||i!=i||r!=r?NaN:t===1/0||t===-1/0?t:(t-e)*(r-i)/(n-e)+i}},function(t,e,n){"use strict";var i=n(39),r=n(64),o=n(51),s=n(10),a=n(50),l=Object.assign;t.exports=!l||n(4)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=i})?function(t){for(var e=s(t),n=arguments.length,l=1,u=r.f,h=o.f;n>l;)for(var c,d=a(arguments[l++]),p=u?i(d).concat(u(d)):i(d),f=p.length,m=0;f>m;)h.call(d,c=p[m++])&&(e[c]=d[c]);return e}:l},function(t,e,n){var i=n(8),r=n(2),o=n(39);t.exports=n(7)?Object.defineProperties:function(t,e){r(t);for(var n,s=o(e),a=s.length,l=0;a>l;)i.f(t,n=s[l++],e[n]);return t}},function(t,e,n){var i=n(19),r=n(38).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):r(i(t))}},function(t,e,n){var i=n(12),r=n(19),o=n(56)(!1),s=n(92)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),l=0,u=[];for(n in a)n!=s&&i(a,n)&&u.push(n);for(;e.length>l;)i(a,n=e[l++])&&(~o(u,n)||u.push(n));return u}},function(t,e,n){var i=n(39),r=n(19),o=n(51).f;t.exports=function(t){return function(e){for(var n,s=r(e),a=i(s),l=a.length,u=0,h=[];l>u;)o.call(s,n=a[u++])&&h.push(t?[n,s[n]]:s[n]);return h}}},function(t,e,n){var i=n(38),r=n(64),o=n(2),s=n(3).Reflect;t.exports=s&&s.ownKeys||function(t){var e=i.f(o(t)),n=r.f;return n?e.concat(n(t)):e}},function(t,e,n){var i=n(3).parseFloat,r=n(47).trim;t.exports=1/i(n(96)+"-0")!=-1/0?function(t){var e=r(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},function(t,e,n){var i=n(3).parseInt,r=n(47).trim,o=n(96),s=/^[-+]?0[xX]/;t.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(t,e){var n=r(String(t),3);return i(n,e>>>0||(s.test(n)?16:10))}:i},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},function(t,e,n){var i=n(2),r=n(5),o=n(90);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var i=n(9),r=n(95),o=n(25);t.exports=function(t,e,n,s){var a=String(o(t)),l=a.length,u=void 0===n?" ":String(n),h=i(e);if(l>=h||""==u)return a;var c=h-l,d=r.call(u,Math.ceil(c/u.length));return d.length>c&&(d=d.slice(0,c)),s?d+a:a+d}},function(t,e,n){var i=n(27),r=n(9);t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=r(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){e.f=n(6)},function(t,e,n){"use strict";var i=n(111),r=n(48),o="Map";t.exports=n(57)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(r(this,o),t);return e&&e.v},set:function(t,e){return i.def(r(this,o),0===t?0:t,e)}},i,!0)},function(t,e,n){n(7)&&"g"!=/./g.flags&&n(8).f(RegExp.prototype,"flags",{configurable:!0,get:n(59)})},function(t,e,n){"use strict";var i=n(111),r=n(48),o="Set";t.exports=n(57)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,o),t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";var i,r=n(23)(0),o=n(14),s=n(33),a=n(123),l=n(113),u=n(5),h=n(4),c=n(48),d="WeakMap",p=s.getWeak,f=Object.isExtensible,m=l.ufstore,g={},v=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(t){if(u(t)){var e=p(t);return!0===e?m(c(this,d)).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(c(this,d),t,e)}},_=t.exports=n(57)(d,v,y,l,!0,!0);h(function(){return 7!=(new _).set((Object.freeze||Object)(g),7).get(g)})&&(a((i=l.getConstructor(v,d)).prototype,y),s.NEED=!0,r(["delete","has","get","set"],function(t){var e=_.prototype,n=e[t];o(e,t,function(e,r){if(u(e)&&!f(e)){this._f||(this._f=new i);var o=this._f[t](e,r);return"set"==t?this:o}return n.call(this,e,r)})}))},function(t,e,n){var i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=n(103),r=n(55),t.exports=function(){function t(e,n,i){this.height=i,this.line=r.buildSvgElement("line"),this.triangle=r.buildSvgElement("path"),this._startX=n,this.update(n),e.appendChild(this.line),e.appendChild(this.triangle),t.__super__.constructor.call(this,this.triangle,!1),this.on("dragend",this._onEnd,this),this.on("predragmove",this._onUpdate,this)}return o(t,i),t.prototype.dispose=function(){var t,e,n,i,r;return t=(e=this).line,r=e.triangle,this.line=this.triangle=null,null!=(n=t.parentNode)&&n.removeChild(t),null!=(i=r.parentNode)&&i.removeChild(r),this.disable()},t.prototype.update=function(t){var e,n,i;return this.x=t,i=0,n=10,e=10,r.updateSvgElement(this.line,{x1:t,y1:i+e,x2:t,y2:this.height}),r.updateSvgElement(this.triangle,{d:"m"+(t-n)+" "+i+" l "+n+" "+e+" l "+n+" "+-e+" z"}),this.fire("update",{x:t}),this},t.prototype._onUpdate=function(t){return this.update(this._startX+t.offset.x)},t.prototype._onEnd=function(t){return this._onUpdate(t),this._startX+=t.offset.x,this.fire("commit",{x:this._startX})},t}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},a.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}e.__esModule=!0,e.HandlebarsEnvironment=r;var o=n(31),s=i(n(53)),a=n(365),l=n(363),u=i(n(373)),h="4.0.11";e.VERSION=h;var c=7;e.COMPILER_REVISION=c;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=d;var p="[object Object]";r.prototype={constructor:r,logger:u["default"],log:u["default"].log,registerHelper:function(t,e){if(o.toString.call(t)===p){if(e)throw new s["default"]("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(o.toString.call(t)===p)o.extend(this.partials,t);else{if(void 0===e)throw new s["default"]('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(o.toString.call(t)===p){if(e)throw new s["default"]("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var f=u["default"].log;e.log=f,e.createFrame=o.createFrame,e.logger=u["default"]},function(t,e,n){t.exports=n(362)["default"]},,,,function(t,e,n){(function(t){"use strict";function e(t,e,n){t[e]||Object[i](t,e,{writable:!0,configurable:!0,value:n})}if(n(346),n(347),n(147),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var i="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,function(){return this}())},function(t,e,n){n(154),t.exports=n(24).RegExp.escape},function(t,e,n){var i=n(5),r=n(60),o=n(6)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&(null===(e=e[o])&&(e=void 0))),void 0===e?Array:e}},function(t,e,n){"use strict";var i=n(4),r=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(t){return t>9?t:"0"+t};t.exports=i(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!i(function(){o.call(new Date(NaN))})?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),i=0>e?"-":e>9999?"+":"";return i+("00000"+Math.abs(e)).slice(i?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}:o},function(t,e,n){"use strict";var i=n(2),r=n(28),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return r(i(this),t!=o)}},function(t,e,n){var i=n(39),r=n(64),o=n(51);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var s,a=n(t),l=o.f,u=0;a.length>u;)l.call(t,s=a[u++])&&e.push(s);return e}},function(t){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var i=n(1),r=n(152)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(t){return r(t)}})},function(t,e,n){var i=n(1);i(i.P,"Array",{copyWithin:n(107)}),n(32)("copyWithin")},function(t,e,n){"use strict";var i=n(1),r=n(23)(4);i(i.P+i.F*!n(22)([].every,!0),"Array",{every:function(t){return r(this,t,arguments[1])}})},function(t,e,n){var i=n(1);i(i.P,"Array",{fill:n(76)}),n(32)("fill")},function(t,e,n){"use strict";var i=n(1),r=n(23)(2);i(i.P+i.F*!n(22)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(1),r=n(23)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(32)(o)},function(t,e,n){"use strict";var i=n(1),r=n(23)(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(32)(o)},function(t,e,n){"use strict";var i=n(1),r=n(23)(0),o=n(22)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(21),r=n(1),o=n(10),s=n(118),a=n(84),l=n(9),u=n(78),h=n(101);r(r.S+r.F*!n(62)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,c,d=o(t),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,v=0,y=h(d);if(g&&(m=i(m,f>2?arguments[2]:void 0,2)),void 0==y||p==Array&&a(y))for(n=new p(e=l(d.length));e>v;v++)u(n,v,g?m(d[v],v):d[v]);else for(c=y.call(d),n=new p;!(r=c.next()).done;v++)u(n,v,g?s(c,m,[r.value,v],!0):r.value);return n.length=v,n}})},function(t,e,n){"use strict";var i=n(1),r=n(56)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!n(22)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,n){var i=n(1);i(i.S,"Array",{isArray:n(60)})},function(t,e,n){"use strict";var i=n(1),r=n(19),o=[].join;i(i.P+i.F*(n(50)!=Object||!n(22)(o)),"Array",{join:function(t){return o.call(r(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var i=n(1),r=n(19),o=n(27),s=n(9),a=[].lastIndexOf,l=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!n(22)(a)),"Array",{lastIndexOf:function(t){if(l)return a.apply(this,arguments)||0;var e=r(this),n=s(e.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),0>i&&(i=n+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},function(t,e,n){"use strict";var i=n(1),r=n(23)(1);i(i.P+i.F*!n(22)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(1),r=n(78);i(i.S+i.F*n(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)r(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var i=n(1),r=n(109);i(i.P+i.F*!n(22)([].reduceRight,!0),"Array",{reduceRight:function(t){return r(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var i=n(1),r=n(109);i(i.P+i.F*!n(22)([].reduce,!0),"Array",{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var i=n(1),r=n(82),o=n(20),s=n(43),a=n(9),l=[].slice;i(i.P+i.F*n(4)(function(){r&&l.call(r)}),"Array",{slice:function(t,e){var n=a(this.length),i=o(this);if(e=void 0===e?n:e,"Array"==i)return l.call(this,t,e);for(var r=s(t,n),u=s(e,n),h=a(u-r),c=new Array(h),d=0;h>d;d++)c[d]="String"==i?this.charAt(r+d):this[r+d];return c}})},function(t,e,n){"use strict";var i=n(1),r=n(23)(3);i(i.P+i.F*!n(22)([].some,!0),"Array",{some:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(1),r=n(11),o=n(10),s=n(4),a=[].sort,l=[1,2,3];i(i.P+i.F*(s(function(){l.sort(void 0)})||!s(function(){l.sort(null)})||!n(22)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),r(t))}})},function(t,e,n){n(42)("Array")},function(t,e,n){var i=n(1);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){var i=n(1),r=n(149);i(i.P+i.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},function(t,e,n){"use strict";var i=n(1),r=n(10),o=n(28);i(i.P+i.F*n(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(){var t=r(this),e=o(t);return"number"!=typeof e||isFinite(e)?t.toISOString():null}})},function(t,e,n){var i=n(6)("toPrimitive"),r=Date.prototype;i in r||n(13)(r,i,n(150))},function(t,e,n){var i=Date.prototype,r="Invalid Date",o="toString",s=i[o],a=i.getTime;new Date(NaN)+""!=r&&n(14)(i,o,function(){var t=a.call(this);return t==t?s.call(this):r})},function(t,e,n){var i=n(1);i(i.P,"Function",{bind:n(110)})},function(t,e,n){"use strict";var i=n(5),r=n(18),o=n(6)("hasInstance"),s=Function.prototype;o in s||n(8).f(s,o,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=r(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var i=n(8).f,r=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in r||n(7)&&i(r,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){var i=n(1),r=n(121),o=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+o(t-1)*o(t+1))}})},function(t,e,n){function i(t){return isFinite(t=+t)&&0!=t?0>t?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}var r=n(1),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:i})},function(t,e,n){var i=n(1),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var i=n(1),r=n(88);i(i.S,"Math",{cbrt:function(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var i=n(1);i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var i=n(1),r=Math.exp;i(i.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},function(t,e,n){var i=n(1),r=n(87);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(t,e,n){var i=n(1);i(i.S,"Math",{fround:n(120)})},function(t,e,n){var i=n(1),r=Math.abs;i(i.S,"Math",{hypot:function(){for(var t,e,n=0,i=0,o=arguments.length,s=0;o>i;)(t=r(arguments[i++]))>s?(n=n*(e=s/t)*e+1,s=t):t>0?n+=(e=t/s)*e:n+=t;return s===1/0?1/0:s*Math.sqrt(n)}})},function(t,e,n){var i=n(1),r=Math.imul;i(i.S+i.F*n(4)(function(){return-5!=r(4294967295,5)||2!=r.length}),"Math",{imul:function(t,e){var n=65535,i=+t,r=+e,o=n&i,s=n&r;return 0|o*s+((n&i>>>16)*s+o*(n&r>>>16)<<16>>>0)}})},function(t,e,n){var i=n(1);i(i.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var i=n(1);i(i.S,"Math",{log1p:n(121)})},function(t,e,n){var i=n(1);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(1);i(i.S,"Math",{sign:n(88)})},function(t,e,n){var i=n(1),r=n(87),o=Math.exp;i(i.S+i.F*n(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var i=n(1),r=n(87),o=Math.exp;i(i.S,"Math",{tanh:function(t){var e=r(t=+t),n=r(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var i=n(1);i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){"use strict";var i=n(3),r=n(12),o=n(20),s=n(83),a=n(28),l=n(4),u=n(38).f,h=n(17).f,c=n(8).f,d=n(47).trim,p="Number",f=i[p],m=f,g=f.prototype,v=o(n(37)(g))==p,y="trim"in String.prototype,_=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var n,i,r,o=(e=y?e.trim():d(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var s,l=e.slice(2),u=0,h=l.length;h>u;u++)if(48>(s=l.charCodeAt(u))||s>r)return NaN;return parseInt(l,i)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof f&&(v?l(function(){g.valueOf.call(n)}):o(n)!=p)?s(new m(_(e)),n,f):_(e)};for(var b,w=n(7)?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)r(m,b=w[x])&&!r(f,b)&&c(f,b,h(m,b));f.prototype=g,g.constructor=f,n(14)(i,p,f)}},function(t,e,n){var i=n(1);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(1),r=n(3).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,n){var i=n(1);i(i.S,"Number",{isInteger:n(117)})},function(t,e,n){var i=n(1);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(1),r=n(117),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return r(t)&&o(t)<=9007199254740991}})},function(t,e,n){var i=n(1);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(1);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(1),r=n(129);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(t,e,n){var i=n(1),r=n(130);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,n){"use strict";var i=n(1),r=n(27),o=n(106),s=n(95),a=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",c="0",d=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*u[n],u[n]=i%1e7,i=l(i/1e7)},p=function(t){for(var e=6,n=0;--e>=0;)n+=u[e],u[e]=l(n/t),n=n%t*1e7},f=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==u[t]){var n=String(u[t]);e=""===e?n:e+s.call(c,7-n.length)+n}return e},m=function(t,e,n){return 0===e?n:e%2==1?m(t,e-1,n*t):m(t*t,e/2,n)},g=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};i(i.P+i.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(4)(function(){a.call({})})),"Number",{toFixed:function(t){var e,n,i,a,l=o(this,h),u=r(t),v="",y=c;if(0>u||u>20)throw RangeError(h);if(l!=l)return"NaN";if(-1e21>=l||l>=1e21)return String(l);if(0>l&&(v="-",l=-l),l>1e-21)if(n=0>(e=g(l*m(2,69,1))-69)?l*m(2,-e,1):l/m(2,e,1),n*=4503599627370496,(e=52-e)>0){for(d(0,n),i=u;i>=7;)d(1e7,0),i-=7;for(d(m(10,i,1),0),i=e-1;i>=23;)p(1<<23),i-=23;p(1<<i),d(1,1),p(2),y=f()}else d(0,n),d(1<<-e,0),y=f()+s.call(c,u);return u>0?y=v+(u>=(a=y.length)?"0."+s.call(c,u-a)+y:y.slice(0,a-u)+"."+y.slice(a-u)):y=v+y,y}})},function(t,e,n){"use strict";var i=n(1),r=n(4),o=n(106),s=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==s.call(1,void 0)})||!r(function(){s.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},function(t,e,n){var i=n(1);i(i.S+i.F,"Object",{assign:n(123)})},function(t,e,n){var i=n(1);i(i.S,"Object",{create:n(37)})},function(t,e,n){var i=n(1);i(i.S+i.F*!n(7),"Object",{defineProperties:n(124)})},function(t,e,n){var i=n(1);i(i.S+i.F*!n(7),"Object",{defineProperty:n(8).f})},function(t,e,n){var i=n(5),r=n(33).onFreeze;n(26)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(19),r=n(17).f;n(26)("getOwnPropertyDescriptor",function(){return function(t,e){return r(i(t),e)}})},function(t,e,n){n(26)("getOwnPropertyNames",function(){return n(125).f})},function(t,e,n){var i=n(10),r=n(18);n(26)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(5);n(26)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(5);n(26)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(5);n(26)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(1);i(i.S,"Object",{is:n(153)})},function(t,e,n){var i=n(10),r=n(39);n(26)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(5),r=n(33).onFreeze;n(26)("preventExtensions",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(5),r=n(33).onFreeze;n(26)("seal",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(1);i(i.S,"Object",{setPrototypeOf:n(91).set})},function(t,e,n){"use strict";var i=n(49),r={};r[n(6)("toStringTag")]="z",r+""!="[object z]"&&n(14)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(1),r=n(129);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(t,e,n){var i=n(1),r=n(130);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(t,e,n){"use strict";var i,r,o,s,a=n(36),l=n(3),u=n(21),h=n(49),c=n(1),d=n(5),p=n(11),f=n(34),m=n(35),g=n(68),v=n(97).set,y=n(89)(),_=n(90),b=n(131),w=n(132),x="Promise",S=l.TypeError,C=l.process,E=l[x],M="process"==h(C),L=function(){},T=r=_.f,k=!!function(){try{var t=E.resolve(1),e=(t.constructor={})[n(6)("species")]=function(t){t(L,L)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(L)instanceof e}catch(i){}}(),D=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},P=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var i=t._v,r=1==t._s,o=0,s=function(e){var n,o,s=r?e.ok:e.fail,a=e.resolve,l=e.reject,u=e.domain;try{s?(r||(2==t._h&&N(t),t._h=1),!0===s?n=i:(u&&u.enter(),n=s(i),u&&u.exit()),n===e.promise?l(S("Promise-chain cycle")):(o=D(n))?o.call(n,a,l):a(n)):l(i)}catch(h){l(h)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){v.call(l,function(){var e,n,i,r=t._v,o=I(t);if(o&&(e=b(function(){M?C.emit("unhandledRejection",r,t):(n=l.onunhandledrejection)?n({promise:t,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=M||I(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},I=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(t){v.call(l,function(){var e;M?C.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},A=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=D(t))?y(function(){var i={_w:n,_d:!1};try{e.call(t,u(F,i,1),u(A,i,1))}catch(r){A.call(i,r)}}):(n._v=t,n._s=1,P(n,!1))}catch(i){A.call({_w:n,_d:!1},i)}}};k||(E=function(t){f(this,E,x,"_h"),p(t),i.call(this);try{t(u(F,this,1),u(A,this,1))}catch(e){A.call(this,e)}},(i=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(41)(E.prototype,{then:function(t,e){var n=T(g(this,E));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=M?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=u(F,t,1),this.reject=u(A,t,1)},_.f=T=function(t){return t===E||t===s?new o(t):r(t)}),c(c.G+c.W+c.F*!k,{Promise:E}),n(46)(E,x),n(42)(x),s=n(24)[x],c(c.S+c.F*!k,x,{reject:function(t){var e=T(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(a||!k),x,{resolve:function(t){return w(a&&this===s?E:this,t)}}),c(c.S+c.F*!(k&&n(62)(function(t){E.all(t)["catch"](L)})),x,{all:function(t){var e=this,n=T(e),i=n.resolve,r=n.reject,o=b(function(){var n=[],o=0,s=1;m(t,!1,function(t){var a=o++,l=!1;n.push(void 0),s++,e.resolve(t).then(function(t){l||(l=!0,n[a]=t,--s||i(n))},r)}),--s||i(n)});return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=T(e),i=n.reject,r=b(function(){m(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e,n){var i=n(1),r=n(11),o=n(2),s=(n(3).Reflect||{}).apply,a=Function.apply;i(i.S+i.F*!n(4)(function(){s(function(){})}),"Reflect",{apply:function(t,e,n){var i=r(t),l=o(n);return s?s(i,e,l):a.call(i,e,l)}})},function(t,e,n){var i=n(1),r=n(37),o=n(11),s=n(2),a=n(5),l=n(4),u=n(110),h=(n(3).Reflect||{}).construct,c=l(function(){function t(){}return!(h(function(){},[],t)instanceof t)}),d=!l(function(){h(function(){})});i(i.S+i.F*(c||d),"Reflect",{construct:function(t,e){o(t),s(e);var n=arguments.length<3?t:o(arguments[2]);if(d&&!c)return h(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(u.apply(t,i))}var l=n.prototype,p=r(a(l)?l:Object.prototype),f=Function.apply.call(t,p,e);return a(f)?f:p}})},function(t,e,n){var i=n(8),r=n(1),o=n(2),s=n(28);r(r.S+r.F*n(4)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=s(e,!0),o(n);try{return i.f(t,e,n),!0}catch(r){return!1}}})},function(t,e,n){var i=n(1),r=n(17).f,o=n(2);i(i.S,"Reflect",{deleteProperty:function(t,e){var n=r(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var i=n(1),r=n(2),o=function(t){this._t=r(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(85)(o,"Object",function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,
done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),i(i.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){var i=n(17),r=n(1),o=n(2);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(o(t),e)}})},function(t,e,n){var i=n(1),r=n(18),o=n(2);i(i.S,"Reflect",{getPrototypeOf:function(t){return r(o(t))}})},function(t,e,n){function i(t,e){var n,a,h=arguments.length<3?t:arguments[2];return u(t)===h?t[e]:(n=r.f(t,e))?s(n,"value")?n.value:void 0!==n.get?n.get.call(h):void 0:l(a=o(t))?i(a,e,h):void 0}var r=n(17),o=n(18),s=n(12),a=n(1),l=n(5),u=n(2);a(a.S,"Reflect",{get:i})},function(t,e,n){var i=n(1);i(i.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var i=n(1),r=n(2),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return r(t),!o||o(t)}})},function(t,e,n){var i=n(1);i(i.S,"Reflect",{ownKeys:n(128)})},function(t,e,n){var i=n(1),r=n(2),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){r(t);try{return o&&o(t),!0}catch(e){return!1}}})},function(t,e,n){var i=n(1),r=n(91);r&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(n){return!1}}})},function(t,e,n){function i(t,e,n){var l,d,p=arguments.length<4?t:arguments[3],f=o.f(h(t),e);if(!f){if(c(d=s(t)))return i(d,e,n,p);f=u(0)}return a(f,"value")?!(!1===f.writable||!c(p))&&((l=o.f(p,e)||u(0)).value=n,r.f(p,e,l),!0):void 0!==f.set&&(f.set.call(p,n),!0)}var r=n(8),o=n(17),s=n(18),a=n(12),l=n(1),u=n(40),h=n(2),c=n(5);l(l.S,"Reflect",{set:i})},function(t,e,n){var i=n(3),r=n(83),o=n(8).f,s=n(38).f,a=n(61),l=n(59),u=i.RegExp,h=u,c=u.prototype,d=/a/g,p=/a/g,f=new u(d)!==d;if(n(7)&&(!f||n(4)(function(){return p[n(6)("match")]=!1,u(d)!=d||u(p)==p||"/a/i"!=u(d,"i")}))){u=function(t,e){var n=this instanceof u,i=a(t),o=void 0===e;return!n&&i&&t.constructor===u&&o?t:r(f?new h(i&&!o?t.source:t,e):h((i=t instanceof u)?t.source:t,i&&o?l.call(t):e),n?this:c,u)};for(var m=function(t){t in u||o(u,t,{configurable:!0,get:function(){return h[t]},set:function(e){h[t]=e}})},g=s(h),v=0;g.length>v;)m(g[v++]);c.constructor=u,u.prototype=c,n(14)(i,"RegExp",u)}n(42)("RegExp")},function(t,e,n){n(58)("match",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){n(58)("replace",2,function(t,e,n){return[function(i,r){"use strict";var o=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]})},function(t,e,n){n(58)("search",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){n(58)("split",2,function(t,e,i){"use strict";var r=n(61),o=i,s=[].push,a="split",l="length",u="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[l]||2!="ab"[a](/(?:ab)*/)[l]||4!="."[a](/(.?)(.?)/)[l]||"."[a](/()()/)[l]>1||""[a](/.?/)[l]){var h=void 0===/()??/.exec("")[1];i=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return o.call(n,t,e);var i,a,c,d,p,f=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,v=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,m+"g");for(h||(i=new RegExp("^"+y.source+"$(?!\\s)",m));(a=y.exec(n))&&!((c=a.index+a[0][l])>g&&(f.push(n.slice(g,a.index)),!h&&a[l]>1&&a[0].replace(i,function(){for(p=1;p<arguments[l]-2;p++)void 0===arguments[p]&&(a[p]=void 0)}),a[l]>1&&a.index<n[l]&&s.apply(f,a.slice(1)),d=a[0][l],g=c,f[l]>=v));)y[u]===a.index&&y[u]++;return g===n[l]?(d||!y.test(""))&&f.push(""):f.push(n.slice(g)),f[l]>v?f.slice(0,v):f}}else"0"[a](void 0,0)[l]&&(i=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,r){var o=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},i]})},function(t,e,n){"use strict";n(137);var i=n(2),r=n(59),o=n(7),s="toString",a=/./[s],l=function(t){n(14)(RegExp.prototype,s,t,!0)};n(4)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?l(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)}):a.name!=s&&l(function(){return a.call(this)})},function(t,e,n){"use strict";n(15)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(15)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(15)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(15)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";var i=n(1),r=n(93)(!1);i(i.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(1),r=n(9),o=n(94),s="endsWith",a=""[s];i(i.P+i.F*n(81)(s),"String",{endsWith:function(t){var e=o(this,t,s),n=arguments.length>1?arguments[1]:void 0,i=r(e.length),l=void 0===n?i:Math.min(r(n),i),u=String(t);return a?a.call(e,u,l):e.slice(l-u.length,l)===u}})},function(t,e,n){"use strict";n(15)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(15)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(15)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){var i=n(1),r=n(43),o=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(){for(var t,e=[],n=arguments.length,i=0;n>i;){if(t=+arguments[i++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");e.push(65536>t?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return e.join("")}})},function(t,e,n){"use strict";var i=n(1),r=n(94),o="includes";i(i.P+i.F*n(81)(o),"String",{includes:function(t){return!!~r(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";n(15)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";var i=n(93)(!0);n(86)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";n(15)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){var i=n(1),r=n(19),o=n(9);i(i.S,"String",{raw:function(t){for(var e=r(t.raw),n=o(e.length),i=arguments.length,s=[],a=0;n>a;)s.push(String(e[a++])),i>a&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,n){var i=n(1);i(i.P,"String",{repeat:n(95)})},function(t,e,n){"use strict";n(15)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";var i=n(1),r=n(9),o=n(94),s="startsWith",a=""[s];i(i.P+i.F*n(81)(s),"String",{startsWith:function(t){var e=o(this,t,s),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return a?a.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";n(15)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(15)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(15)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){"use strict";n(47)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var i=n(3),r=n(12),o=n(7),s=n(1),a=n(14),l=n(33).KEY,u=n(4),h=n(67),c=n(46),d=n(44),p=n(6),f=n(135),m=n(100),g=n(151),v=n(60),y=n(2),_=n(5),b=n(19),w=n(28),x=n(40),S=n(37),C=n(125),E=n(17),M=n(8),L=n(39),T=E.f,k=M.f,D=C.f,P=i.Symbol,O=i.JSON,I=O&&O.stringify,N="prototype",A=p("_hidden"),F=p("toPrimitive"),R={}.propertyIsEnumerable,j=h("symbol-registry"),z=h("symbols"),B=h("op-symbols"),U=Object[N],H="function"==typeof P,q=i.QObject,W=!q||!q[N]||!q[N].findChild,G=o&&u(function(){return 7!=S(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=T(U,e);i&&delete U[e],k(t,e,n),i&&t!==U&&k(U,e,i)}:k,V=function(t){var e=z[t]=S(P[N]);return e._k=t,e},$=H&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},Z=function(t,e,n){return t===U&&Z(B,e,n),y(t),e=w(e,!0),y(n),r(z,e)?(n.enumerable?(r(t,A)&&t[A][e]&&(t[A][e]=!1),n=S(n,{enumerable:x(0,!1)})):(r(t,A)||k(t,A,x(1,{})),t[A][e]=!0),G(t,e,n)):k(t,e,n)},J=function(t,e){y(t);for(var n,i=g(e=b(e)),r=0,o=i.length;o>r;)Z(t,n=i[r++],e[n]);return t},X=function(t,e){return void 0===e?S(t):J(S(t),e)},Y=function(t){var e=R.call(this,t=w(t,!0));return!(this===U&&r(z,t)&&!r(B,t))&&(!(e||!r(this,t)||!r(z,t)||r(this,A)&&this[A][t])||e)},Q=function(t,e){if(t=b(t),e=w(e,!0),t!==U||!r(z,e)||r(B,e)){var n=T(t,e);return!n||!r(z,e)||r(t,A)&&t[A][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=D(b(t)),i=[],o=0;n.length>o;)r(z,e=n[o++])||e==A||e==l||i.push(e);return i},tt=function(t){for(var e,n=t===U,i=D(n?B:b(t)),o=[],s=0;i.length>s;)r(z,e=i[s++])&&(!n||r(U,e))&&o.push(z[e]);return o};H||(a((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===U&&e.call(B,n),r(this,A)&&r(this[A],t)&&(this[A][t]=!1),G(this,t,x(1,n))};return o&&W&&G(U,t,{configurable:!0,set:e}),V(t)})[N],"toString",function(){return this._k}),E.f=Q,M.f=Z,n(38).f=C.f=K,n(51).f=Y,n(64).f=tt,o&&!n(36)&&a(U,"propertyIsEnumerable",Y,!0),f.f=function(t){return V(p(t))}),s(s.G+s.W+s.F*!H,{Symbol:P});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var it=L(p.store),rt=0;it.length>rt;)m(it[rt++]);s(s.S+s.F*!H,"Symbol",{"for":function(t){return r(j,t+="")?j[t]:j[t]=P(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!H,"Object",{create:X,defineProperty:Z,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:K,getOwnPropertySymbols:tt}),O&&s(s.S+s.F*(!H||u(function(){var t=P();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return n=e=i[1],!_(e)&&void 0===t||$(t)?void 0:(v(e)||(e=function(t,e){return"function"==typeof n&&(e=n.call(this,t,e)),$(e)?void 0:e}),i[1]=e,I.apply(O,i))}}),P[N][F]||n(13)(P[N],F,P[N].valueOf),c(P,"Symbol"),c(Math,"Math",!0),c(i.JSON,"JSON",!0)},function(t,e,n){"use strict";var i=n(1),r=n(69),o=n(98),s=n(2),a=n(43),l=n(9),u=n(5),h=n(3).ArrayBuffer,c=n(68),d=o.ArrayBuffer,p=o.DataView,f=r.ABV&&h.isView,m=d.prototype.slice,g=r.VIEW,v="ArrayBuffer";i(i.G+i.W+i.F*(h!==d),{ArrayBuffer:d}),i(i.S+i.F*!r.CONSTR,v,{isView:function(t){return f&&f(t)||u(t)&&g in t}}),i(i.P+i.U+i.F*n(4)(function(){return!new d(2).slice(1,void 0).byteLength}),v,{slice:function(t,e){if(void 0!==m&&void 0===e)return m.call(s(this),t);for(var n=s(this).byteLength,i=a(t,n),r=a(void 0===e?n:e,n),o=new(c(this,d))(l(r-i)),u=new p(this),h=new p(o),f=0;r>i;)h.setUint8(f++,u.getUint8(i++));return o}}),n(42)(v)},function(t,e,n){var i=n(1);i(i.G+i.W+i.F*!n(69).ABV,{DataView:n(98).DataView})},function(t,e,n){n(30)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(30)("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(30)("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(30)("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(30)("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(30)("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(30)("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(30)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(30)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},function(t,e,n){"use strict";var i=n(113),r=n(48),o="WeakSet";n(57)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,o),t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(1),r=n(114),o=n(10),s=n(9),a=n(11),l=n(77);i(i.P,"Array",{flatMap:function(t){var e,n,i=o(this);return a(t),e=s(i.length),n=l(i,0),r(n,i,i,e,0,1,t,arguments[1]),n}}),n(32)("flatMap")},function(t,e,n){"use strict";var i=n(1),r=n(114),o=n(10),s=n(9),a=n(27),l=n(77);i(i.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),n=s(e.length),i=l(e,0);return r(i,e,e,n,0,void 0===t?1:a(t)),i}}),n(32)("flatten")},function(t,e,n){"use strict";var i=n(1),r=n(56)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(32)("includes")},function(t,e,n){var i=n(1),r=n(89)(),o=n(3).process,s="process"==n(20)(o);i(i.G,{asap:function(t){var e=s&&o.domain;r(e?e.bind(t):t)}})},function(t,e,n){var i=n(1),r=n(20);i(i.S,"Error",{isError:function(t){return"Error"===r(t)}})},function(t,e,n){var i=n(1);i(i.G,{global:n(3)})},function(t,e,n){n(65)("Map")},function(t,e,n){n(66)("Map")},function(t,e,n){var i=n(1);i(i.P+i.R,"Map",{toJSON:n(112)("Map")})},function(t,e,n){var i=n(1);i(i.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},function(t,e,n){var i=n(1);i(i.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,n){var i=n(1),r=180/Math.PI;i(i.S,"Math",{degrees:function(t){return t*r}})},function(t,e,n){var i=n(1),r=n(122),o=n(120);i(i.S,"Math",{fscale:function(t,e,n,i,s){return o(r(t,e,n,i,s))}})},function(t,e,n){var i=n(1);i(i.S,"Math",{iaddh:function(t,e,n,i){var r=t>>>0,o=n>>>0;return(e>>>0)+(i>>>0)+((r&o|(r|o)&~(r+o>>>0))>>>31)|0}})},function(t,e,n){var i=n(1);i(i.S,"Math",{imulh:function(t,e){var n=65535,i=+t,r=+e,o=i&n,s=r&n,a=i>>16,l=r>>16,u=(a*s>>>0)+(o*s>>>16);return a*l+(u>>16)+((o*l>>>0)+(u&n)>>16)}})},function(t,e,n){var i=n(1);i(i.S,"Math",{isubh:function(t,e,n,i){var r=t>>>0,o=n>>>0;return(e>>>0)-(i>>>0)-((~r&o|~(r^o)&r-o>>>0)>>>31)|0}})},function(t,e,n){var i=n(1);i(i.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,n){var i=n(1),r=Math.PI/180;i(i.S,"Math",{radians:function(t){return t*r}})},function(t,e,n){var i=n(1);i(i.S,"Math",{scale:n(122)})},function(t,e,n){var i=n(1);i(i.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,n){var i=n(1);i(i.S,"Math",{umulh:function(t,e){var n=65535,i=+t,r=+e,o=i&n,s=r&n,a=i>>>16,l=r>>>16,u=(a*s>>>0)+(o*s>>>16);return a*l+(u>>>16)+((o*l>>>0)+(u&n)>>>16)}})},function(t,e,n){"use strict";var i=n(1),r=n(10),o=n(11),s=n(8);n(7)&&i(i.P+n(63),"Object",{__defineGetter__:function(t,e){s.f(r(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var i=n(1),r=n(10),o=n(11),s=n(8);n(7)&&i(i.P+n(63),"Object",{__defineSetter__:function(t,e){s.f(r(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){var i=n(1),r=n(127)(!0);i(i.S,"Object",{entries:function(t){return r(t)}})},function(t,e,n){var i=n(1),r=n(128),o=n(19),s=n(17),a=n(78);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,i=o(t),l=s.f,u=r(i),h={},c=0;u.length>c;)void 0!==(n=l(i,e=u[c++]))&&a(h,e,n);return h}})},function(t,e,n){"use strict";var i=n(1),r=n(10),o=n(28),s=n(18),a=n(17).f;n(7)&&i(i.P+n(63),"Object",{__lookupGetter__:function(t){var e,n=r(this),i=o(t,!0);do{if(e=a(n,i))return e.get}while(n=s(n))}})},function(t,e,n){"use strict";var i=n(1),r=n(10),o=n(28),s=n(18),a=n(17).f;n(7)&&i(i.P+n(63),"Object",{__lookupSetter__:function(t){var e,n=r(this),i=o(t,!0);do{if(e=a(n,i))return e.set}while(n=s(n))}})},function(t,e,n){var i=n(1),r=n(127)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(1),r=n(3),o=n(24),s=n(89)(),a=n(6)("observable"),l=n(11),u=n(2),h=n(34),c=n(41),d=n(13),p=n(35),f=p.RETURN,m=function(t){return null==t?void 0:l(t)},g=function(t){var e=t._c;e&&(t._c=void 0,e())},v=function(t){return void 0===t._o},y=function(t){v(t)||(t._o=void 0,g(t))},_=function(t,e){u(t),this._c=void 0,this._o=t,t=new b(this);try{var n=e(t),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:l(n),this._c=n)}catch(r){return void t.error(r)}v(this)&&g(this)};_.prototype=c({},{unsubscribe:function(){y(this)}});var b=function(t){this._s=t};b.prototype=c({},{next:function(t){var e=this._s;if(!v(e)){var n=e._o;try{var i=m(n.next);if(i)return i.call(n,t)}catch(r){try{y(e)}finally{throw r}}}},error:function(t){var e=this._s;if(v(e))throw t;var n=e._o;e._o=void 0;try{var i=m(n.error);if(!i)throw t;t=i.call(n,t)}catch(r){try{g(e)}finally{throw r}}return g(e),t},complete:function(t){var e=this._s;if(!v(e)){var n=e._o;e._o=void 0;try{var i=m(n.complete);t=i?i.call(n,t):void 0}catch(r){try{g(e)}finally{throw r}}return g(e),t}}});var w=function(t){h(this,w,"Observable","_f")._f=l(t)};c(w.prototype,{subscribe:function(t){return new _(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||r.Promise)(function(n,i){l(t);var r=e.subscribe({next:function(e){try{return t(e)}catch(n){i(n),r.unsubscribe()}},error:i,complete:n})})}}),c(w,{from:function(t){var e="function"==typeof this?this:w,n=m(u(t)[a]);if(n){var i=u(n.call(t));return i.constructor===e?i:new e(function(t){return i.subscribe(t)})}return new e(function(e){var n=!1;return s(function(){if(!n){try{if(p(t,!1,function(t){return e.next(t),n?f:void 0})===f)return}catch(i){if(n)throw i;return void e.error(i)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=new Array(e);e>t;)n[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var e=!1;return s(function(){if(!e){for(var i=0;i<n.length;++i)if(t.next(n[i]),e)return;t.complete()}}),function(){e=!0}})}}),d(w.prototype,a,function(){return this}),i(i.G,{Observable:w}),n(42)("Observable")},function(t,e,n){"use strict";var i=n(1),r=n(24),o=n(3),s=n(68),a=n(132);i(i.P+i.R,"Promise",{"finally":function(t){var e=s(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then(function(){return n})}:t,n?function(n){return a(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(1),r=n(90),o=n(131);i(i.S,"Promise",{"try":function(t){var e=r.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var i=n(29),r=n(2),o=i.key,s=i.set;i.exp({defineMetadata:function(t,e,n,i){s(t,e,r(n),o(i))}})},function(t,e,n){var i=n(29),r=n(2),o=i.key,s=i.map,a=i.store;i.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),i=s(r(e),n,!1);if(void 0===i||!i["delete"](t))return!1;if(i.size)return!0;var l=a.get(e);return l["delete"](n),!!l.size||a["delete"](e)}})},function(t,e,n){var i=n(138),r=n(108),o=n(29),s=n(2),a=n(18),l=o.keys,u=o.key,h=function(t,e){var n=l(t,e),o=a(t);if(null===o)return n;var s=h(o,e);return s.length?n.length?r(new i(n.concat(s))):s:n};o.exp({getMetadataKeys:function(t){return h(s(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,e,n){var i=n(29),r=n(2),o=n(18),s=i.has,a=i.get,l=i.key,u=function(t,e,n){if(s(t,e,n))return a(t,e,n);var i=o(e);return null!==i?u(t,i,n):void 0};i.exp({getMetadata:function(t,e){return u(t,r(e),arguments.length<3?void 0:l(arguments[2]))}})},function(t,e,n){var i=n(29),r=n(2),o=i.keys,s=i.key;i.exp({getOwnMetadataKeys:function(t){return o(r(t),arguments.length<2?void 0:s(arguments[1]))}})},function(t,e,n){var i=n(29),r=n(2),o=i.get,s=i.key;i.exp({getOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var i=n(29),r=n(2),o=n(18),s=i.has,a=i.key,l=function(t,e,n){if(s(t,e,n))return!0;var i=o(e);return null!==i&&l(t,i,n)};i.exp({hasMetadata:function(t,e){return l(t,r(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var i=n(29),r=n(2),o=i.has,s=i.key;i.exp({hasOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var i=n(29),r=n(2),o=n(11),s=i.key,a=i.set;i.exp({metadata:function(t,e){return function(n,i){a(t,e,(void 0!==i?r:o)(n),s(i))}}})},function(t,e,n){n(65)("Set")},function(t,e,n){n(66)("Set")},function(t,e,n){var i=n(1);i(i.P+i.R,"Set",{toJSON:n(112)("Set")})},function(t,e,n){"use strict";var i=n(1),r=n(93)(!0);i(i.P,"String",{at:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(1),r=n(25),o=n(9),s=n(61),a=n(59),l=RegExp.prototype,u=function(t,e){this._r=t,this._s=e};n(85)(u,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),i(i.P,"String",{matchAll:function(t){if(r(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in l?String(t.flags):a.call(t),i=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=o(t.lastIndex),new u(i,e)}})},function(t,e,n){"use strict";var i=n(1),r=n(133),o=n(99);i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";var i=n(1),r=n(133),o=n(99);i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";n(47)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(47)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){n(100)("asyncIterator")},function(t,e,n){n(100)("observable")},function(t,e,n){var i=n(1);i(i.S,"System",{global:n(3)})},function(t,e,n){n(65)("WeakMap")},function(t,e,n){n(66)("WeakMap")},function(t,e,n){n(65)("WeakSet")},function(t,e,n){n(66)("WeakSet")},function(t,e,n){for(var i=n(102),r=n(39),o=n(14),s=n(3),a=n(13),l=n(45),u=n(6),h=u("iterator"),c=u("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(p),m=0;m<f.length;m++){var g,v=f[m],y=p[v],_=s[v],b=_&&_.prototype;if(b&&(b[h]||a(b,h,d),b[c]||a(b,c,v),l[v]=d,y))for(g in i)b[g]||o(b,g,i[g],!0)}},function(t,e,n){var i=n(1),r=n(97);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,n){var i=n(3),r=n(1),o=n(99),s=[].slice,a=/MSIE .\./.test(o),l=function(t){return function(e,n){var i=arguments.length>2,r=!!i&&s.call(arguments,2);return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,n)}};r(r.G+r.B+r.F*a,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(t,e,n){n(274),n(213),n(215),n(214),n(217),n(219),n(224),n(218),n(216),n(226),n(225),n(221),n(222),n(220),n(212),n(223),n(227),n(228),n(180),n(182),n(181),n(230),n(229),n(200),n(210),n(211),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(261),n(266),n(273),n(264),n(256),n(257),n(262),n(267),n(269),n(252),n(253),n(254),n(255),n(258),n(259),n(260),n(263),n(265),n(268),n(270),n(271),n(272),n(175),n(177),n(176),n(179),n(178),n(164),n(162),n(168),n(165),n(171),n(173),n(161),n(167),n(158),n(172),n(156),n(170),n(169),n(163),n(166),n(155),n(157),n(160),n(159),n(174),n(102),n(246),n(251),n(137),n(247),n(248),n(249),n(250),n(231),n(136),n(138),n(139),n(286),n(275),n(276),n(281),n(284),n(285),n(279),n(282),n(280),n(283),n(277),n(278),n(232),n(233),n(234),n(235),n(236),n(239),n(237),n(238),n(240),n(241),n(242),n(243),n(245),n(244),n(289),n(287),n(288),n(330),n(333),n(332),n(334),n(335),n(331),n(336),n(337),n(311),n(314),n(310),n(308),n(309),n(312),n(313),n(295),n(329),n(294),n(328),n(340),n(342),n(293),n(327),n(339),n(341),n(292),n(338),n(291),n(296),n(297),n(298),n(299),n(300),n(302),n(301),n(303),n(304),n(305),n(307),n(306),n(316),n(317),n(318),n(319),n(321),n(320),n(323),n(322),n(324),n(325),n(326),n(290),n(315),n(345),n(344),n(343),t.exports=n(24)},function(t,e){(function(e){!function(e){"use strict";function n(t,e,n,i){var o=e&&e.prototype instanceof r?e:r,s=Object.create(o.prototype),a=new p(i||[]);return s._invoke=u(t,n,a),s}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}function r(){}function o(){}function s(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function n(e,r,o,s){var a=i(t[e],t,r);if("throw"!==a.type){var l=a.arg,u=l.value;return u&&"object"==typeof u&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(t){n("next",t,o,s)},function(t){n("throw",t,o,s)}):Promise.resolve(u).then(function(t){l.value=t,o(l)},s)}s(a.arg)}function r(t,e){function i(){return new Promise(function(i,r){n(t,e,i,r)})}return o=o?o.then(i,i):i()}var o;"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n)),this._invoke=r}function u(t,e,n){var r=E;return function(o,s){if(r===L)throw new Error("Generator is already running");if(r===T){if("throw"===o)throw s;return m()}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var l=h(a,n);if(l){if(l===k)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===E)throw r=T,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=L;var u=i(t,e,n);if("normal"===u.type){if(r=n.done?T:M,u.arg===k)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=T,n.method="throw",n.arg=u.arg)}}}function h(t,e){var n=t.iterator[e.method];if(n===g){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=g,h(t,e),"throw"===e.method))return k;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var r=i(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,k;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,k):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,k)}function c(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(c,this),this.reset(!0)}function f(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(y.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=g,r.done=!0,r};return i.next=i}}return{next:m}}function m(){return{value:g,done:!0}}var g,v=Object.prototype,y=v.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},b=_.iterator||"@@iterator",w=_.asyncIterator||"@@asyncIterator",x=_.toStringTag||"@@toStringTag",S="object"==typeof t,C=e.regeneratorRuntime;if(C)S&&(t.exports=C);else{(C=e.regeneratorRuntime=S?t.exports:{}).wrap=n;var E="suspendedStart",M="suspendedYield",L="executing",T="completed",k={},D={};D[b]=function(){return this};var P=Object.getPrototypeOf,O=P&&P(P(f([])));O&&O!==v&&y.call(O,b)&&(D=O);var I=s.prototype=r.prototype=Object.create(D);o.prototype=I.constructor=s,s.constructor=o,s[x]=o.displayName="GeneratorFunction",C.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},C.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(I),t},C.awrap=function(t){return{__await:t}},a(l.prototype),l.prototype[w]=function(){return this},C.AsyncIterator=l,C.async=function(t,e,i,r){var o=new l(n(t,e,i,r));return C.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},a(I),I[x]="Generator",I[b]=function(){return this},I.toString=function(){return"[object Generator]"},C.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},C.values=f,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,i){return o.type="throw",o.arg=t,n.next=e,i&&(n.method="next",n.arg=g),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=y.call(r,"catchLoc"),a=y.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&y.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,k):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),k},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),k}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;d(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:f(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),k}}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}())},function(t,e,n){(function(t){var e,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x,S,C,E,M,L,T,k,D,P,O,I,N,A,F,R,j,z,B,U,H=function(t,e){return function(){return t.apply(e,arguments)}},q=function(t,e){function n(){this.constructor=t}for(var i in e)W.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},W={}.hasOwnProperty,G=[].slice;n(380),O=n(361),I=n(360),B=n(104),z=n(356),U=n(55),E=n(355),M=n(140),T=n(354),S=n(352),o=n(351),L=n(353),r=n(350),i=n(349),b=26,v=48,x=(C=19)+(_=14)+(w=5),e=40,c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=-1e5,h=-1e3,a=1e5,l=1e3,R=function(t){return B.padLeft(t.getUTCHours(),"0",2)+":"+B.padLeft(t.getUTCMinutes(),"0",2)},A=function(t){return B.padLeft(t.getUTCDate(),"0",2)},F=function(t){return c[t.getUTCMonth()]},N=function(t){return F(t)+" "+A(t)},j=function(t){return t.getUTCFullYear()},P=function(t,e,n){var i;return i=[t],t===e&&i.push(n()),i},s=[function(t){return P(R(t),"00:00",function(){return N(t)})},function(t){return P(R(t),"00:00",function(){return A(t)+" "+F(t)+" "+j(t)})},function(t){return P(A(t),"01",function(){return F(t)+" "+j(t)})},function(t){return P(F(t),"Jan",function(){return j(t)})},function(t){return[j(t)]},function(t){return[j(t)]},function(t){return[j(t)]}],y=["minute","hour","day","month","year","year","year"],D=[m=6e4,f=60*m,d=24*f,31*d,g=366*d,p=10*g,5*p],k=function(n){function c(e,n,i){var r,o,s;null==i&&(i={}),this._finishPan=H(this._finishPan,this),this.data=H(this.data,this),c.__super__.constructor.call(this,e,n,i),this._data={},this._loadedRange=[],this._rows=[],this._zoom=4,this.animate=null==(o=i.animate)||o,this.end=(i.end||new Date)-0,this.autoHide=null==(s=i.autoHide)||s,this.start=this.end-D[this._zoom],this.originPx=0,r=O({ROW_TEXT_OFFSET:x,TOP_HEIGHT:C
}),this.parent=this.root,this.root=t(r).appendTo(this.root),this._setupDomVars(),this._setupDisplay(),this._setupBehaviors(),this._updateTimeline(),this.autoHide||this.show()}return q(c,n),c.prototype.destroy=function(){var t,e,n;for(t=0,e=(n=this._behaviors).length;e>t;t++)n[t].removeFrom(this);return this.root.remove(),c.__super__.destroy.call(this),this.parent},c.prototype.range=function(){var t,e,n,i;return[(i=(e=this).start)-(n=(t=e.end)-i),t+n,y[this._zoom-2]]},c.prototype.startTime=function(){return this.start},c.prototype.endTime=function(){return this.end},c.prototype.show=function(){return this.parent.show(),this.root.show(),this._setHeight(),this.parent},c.prototype.hide=function(){return this.parent.hide(),this.root.hide(),this._setHeight(),this.focus(),this.parent},c.prototype.loadstart=function(t){var e;return(e=this.root[0].getElementsByClassName(t)).length>0&&(e[0].setAttribute("class",e[0].getAttribute("class")+" "+this.scope("loading")),this._empty(e[0])),this.parent},c.prototype.data=function(t,e){return this._getRow(t),this._loadedRange=[e.start,e.end,e.resolution],this._data[t]=[e.start,e.end,e.resolution,e.intervals,e.color,e.indeterminate],this._drawData(t),this._drawIndicators(t),this.parent},c.prototype._drawIndicators=function(t){var e,n,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y;for(v=null,a=0,l=(u=this._rows).length;l>a&&(v=u[a]).id!==t;a++);return null!=v?((h=this._data[t])[0],h[1],h[2],s=h[3],o=null!=(o=h[4])?o:"#25c85b",y=null!=(c=null!=(d=v.min&&new Date(1e3*v.min))?d:v.time_start&&new Date(v.time_start))?c:new Date(0),r=(null!=(p=null!=(f=v.max&&new Date(1e3*v.max))?f:v.time_end&&new Date(v.time_end))?p:new Date)<this.start||s.length>0&&1e3*s[s.length-1][1]<this.start,n=y>this.end||s.length>0&&1e3*s[0][0]>this.end,i=r?o:"transparent",e=n?o:"transparent",null!=(m=document.getElementById("arrow-left-"+t))&&m.setAttribute("style","fill: "+i),null!=(g=document.getElementById("arrow-right-"+t))&&g.setAttribute("style","fill: "+e),null):void 0},c.prototype._drawData=function(t){var e,n,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,_,w,x,S,C,E;for(l=-1,s=h=0,d=(g=this._rows).length;d>h;s=++h)if(g[s].id===t){l=s;break}if(-1!==l){for(E=this._zoom,(_=null!=(v=this._data[t])?v:[this.start-1,this.end+1,y[E-2],[],null])[0],_[1],x=_[2],u=_[3],i=_[4],a=_[5],r=null,(f=this.root[0].getElementsByClassName(t)).length>0?(r=f[0],this._empty(r),r.parentNode.removeChild(r)):(r=this._buildSvgElement("g"),l>0&&this._translate(r,0,b*l)),c=0,p=u.length;p>c;c++)C=(w=u[c])[0],o=w[1],w[2],e={x:S=this.timeToPosition(1e3*C),y:5,width:this.timeToPosition(1e3*o)-S,height:b-7,rx:10,ry:10},x&&x!==y[E-2]&&(e["class"]=this.scope("imprecise")),m=this._buildSvgElement("rect",e),null!=i&&m.setAttribute("style","fill: "+i),r.appendChild(m);return n=t+" "+this.scope("data"),a&&(n+=" "+this.scope("indeterminate")),r.setAttribute("class",n),this.tlRows.appendChild(r),this._drawIndicators(t),null}},c.prototype._forceRedraw=function(){var t,e,n;return e=this._buildRect({stroke:"none",fill:"none"}),(n=this.svg).appendChild(e),t=function(){return n.removeChild(e)},window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t)},c.prototype.refresh=function(){return this.rows(this._rows)},c.prototype.rows=function(e){var n;return this._rows=function(){var i,r,o;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],o.push(t.extend({},n));return o}(),this._updateRowNames(),this._drawTemporalBounds(),this._empty(this.tlRows),this._data={},this.autoHide&&((null!=e?e.length:void 0)>0?this.show():this.hide()),this.parent},c.prototype.timeSpanToPx=function(t){return t/this.scale},c.prototype.pxToTimeSpan=function(t){return this.scale/t},c.prototype.timeToPosition=function(t){var e;return(e=this).originPx+(t-e.start)/e.scale},c.prototype.positionToTime=function(t){var e,n,i,r;return e=(n=this).originPx,r=n.start,i=n.scale,Math.floor((t-e)*i+r)},c.prototype.zoomIn=function(){return this._deltaZoom(-1),this.parent},c.prototype.zoomOut=function(){return this._deltaZoom(1),this.parent},c.prototype.zoom=function(t){return null!=t&&this._deltaZoom(t-this._zoom),this._zoom},c.prototype.center=function(t){return null!=t?(this.panToTime(t+(this.end-this.start)/2),null):Math.round((this.end+this.start)/2)},c.prototype._deltaZoom=function(t,e,n){var i,r,o;return null==e&&(e=this.center()),null==n&&(n=!0),this._zoom=Math.min(Math.max(this._zoom+t,2),D.length-1),this.root.toggleClass(this.scope("max-zoom"),this._zoom===D.length-1),this.root.toggleClass(this.scope("min-zoom"),2===this._zoom),r=D[this._zoom],n?(i=r/this.width,o=this.timeToPosition(e),this.start=e-i*(o-this.originPx)):this.start=e-r/2,this.end=this.start+r,this.scale=i,this.focus(),this._updateTimeline(),this._drawTemporalBounds()},c.prototype.isFocus=function(t){var e;return!(e=this._focus)&&!t||e&&t&&Math.abs(t-e)<1e3},c.prototype.getFocus=function(){return this._focus?[this._focus,this._focusEnd]:[]},c.prototype.focus=function(t,e){var n,i,r,o,s,a;return this.isFocus(t)&&(t=null),this._focus=t,this._focusEnd=e,this.root,r=this.focusOverlay,this._empty(r),null!=t?(n=[new Date(t),new Date(e),y[this._zoom-1]],this.parent.trigger(this.scopedEventName("focusset"),n),s=this.timeToPosition(t),a=this.timeToPosition(e),i=this._buildRect({"class":this.scope("unfocused"),x1:s}),r.appendChild(i),o=this._buildRect({"class":this.scope("unfocused"),x:a}),r.appendChild(o)):(n=[],this.parent.trigger(this.scopedEventName("focusremove"),n)),this.parent.trigger(this.scopedEventName("focuschange"),n),this._forceRedraw(),this.parent},c.prototype.panToTime=function(t){return this._pan(this.timeSpanToPx(this.end-t))},c.prototype._getTransformX=U.getTransformX,c.prototype._allTemporal=function(){var t,e,n,i,r;for(i=[],this._globalTemporal&&(i=i.concat(this._globalTemporal)),t=0,e=(n=this._rows).length;e>t;t++)(r=n[t]).temporal&&(i=i.concat(r.temporal));return i},c.prototype._canFocusTimespan=function(t,e){var n,i,r,o,s,a;if(0===(n=this._allTemporal()).length)return!0;for(i=0,r=n.length;r>i;i++)if(s=(o=n[i])[0],a=o[1],e>s&&a>t)return!0;return!1},c.prototype._timespanForLabel=function(t){var e,n,i;return e=t.previousSibling,n=this._getTransformX(t),i=this._getTransformX(e,n),[this.positionToTime(n),this.positionToTime(i)-1]},c.prototype._contains=function(t,e,n,i){return n>t&&e>n&&i>t&&e>i},c.prototype._empty=function(e){return t(e).empty()},c.prototype._buildSvgElement=U.buildSvgElement,c.prototype._translate=function(t,e,n){return t.setAttribute("transform","translate("+e+", "+n+")"),t},c.prototype._setupDomVars=function(){return this.svg=this._findScopedEl(".display"),this.selectionOverlay=this._findScopedEl(".selection"),this.focusOverlay=this._findScopedEl(".focus"),this.overlay=this._findScopedEl(".overlay"),this.olRows=this._findScopedEl(".row"),this.timeline=this._findScopedEl(".draggable"),this.tlRows=this._findScopedEl(".rows"),this.axis=this._findScopedEl(".axis")},c.prototype._setupDisplay=function(){var t,e,n;for(e=this._findScoped(".tools").width(),t=this.svg.firstElementChild,n=[];t;)this._translate(t,e,0),n.push(t=t.nextElementSibling);return n},c.prototype._setupBehaviors=function(){var t,e,n,s,a;for(this._behaviors=[new T,new S,new o,new L,new r,new i],a=[],e=0,n=(s=this._behaviors).length;n>e;e++)t=s[e],a.push(t.addTo(this));return a},c.prototype._pan=function(t,e){var n,i;return null==e&&(e=!0),null==this._panStart&&this._startPan(),i=this._panStart,n=this._panEnd-i,this.start=i-t*this.scale,this.end=this.start+n,this.originPx=-(this._panStartX+t),this.root.find([this.scope(".draggable"),this.scope(".selection"),this.scope(".display-top"),this.scope(".focus")].join(", ")).attr("transform","translate("+(-this.originPx+v)+",0)"),this._forceRedraw(),e?this._finishPan():void 0},c.prototype._startPan=function(){var t;return t=this.root.find(this.scope(".draggable"))[0],this._panStartX=this._getTransformX(t,v)-v,this._panStart=this.start,this._panEnd=this.end},c.prototype._finishPan=function(){return this._updateTimeline(),this._panStartX=this._panStart=this._panEnd=null},c.prototype._buildIndicatorArrow=function(t,e){var n;return(n=this._buildSvgElement("g",{"class":this.scope("indicator"),id:t,transform:e})).appendChild(this._buildSvgElement("path",{d:"M 0 -5 L 6 1 L 8 -1 L 4 -5 L 8 -9 L 6 -11 z"})),n.appendChild(this._buildSvgElement("path",{d:"M 5 -5 L 11 1 L 13 -1 L 9 -5 L 13 -9 L 11 -11 z"})),n},c.prototype._updateRowNames=function(){var t,e,n,i,r,o,s,a,l;for(r=this._rows,n=this.olRows,this._empty(n),a=0,o=this._buildSvgElement("g"),t=0,e=r.length;e>t;t++)i=r[t],n.appendChild(this._buildIndicatorArrow("arrow-left-"+i.id,"translate(0, "+a+")")),n.appendChild(this._buildIndicatorArrow("arrow-right-"+i.id,"translate("+(this.width-20)+", "+(a-10)+") rotate(180)")),(s=this._buildSvgElement("text",{x:15,y:a})).textContent=i.title,o.appendChild(s),a+=b;return n.appendChild(o),l=this,setTimeout(function(){var t,e;return t=o.getBBox(),e=l._buildSvgElement("rect",{x:t.x,y:-_-w,width:t.width,height:a,"class":l.scope("shadow")}),n.firstChild?n.insertBefore(e,n.firstChild):void 0},0),null},c.prototype._updateTimeline=function(){var e,n,i,r,o,s,l,h,c,d,p,f,m,g,v,_,b,w,x,S;for(o in e=(f=this).axis,f.timeline,w=f.start,i=f.end,b=f.root,S=this._zoom,this._empty(e),b.find("h1").text(y[S-1]),l=this._buildSvgElement("line",{"class":this.scope("timeline"),x1:u,y1:0,x2:a,y2:0}),e.appendChild(l),0===(n=b.width())&&(n=t(window).width()),this.width=x=n-b.find(this.scope(".tools")).width(),this.scale=(i-w)/x,p=this.range(),this._drawIntervals(p[0],p[1],S-1),m=this._data)W.call(m,o)&&(m[o],this._drawData(o));if(_=p[2],c=(g=this._loadedRange)[0],h=g[1],g[2]!==_||!this._contains(c,h,w,i))for(r=0,s=(v=this.tlRows.childNodes).length;s>r;r++)(d=v[r]).setAttribute("class",d.getAttribute("class")+" "+this.scope("loading"));return this.parent.trigger(this.scopedEventName("rangechange"),p)},c.prototype.setTemporal=function(t,e){var n,i,r;return null==e&&(e=!1),this._globalTemporal!==t?(this._globalTemporal=t,this._drawTemporalBounds(),e&&(r=t.length>0?"temporalset":"temporalremove",i=function(){var e,i,r,o,s;for(s=[],e=0,i=(o=null!=(r=t[0])?r:[]).length;i>e;e++)n=o[e],s.push(null!=n?n:new Date(n));return s}(),this.parent.trigger(this.scopedEventName(r),i),this.parent.trigger(this.scopedEventName("temporalchange"),i)),this.parent):void 0},c.prototype.getTemporal=function(){var t,e,n,i,r,o,s;for(r=[],t=0,e=(i=null!=(n=this._globalTemporal)?n:[]).length;e>t;t++)o=i[t],r.push(function(){var t,e,n;for(n=[],t=0,e=o.length;e>t;t++)s=o[t],n.push(null!=s?s:new Date(s));return n}());return r},c.prototype.clearTemporal=function(t){var e,n,i,r;for(null==t&&(t=!1),this.setTemporal([],t),e=0,n=(i=this._rows).length;n>e;e++)(r=i[e]).temporal=null,t&&(this.parent.trigger(this.scopedEventName("rowtemporalremove"),r.id),this.parent.trigger(this.scopedEventName("rowtemporalchange"),r.id));return this._drawTemporalBounds(),this.parent},c.prototype.setRowTemporal=function(t,e,n){var i,r,o,s,a,l,u,h;if(null==n&&(n=!1),(u=this._getRow(t))&&(u.temporal=e,n)){for(h=e.length>0?"rowtemporalset":"rowtemporalremove",i=[u.id],r=0,o=(l=null!=(a=e[0])?a:[]).length;o>r;r++)s=l[r],i.push(null!=s?s:new Date(s));this.parent.trigger(this.scopedEventName(h),i),this.parent.trigger(this.scopedEventName("rowtemporalchange"),i)}return this._drawTemporalBounds(),this.parent},c.prototype.getRowTemporal=function(t){var e,n,i,r,o,s,a,l;for(s=[],e=0,n=(o=null!=(i=null!=(r=this._getRow(t))?r.temporal:void 0)?i:[]).length;n>e;e++)a=o[e],s.push(function(){var t,e,n;for(n=[],t=0,e=a.length;e>t;t++)l=a[t],n.push(null!=l?l:new Date(l));return n}());return s},c.prototype._getRow=function(t){var e,n,i,r;for(e=0,n=(i=this._rows).length;n>e;e++)if((r=i[e]).id===t)return r;return null},c.prototype._drawTemporalBounds=function(){var t,e,n,i,r,o,s,a;for(r=this.selectionOverlay,a=this._rows,this._empty(r),t=[],e=n=0,i=a.length;i>n;e=++n)(null!=(o=(s=a[e]).temporal)?o.length:void 0)>0?this._createTemporalRegion(r,s.temporal,[e],s.id):t.push(e);return this._globalTemporal?this._createTemporalRegion(r,this._globalTemporal,t):void 0},c.prototype._createSelectionRegion=function(t,e,n,i,r){var o,s,a,u,h,c;for(a=new M(t,e,l),h=new M(t,n,l),c=function(){var t,e,n,i;return t=Math.min(a.x,h.x),e=Math.max(a.x,h.x),n=new Date(this.positionToTime(t)),i=new Date(this.positionToTime(e)),null!=r?this.setRowTemporal(r,[[n,i]],!0):this.setTemporal([[n,i]],!0),null},a.on("commit",c,this),h.on("commit",c,this),a.on("update",this._forceRedraw,this),h.on("update",this._forceRedraw,this),s=0,u=i.length;u>s;s++)o=i[s],new E(t,a,h,{"class":this.scope("selection-region"),y:C+b*o,height:b});return[a,h]},c.prototype._createTemporalRegion=function(t,e,n,i){var r,o,s,a,l,u;for(a=[],r=0,o=e.length;o>r;r++)l=(s=e[r])[0],u=s[1],a.push(this._createSelectionRegion(t,this.timeToPosition(l),this.timeToPosition(u),n,i));return a},c.prototype._buildRect=function(e){return null==(e=t.extend({x:u,x1:a,y:h,y1:l},e)).width&&(e.width=e.x1-e.x|0),null==e.height&&(e.height=e.y1-e.y|0),delete e.x1,delete e.y1,this._buildSvgElement("rect",e)},c.prototype._roundTime=function(t,e,n){var i,r,o;return null==n&&(n=0),t=1e3*Math.round(t/1e3),o=new Date(t),r=(r=function(){var t,e,n,r;for(r=[],t=0,e=(n=["FullYear","Month","Date","Hours","Minutes"]).length;e>t;t++)i=n[t],r.push(o["getUTC"+i]());return r}()).slice(0,Math.max(r.length-e,1)),e===D.length-2&&(r[0]=10*Math.floor(r[0]/10),n*=10),r[r.length-1]+=n,1===r.length&&r.push(0),Date.UTC.apply(Date,r)},c.prototype._drawIntervals=function(t,e,n){var i,r,o,a,l,u,h;for(i=this.axis,t=this._roundTime(t,n),h=e=this._roundTime(e,n),u=[];h>=t;)r=new Date(h),l=this._roundTime(h,n,-1),a=this._roundTime(h,n,1),o=this._buildIntervalDisplay.apply(this,[this.timeToPosition(h),this.timeToPosition(a)].concat(G.call(s[n](r)))),i.appendChild(o),u.push(h=l);return u},c.prototype._buildSvgTemplate=function(e,n){var i,r,o;return r='<svg xmlns="http://www.w3.org/2000/svg">'+e(n)+"</svg>",null==(o=(i=t("<div />")).html(r).find("svg").children()[0])&&(o=i.append(r).find("svg").children()[0]),o},c.prototype._buildIntervalDisplay=function(t,e,n,i){var r;return r=e-t,this._buildSvgTemplate(I,{ns:this.namespace,width:r,x0:t,x1:e,text:n,subText:i})},c.prototype._setHeight=function(){var n,i;return n=this._rows.length*b+2*w,this._translate(this.axis,0,C+n),i=Math.max(C+n+e,100),this.root.height(i),t(this.svg).height(i),this.parent.trigger(this.scopedEventName("heightchange"),[i])},c}(z.Base),z.create("timeline",k)}).call(e,n(16))},function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};t.exports=function(){function t(){this._onZoomOut=e(this._onZoomOut,this),this._onZoomIn=e(this._onZoomIn,this)}return t.prototype.addTo=function(t){return this.tl=t,t._findScopedEl(".zoom-in").addEventListener("click",this._onZoomIn),t._findScopedEl(".zoom-out").addEventListener("click",this._onZoomOut)},t.prototype.removeFrom=function(t){return t._findScopedEl(".zoom-in").removeEventListener("click",this._onZoomIn),t._findScopedEl(".zoom-out").removeEventListener("click",this._onZoomOut)},t.prototype._zoomCenter=function(){var t,e,n,i,r,o,s,a,l,u,h;for(t=(l=this.tl)._allTemporal(),l._focus&&l._focusEnd&&t.push([l._focus,l._focusEnd]),h=l.startTime(),s=u=l.endTime(),a=h,n=0,i=t.length;i>n;n++)o=(r=t[n])[0],e=r[1],u>o&&e>h&&(o>h&&(s=Math.min(s,o)),u>e&&(a=Math.max(a,e)));return(s+a)/2},t.prototype._clickZoom=function(t){return this.tl.root.trigger("buttonzoom"),this.tl._deltaZoom(t,this._zoomCenter(),!1)},t.prototype._onZoomIn=function(){return this._clickZoom(-1)},t.prototype._onZoomOut=function(){return this._clickZoom(1)},t}()},function(t,e,n){(function(e){var n=function(t,e){return function(){return t.apply(e,arguments)}};t.exports=function(){function t(){this._onDataMouseout=n(this._onDataMouseout,this),this._onDataMouseover=n(this._onDataMouseover,this)}return t.prototype.addTo=function(t){var e;return this.tl=t,(e=this.tl).root.on("mouseover",e.scope(".data"),this._onDataMouseover),e.root.on("mouseout",e.scope(".data"),this._onDataMouseout)},t.prototype.removeFrom=function(t){return t.root.off("mouseover",t.scope(".data"),this._onDataMouseover),t.root.off("mouseout",t.scope(".data"),this._onDataMouseout)},t.prototype._onDataMouseover=function(t){var n,i,r,o,s,a,l,u,h,c,d,p,f,m,g;return g=(m=this.tl)._findScoped(".tooltip"),o=-1!==(n=t.target).parentNode.className.baseVal.indexOf("indeterminate"),r=n.parentNode.className.baseVal.split(" ")[0],u=m._data[r][2],c=1e3*(s=m._data[r][3][e(t.currentTarget.childNodes).index(n)])[0],d=1e3*s[1],p=this._dateWithResolution(c,u)+" to "+this._dateWithResolution(d,u),o&&(p+=" (Specific Ranges Unavailable)"),g.find(".inner").text(p),h=(a=(l=n.getScreenCTM()).e+n.x.baseVal.value)+n.width.baseVal.value,0>a&&(a=0),h>window.innerWidth&&(h=window.innerWidth),g.css("left",(a+h)/2-g.width()/2+"px"),i=l.f,f=this.tl.root.offset().top,g.css("top",i-f-33+"px"),g.show()},t.prototype._onDataMouseout=function(){return this.tl._findScoped(".tooltip").hide().find(".inner").text("")},t.prototype._dateWithResolution=function(t,e){var n;return n=(n=new Date(t).toUTCString()).replace(/^\S+\s/,"").replace(/:[^:]*\s/," "),e&&"day"!==e&&"month"!==e&&"year"!==e||(n=n.replace(/\s\d+:\S+/,"").replace(" GMT","")),("month"===e||"year"===e)&&(n=n.replace(/^\d+\s/,"")),"year"===e&&(n=n.replace(/^\S+\s/,"")),n},t}()}).call(e,n(16))},function(t,e,n){var i;i=n(103),t.exports=function(){function t(){}return t.prototype.addTo=function(t){var e,n;return this.tl=t,n=this.tl._findScopedEl(".display"),this._draggable=e=new i(n,this.animate),e.on("dragmove",this._onDragMove,this),e.on("dragend",this._onDragEnd,this)},t.prototype.removeFrom=function(){return this._draggable.dispose()},t.prototype._onDragMove=function(t){var e,n;return n=this.tl,e=t.offset.x,Math.abs(e)>5&&(n._dragging=!0),n._pan(e,!1)},t.prototype._onDragEnd=function(t){var e,n;return(n=this.tl)._dragging=!1,null!=(null!=(e=t.offset)?e.x:void 0)?(n.root.trigger("draggingpan"),n._pan(t.offset.x)):void 0},t}()},function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;t.exports=function(){function t(){this._onTouchMove=e(this._onTouchMove,this),this._onTouchStart=e(this._onTouchStart,this),this._onWheel=e(this._onWheel,this),this._onSafariWheel=e(this._onSafariWheel,this),this.listeners={mousewheel:"_onSafariWheel",DOMMouseScroll:"_onSafariWheel",wheel:"_onWheel",touchstart:"_onTouchStart",touchmove:"_onTouchMove"}}return t.prototype.addTo=function(t){var e,i,r,o,s;for(e in this.tl=t,s=this.tl.svg,this._allowWheel=!0,o=[],r=this.listeners)n.call(r,e)&&(i=r[e],o.push(s.addEventListener(e,this[i])));return o},t.prototype.removeFrom=function(){var t,e,i,r,o;for(t in o=this.tl.svg,r=[],i=this.listeners)n.call(i,t)&&(e=i[t],r.push(o.removeEventListener(t,this[e])));return r},t.prototype._rateLimit=function(t){return null==t&&(t=300),this._allowWheel=!1,setTimeout((e=this,function(){return e._allowWheel=!0}),t);var e},t.prototype._doScroll=function(t,e,n){var i,r,o;return this._allowWheel?(r=this._getTime(n),o=this.tl,Math.abs(e)>Math.abs(t)?(i=e>0?-1:1,o.root.trigger("scrollzoom"),o._deltaZoom(i,r),this._rateLimit()):0!==t?(o.root.trigger("scrollpan"),o._pan(t)):void 0):void 0},t.prototype._getTime=function(t){var e,n,i,r;return e=(i=this.tl)._findScopedEl(".draggable"),n=i._getTransformX(e),r=t-i.svg.clientLeft-n,i.positionToTime(r)},t.prototype._onSafariWheel=function(t){return doScroll(t.wheelDeltaX,t.wheelDeltaY,t.clientX),t.preventDefault()},t.prototype._onWheel=function(t){return"mousewheel"!==t.type?(this._doScroll(-t.deltaX,-t.deltaY,t.clientX),t.preventDefault()):void 0},t.prototype._onTouchStart=function(t){return t.touches&&2===t.touches.length?(this._touchCenter=(t.touches[0].clientX+t.touches[1].clientX)/2,this._touchSeparation=Math.abs(t.touches[0].clientX-t.touches[1].clientX),t.preventDefault()):void 0},t.prototype._onTouchMove=function(t){var e;return t.touches&&2===t.touches.length?(e=Math.abs(t.touches[0].clientX-t.touches[1].clientX)-this._touchSeparation,this._doScroll(0,-e,this._touchCenter),t.preventDefault()):void 0},t}()},function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;t.exports=function(){function t(){this._onKeydown=e(this._onKeydown,this),this._onFocusOut=e(this._onFocusOut,this),this._onFocusIn=e(this._onFocusIn,this),this._onLabelMouseout=e(this._onLabelMouseout,this),this._onLabelMouseover=e(this._onLabelMouseover,this),this._onLabelClick=e(this._onLabelClick,this),this._labelEvents={click:"_onLabelClick",mouseover:"_onLabelMouseover",mouseout:"_onLabelMouseout"},this._rootEvents={focusin:"_onFocusIn",focusout:"_onFocusOut",keydown:"_onKeydown"}}return t.prototype.addTo=function(t){var e,i,r,o,s,a,l,u;for(e in this.tl=t,l=(u=this.tl).root,r=u.scope(".date-label"),o=this._labelEvents)n.call(o,e)&&(i=o[e],l.on(e,r,this[i]));for(e in a=[],s=this._rootEvents)n.call(s,e)&&(i=s[e],a.push(l.on(e,this[i])));return a},t.prototype.removeFrom=function(t){var e,i,r,o,s,a,l;for(e in r=t.scope(".date-label"),l=t.root,o=this._labelEvents)n.call(o,e)&&(i=o[e],l.off(e,r,this[i]));for(e in a=[],s=this._rootEvents)n.call(s,e)&&(i=s[e],a.push(l.off(e,this[i])));return a},t.prototype._onLabelClick=function(t){var e,n,i,r,o;return(o=this.tl)._dragging?void 0:(o.root.trigger("clicklabel"),e=t.currentTarget,i=(n=o._timespanForLabel(e))[0],r=n[1],!o._canFocusTimespan(i,r)||!this._hasFocus&&o.isFocus(i)?void 0:o.focus(i,r))},t.prototype._onLabelMouseover=function(t){var e,n,i,r,o;return o=this.tl,e=t.currentTarget,i=(n=o._timespanForLabel(e))[0],r=n[1],o._canFocusTimespan(i,r)?void 0:e.setAttribute("class",o.scope("date-label")+" "+o.scope("nofocus"))},t.prototype._onLabelMouseout=function(t){var e;return e=this.tl,t.currentTarget.setAttribute("class",e.scope("date-label"))},t.prototype._onFocusIn=function(){var t,e,n;return null!=(t=(e=this.tl)._findScopedEl(".date-label:hover"))&&this._onLabelClick({currentTarget:t}),e.root.addClass("hasfocus"),e._forceRedraw(),setTimeout((n=this,function(){return n._hasFocus=!0}),500)},t.prototype._onFocusOut=function(){var t;return(t=this.tl).root.removeClass("hasfocus"),this._hasFocus=!1,t._forceRedraw()},t.prototype._onKeydown=function(t){var e,n,i,r,o,s,a,l,u;return n=(l=this.tl)._focus,r=t.keyCode,o=37,38,40,n&&(r===o||r===39)&&(l.root.trigger("arrowpan"),u=l._zoom-1,i=l._roundTime(n,u,1),r===o?(s=l._roundTime(n,u,-1),a=n-1,e=l.timeSpanToPx(i-n)):(s=i,a=l._roundTime(n,u,2)-1,e=-l.timeSpanToPx(a-s)),l._canFocusTimespan(s,a))?(l._pan(e),l.focus(s,a)):void 0},t}()},function(t,e,n){(function(e){var i,r=function(t,e){return function(){return t.apply(e,arguments)}};i=n(103),t.exports=function(){function t(){this.clear=r(this.clear,this)}return t.prototype.addTo=function(t){var n;return this.tl=t,n=this.tl._findScopedEl(".display-top"),e(n).on("click",this.clear),this.draggable=new i(n,!1).on("dragstart",this.dragstart,this).on("dragmove",this.dragmove,this).on("dragend",this.dragend,this)},t.prototype.removeFrom=function(t){var e,n;return t._findScoped(".display-top").off("click",this.clear),this.draggable.dispose(),null!=(e=this._left)&&e.dispose(),null!=(n=this._right)&&n.dispose(),this._left=this._right=this.draggable=this.tl=null},t.prototype.clear=function(){return this._dragging?void 0:this.tl.clearTemporal(!0)},t.prototype.dragstart=function(t){var e,n,i,r,o,s;return this._dragging=!0,i=(o=this.tl).selectionOverlay,o._empty(i),n=function(){var t,n,i;for(i=[],e=t=0,n=o._rows.length;n>=0?n>t:t>n;e=n>=0?++t:--t)i.push(e);return i}(),s=t.cursor.x-t.offset.x,r=o._createSelectionRegion(i,s,s,n),this._left=r[0],this._right=r[1],r},t.prototype.dragmove=function(t){return this._right._onUpdate(t)},t.prototype.dragend=function(t){return this.tl.root.trigger("createdtemporal."+this.tl.namespace),this._right._onEnd(t),this._dragging=!1},t}()}).call(e,n(16))},function(t,e,n){(function(e){var i;n(140),i=n(55),t.exports=function(){function t(t,e,n,r){this.left=e,this.right=n,this.left.on("update",this.update,this),this.right.on("update",this.update,this),this.rect=i.buildSvgElement("rect",r),t.appendChild(this.rect),this.update()}return t.prototype.dispose=function(){var t,e,n,i,r;return t=(n=this).left,i=n.right,r=n.update,e=n.rect,t.off("update",r,this),i.off("update",r,this),e.parentNode.removeChild(e),this.rect=null},t.prototype.update=function(t){var n,r;return r=Math.min(this.left.x,this.right.x),n=Math.abs(this.right.x-this.left.x),i.updateSvgElement(this.rect,e.extend({},t,{x:r,width:n})),this},t}()}).call(e,n(16))},function(t,e,n){(function(t){var i,r,o,s=[].slice;o=n(104),r=function(e,n){return t.fn[e]=function(){var i,r,o,a,l,u;return(i=1<=arguments.length?s.call(arguments,0):[]).length>0&&"string"==typeof i[0]?(l=(u=i)[0],i=2<=u.length?s.call(u,1):[],function(){var n,u,h,c,d;for(d=[],n=0,u=(h=this).length;u>n;n++)o=h[n],(a=t.data(o,e))?/^debug_/.test(l)?(c=l.split("_"),c[0],r=2<=c.length?s.call(c,1):[],d.push(a[r.join("_")])):"destroy"===l?(t.removeData(o,e),"function"==typeof(null!=a?a.destroy:void 0)?d.push(a.destroy()):d.push(void 0)):/^_/.test(l)||"function"!=typeof(null!=a?a[l]:void 0)?(console.error("Could not call "+l+" on "+e+" instance:",o),d.push(null)):d.push(a[l].apply(a,i)):(console.warn(e+" not found on element"),d.push(o));return d}.call(this)[0]):i.length<2?this.each(function(){var r,o;return o=i[0],null==t.data(this,e)?(r=new n(t(this),e,o),t.data(this,e,r)):void 0}):(console.error("Bad arguments to "+e+":",i),this)}},i=function(){function t(t,e,n){this.root=t,this.namespace=e,this._options=n,this.cssScope=o.dasherize(this.namespace)}return t.prototype.destroy=function(){},t.prototype.scope=function(t,e){var n,i,r,o,s;for(null==e&&(e={}),n="",i=0,r=(s=[".","is-"]).length;r>i;i++)o=s[i],0===t.indexOf(o)&&(n+=o,t=t.substring(o.length));return""+n+this.cssScope+"-"+t},t.prototype.scopedEventName=function(t){return t+"."+this.namespace},t.prototype._findScoped=function(t){return this.root.find(this.scope(t))},t.prototype._findScopedEl=function(t){return this.root.find(this.scope(t))[0]},t}(),e.create=r,e.Base=i}).call(e,n(16))},,,function(t,e,n){(t.exports=n(52)()).push([t.id,".timeline-container *{box-sizing:border-box}.timeline-container{height:75pt;min-height:75pt;position:relative;border-top:1px solid #727272;box-shadow:0 -10px 15px 0 rgba(0,0,0,.3);display:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none;-ms-user-select:none}.timeline-container .busy{background-position:0 bottom;padding:0}.timeline-indeterminate rect{fill-opacity:.5}.timeline-container.hasfocus{outline:0}.timeline-tools{position:absolute;z-index:20;top:0;bottom:0;left:0;width:3em;background-color:#2a2a2a;text-align:center;height:100%;box-shadow:5px 0 5px 0 rgba(0,0,0,.7);border-top:1px solid #000}.timeline-tools h1{font-size:.7em;padding:.2em 0;margin:0;text-transform:uppercase;color:#fff}.timeline-tools a{display:block;font-family:arial;font-size:1.6em;background:#7a7a7a;color:#000;margin:.3em auto;width:1em;height:1em;line-height:1.05em;text-decoration:none;font-weight:700;border-radius:1em}.timeline-tools a:hover{background:#aaa}.timeline-max-zoom a.timeline-zoom-out,.timeline-min-zoom a.timeline-zoom-in{color:#555;cursor:default}.timeline-display{background-color:#1a1a1a;display:block;position:absolute;left:0;top:0;right:0;bottom:0;width:100%;cursor:move;border-bottom:1px solid #727272}.timeline-display text{fill:#fff}.timeline-shadow{fill:#222;fill-opacity:.5}.timeline-timeline{stroke:#a5a5a5;stroke-width:2}.timeline-tick{stroke:#3d3d3d}.timeline-interval-start{stroke:#a5a5a5}.timeline-data rect{fill:#25c85b}.timeline-data rect.timeline-imprecise{fill-opacity:.5}.timeline-tick-crossing{stroke:#1a1a1a;fill:#fff;stroke-width:2}.timeline-dataset{font-size:14px;font-weight:700}.timeline-display-top{fill:#2a2a2a;cursor:pointer}.timeline-axis-label{font-size:9pt}.timeline-axis-sub-label,.timeline-axis-super-label{font-weight:700}.timeline-selection{fill:#c74105;stroke:#c74105}.timeline-selection path{cursor:move;cursor:-moz-grab}.timeline-selection-region{fill-opacity:.5;stroke-width:0}.timeline-date-label:not(.timeline-nofocus){cursor:pointer}.timeline-date-label:not(.timeline-nofocus):hover rect{fill:#2a2a2a}.timeline-date-label:not(.timeline-nofocus):hover text{fill:#3498db}.timeline-nofocus{cursor:not-allowed}.timeline-unfocused{pointer-events:none;fill:#000;fill-opacity:.5;stroke:#708c9f}.timeline-container.hasfocus .timeline-unfocused{stroke:#3498db}.timeline-indicator{fill:transparent}.timeline-tooltip{position:absolute;padding:5px 0;font-size:9pt;z-index:20;display:none}.timeline-tooltip .inner{background:#315880;border-radius:4px;padding:3px 8px;white-space:nowrap}.timeline-tooltip.top{margin-top:3px;padding:5px 0}.timeline-tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0;border-top-color:#315880}",""])},function(t,e,n){var i=n(142);t.exports=(i["default"]||i).template({1:function(t,e,n,i,r){var o;return" "+t.escapeExpression("function"==typeof(o=null!=(o=n.ns||(null!=e?e.ns:e))?o:n.helperMissing)?o.call(null!=e?e:t.nullContext||{},{name:"ns",hash:{},data:r}):o)+"-interval-start"},3:function(t,e,n,i,r){var o,s=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",u=t.escapeExpression;return'    <text x="5" y="34" class="'+u(typeof(o=null!=(o=n.ns||(null!=e?e.ns:e))?o:a)===l?o.call(s,{name:"ns",hash:{},data:r}):o)+"-axis-label "+u(typeof(o=null!=(o=n.ns||(null!=e?e.ns:e))?o:a)===l?o.call(s,{name:"ns",hash:{},data:r}):o)+'-axis-sub-label">'+u(typeof(o=null!=(o=n.subText||(null!=e?e.subText:e))?o:a)===l?o.call(s,{name:"subText",hash:{},data:r}):o)+"</text>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var o,s,a=null!=e?e:t.nullContext||{},l=n.helperMissing,u="function",h=t.escapeExpression;return'<g class="'+h(typeof(s=null!=(s=n.ns||(null!=e?e.ns:e))?s:l)===u?s.call(a,{name:"ns",hash:{},data:r}):s)+'-date-label" transform="translate('+h(typeof(s=null!=(s=n.x0||(null!=e?e.x0:e))?s:l)===u?s.call(a,{name:"x0",hash:{},data:r}):s)+', 0)">\n  <rect x="0" y="0" width="'+h(typeof(s=null!=(s=n.width||(null!=e?e.width:e))?s:l)===u?s.call(a,{name:"width",hash:{},data:r}):s)+'" height="2000"></rect>\n  <line x1="0" y1="-1000" x2="0" y2="1000"\n        class="'+h(typeof(s=null!=(s=n.ns||(null!=e?e.ns:e))?s:l)===u?s.call(a,{name:"ns",hash:{},data:r}):s)+"-line"+(null!=(o=n["if"].call(a,null!=e?e.subText:e,{name:"if",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?o:"")+'"></line>\n  <circle class="'+h(typeof(s=null!=(s=n.ns||(null!=e?e.ns:e))?s:l)===u?s.call(a,{name:"ns",hash:{},data:r}):s)+'-tick-crossing" r="6" cx="'+h(typeof(s=null!=(s=n.width||(null!=e?e.width:e))?s:l)===u?s.call(a,{name:"width",hash:{},data:r}):s)+'"></circle>\n  <text x="5" y="20" class="'+h(typeof(s=null!=(s=n.ns||(null!=e?e.ns:e))?s:l)===u?s.call(a,{name:"ns",hash:{},data:r}):s)+"-axis-label "+h(typeof(s=null!=(s=n.ns||(null!=e?e.ns:e))?s:l)===u?s.call(a,{name:"ns",hash:{},data:r}):s)+'-axis-super-label">'+h(typeof(s=null!=(s=n.text||(null!=e?e.text:e))?s:l)===u?s.call(a,{name:"text",hash:{},data:r}):s)+"</text>\n"+(null!=(o=n["if"].call(a,null!=e?e.subText:e,{name:"if",hash:{},fn:t.program(3,r,0),inverse:t.noop,data:r}))?o:"")+"</g>\n"},useData:!0})},function(t,e,n){var i=n(142);t.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var o,s=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",u=t.escapeExpression;return'<div class="timeline-container" tabindex="1">\n  <div class="timeline-tools">\n    <h1></h1>\n    <div class="timeline-tools-zoom">\n      <a class="timeline-zoom-in" href="#">+</a>\n      <a class="timeline-zoom-out" href="#">&#8722;</a>\n    </div>\n  </div>\n\n  <div class="timeline-tooltip top">\n    <div class="tooltip-arrow"></div>\n    <div class="inner"></div>\n  </div>\n\n  <svg class="timeline-display" xmlns="http://www.w3.org/2000/svg">\n    <g class="timeline-draggable">\n      <rect class="timeline-background" x="-100000" y="-10000" width="200000" height="2000"></rect>\n      <g class="timeline-axis" transform="translate(0, '+u(typeof(o=null!=(o=n.TOP_HEIGHT||(null!=e?e.TOP_HEIGHT:e))?o:a)===l?o.call(s,{name:"TOP_HEIGHT",hash:{},data:r}):o)+')"></g>\n      <g class="timeline-rows" transform="translate(0, '+u(typeof(o=null!=(o=n.TOP_HEIGHT||(null!=e?e.TOP_HEIGHT:e))?o:a)===l?o.call(s,{name:"TOP_HEIGHT",hash:{},data:r}):o)+')"></g>\n    </g>\n    <rect class="timeline-display-top" x="-100000" y="0" width="200000" height="'+u(typeof(o=null!=(o=n.TOP_HEIGHT||(null!=e?e.TOP_HEIGHT:e))?o:a)===l?o.call(s,{name:"TOP_HEIGHT",hash:{},data:r
}):o)+'"></rect>\n    <g class="timeline-selection"></g>\n    <g class="timeline-focus"></g>\n    <g class="timeline-overlay">\n      <g class="timeline-row" transform="translate(5, '+u(typeof(o=null!=(o=n.ROW_TEXT_OFFSET||(null!=e?e.ROW_TEXT_OFFSET:e))?o:a)===l?o.call(s,{name:"ROW_TEXT_OFFSET",hash:{},data:r}):o)+')"></g>\n    </g>\n  </svg>\n</div>\n'},useData:!0})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(){var t=new s.HandlebarsEnvironment;return u.extend(t,s),t.SafeString=a["default"],t.Exception=l["default"],t.Utils=u,t.escapeExpression=u.escapeExpression,t.VM=h,t.template=function(e){return h.template(e,t)},t}e.__esModule=!0;var s=r(n(141)),a=i(n(376)),l=i(n(53)),u=r(n(31)),h=r(n(375)),c=i(n(374)),d=o();d.create=o,c["default"](d),d["default"]=d,e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){o["default"](t)}e.__esModule=!0,e.registerDefaultDecorators=r;var o=i(n(364))},function(t,e,n){"use strict";e.__esModule=!0;var i=n(31);e["default"]=function(t){t.registerDecorator("inline",function(t,e,n,r){var o=t;return e.partials||(e.partials={},o=function(r,o){var s=n.partials;n.partials=i.extend({},s,e.partials);var a=t(r,o);return n.partials=s,a}),e.partials[r.args[0]]=r.fn,o})},t.exports=e["default"]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){o["default"](t),s["default"](t),a["default"](t),l["default"](t),u["default"](t),h["default"](t),c["default"](t)}e.__esModule=!0,e.registerDefaultHelpers=r;var o=i(n(366)),s=i(n(367)),a=i(n(368)),l=i(n(369)),u=i(n(370)),h=i(n(371)),c=i(n(372))},function(t,e,n){"use strict";e.__esModule=!0;var i=n(31);e["default"]=function(t){t.registerHelper("blockHelperMissing",function(e,n){var r=n.inverse,o=n.fn;if(!0===e)return o(this);if(!1===e||null==e)return r(this);if(i.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):r(this);if(n.data&&n.ids){var s=i.createFrame(n.data);s.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:s}}return o(e,n)})},t.exports=e["default"]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(31),o=i(n(53));e["default"]=function(t){t.registerHelper("each",function(t,e){function n(e,n,o){u&&(u.key=e,u.index=n,u.first=0===n,u.last=!!o,h&&(u.contextPath=h+e)),l+=i(t[e],{data:u,blockParams:r.blockParams([t[e],e],[h+e,null])})}if(!e)throw new o["default"]("Must pass iterator to #each");var i=e.fn,s=e.inverse,a=0,l="",u=void 0,h=void 0;if(e.data&&e.ids&&(h=r.appendContextPath(e.data.contextPath,e.ids[0])+"."),r.isFunction(t)&&(t=t.call(this)),e.data&&(u=r.createFrame(e.data)),t&&"object"==typeof t)if(r.isArray(t))for(var c=t.length;c>a;a++)a in t&&n(a,a,a===t.length-1);else{var d=void 0;for(var p in t)t.hasOwnProperty(p)&&(void 0!==d&&n(d,a-1),d=p,a++);void 0!==d&&n(d,a-1,!0)}return 0===a&&(l=s(this)),l})},t.exports=e["default"]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=i(n(53));e["default"]=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new r["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var i=n(31);e["default"]=function(t){t.registerHelper("if",function(t,e){return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t){t.registerHelper("log",function(){for(var e=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)e.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),e[0]=r,t.log.apply(t,e)})},t.exports=e["default"]},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var i=n(31);e["default"]=function(t){t.registerHelper("with",function(t,e){i.isFunction(t)&&(t=t.call(this));var n=e.fn;if(i.isEmpty(t))return e.inverse(this);var r=e.data;return e.data&&e.ids&&((r=i.createFrame(e.data)).contextPath=i.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:r,blockParams:i.blockParams([t],[r&&r.contextPath])})})},t.exports=e["default"]},function(t,e,n){"use strict";e.__esModule=!0;var i=n(31),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=i.indexOf(r.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=r.lookupLevel(t),"undefined"!=typeof console&&r.lookupLevel(r.level)<=t){var e=r.methodMap[t];console[e]||(e="log");for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;n>o;o++)i[o-1]=arguments[o];console[e].apply(console,i)}}};e["default"]=r,t.exports=e["default"]},function(t,e){(function(n){"use strict";e.__esModule=!0,e["default"]=function(t){var e=void 0!==n?n:window,i=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=i),t}},t.exports=e["default"]}).call(e,function(){return this}())},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t){var e=t&&t[0]||1,n=m.COMPILER_REVISION;if(e!==n){if(n>e){var i=m.REVISION_CHANGES[n],r=m.REVISION_CHANGES[e];throw new f["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new f["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){function n(n,i,r){r.hash&&(i=p.extend({},i,r.hash),r.ids&&(r.ids[0]=!0)),n=e.VM.resolvePartial.call(this,n,i,r);var o=e.VM.invokePartial.call(this,n,i,r);if(null==o&&e.compile&&(r.partials[r.name]=e.compile(n,t.compilerOptions,e),o=r.partials[r.name](i,r)),null!=o){if(r.indent){for(var s=o.split("\n"),a=0,l=s.length;l>a&&(s[a]||a+1!==l);a++)s[a]=r.indent+s[a];o=s.join("\n")}return o}throw new f["default"]("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function i(e){function n(e){return""+t.main(r,e,r.helpers,r.partials,s,l,a)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o.data;i._setup(o),!o.partial&&t.useData&&(s=c(e,s));var a=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(a=o.depths?e!=o.depths[0]?[e].concat(o.depths):o.depths:[e]),(n=d(t.main,n,r,o.depths||[],s,l))(e,o)}if(!e)throw new f["default"]("No environment passed to template");if(!t||!t.main)throw new f["default"]("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var r={strict:function(t,e){if(!(e in t))throw new f["default"]('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:p.escapeExpression,invokePartial:n,fn:function(e){var n=t[e];return n.decorator=t[e+"_d"],n},programs:[],program:function(t,e,n,i,r){var o=this.programs[t],s=this.fn(t);return e||r||i||n?o=a(this,t,s,e,n,i,r):o||(o=this.programs[t]=a(this,t,s)),o},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=p.extend({},e,t)),n},nullContext:Object.seal({}),noop:e.VM.noop,compilerInfo:t.compiler};return i.isTop=!0,i._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials,r.decorators=n.decorators):(r.helpers=r.merge(n.helpers,e.helpers),t.usePartial&&(r.partials=r.merge(n.partials,e.partials)),(t.usePartial||t.useDecorators)&&(r.decorators=r.merge(n.decorators,e.decorators)))},i._child=function(e,n,i,o){if(t.useBlockParams&&!i)throw new f["default"]("must pass block params");if(t.useDepths&&!o)throw new f["default"]("must pass parent depths");return a(r,e,t[e],n,0,i,o)},i}function a(t,e,n,i,r,o,s){function a(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=s;return!s||e==s[0]||e===t.nullContext&&null===s[0]||(a=[e].concat(s)),n(t,e,t.helpers,t.partials,r.data||i,o&&[r.blockParams].concat(o),a)}return(a=d(n,a,t,s,i,o)).program=e,a.depth=s?s.length:0,a.blockParams=r||0,a}function l(t,e,n){return t?t.call||n.name||(n.name=t,t=n.partials[t]):t="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],t}function u(t,e,n){var i=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var r=void 0;if(n.fn&&n.fn!==h&&function(){n.data=m.createFrame(n.data);var t=n.fn;r=n.data["partial-block"]=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=m.createFrame(n.data),n.data["partial-block"]=i,t(e,n)},t.partials&&(n.partials=p.extend({},n.partials,t.partials))}(),void 0===t&&r&&(t=r),void 0===t)throw new f["default"]("The partial "+n.name+" could not be found");return t instanceof Function?t(e,n):void 0}function h(){return""}function c(t,e){return e&&"root"in e||((e=e?m.createFrame(e):{}).root=t),e}function d(t,e,n,i,r,o){if(t.decorator){var s={};e=t.decorator(e,s,n,i&&i[0],r,o,i),p.extend(e,s)}return e}e.__esModule=!0,e.checkRevision=o,e.template=s,e.wrapProgram=a,e.resolvePartial=l,e.invokePartial=u,e.noop=h;var p=r(n(31)),f=i(n(53)),m=n(141)},function(t,e){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e["default"]=n,t.exports=e["default"]},,,,function(t,e,n){var i=n(359);"string"==typeof i&&(i=[[t.id,i,""]]),n(54)(i,{}),i.locals&&(t.exports=i.locals)}]),function(){this.edsc={models:{data:{},page:{},ui:{}},map:{L:{}},util:{}}}.call(this),function(){var t,e,n,i,r,o,s,a,l,u;this.edsc.config=(t=window,e=window.edscplugin,r="function"==typeof document.querySelector&&null!=(u=document.querySelector("meta[name=csrf-token]"))?u.content:void 0,e.register("datasource.cmr","/assets/edsc-plugin.datasource.cmr.min-ac3ef380f7cc7071bcc3e2a7f8f9192e.js"),e.register("datasource.cwic","/assets/edsc-plugin.datasource.cwic.min-80fc3c1b82bf5b5698ea5fa3b92575c5.js"),e.register("renderer.cmr","/assets/edsc-plugin.renderer.cmr.min-556583c07c626bf3c6755fffb6ad9224.js"),e.register("renderer.cwic","/assets/edsc-plugin.renderer.cwic.min-edd0247f2b0ad8d6e558fe6c4f553807.js"),a=t.location.search,"uat"===(i=(s=/cmr_env=(\w+)/.exec(a))?s[1]:"prod")?(n="https://cmr.uat.earthdata.nasa.gov/browse-scaler",o=!0,l="https://api-test.echo.nasa.gov/reverb"):"sit"===i?(n="https://cmr.sit.earthdata.nasa.gov/browse-scaler",o=!0,l="https://testbed.echo.nasa.gov/reverb"):(n="https://cmr.earthdata.nasa.gov/browse-scaler",o=!0,l="https://reverb.echo.nasa.gov/reverb"),{allowTouch:!0,urlLimit:2e3,defaultAnimationDurationMs:300,xhrRateLimitMs:500,maxPolygonSize:50,csrfToken:r,hoverTimeoutMs:500,gibsGranuleUrl:"http://uat.gibs.earthdata.nasa.gov/wmts/{projection}/std/{product}/default/{time_start}/{resolution}/{z}/{y}/{x}.{format}",gibsUrl:"https://map1{s}.vis.earthdata.nasa.gov/wmts-{endpoint}/wmts.cgi?{timeparam}SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER={product}&STYLE=&TILEMATRIXSET={projection}_{resolution}&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&FORMAT=image%2F{format}{extra}",browseScalerUrl:n,present:function(){return new Date-0},animateMap:!0,cmrClientId:"edsc-prod",cmrTagNamespace:"edsc",thumbnailWidth:75,enableEsiOrderChunking:o,reverb_url:l})}.call(this),function(t){"use strict";function e(){}function n(t){if(!t||"object"!=typeof t)return!1;var e=C(t)||gt;return/object|function/.test(typeof e.Element)?t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName}function i(t){return t===gt||!(!t||!t.Window)&&t instanceof t.Window}function r(t){return!!t&&t instanceof yt}function o(t){return s(t)&&void 0!==typeof t.length&&a(t.splice)}function s(t){return!!t&&"object"==typeof t}function a(t){return"function"==typeof t}function l(t){return"number"==typeof t}function u(t){return"boolean"==typeof t}function h(t){return"string"==typeof t}function c(t){return!!h(t)&&(vt.querySelector(t),!0)}function d(t,e){for(var n in e)t[n]=e[n];return t}function p(t,e){for(var n in e){var i=!1;for(var r in Xt)if(0===n.indexOf(r)&&Xt[r].test(n)){i=!0;break}i||(t[n]=e[n])}return t}function f(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp}function m(t,e,n){var i=e.length>1?T(e):e[0];_(i,Et,n),t.page.x=Et.x,t.page.y=Et.y,b(i,Et,n),t.client.x=Et.x,t.client.y=Et.y,t.timeStamp=(new Date).getTime()}function g(t,e,n){t.page.x=n.page.x-e.page.x,t.page.y=n.page.y-e.page.y,t.client.x=n.client.x-e.client.x,t.client.y=n.client.y-e.client.y,t.timeStamp=(new Date).getTime()-e.timeStamp;var i=Math.max(t.timeStamp/1e3,.001);t.page.speed=Ct(t.page.x,t.page.y)/i,t.page.vx=t.page.x/i,t.page.vy=t.page.y/i,t.client.speed=Ct(t.client.x,t.page.y)/i,t.client.vx=t.client.x/i,t.client.vy=t.client.y/i}function v(t){return t instanceof gt.Event||It&&gt.Touch&&t instanceof gt.Touch}function y(t,e,n){return n=n||{},t=t||"page",n.x=e[t+"X"],n.y=e[t+"Y"],n}function _(t,e){return e=e||{},Wt&&v(t)?(y("screen",t,e),e.x+=gt.scrollX,e.y+=gt.scrollY):y("page",t,e),e}function b(t,e){return e=e||{},Wt&&v(t)?y("screen",t,e):y("client",t,e),e}function w(t){return{x:(t=t||gt).scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}}function x(t){return l(t.pointerId)?t.pointerId:t.identifier}function S(t){return t instanceof wt?t.correspondingUseElement:t}function C(t){if(i(t))return t;var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||gt}function E(t){var e=t instanceof _t?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}function M(t){var e=E(t);if(!Gt&&e){var n=w(C(t));e.left+=n.x,e.right+=n.x,e.top+=n.y,e.bottom+=n.y}return e}function L(t){var e=[];return o(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function T(t){for(var e,n={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},i=0;i<t.length;i++)for(e in n)n[e]+=t[i][e];for(e in n)n[e]/=t.length;return n}function k(t){if(t.length||t.touches&&t.touches.length>1){var e=L(t),n=Math.min(e[0].pageX,e[1].pageX),i=Math.min(e[0].pageY,e[1].pageY);return{x:n,y:i,left:n,top:i,width:Math.max(e[0].pageX,e[1].pageX)-n,height:Math.max(e[0].pageY,e[1].pageY)-i}}}function D(t,e){var n=(e=e||Pt.deltaSource)+"X",i=e+"Y",r=L(t),o=r[0][n]-r[1][n],s=r[0][i]-r[1][i];return Ct(o,s)}function P(t,e,n){var i=(n=n||Pt.deltaSource)+"X",r=n+"Y",o=L(t),s=o[0][i]-o[1][i],a=o[0][r]-o[1][r],u=180*Math.atan(a/s)/Math.PI;if(l(e)){var h=(u-e)%360;h>315?u-=360+u/360|0:h>135?u-=180+u/360|0:h<-315?u+=360+u/360|0:h<-135&&(u+=180+u/360|0)}return u}function O(t,e){var i=t?t.options.origin:Pt.origin;return"parent"===i?i=j(e):"self"===i?i=t.getRect(e):c(i)&&(i=R(e,i)||{x:0,y:0}),a(i)&&(i=i(t&&e)),n(i)&&(i=M(i)),i.x="x"in i?i.x:i.left,i.y="y"in i?i.y:i.top,i}function I(t,e,n,i){var r=1-t;return r*r*e+2*r*t*n+t*t*i}function N(t,e,n,i,r,o,s){return{x:I(s,t,n,r),y:I(s,e,i,o)}}function A(t,e,n,i){return-n*(t/=i)*(t-2)+e}function F(t,e){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function R(t,e){for(var i=j(t);n(i);){if(dt(i,e))return i;i=j(i)}return null}function j(t){var e=t.parentNode;if(r(e)){for(;(e=e.host)&&r(e););return e}return e}function z(t,e){return t._context===e.ownerDocument||F(t._context,e)}function B(t,e,i){var r=t.options.ignoreFrom;return!(!r||!n(i))&&(h(r)?pt(i,r,e):!!n(r)&&F(r,i))}function U(t,e,i){var r=t.options.allowFrom;return!r||!!n(i)&&(h(r)?pt(i,r,e):!!n(r)&&F(r,i))}function H(t,e){if(!e)return!1;var n=e.options.drag.axis;return"xy"===t||"xy"===n||n===t}function q(t,e){var n=t.options;return/^resize/.test(e)&&(e="resize"),n[e].snap&&n[e].snap.enabled}function W(t,e){var n=t.options;return/^resize/.test(e)&&(e="resize"),n[e].restrict&&n[e].restrict.enabled}function G(t,e){var n=t.options;return/^resize/.test(e)&&(e="resize"),n[e].autoScroll&&n[e].autoScroll.enabled}function V(t,e,n){for(var i=t.options,r=i[n.name].max,o=i[n.name].maxPerElement,s=0,a=0,l=0,u=0,h=Tt.length;u<h;u++){var c=Tt[u],d=c.prepared.name;if(c.interacting()){if(++s>=jt)return!1;if(c.target===t){if((a+=d===n.name|0)>=r)return!1;if(c.element===e&&(l++,d!==n.name||l>=o))return!1}}}return jt>0}function $(t){var e,n,i,r,o,s=t[0],a=s?0:-1,l=[],u=[];for(r=1;r<t.length;r++)if((e=t[r])&&e!==s)if(s){if(e.parentNode!==e.ownerDocument)if(s.parentNode!==e.ownerDocument){if(!l.length)for(n=s;n.parentNode&&n.parentNode!==n.ownerDocument;)l.unshift(n),n=n.parentNode;if(s instanceof xt&&e instanceof _t&&!(e instanceof bt)){if(e===s.parentNode)continue;n=e.ownerSVGElement}else n=e;for(u=[];n.parentNode!==n.ownerDocument;)u.unshift(n),n=n.parentNode;for(o=0;u[o]&&u[o]===l[o];)o++;var h=[u[o-1],u[o],l[o]];for(i=h[0].lastChild;i;){if(i===h[1]){s=e,a=r,l=[];break}if(i===h[2])break;i=i.previousSibling}}else s=e,a=r}else s=e,a=r;return a}function Z(){if(this.target=null,this.element=null,this.dropTarget=null,this.dropElement=null,this.prevDropTarget=null,this.prevDropElement=null,this.prepared={name:null,axis:null,edges:null},this.matches=[],this.matchElements=[],this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null},a(Function.prototype.bind))this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);else{var t=this;this.boundInertiaFrame=function(){return t.inertiaFrame()},this.boundSmoothEndFrame=function(){return t.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.holdTimers=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this._eventTarget=null,this._curEventTarget=null,this.prevEvent=null,this.tapTime=0,this.prevTap=null,this.startOffset={left:0,right:0,top:0,bottom:0},this.restrictOffset={left:0,right:0,top:0,bottom:0},this.snapOffsets=[],this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1},this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1},this.restrictStatus.snap=this.snapStatus,this.pointerIsDown=!1,this.pointerWasMoved=!1,this.gesturing=!1,this.dragging=!1,this.resizing=!1,this.resizeAxes="xy",this.mouse=!1,Tt.push(this)}function J(t,e,n){var i,r=0,o=Tt.length,s=/mouse/i.test(t.pointerType||e)||4===t.pointerType,a=x(t);if(/down|start/i.test(e))for(r=0;r<o;r++){var l=n;if((i=Tt[r]).inertiaStatus.active&&i.target.options[i.prepared.name].inertia.allowResume&&i.mouse===s)for(;l;){if(l===i.element)return i;l=j(l)}}if(s||!It&&!Nt){for(r=0;r<o;r++)if(Tt[r].mouse&&!Tt[r].inertiaStatus.active)return Tt[r];for(r=0;r<o;r++)if(Tt[r].mouse&&(!/down/.test(e)||!Tt[r].inertiaStatus.active))return i;return(i=new Z).mouse=!0,i}for(r=0;r<o;r++)if(ct(Tt[r].pointerIds,a))return Tt[r];if(/up|end|out/i.test(e))return null;for(r=0;r<o;r++)if((!(i=Tt[r]).prepared.name||i.target.options.gesture.enabled)&&!i.interacting()&&(s||!i.mouse))return i;return new Z}function X(t){return function(e){var n,i,r=S(e.path?e.path[0]:e.target),o=S(e.currentTarget);if(It&&/touch/.test(e.type))for(Rt=(new Date).getTime(),i=0;i<e.changedTouches.length;i++){var s=e.changedTouches[i];(n=J(s,e.type,r))&&(n._updateEventTargets(r,o),n[t](s,e,r,o))}else{if(!Nt&&/mouse/.test(e.type)){for(i=0;i<Tt.length;i++)if(!Tt[i].mouse&&Tt[i].pointerIsDown)return;if((new Date).getTime()-Rt<500)return}if(!(n=J(e,e.type,r)))return;n._updateEventTargets(r,o),n[t](e,e,r,o)}}}function Y(t,e,n,i,r,o){var s,a,l=t.target,u=t.snapStatus,h=t.restrictStatus,c=t.pointers,p=(l&&l.options||Pt).deltaSource,f=p+"X",m=p+"Y",g=l?l.options:Pt,v=O(l,r),y="start"===i,_="end"===i,b=y?t.startCoords:t.curCoords;r=r||t.element,a=d({},b.page),s=d({},b.client),a.x-=v.x,a.y-=v.y,s.x-=v.x,s.y-=v.y;var w=g[n].snap&&g[n].snap.relativePoints;!q(l,n)||y&&w&&w.length||(this.snap={range:u.range,locked:u.locked,x:u.snappedX,y:u.snappedY,realX:u.realX,realY:u.realY,dx:u.dx,dy:u.dy},u.locked&&(a.x+=u.dx,a.y+=u.dy,s.x+=u.dx,s.y+=u.dy)),!W(l,n)||y&&g[n].restrict.elementRect||!h.restricted||(a.x+=h.dx,a.y+=h.dy,s.x+=h.dx,s.y+=h.dy,this.restrict={dx:h.dx,dy:h.dy}),this.pageX=a.x,this.pageY=a.y,this.clientX=s.x,this.clientY=s.y,this.x0=t.startCoords.page.x-v.x,this.y0=t.startCoords.page.y-v.y,this.clientX0=t.startCoords.client.x-v.x,this.clientY0=t.startCoords.client.y-v.y,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.buttons=e.buttons,this.target=r,this.t0=t.downTimes[0],this.type=n+(i||""),this.interaction=t,this.interactable=l;var x=t.inertiaStatus;if(x.active&&(this.detail="inertia"),o&&(this.relatedTarget=o),_?"client"===p?(this.dx=s.x-t.startCoords.client.x,this.dy=s.y-t.startCoords.client.y):(this.dx=a.x-t.startCoords.page.x,this.dy=a.y-t.startCoords.page.y):y?(this.dx=0,this.dy=0):"inertiastart"===i?(this.dx=t.prevEvent.dx,this.dy=t.prevEvent.dy):"client"===p?(this.dx=s.x-t.prevEvent.clientX,this.dy=s.y-t.prevEvent.clientY):(this.dx=a.x-t.prevEvent.pageX,this.dy=a.y-t.prevEvent.pageY),t.prevEvent&&"inertia"===t.prevEvent.detail&&!x.active&&g[n].inertia&&g[n].inertia.zeroResumeDelta&&(x.resumeDx+=this.dx,x.resumeDy+=this.dy,this.dx=this.dy=0),"resize"===n&&t.resizeAxes?g.resize.square?("y"===t.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=t.resizeAxes,"x"===t.resizeAxes?this.dy=0:"y"===t.resizeAxes&&(this.dx=0)):"gesture"===n&&(this.touches=[c[0],c[1]],y?(this.distance=D(c,p),this.box=k(c),this.scale=1,this.ds=0,this.angle=P(c,void 0,p),this.da=0):_||e instanceof Y?(this.distance=t.prevEvent.distance,this.box=t.prevEvent.box,this.scale=t.prevEvent.scale,this.ds=this.scale-1,this.angle=t.prevEvent.angle,this.da=this.angle-t.gesture.startAngle):(this.distance=D(c,p),this.box=k(c),this.scale=this.distance/t.gesture.startDistance,this.angle=P(c,t.gesture.prevAngle,p),this.ds=this.scale-t.gesture.prevScale,this.da=this.angle-t.gesture.prevAngle)),y)this.timeStamp=t.downTimes[0],this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;else if("inertiastart"===i)this.timeStamp=t.prevEvent.timeStamp,this.dt=t.prevEvent.dt,this.duration=t.prevEvent.duration,this.speed=t.prevEvent.speed,this.velocityX=t.prevEvent.velocityX,this.velocityY=t.prevEvent.velocityY;else if(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-t.prevEvent.timeStamp,this.duration=this.timeStamp-t.downTimes[0],e instanceof Y){var S=this[f]-t.prevEvent[f],C=this[m]-t.prevEvent[m],E=this.dt/1e3;this.speed=Ct(S,C)/E,this.velocityX=S/E,this.velocityY=C/E}else this.speed=t.pointerDelta[p].speed,this.velocityX=t.pointerDelta[p].vx,this.velocityY=t.pointerDelta[p].vy;if((_||"inertiastart"===i)&&t.prevEvent.speed>600&&this.timeStamp-t.prevEvent.timeStamp<150){var M=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI,L=22.5;M<0&&(M+=360);var T=135-L<=M&&M<225+L,I=225-L<=M&&M<315+L,N=!T&&(315-L<=M||M<45+L),A=!I&&45-L<=M&&M<135+L;this.swipe={up:I,down:A,left:T,right:N,angle:M,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}}function Q(){this.originalEvent.preventDefault()}function K(t){var e="";if("drag"===t.name&&(e=zt.drag),"resize"===t.name)if(t.axis)e=zt[t.name+t.axis];else if(t.edges){for(var n="resize",i=["top","bottom","left","right"],r=0;r<4;r++)t.edges[i[r]]&&(n+=i[r]);e=zt[n]}return e}function tt(t,e,i,r,o,s,a){if(!e)return!1;if(!0===e){var u=l(s.width)?s.width:s.right-s.left,h=l(s.height)?s.height:s.bottom-s.top;if(u<0&&("left"===t?t="right":"right"===t&&(t="left")),h<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t)return i.x<(u>=0?s.left:s.right)+a;if("top"===t)return i.y<(h>=0?s.top:s.bottom)+a;if("right"===t)return i.x>(u>=0?s.right:s.left)-a;if("bottom"===t)return i.y>(h>=0?s.bottom:s.top)-a}return!!n(r)&&(n(e)?e===r:pt(r,e,o))}function et(t,e,n){var i,r=this.getRect(n),o=!1,a=null,l=null,u=d({},e.curCoords.page),h=this.options;if(!r)return null;if(Bt.resize&&h.resize.enabled){var c=h.resize;if(i={left:!1,right:!1,top:!1,bottom:!1},s(c.edges)){for(var p in i)i[p]=tt(p,c.edges[p],u,e._eventTarget,n,r,c.margin||At);i.left=i.left&&!i.right,i.top=i.top&&!i.bottom,o=i.left||i.right||i.top||i.bottom}else{var f="y"!==h.resize.axis&&u.x>r.right-At,m="x"!==h.resize.axis&&u.y>r.bottom-At;o=f||m,l=(f?"x":"")+(m?"y":"")}}return a=o?"resize":Bt.drag&&h.drag.enabled?"drag":null,Bt.gesture&&e.pointerIds.length>=2&&!e.dragging&&!e.resizing&&(a="gesture"),a?{name:a,axis:l,edges:i}:null}function nt(t,e){if(!s(t))return null;var n=t.name,i=e.options;return("resize"===n&&i.resize.enabled||"drag"===n&&i.drag.enabled||"gesture"===n&&i.gesture.enabled)&&Bt[n]?("resize"!==n&&"resizeyx"!==n||(n="resizexy"),t):null}function it(t,e){var i={},r=Dt[t.type],o=S(t.path?t.path[0]:t.target),s=o;for(var a in e=!!e,t)i[a]=t[a];for(i.originalEvent=t,i.preventDefault=Q;n(s);){for(var l=0;l<r.selectors.length;l++){var u=r.selectors[l],h=r.contexts[l];if(dt(s,u)&&F(h,o)&&F(h,s)){var c=r.listeners[l];i.currentTarget=s;for(var d=0;d<c.length;d++)c[d][1]===e&&c[d][0](i)}}s=j(s)}}function rt(t){return it.call(this,t,!0)}function ot(t,e){return Lt.get(t,e)||new st(t,e)}function st(t,e){var i;if(this._element=t,this._iEvents=this._iEvents||{},c(t)){this.selector=t;var r=e&&e.context;i=r?C(r):gt,r&&(i.Node?r instanceof i.Node:n(r)||r===i.document)&&(this._context=r)}else n(t,i=C(t))&&(Nt?(Jt.add(this._element,ft.down,Yt.pointerDown),Jt.add(this._element,ft.move,Yt.pointerHover)):(Jt.add(this._element,"mousedown",Yt.pointerDown),Jt.add(this._element,"mousemove",Yt.pointerHover),Jt.add(this._element,"touchstart",Yt.pointerDown),Jt.add(this._element,"touchmove",Yt.pointerHover)));this._doc=i.document,ct(Mt,this._doc)||ut(this._doc),Lt.push(this),this.set(e)}function at(t,e){var n=!1;return function(){return n||(gt.console.warn(e),n=!0),t.apply(this,arguments)}}function lt(t){for(var e=0;e<Tt.length;e++)Tt[e].pointerEnd(t,t)}function ut(t){if(!ct(Mt,t)){var e=t.defaultView||t.parentWindow;for(var n in Dt)Jt.add(t,n,it),Jt.add(t,n,rt,!0);Nt?(ft=St===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},Jt.add(t,ft.down,Yt.selectorDown),Jt.add(t,ft.move,Yt.pointerMove),Jt.add(t,ft.over,Yt.pointerOver),Jt.add(t,ft.out,Yt.pointerOut),Jt.add(t,ft.up,Yt.pointerUp),Jt.add(t,ft.cancel,Yt.pointerCancel),Jt.add(t,ft.move,Yt.autoScrollMove)):(Jt.add(t,"mousedown",Yt.selectorDown),Jt.add(t,"mousemove",Yt.pointerMove),Jt.add(t,"mouseup",Yt.pointerUp),Jt.add(t,"mouseover",Yt.pointerOver),Jt.add(t,"mouseout",Yt.pointerOut),Jt.add(t,"touchstart",Yt.selectorDown),Jt.add(t,"touchmove",Yt.pointerMove),Jt.add(t,"touchend",Yt.pointerUp),Jt.add(t,"touchcancel",Yt.pointerCancel),Jt.add(t,"mousemove",Yt.autoScrollMove),Jt.add(t,"touchmove",Yt.autoScrollMove)),Jt.add(e,"blur",lt);try{if(e.frameElement){var i=e.frameElement.ownerDocument,r=i.defaultView;Jt.add(i,"mouseup",Yt.pointerEnd),Jt.add(i,"touchend",Yt.pointerEnd),Jt.add(i,"touchcancel",Yt.pointerEnd),Jt.add(i,"pointerup",Yt.pointerEnd),Jt.add(i,"MSPointerUp",Yt.pointerEnd),Jt.add(r,"blur",lt)}}catch(t){ot.windowParentError=t}Jt.add(t,"dragstart",function(t){for(var e=0;e<Tt.length;e++){var n=Tt[e];if(n.element&&(n.element===t.target||F(n.element,t.target)))return void n.checkAndPreventDefault(t,n.target,n.element)}}),Jt.useAttachEvent&&(Jt.add(t,"selectstart",function(t){var e=Tt[0];e.currentAction()&&e.checkAndPreventDefault(t)}),Jt.add(t,"dblclick",X("ie8Dblclick"))),Mt.push(t)}}function ht(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function ct(t,e){return-1!==ht(t,e)}function dt(e,n,i){return mt?mt(e,n,i):(gt!==t&&(n=n.replace(/\/deep\//g," ")),e[Vt](n))}function pt(t,e,i){for(;n(t);){if(dt(t,e))return!0;if((t=j(t))===i)return dt(t,e)}return!1}if(t){var ft,mt,gt=(ne=t.document.createTextNode("")).ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(ne)===ne?t.wrap(t):t,vt=gt.document,yt=gt.DocumentFragment||e,_t=gt.SVGElement||e,bt=gt.SVGSVGElement||e,wt=gt.SVGElementInstance||e,xt=gt.HTMLElement||gt.Element,St=gt.PointerEvent||gt.MSPointerEvent,Ct=Math.hypot||function(t,e){return Math.sqrt(t*t+e*e)},Et={},Mt=[],Lt=[],Tt=[],kt=!1,Dt={},Pt={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:vt,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,manualStart:!1,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:1/0,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:1/0,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},Ot={interaction:null,i:null,x:0,y:0,scroll:function(){var t,e,n,r,o=Ot.interaction.target.options[Ot.interaction.prepared.name].autoScroll,s=o.container||C(Ot.interaction.element),a=(new Date).getTime(),l=(a-Ot.prevTimeX)/1e3,u=(a-Ot.prevTimeY)/1e3;o.velocity?(t=o.velocity.x,e=o.velocity.y):t=e=o.speed,r=e*u,((n=t*l)>=1||r>=1)&&(i(s)?s.scrollBy(Ot.x*n,Ot.y*r):s&&(s.scrollLeft+=Ot.x*n,s.scrollTop+=Ot.y*r),n>=1&&(Ot.prevTimeX=a),r>=1&&(Ot.prevTimeY=a)),Ot.isScrolling&&(Zt(Ot.i),Ot.i=$t(Ot.scroll))},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(t){Ot.isScrolling=!0,Zt(Ot.i),Ot.interaction=t,Ot.prevTimeX=(new Date).getTime(),Ot.prevTimeY=(new Date).getTime(),Ot.i=$t(Ot.scroll)},stop:function(){Ot.isScrolling=!1,Zt(Ot.i)}},It="ontouchstart"in gt||gt.DocumentTouch&&vt instanceof gt.DocumentTouch,Nt=St&&!/Chrome/.test(navigator.userAgent),At=It||Nt?20:10,Ft=1,Rt=0,jt=1/0,zt=vt.all&&!gt.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},Bt={drag:!0,resize:!0,gesture:!0
},Ut="onmousewheel"in vt?"mousewheel":"wheel",Ht=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","down","move","up","cancel","tap","doubletap","hold"],qt={},Wt="Opera"==navigator.appName&&It&&navigator.userAgent.match("Presto"),Gt=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),Vt="matches"in Element.prototype?"matches":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",$t=t.requestAnimationFrame,Zt=t.cancelAnimationFrame,Jt=function(){function t(t,e,a,d){var p=ht(u,t),f=h[p];if(f||(f={events:{},typeCount:0},p=u.push(t)-1,h.push(f),c.push(o?{supplied:[],wrapped:[],useCount:[]}:null)),f.events[e]||(f.events[e]=[],f.typeCount++),!ct(f.events[e],a)){var m;if(o){var g=c[p],v=ht(g.supplied,a),y=g.wrapped[v]||function(e){e.immediatePropagationStopped||(e.target=e.srcElement,e.currentTarget=t,e.preventDefault=e.preventDefault||n,e.stopPropagation=e.stopPropagation||i,e.stopImmediatePropagation=e.stopImmediatePropagation||r,/mouse|click/.test(e.type)&&(e.pageX=e.clientX+C(t).document.documentElement.scrollLeft,e.pageY=e.clientY+C(t).document.documentElement.scrollTop),a(e))};m=t[s](l+e,y,Boolean(d)),-1===v?(g.supplied.push(a),g.wrapped.push(y),g.useCount.push(1)):g.useCount[v]++}else m=t[s](e,a,d||!1);return f.events[e].push(a),m}}function e(t,n,i,r){var s,d,p,f=ht(u,t),m=h[f],g=i;if(m&&m.events)if(o&&(p=ht((d=c[f]).supplied,i),g=d.wrapped[p]),"all"!==n){if(m.events[n]){var v=m.events[n].length;if("all"===i){for(s=0;s<v;s++)e(t,n,m.events[n][s],Boolean(r));return}for(s=0;s<v;s++)if(m.events[n][s]===i){t[a](l+n,g,r||!1),m.events[n].splice(s,1),o&&d&&(d.useCount[p]--,0===d.useCount[p]&&(d.supplied.splice(p,1),d.wrapped.splice(p,1),d.useCount.splice(p,1)));break}m.events[n]&&0===m.events[n].length&&(m.events[n]=null,m.typeCount--)}m.typeCount||(h.splice(f,1),u.splice(f,1),c.splice(f,1))}else for(n in m.events)m.events.hasOwnProperty(n)&&e(t,n,"all")}function n(){this.returnValue=!1}function i(){this.cancelBubble=!0}function r(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}var o="attachEvent"in gt&&!("addEventListener"in gt),s=o?"attachEvent":"addEventListener",a=o?"detachEvent":"removeEventListener",l=o?"on":"",u=[],h=[],c=[];return{add:t,remove:e,useAttachEvent:o,_elements:u,_targets:h,_attachedListeners:c}}(),Xt={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};Z.prototype={getPageXY:function(t,e){return _(t,e,this)},getClientXY:function(t,e){return b(t,e,this)},setEventXY:function(t,e){return m(t,e,this)},pointerOver:function(t,e,n){function i(t,e){t&&z(t,n)&&!B(t,n,n)&&U(t,n,n)&&dt(n,e)&&(r.push(t),o.push(n))}if(!this.prepared.name&&this.mouse){var r=[],o=[],s=this.element;this.addPointer(t),!this.target||!B(this.target,this.element,n)&&U(this.target,this.element,n)||(this.target=null,this.element=null,this.matches=[],this.matchElements=[]);var a=Lt.get(n),l=a&&!B(a,n,n)&&U(a,n,n)&&nt(a.getAction(t,e,this,n),a);l&&!V(a,n,l)&&(l=null),l?(this.target=a,this.element=n,this.matches=[],this.matchElements=[]):(Lt.forEachSelector(i),this.validateSelector(t,e,r,o)?(this.matches=r,this.matchElements=o,this.pointerHover(t,e,this.matches,this.matchElements),Jt.add(n,Nt?ft.move:"mousemove",Yt.pointerHover)):this.target&&(F(s,n)?(this.pointerHover(t,e,this.matches,this.matchElements),Jt.add(this.element,Nt?ft.move:"mousemove",Yt.pointerHover)):(this.target=null,this.element=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(t,e,n,i,r,o){var s,a=this.target;!this.prepared.name&&this.mouse?(this.setEventXY(this.curCoords,[t]),r?s=this.validateSelector(t,e,r,o):a&&(s=nt(a.getAction(this.pointers[0],e,this,this.element),this.target)),a&&a.options.styleCursor&&(a._doc.documentElement.style.cursor=s?K(s):"")):this.prepared.name&&this.checkAndPreventDefault(e,a,this.element)},pointerOut:function(t,e,n){this.prepared.name||(Lt.get(n)||Jt.remove(n,Nt?ft.move:"mousemove",Yt.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""))},selectorDown:function(t,e,i,r){function o(t,e,n){var r=mt?n.querySelectorAll(e):void 0;z(t,u)&&!B(t,u,i)&&U(t,u,i)&&dt(u,e,r)&&(a.matches.push(t),a.matchElements.push(u))}var s,a=this,l=Jt.useAttachEvent?d({},e):e,u=i,h=this.addPointer(t);if(this.holdTimers[h]=setTimeout(function(){a.pointerHold(Jt.useAttachEvent?l:t,l,i,r)},Pt._holdDuration),this.pointerIsDown=!0,this.inertiaStatus.active&&this.target.selector)for(;n(u);){if(u===this.element&&nt(this.target.getAction(t,e,this,this.element),this.target).name===this.prepared.name)return Zt(this.inertiaStatus.i),this.inertiaStatus.active=!1,void this.collectEventTargets(t,e,i,"down");u=j(u)}if(!this.interacting()){for(this.setEventXY(this.curCoords,[t]),this.downEvent=e;n(u)&&!s;)this.matches=[],this.matchElements=[],Lt.forEachSelector(o),s=this.validateSelector(t,e,this.matches,this.matchElements),u=j(u);return s?(this.prepared.name=s.name,this.prepared.axis=s.axis,this.prepared.edges=s.edges,this.collectEventTargets(t,e,i,"down"),this.pointerDown(t,e,i,r,s)):(this.downTimes[h]=(new Date).getTime(),this.downTargets[h]=i,p(this.downPointer,t),f(this.prevCoords,this.curCoords),this.pointerWasMoved=!1,void this.collectEventTargets(t,e,i,"down"))}this.collectEventTargets(t,e,i,"down")},pointerDown:function(t,e,n,i,r){if(r||this.inertiaStatus.active||!this.pointerWasMoved||!this.prepared.name){this.pointerIsDown=!0,this.downEvent=e;var o,s=this.addPointer(t);if(this.pointerIds.length>1&&this.target._element===this.element){var a=nt(r||this.target.getAction(t,e,this,this.element),this.target);V(this.target,this.element,a)&&(o=a),this.prepared.name=null}else if(!this.prepared.name){var l=Lt.get(i);l&&!B(l,i,n)&&U(l,i,n)&&(o=nt(r||l.getAction(t,e,this,i),l,n))&&V(l,i,o)&&(this.target=l,this.element=i)}var u=this.target,h=u&&u.options;if(!u||!r&&this.prepared.name)this.inertiaStatus.active&&i===this.element&&nt(u.getAction(t,e,this,this.element),u).name===this.prepared.name&&(Zt(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(e,u,this.element));else{if(o=o||nt(r||u.getAction(t,e,this,i),u,this.element),this.setEventXY(this.startCoords,this.pointers),!o)return;h.styleCursor&&(u._doc.documentElement.style.cursor=K(o)),this.resizeAxes="resize"===o.name?o.axis:null,"gesture"===o&&this.pointerIds.length<2&&(o=null),this.prepared.name=o.name,this.prepared.axis=o.axis,this.prepared.edges=o.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[s]=(new Date).getTime(),this.downTargets[s]=n,p(this.downPointer,t),f(this.prevCoords,this.startCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(e,u,this.element)}}else this.checkAndPreventDefault(e,this.target,this.element)},setModifications:function(t,e){var n=this.target,i=!0,r=q(n,this.prepared.name)&&(!n.options[this.prepared.name].snap.endOnly||e),o=W(n,this.prepared.name)&&(!n.options[this.prepared.name].restrict.endOnly||e);return r?this.setSnapping(t):this.snapStatus.locked=!1,o?this.setRestriction(t):this.restrictStatus.restricted=!1,r&&this.snapStatus.locked&&!this.snapStatus.changed?i=o&&this.restrictStatus.restricted&&this.restrictStatus.changed:o&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(i=!1),i},setStartOffsets:function(t,e,n){var i,r,o=e.getRect(n),s=O(e,n),a=e.options[this.prepared.name].snap,l=e.options[this.prepared.name].restrict;o?(this.startOffset.left=this.startCoords.page.x-o.left,this.startOffset.top=this.startCoords.page.y-o.top,this.startOffset.right=o.right-this.startCoords.page.x,this.startOffset.bottom=o.bottom-this.startCoords.page.y,i="width"in o?o.width:o.right-o.left,r="height"in o?o.height:o.bottom-o.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0,this.snapOffsets.splice(0);var u=a&&"startCoords"===a.offset?{x:this.startCoords.page.x-s.x,y:this.startCoords.page.y-s.y}:a&&a.offset||{x:0,y:0};if(o&&a&&a.relativePoints&&a.relativePoints.length)for(var h=0;h<a.relativePoints.length;h++)this.snapOffsets.push({x:this.startOffset.left-i*a.relativePoints[h].x+u.x,y:this.startOffset.top-r*a.relativePoints[h].y+u.y});else this.snapOffsets.push(u);o&&l.elementRect?(this.restrictOffset.left=this.startOffset.left-i*l.elementRect.left,this.restrictOffset.top=this.startOffset.top-r*l.elementRect.top,this.restrictOffset.right=this.startOffset.right-i*(1-l.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-r*(1-l.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(t,e,n){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===t.name?2:1)||(-1===ht(Tt,this)&&Tt.push(this),this.prepared.name||this.setEventXY(this.startCoords,this.pointers),this.prepared.name=t.name,this.prepared.axis=t.axis,this.prepared.edges=t.edges,this.target=e,this.element=n,this.setStartOffsets(t.name,e,n),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(t,e,i,r,o){if(this.inertiaStatus.active){var s=this.inertiaStatus.upCoords.page,a=this.inertiaStatus.upCoords.client,l={pageX:s.x+this.inertiaStatus.sx,pageY:s.y+this.inertiaStatus.sy,clientX:a.x+this.inertiaStatus.sx,clientY:a.y+this.inertiaStatus.sy};this.setEventXY(this.curCoords,[l])}else this.recordPointer(t),this.setEventXY(this.curCoords,this.pointers);var u,h,c=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,d=this.mouse?0:ht(this.pointerIds,x(t));if(this.pointerIsDown&&!this.pointerWasMoved&&(u=this.curCoords.client.x-this.startCoords.client.x,h=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=Ct(u,h)>Ft),c||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[d]),this.collectEventTargets(t,e,i,"move")),this.pointerIsDown){if(c&&this.pointerWasMoved&&!o)return void this.checkAndPreventDefault(e,this.target,this.element);if(g(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||t instanceof Y&&/inertiastart/.test(t.type))){if(!this.interacting()&&(g(this.pointerDelta,this.prevCoords,this.curCoords),"drag"===this.prepared.name)){var p=Math.abs(u),m=Math.abs(h),v=this.target.options.drag.axis,y=p>m?"x":p<m?"y":"xy";if("xy"!==y&&"xy"!==v&&v!==y){this.prepared.name=null;for(var _=i;n(_);){var b=Lt.get(_);if(b&&b!==this.target&&!b.options.drag.manualStart&&"drag"===b.getAction(this.downPointer,this.downEvent,this,_).name&&H(y,b)){this.prepared.name="drag",this.target=b,this.element=_;break}_=j(_)}if(!this.prepared.name){var w=this,S=function(t,e,n){var r=mt?n.querySelectorAll(e):void 0;if(t!==w.target)return z(t,i)&&!t.options.drag.manualStart&&!B(t,_,i)&&U(t,_,i)&&dt(_,e,r)&&"drag"===t.getAction(w.downPointer,w.downEvent,w,_).name&&H(y,t)&&V(t,_,"drag")?t:void 0};for(_=i;n(_);){var C=Lt.forEachSelector(S);if(C){this.prepared.name="drag",this.target=C,this.element=_;break}_=j(_)}}}}var E=!!this.prepared.name&&!this.interacting();if(E&&(this.target.options[this.prepared.name].manualStart||!V(this.target,this.element,this.prepared)))return void this.stop(e);if(this.prepared.name&&this.target)E&&this.start(this.prepared,this.target,this.element),(this.setModifications(this.curCoords.page,o)||E)&&(this.prevEvent=this[this.prepared.name+"Move"](e)),this.checkAndPreventDefault(e,this.target,this.element)}f(this.prevCoords,this.curCoords),(this.dragging||this.resizing)&&this.autoScrollMove(t)}}},dragStart:function(t){var e=new Y(this,t,"drag","start",this.element);this.dragging=!0,this.target.fire(e),this.activeDrops.dropzones=[],this.activeDrops.elements=[],this.activeDrops.rects=[],this.dynamicDrop||this.setActiveDrops(this.element);var n=this.getDropEvents(t,e);return n.activate&&this.fireActiveDrops(n.activate),e},dragMove:function(t){var e=this.target,n=new Y(this,t,"drag","move",this.element),i=this.element,r=this.getDrop(n,t,i);this.dropTarget=r.dropzone,this.dropElement=r.element;var o=this.getDropEvents(t,n);return e.fire(n),o.leave&&this.prevDropTarget.fire(o.leave),o.enter&&this.dropTarget.fire(o.enter),o.move&&this.dropTarget.fire(o.move),this.prevDropTarget=this.dropTarget,this.prevDropElement=this.dropElement,n},resizeStart:function(t){var e=new Y(this,t,"resize","start",this.element);if(this.prepared.edges){var n=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var i=d({},this.prepared.edges);i.top=i.top||i.left&&!i.bottom,i.left=i.left||i.top&&!i.right,i.bottom=i.bottom||i.right&&!i.top,i.right=i.right||i.bottom&&!i.left,this.prepared._linkedEdges=i}else this.prepared._linkedEdges=null;this.target.options.resize.preserveAspectRatio&&(this.resizeStartAspectRatio=n.width/n.height),this.resizeRects={start:n,current:d({},n),restricted:d({},n),previous:d({},n),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},e.rect=this.resizeRects.restricted,e.deltaRect=this.resizeRects.delta}return this.target.fire(e),this.resizing=!0,e},resizeMove:function(t){var e=new Y(this,t,"resize","move",this.element),n=this.prepared.edges,i=this.target.options.resize.invert,r="reposition"===i||"negate"===i;if(n){var o,s=e.dx,a=e.dy,l=this.resizeRects.start,u=this.resizeRects.current,h=this.resizeRects.restricted,c=this.resizeRects.delta,p=d(this.resizeRects.previous,h),f=n;if(this.target.options.resize.preserveAspectRatio){var m=this.resizeStartAspectRatio;n=this.prepared._linkedEdges,f.left&&f.bottom||f.right&&f.top?a=-s/m:f.left||f.right?a=s/m:(f.top||f.bottom)&&(s=a*m)}else this.target.options.resize.square&&(n=this.prepared._linkedEdges,f.left&&f.bottom||f.right&&f.top?a=-s:f.left||f.right?a=s:(f.top||f.bottom)&&(s=a));if(n.top&&(u.top+=a),n.bottom&&(u.bottom+=a),n.left&&(u.left+=s),n.right&&(u.right+=s),r){if(d(h,u),"reposition"===i)h.top>h.bottom&&(o=h.top,h.top=h.bottom,h.bottom=o),h.left>h.right&&(o=h.left,h.left=h.right,h.right=o)}else h.top=Math.min(u.top,l.bottom),h.bottom=Math.max(u.bottom,l.top),h.left=Math.min(u.left,l.right),h.right=Math.max(u.right,l.left);for(var g in h.width=h.right-h.left,h.height=h.bottom-h.top,h)c[g]=h[g]-p[g];e.edges=this.prepared.edges,e.rect=h,e.deltaRect=c}return this.target.fire(e),e},gestureStart:function(t){var e=new Y(this,t,"gesture","start",this.element);return e.ds=0,this.gesture.startDistance=this.gesture.prevDistance=e.distance,this.gesture.startAngle=this.gesture.prevAngle=e.angle,this.gesture.scale=1,this.gesturing=!0,this.target.fire(e),e},gestureMove:function(t){return this.pointerIds.length?((e=new Y(this,t,"gesture","move",this.element)).ds=e.scale-this.gesture.scale,this.target.fire(e),this.gesture.prevAngle=e.angle,this.gesture.prevDistance=e.distance,e.scale===1/0||null===e.scale||void 0===e.scale||isNaN(e.scale)||(this.gesture.scale=e.scale),e):this.prevEvent;var e},pointerHold:function(t,e,n){this.collectEventTargets(t,e,n,"hold")},pointerUp:function(t,e,n,i){var r=this.mouse?0:ht(this.pointerIds,x(t));clearTimeout(this.holdTimers[r]),this.collectEventTargets(t,e,n,"up"),this.collectEventTargets(t,e,n,"tap"),this.pointerEnd(t,e,n,i),this.removePointer(t)},pointerCancel:function(t,e,n,i){var r=this.mouse?0:ht(this.pointerIds,x(t));clearTimeout(this.holdTimers[r]),this.collectEventTargets(t,e,n,"cancel"),this.pointerEnd(t,e,n,i),this.removePointer(t)},ie8Dblclick:function(t,e,n){this.prevTap&&e.clientX===this.prevTap.clientX&&e.clientY===this.prevTap.clientY&&n===this.prevTap.target&&(this.downTargets[0]=n,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(t,e,n,"tap"))},pointerEnd:function(t,e,n,i){var r,o=this.target,s=o&&o.options,a=s&&this.prepared.name&&s[this.prepared.name].inertia,l=this.inertiaStatus;if(this.interacting()){if(l.active&&!l.ending)return;var u,h=(new Date).getTime(),c=!1,p=!1,m=!1,g=q(o,this.prepared.name)&&s[this.prepared.name].snap.endOnly,v=W(o,this.prepared.name)&&s[this.prepared.name].restrict.endOnly,y=0,_=0;if(u=this.dragging?"x"===s.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===s.drag.axis?Math.abs(this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,p=(c=a&&a.enabled&&"gesture"!==this.prepared.name&&e!==l.startEvent)&&h-this.curCoords.timeStamp<50&&u>a.minSpeed&&u>a.endSpeed,c&&!p&&(g||v)){var b={};b.snap=b.restrict=b,g&&(this.setSnapping(this.curCoords.page,b),b.locked&&(y+=b.dx,_+=b.dy)),v&&(this.setRestriction(this.curCoords.page,b),b.restricted&&(y+=b.dx,_+=b.dy)),(y||_)&&(m=!0)}if(p||m){if(f(l.upCoords,this.curCoords),this.pointers[0]=l.startEvent=new Y(this,e,this.prepared.name,"inertiastart",this.element),l.t0=h,o.fire(l.startEvent),p){l.vx0=this.pointerDelta.client.vx,l.vy0=this.pointerDelta.client.vy,l.v0=u,this.calcInertia(l);var w,x=d({},this.curCoords.page),S=O(o,this.element);if(x.x=x.x+l.xe-S.x,x.y=x.y+l.ye-S.y,(w={useStatusXY:!0,x:x.x,y:x.y,dx:0,dy:0,snap:null}).snap=w,y=_=0,g){var C=this.setSnapping(this.curCoords.page,w);C.locked&&(y+=C.dx,_+=C.dy)}if(v){var E=this.setRestriction(this.curCoords.page,w);E.restricted&&(y+=E.dx,_+=E.dy)}l.modifiedXe+=y,l.modifiedYe+=_,l.i=$t(this.boundInertiaFrame)}else l.smoothEnd=!0,l.xe=y,l.ye=_,l.sx=l.sy=0,l.i=$t(this.boundSmoothEndFrame);return void(l.active=!0)}(g||v)&&this.pointerMove(t,e,n,i,!0)}if(this.dragging){r=new Y(this,e,"drag","end",this.element);var M=this.element,L=this.getDrop(r,e,M);this.dropTarget=L.dropzone,this.dropElement=L.element;var T=this.getDropEvents(e,r);T.leave&&this.prevDropTarget.fire(T.leave),T.enter&&this.dropTarget.fire(T.enter),T.drop&&this.dropTarget.fire(T.drop),T.deactivate&&this.fireActiveDrops(T.deactivate),o.fire(r)}else this.resizing?(r=new Y(this,e,"resize","end",this.element),o.fire(r)):this.gesturing&&(r=new Y(this,e,"gesture","end",this.element),o.fire(r));this.stop(e)},collectDrops:function(t){var e,i=[],r=[];for(t=t||this.element,e=0;e<Lt.length;e++)if(Lt[e].options.drop.enabled){var o=Lt[e],s=o.options.drop.accept;if(!(n(s)&&s!==t||h(s)&&!dt(t,s)))for(var a=o.selector?o._context.querySelectorAll(o.selector):[o._element],l=0,u=a.length;l<u;l++){var c=a[l];c!==t&&(i.push(o),r.push(c))}}return{dropzones:i,elements:r}},fireActiveDrops:function(t){var e,n,i,r;for(e=0;e<this.activeDrops.dropzones.length;e++)n=this.activeDrops.dropzones[e],(i=this.activeDrops.elements[e])!==r&&(t.target=i,n.fire(t)),r=i},setActiveDrops:function(t){var e=this.collectDrops(t,!0);this.activeDrops.dropzones=e.dropzones,this.activeDrops.elements=e.elements,this.activeDrops.rects=[];for(var n=0;n<this.activeDrops.dropzones.length;n++)this.activeDrops.rects[n]=this.activeDrops.dropzones[n].getRect(this.activeDrops.elements[n])},getDrop:function(t,e,n){var i=[];kt&&this.setActiveDrops(n);for(var r=0;r<this.activeDrops.dropzones.length;r++){var o=this.activeDrops.dropzones[r],s=this.activeDrops.elements[r],a=this.activeDrops.rects[r];i.push(o.dropCheck(t,e,this.target,n,s,a)?s:null)}var l=$(i);return{dropzone:this.activeDrops.dropzones[l]||null,element:this.activeDrops.elements[l]||null}},getDropEvents:function(t,e){var n={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(n.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dragleave"},e.dragLeave=this.prevDropElement,e.prevDropzone=this.prevDropTarget),this.dropTarget&&(n.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dragenter"},e.dragEnter=this.dropElement,e.dropzone=this.dropTarget)),"dragend"===e.type&&this.dropTarget&&(n.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"drop"},e.dropzone=this.dropTarget),"dragstart"===e.type&&(n.activate={target:null,dropzone:null,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dropactivate"}),"dragend"===e.type&&(n.deactivate={target:null,dropzone:null,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dropdeactivate"}),"dragmove"===e.type&&this.dropTarget&&(n.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,dragmove:e,timeStamp:e.timeStamp,type:"dropmove"},e.dropzone=this.dropTarget),n},currentAction:function(){return(this.dragging?"drag":this.resizing&&"resize")||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.target=this.element=null,this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=null},stop:function(t){if(this.interacting()){Ot.stop(),this.matches=[],this.matchElements=[];var e=this.target;e.options.styleCursor&&(e._doc.documentElement.style.cursor=""),t&&a(t.preventDefault)&&this.checkAndPreventDefault(t,e,this.element),this.dragging&&(this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null)}this.clearTargets(),this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1,this.prepared.name=this.prevEvent=null,this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;for(var n=0;n<this.pointers.length;n++)-1===ht(this.pointerIds,x(this.pointers[n]))&&this.pointers.splice(n,1)},inertiaFrame:function(){var t=this.inertiaStatus,e=this.target.options[this.prepared.name].inertia.resistance,n=(new Date).getTime()/1e3-t.t0;if(n<t.te){var i=1-(Math.exp(-e*n)-t.lambda_v0)/t.one_ve_v0;if(t.modifiedXe===t.xe&&t.modifiedYe===t.ye)t.sx=t.xe*i,t.sy=t.ye*i;else{var r=N(0,0,t.xe,t.ye,t.modifiedXe,t.modifiedYe,i);t.sx=r.x,t.sy=r.y}this.pointerMove(t.startEvent,t.startEvent),t.i=$t(this.boundInertiaFrame)}else t.ending=!0,t.sx=t.modifiedXe,t.sy=t.modifiedYe,this.pointerMove(t.startEvent,t.startEvent),this.pointerEnd(t.startEvent,t.startEvent),t.active=t.ending=!1},smoothEndFrame:function(){var t=this.inertiaStatus,e=(new Date).getTime()-t.t0,n=this.target.options[this.prepared.name].inertia.smoothEndDuration;e<n?(t.sx=A(e,0,t.xe,n),t.sy=A(e,0,t.ye,n),this.pointerMove(t.startEvent,t.startEvent),t.i=$t(this.boundSmoothEndFrame)):(t.ending=!0,t.sx=t.xe,t.sy=t.ye,this.pointerMove(t.startEvent,t.startEvent),this.pointerEnd(t.startEvent,t.startEvent),t.smoothEnd=t.active=t.ending=!1)},addPointer:function(t){var e=x(t),n=this.mouse?0:ht(this.pointerIds,e);return-1===n&&(n=this.pointerIds.length),this.pointerIds[n]=e,this.pointers[n]=t,n},removePointer:function(t){var e=x(t),n=this.mouse?0:ht(this.pointerIds,e);-1!==n&&(this.pointers.splice(n,1),this.pointerIds.splice(n,1),this.downTargets.splice(n,1),this.downTimes.splice(n,1),this.holdTimers.splice(n,1))},recordPointer:function(t){var e=this.mouse?0:ht(this.pointerIds,x(t));-1!==e&&(this.pointers[e]=t)},collectEventTargets:function(t,e,i,r){function o(t,e,o){var s=mt?o.querySelectorAll(e):void 0;t._iEvents[r]&&n(u)&&z(t,u)&&!B(t,u,i)&&U(t,u,i)&&dt(u,e,s)&&(a.push(t),l.push(u))}var s=this.mouse?0:ht(this.pointerIds,x(t));if("tap"!==r||!this.pointerWasMoved&&this.downTargets[s]&&this.downTargets[s]===i){for(var a=[],l=[],u=i;u;)ot.isSet(u)&&ot(u)._iEvents[r]&&(a.push(ot(u)),l.push(u)),Lt.forEachSelector(o),u=j(u);(a.length||"tap"===r)&&this.firePointers(t,e,i,a,l,r)}},firePointers:function(t,e,n,i,r,o){var s,a,l,u=this.mouse?0:ht(this.pointerIds,x(t)),c={};for("doubletap"===o?c=t:(p(c,e),e!==t&&p(c,t),c.preventDefault=Q,c.stopPropagation=Y.prototype.stopPropagation,c.stopImmediatePropagation=Y.prototype.stopImmediatePropagation,c.interaction=this,c.timeStamp=(new Date).getTime(),c.originalEvent=e,c.originalPointer=t,c.type=o,c.pointerId=x(t),c.pointerType=this.mouse?"mouse":Nt?h(t.pointerType)?t.pointerType:[,,"touch","pen","mouse"][t.pointerType]:"touch"),"tap"===o&&(c.dt=c.timeStamp-this.downTimes[u],a=c.timeStamp-this.tapTime,l=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===c.target&&a<500),c["double"]=l,this.tapTime=c.timeStamp),s=0;s<i.length&&(c.currentTarget=r[s],c.interactable=i[s],i[s].fire(c),!(c.immediatePropagationStopped||c.propagationStopped&&r[s+1]!==c.currentTarget));s++);if(l){var f={};d(f,c),f.dt=a,f.type="doubletap",this.collectEventTargets(f,e,n,"doubletap"),this.prevTap=f}else"tap"===o&&(this.prevTap=c)},validateSelector:function(t,e,n,i){for(var r=0,o=n.length;r<o;r++){var s=n[r],a=i[r],l=nt(s.getAction(t,e,this,a),s);if(l&&V(s,a,l))return this.target=s,this.element=a,l}},setSnapping:function(t,e){var n,i,r,o=this.target.options[this.prepared.name].snap,s=[];if((e=e||this.snapStatus).useStatusXY)i={x:e.x,y:e.y};else{var u=O(this.target,this.element);(i=d({},t)).x-=u.x,i.y-=u.y}e.realX=i.x,e.realY=i.y,i.x=i.x-this.inertiaStatus.resumeDx,i.y=i.y-this.inertiaStatus.resumeDy;for(var h=o.targets?o.targets.length:0,c=0;c<this.snapOffsets.length;c++){var p={x:i.x-this.snapOffsets[c].x,y:i.y-this.snapOffsets[c].y};for(r=0;r<h;r++)(n=a(o.targets[r])?o.targets[r](p.x,p.y,this):o.targets[r])&&s.push({x:l(n.x)?n.x+this.snapOffsets[c].x:p.x,y:l(n.y)?n.y+this.snapOffsets[c].y:p.y,range:l(n.range)?n.range:o.range})}var f,m={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0};for(r=0,h=s.length;r<h;r++){var g=(n=s[r]).range,v=n.x-i.x,y=n.y-i.y,_=Ct(v,y),b=_<=g;g===1/0&&m.inRange&&m.range!==1/0&&(b=!1),m.target&&!(b?m.inRange&&g!==1/0?_/g<m.distance/m.range:g===1/0&&m.range!==1/0||_<m.distance:!m.inRange&&_<m.distance)||(g===1/0&&(b=!0),m.target=n,m.distance=_,m.range=g,m.inRange=b,m.dx=v,m.dy=y,e.range=g)}return m.target?(f=e.snappedX!==m.target.x||e.snappedY!==m.target.y,e.snappedX=m.target.x,e.snappedY=m.target.y):(f=!0,e.snappedX=NaN,e.snappedY=NaN),e.dx=m.dx,e.dy=m.dy,e.changed=f||m.inRange&&!e.locked,e.locked=m.inRange,e},setRestriction:function(t,e){var i,r,o,s,l=this.target,u=l&&l.options[this.prepared.name].restrict,c=u&&u.restriction;return c?(i=i=(e=e||this.restrictStatus).useStatusXY?{x:e.x,y:e.y}:d({},t),e.snap&&e.snap.locked&&(i.x+=e.snap.dx||0,i.y+=e.snap.dy||0),i.x-=this.inertiaStatus.resumeDx,i.y-=this.inertiaStatus.resumeDy,e.dx=0,e.dy=0,e.restricted=!1,h(c)&&!(c="parent"===c?j(this.element):"self"===c?l.getRect(this.element):R(this.element,c))?e:(a(c)&&(c=c(i.x,i.y,this.element)),n(c)&&(c=M(c)),r=c,c?"x"in c&&"y"in c?(o=Math.max(Math.min(r.x+r.width-this.restrictOffset.right,i.x),r.x+this.restrictOffset.left),s=Math.max(Math.min(r.y+r.height-this.restrictOffset.bottom,i.y),r.y+this.restrictOffset.top)):(o=Math.max(Math.min(r.right-this.restrictOffset.right,i.x),r.left+this.restrictOffset.left),s=Math.max(Math.min(r.bottom-this.restrictOffset.bottom,i.y),r.top+this.restrictOffset.top)):(o=i.x,s=i.y),e.dx=o-i.x,e.dy=s-i.y,e.changed=e.restrictedX!==o||e.restrictedY!==s,e.restricted=!(!e.dx&&!e.dy),e.restrictedX=o,e.restrictedY=s,e)):e},checkAndPreventDefault:function(t,e,n){if(e=e||this.target){var i=e.options,r=i.preventDefault;if("auto"===r&&n&&!/^(input|select|textarea)$/i.test(t.target.nodeName)){if(/down|start/i.test(t.type)&&"drag"===this.prepared.name&&"xy"!==i.drag.axis)return;if(i[this.prepared.name]&&i[this.prepared.name].manualStart&&!this.interacting())return;return void t.preventDefault()}return"always"===r?void t.preventDefault():void 0}},calcInertia:function(t){var e=this.target.options[this.prepared.name].inertia,n=e.resistance,i=-Math.log(e.endSpeed/t.v0)/n;t.x0=this.prevEvent.pageX,t.y0=this.prevEvent.pageY,t.t0=t.startEvent.timeStamp/1e3,t.sx=t.sy=0,t.modifiedXe=t.xe=(t.vx0-i)/n,t.modifiedYe=t.ye=(t.vy0-i)/n,t.te=i,t.lambda_v0=n/t.v0,t.one_ve_v0=1-e.endSpeed/t.v0},autoScrollMove:function(t){if(this.interacting()&&G(this.target,this.prepared.name)){if(this.inertiaStatus.active)return void(Ot.x=Ot.y=0);var e,n,r,o,s=this.target.options[this.prepared.name].autoScroll,a=s.container||C(this.element);if(i(a))o=t.clientX<Ot.margin,e=t.clientY<Ot.margin,n=t.clientX>a.innerWidth-Ot.margin,r=t.clientY>a.innerHeight-Ot.margin;else{var l=E(a);o=t.clientX<l.left+Ot.margin,e=t.clientY<l.top+Ot.margin,n=t.clientX>l.right-Ot.margin,r=t.clientY>l.bottom-Ot.margin}Ot.x=n?1:o?-1:0,Ot.y=r?1:e?-1:0,Ot.isScrolling||(Ot.margin=s.margin,Ot.speed=s.speed,Ot.start(this))}},_updateEventTargets:function(t,e){this._eventTarget=t,this._curEventTarget=e}},Y.prototype={preventDefault:e,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};for(var Yt={},Qt=["dragStart","dragMove","resizeStart","resizeMove","gestureStart","gestureMove","pointerOver","pointerOut","pointerHover","selectorDown","pointerDown","pointerMove","pointerUp","pointerCancel","pointerEnd","addPointer","removePointer","recordPointer","autoScrollMove"],Kt=0,te=Qt.length;Kt<te;Kt++){var ee=Qt[Kt];Yt[ee]=X(ee)}Lt.indexOfElement=function(t,e){e=e||vt;for(var n=0;n<this.length;n++){var i=this[n];if(i.selector===t&&i._context===e||!i.selector&&i._element===t)return n}return-1},Lt.get=function(t,e){return this[this.indexOfElement(t,e&&e.context)]},Lt.forEachSelector=function(t){for(var e=0;e<this.length;e++){var n=this[e];if(n.selector){var i=t(n,n.selector,n._context,e,this);if(void 0!==i)return i}}},st.prototype={setOnEvents:function(t,e){return"drop"===t?(a(e.ondrop)&&(this.ondrop=e.ondrop),a(e.ondropactivate)&&(this.ondropactivate=e.ondropactivate),a(e.ondropdeactivate)&&(this.ondropdeactivate=e.ondropdeactivate),a(e.ondragenter)&&(this.ondragenter=e.ondragenter),a(e.ondragleave)&&(this.ondragleave=e.ondragleave),a(e.ondropmove)&&(this.ondropmove=e.ondropmove)):(t="on"+t,a(e.onstart)&&(this[t+"start"]=e.onstart),a(e.onmove)&&(this[t+"move"]=e.onmove),a(e.onend)&&(this[t+"end"]=e.onend),a(e.oninertiastart)&&(this[t+"inertiastart"]=e.oninertiastart)),this},draggable:function(t){return s(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^x$|^y$|^xy$/.test(t.axis)?this.options.drag.axis=t.axis:null===t.axis&&delete this.options.drag.axis,this):u(t)?(this.options.drag.enabled=t,this):this.options.drag},setPerAction:function(t,e){for(var n in e)n in Pt[t]&&(s(e[n])?(this.options[t][n]=d(this.options[t][n]||{},e[n]),s(Pt.perAction[n])&&"enabled"in Pt.perAction[n]&&(this.options[t][n].enabled=!1!==e[n].enabled)):u(e[n])&&s(Pt.perAction[n])?this.options[t][n].enabled=e[n]:void 0!==e[n]&&(this.options[t][n]=e[n]))},dropzone:function(t){return s(t)?(this.options.drop.enabled=!1!==t.enabled,this.setOnEvents("drop",t),/^(pointer|center)$/.test(t.overlap)?this.options.drop.overlap=t.overlap:l(t.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),"accept"in t&&(this.options.drop.accept=t.accept),"checker"in t&&(this.options.drop.checker=t.checker),this):u(t)?(this.options.drop.enabled=t,this):this.options.drop},dropCheck:function(t,e,n,i,r,o){var s=!1;if(!(o=o||this.getRect(r)))return!!this.options.drop.checker&&this.options.drop.checker(t,e,s,this,r,n,i);var a=this.options.drop.overlap;if("pointer"===a){var u,h,c=_(t),d=O(n,i);c.x+=d.x,c.y+=d.y,u=c.x>o.left&&c.x<o.right,h=c.y>o.top&&c.y<o.bottom,s=u&&h}var p=n.getRect(i);if("center"===a){var f=p.left+p.width/2,m=p.top+p.height/2;s=f>=o.left&&f<=o.right&&m>=o.top&&m<=o.bottom}l(a)&&(s=Math.max(0,Math.min(o.right,p.right)-Math.max(o.left,p.left))*Math.max(0,Math.min(o.bottom,p.bottom)-Math.max(o.top,p.top))/(p.width*p.height)>=a);return this.options.drop.checker&&(s=this.options.drop.checker(t,e,s,this,r,n,i)),s},dropChecker:function(t){return a(t)?(this.options.drop.checker=t,this):null===t?(delete this.options.getRect,this):this.options.drop.checker},accept:function(t){return n(t)?(this.options.drop.accept=t,this):c(t)?(this.options.drop.accept=t,this):null===t?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(t){return s(t)?(this.options.resize.enabled=!1!==t.enabled,this.setPerAction("resize",t),this.setOnEvents("resize",t),
/^x$|^y$|^xy$/.test(t.axis)?this.options.resize.axis=t.axis:null===t.axis&&(this.options.resize.axis=Pt.resize.axis),u(t.preserveAspectRatio)?this.options.resize.preserveAspectRatio=t.preserveAspectRatio:u(t.square)&&(this.options.resize.square=t.square),this):u(t)?(this.options.resize.enabled=t,this):this.options.resize},squareResize:function(t){return u(t)?(this.options.resize.square=t,this):null===t?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(t){return s(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):u(t)?(this.options.gesture.enabled=t,this):this.options.gesture},autoScroll:function(t){return s(t)?t=d({actions:["drag","resize"]},t):u(t)&&(t={actions:["drag","resize"],enabled:t}),this.setOptions("autoScroll",t)},snap:function(t){var e=this.setOptions("snap",t);return e===this?this:e.drag},setOptions:function(t,e){var n,i=e&&o(e.actions)?e.actions:["drag"];if(s(e)||u(e)){for(n=0;n<i.length;n++){var r=/resize/.test(i[n])?"resize":i[n];if(s(this.options[r])){var a=this.options[r][t];s(e)?(d(a,e),a.enabled=!1!==e.enabled,"snap"===t&&("grid"===a.mode?a.targets=[ot.createSnapGrid(d({offset:a.gridOffset||{x:0,y:0}},a.grid||{}))]:"anchor"===a.mode?a.targets=a.anchors:"path"===a.mode&&(a.targets=a.paths),"elementOrigin"in e&&(a.relativePoints=[e.elementOrigin]))):u(e)&&(a.enabled=e)}}return this}var l={},h=["drag","resize","gesture"];for(n=0;n<h.length;n++)t in Pt[h[n]]&&(l[h[n]]=this.options[h[n]][t]);return l},inertia:function(t){var e=this.setOptions("inertia",t);return e===this?this:e.drag},getAction:function(t,e,n,i){var r=this.defaultActionChecker(t,n,i);return this.options.actionChecker?this.options.actionChecker(t,e,r,this,i,n):r},defaultActionChecker:et,actionChecker:function(t){return a(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(t){return t=t||this._element,this.selector&&!n(t)&&(t=this._context.querySelector(this.selector)),M(t)},rectChecker:function(t){return a(t)?(this.getRect=t,this):null===t?(delete this.options.getRect,this):this.getRect},styleCursor:function(t){return u(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):u(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault},origin:function(t){return c(t)?(this.options.origin=t,this):s(t)?(this.options.origin=t,this):this.options.origin},deltaSource:function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource},restrict:function(t){if(!s(t))return this.setOptions("restrict",t);for(var e,n=["drag","resize","gesture"],i=0;i<n.length;i++){var r=n[i];if(r in t){var o=d({actions:[r],restriction:t[r]},t);e=this.setOptions("restrict",o)}}return e},context:function(){return this._context},_context:vt,ignoreFrom:function(t){return c(t)?(this.options.ignoreFrom=t,this):n(t)?(this.options.ignoreFrom=t,this):this.options.ignoreFrom},allowFrom:function(t){return c(t)?(this.options.allowFrom=t,this):n(t)?(this.options.allowFrom=t,this):this.options.allowFrom},element:function(){return this._element},fire:function(t){if(!t||!t.type||!ct(Ht,t.type))return this;var e,n,i,r="on"+t.type;if(t.type in this._iEvents)for(n=0,i=(e=this._iEvents[t.type]).length;n<i&&!t.immediatePropagationStopped;n++)e[n].name,e[n](t);if(a(this[r])&&(this[r].name,this[r](t)),t.type in qt&&(e=qt[t.type]))for(n=0,i=e.length;n<i&&!t.immediatePropagationStopped;n++)e[n].name,e[n](t);return this},on:function(t,e,n){var i;if(h(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),o(t)){for(i=0;i<t.length;i++)this.on(t[i],e,n);return this}if(s(t)){for(var r in t)this.on(r,t[r],e);return this}if("wheel"===t&&(t=Ut),n=!!n,ct(Ht,t))t in this._iEvents?this._iEvents[t].push(e):this._iEvents[t]=[e];else if(this.selector){if(!Dt[t])for(Dt[t]={selectors:[],contexts:[],listeners:[]},i=0;i<Mt.length;i++)Jt.add(Mt[i],t,it),Jt.add(Mt[i],t,rt,!0);var a,l=Dt[t];for(a=l.selectors.length-1;a>=0&&(l.selectors[a]!==this.selector||l.contexts[a]!==this._context);a--);-1===a&&(a=l.selectors.length,l.selectors.push(this.selector),l.contexts.push(this._context),l.listeners.push([])),l.listeners[a].push([e,n])}else Jt.add(this._element,t,e,n);return this},off:function(t,e,n){var i;if(h(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),o(t)){for(i=0;i<t.length;i++)this.off(t[i],e,n);return this}if(s(t)){for(var r in t)this.off(r,t[r],e);return this}var a,l=-1;if(n=!!n,"wheel"===t&&(t=Ut),ct(Ht,t))(a=this._iEvents[t])&&-1!==(l=ht(a,e))&&this._iEvents[t].splice(l,1);else if(this.selector){var u=Dt[t],c=!1;if(!u)return this;for(l=u.selectors.length-1;l>=0;l--)if(u.selectors[l]===this.selector&&u.contexts[l]===this._context){var d=u.listeners[l];for(i=d.length-1;i>=0;i--){var p=d[i][0],f=d[i][1];if(p===e&&f===n){d.splice(i,1),d.length||(u.selectors.splice(l,1),u.contexts.splice(l,1),u.listeners.splice(l,1),Jt.remove(this._context,t,it),Jt.remove(this._context,t,rt,!0),u.selectors.length||(Dt[t]=null)),c=!0;break}}if(c)break}}else Jt.remove(this._element,t,e,n);return this},set:function(t){s(t)||(t={}),this.options=d({},Pt.base);var e,n=["drag","drop","resize","gesture"],i=["draggable","dropzone","resizable","gesturable"],r=d(d({},Pt.perAction),t[o]||{});for(e=0;e<n.length;e++){var o=n[e];this.options[o]=d({},Pt[o]),this.setPerAction(o,r),this[i[e]](t[o])}var a=["accept","actionChecker","allowFrom","deltaSource","dropChecker","ignoreFrom","origin","preventDefault","rectChecker","styleCursor"];for(e=0,te=a.length;e<te;e++){var l=a[e];this.options[l]=Pt.base[l],l in t&&this[l](t[l])}return this},unset:function(){if(Jt.remove(this._element,"all"),h(this.selector))for(var t in Dt)for(var e=Dt[t],n=0;n<e.selectors.length;n++){e.selectors[n]===this.selector&&e.contexts[n]===this._context&&(e.selectors.splice(n,1),e.contexts.splice(n,1),e.listeners.splice(n,1),e.selectors.length||(Dt[t]=null)),Jt.remove(this._context,t,it),Jt.remove(this._context,t,rt,!0);break}else Jt.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="");return this.dropzone(!1),Lt.splice(ht(Lt,this),1),ot}},st.prototype.snap=at(st.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping"),st.prototype.restrict=at(st.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction"),st.prototype.inertia=at(st.prototype.inertia,"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia"),st.prototype.autoScroll=at(st.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll"),st.prototype.squareResize=at(st.prototype.squareResize,"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square"),st.prototype.accept=at(st.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead"),st.prototype.dropChecker=at(st.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead"),st.prototype.context=at(st.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead"),ot.isSet=function(t,e){return-1!==Lt.indexOfElement(t,e&&e.context)},ot.on=function(t,e,n){if(h(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),o(t)){for(var i=0;i<t.length;i++)ot.on(t[i],e,n);return ot}if(s(t)){for(var r in t)ot.on(r,t[r],e);return ot}return ct(Ht,t)?qt[t]?qt[t].push(e):qt[t]=[e]:Jt.add(vt,t,e,n),ot},ot.off=function(t,e,n){if(h(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),o(t)){for(var i=0;i<t.length;i++)ot.off(t[i],e,n);return ot}if(s(t)){for(var r in t)ot.off(r,t[r],e);return ot}var a;ct(Ht,t)?t in qt&&-1!==(a=ht(qt[t],e))&&qt[t].splice(a,1):Jt.remove(vt,t,e,n);return ot},ot.enableDragging=at(function(t){return null!==t&&void 0!==t?(Bt.drag=t,ot):Bt.drag},"interact.enableDragging is deprecated and will soon be removed."),ot.enableResizing=at(function(t){return null!==t&&void 0!==t?(Bt.resize=t,ot):Bt.resize},"interact.enableResizing is deprecated and will soon be removed."),ot.enableGesturing=at(function(t){return null!==t&&void 0!==t?(Bt.gesture=t,ot):Bt.gesture},"interact.enableGesturing is deprecated and will soon be removed."),ot.eventTypes=Ht,ot.debug=function(){var t=Tt[0]||new Z;return{interactions:Tt,target:t.target,dragging:t.dragging,resizing:t.resizing,gesturing:t.gesturing,prepared:t.prepared,matches:t.matches,matchElements:t.matchElements,prevCoords:t.prevCoords,startCoords:t.startCoords,pointerIds:t.pointerIds,pointers:t.pointers,addPointer:Yt.addPointer,removePointer:Yt.removePointer,recordPointer:Yt.recordPointer,snap:t.snapStatus,restrict:t.restrictStatus,inertia:t.inertiaStatus,downTime:t.downTimes[0],downEvent:t.downEvent,downPointer:t.downPointer,prevEvent:t.prevEvent,Interactable:st,interactables:Lt,pointerIsDown:t.pointerIsDown,defaultOptions:Pt,defaultActionChecker:et,actionCursors:zt,dragMove:Yt.dragMove,resizeMove:Yt.resizeMove,gestureMove:Yt.gestureMove,pointerUp:Yt.pointerUp,pointerDown:Yt.pointerDown,pointerMove:Yt.pointerMove,pointerHover:Yt.pointerHover,eventTypes:Ht,events:Jt,globalEvents:qt,delegatedEvents:Dt,prefixedPropREs:Xt}},ot.getPointerAverage=T,ot.getTouchBBox=k,ot.getTouchDistance=D,ot.getTouchAngle=P,ot.getElementRect=M,ot.getElementClientRect=E,ot.matchesSelector=dt,ot.closest=R,ot.margin=at(function(t){return l(t)?(At=t,ot):At},"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead."),ot.supportsTouch=function(){return It},ot.supportsPointerEvent=function(){return Nt},ot.stop=function(t){for(var e=Tt.length-1;e>=0;e--)Tt[e].stop(t);return ot},ot.dynamicDrop=function(t){return u(t)?(kt=t,ot):kt},ot.pointerMoveTolerance=function(t){return l(t)?(Ft=t,this):Ft},ot.maxInteractions=function(t){return l(t)?(jt=t,this):jt},ot.createSnapGrid=function(t){return function(e,n){var i=0,r=0;s(t.offset)&&(i=t.offset.x,r=t.offset.y);var o=Math.round((e-i)/t.x),a=Math.round((n-r)/t.y);return{x:o*t.x+i,y:a*t.y+r,range:t.range}}},ut(vt),Vt in Element.prototype&&a(Element.prototype[Vt])||(mt=function(t,e,n){for(var i=0,r=(n=n||t.parentNode.querySelectorAll(e)).length;i<r;i++)if(n[i]===t)return!0;return!1}),function(){for(var e=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;++i)$t=t[n[i]+"RequestAnimationFrame"],Zt=t[n[i]+"CancelAnimationFrame"]||t[n[i]+"CancelRequestAnimationFrame"];$t||($t=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=setTimeout(function(){t(n+i)},i);return e=n+i,r}),Zt||(Zt=function(t){clearTimeout(t)})}(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=ot),exports.interact=ot):"function"==typeof define&&define.amd?define("interact",function(){return ot}):t.interact=ot}var ne}("undefined"==typeof window?void 0:window),function(){var t,e;null==this.console&&(this.console={}),null==(t=this.console).warn&&(t.warn=this.console.log),null==(e=this.console).error&&(e.error=this.console.log)}.call(this),this.edsc.util.deparam=function(t){var e=function(e,n){var i={"true":!0,"false":!1,"null":null,undefined:t};return+n+""===n?+n:n in i?i[n]:n},n=function(t){return decodeURIComponent(t)},i=function(t,i){var r,o,s,a,l,u,h,c,d={},p=t.replace(/\+/g," ").split("&");for(i=i||e,l=0;l<p.length;l++)if(r=p[l].split("="),o=n(r[0]))if(s=i(o,n(r[1]||"")),/^[^\[\]]+(?:\[[^\]]*\])+$/.test(o))for((a=o.split(/(?:\]?\[|\]$)/)).pop(),h=d,u=0;u<a.length;u++)o=""===a[u]?h.length:a[u],c=u===a.length-1?s:h[o]||(isNaN(a[u+1])?{}:[]),h=h[o]=c;else Array.isArray(d[o])?d[o].push(s):d[o]=o in d?[d[o],s]:s;return d};return i.reviver=e,i}(),interact(".master-overlay-main").resizable({restrict:{restriction:function(){var t=$("#main-toolbar").position().top+$("#main-toolbar").outerHeight();return{x:0,y:t,height:$(window).height()-t-$("footer").outerHeight()-50}},endOnly:!1},preserveAspectRatio:!1,edges:{left:!1,right:!1,bottom:!1,top:!0}}).on("resizemove",function(t){var e=t.target;e.style.top=100-t.rect.height/$(window).height()*100+"%",e.style.height=t.rect.height/$(window).height()*100+"%",$(".master-overlay").masterOverlay("contentHeightChanged")}),this.edsc.util.murmurhash3=function(t,e){var n,i,r,o,s,a,l,u;for(n=3&t.length,i=t.length-n,r=e,s=3432918353,a=461845907,u=0;u<i;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0},function(){this.edsc.util.string={padLeft:function(t,e,n){for(t=""+t,e=""+e;t.length<n;)t=e+t;return t},dasherize:function(t){return t.trim().replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},capitalize:function(t){if(null!=t)return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}}}.call(this),function(){this.edsc.util.array={pairs:function(t,e){var n,i,r,o,s,a;for(null==e&&(e={}),r=null==(s=e.wrap)||s,i=t.length,r||i--,a=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)a.push([t[n],t[(n+1)%i]]);return a}},void 0===Array.prototype.find&&(Array.prototype.find=function(t,e){var n;for(n=0;n<this.length;){if(t.call(e||window,this[n],n,this))return this[n];n++}})}.call(this),function(){var t,e;this.edsc.util.date=(this.edsc.util.string,t=this.edsc.config,e=function(t){var e,n,i;return null!=t?null==(e=(n=new Date(t).toString()).match(/\(([^\)]+)\)/))?n:(i=e[1],(n=(n=n.replace(/^\S+\s/,"")).replace(/:[^:]*$/,""))+" "+i):"Unknown"},{computeRanges:function(e,n){var i,r,o,s,a,l,u,h,c,d,p,f,m,g,v;if(null==n&&(n=t.present()),h=e.startDate,i=e.endDate,l=e.recurring,c=e.startYear,r=e.endYear,u=[],null==h&&null==i)return u;if(l){if(null!=h&&null!=i)for(m=2007,(p=new Date(h)).setUTCFullYear(m),f=p-Date.UTC(m,0,0),(s=new Date(i)).setUTCFullYear(m),a=s-Date.UTC(m,0,0),m=v=c;c<=r?v<=r:v>=r;m=c<=r?++v:--v)g=Date.UTC(m,0,0),u.push([g+f,g+a])}else d=null!=h?h:new Date(Date.UTC(1970,0,0)),o=null!=i?i:new Date(n),u.push([d,o]);return u},isoUtcDateString:function(t){return this.toISOString(t).split("T")[0]},isoUtcDateTimeString:function(t){return this.toISOString(t).replace("T"," ").replace(/\.\d{3}Z/,"")},parseIsoUtcString:function(t){var e,n,i;return t&&0!==t.length?t.match(/^\d{4}(?:\D\d{1,2}){0,5}Z?$/)?(0===(n=t.split(/\D/g))[n.length-1].length&&n.pop(),1===(i=function(){var t,i,r;for(r=[],t=0,i=n.length;t<i;t++)e=n[t],r.push(parseInt(e,10));return r}()).length&&i.push(1),i[1]--,new Date(Date.UTC.apply(Date,i))):new Date(NaN):null},timeSpanToHuman:function(t,n){return e(t)+" to "+e(n)},dateToHumanUTC:function(t){var e,n;return null!=t?(n=(e=new Date(t).toUTCString()).substring(e.length-3),(e=(e=e.replace(/^\S+\s/,"")).replace(/:[^:]*$/,""))+" "+n):"Unknown"},timeSpanToIsoDate:function(t,e){var n,i;return n=null!=t?t.split("T")[0]:void 0,i=null!=e?e.split("T")[0]:void 0,n&&i?n===i?n:n+" to "+i:n?n+" ongoing":i?"Up to "+i:null},toISOString:function(t){return t instanceof Date||(t=new Date(t)),t.toISOString().replace(".-",".")}})}.call(this),function(){var __slice=[].slice;this.edsc.util.xhr=function(window,document,csrfToken,$){var callbacks,deferredXHR,doXHR,exports,getTokenExpires,hasPending,isRefreshing,isTokenExpired,realClearTimeout,realSetTimeout,runCallbacks,timeoutPool,wait,xhrPool,xhrs;return callbacks=[],xhrs=0,timeoutPool=[],realSetTimeout=window.setTimeout,realClearTimeout=window.clearTimeout,isRefreshing=!1,hasPending=function(){return xhrPool.length>0||timeoutPool.length>0||edscplugin.hasPending()},runCallbacks=function(){var t;for(t=[];!hasPending()&&callbacks.length>0;)t.push(callbacks.pop()());return t},edscplugin.onAllComplete(runCallbacks),window.setTimeout=function(){var args,f,id,onTimeout;return f=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],id=null,onTimeout=function(){var index;try{return"string"==typeof f?eval(f):f()}finally{index=timeoutPool.indexOf(id),index>-1&&timeoutPool.splice(index,1),runCallbacks()}},id=realSetTimeout.apply(window,[onTimeout].concat(args)),timeoutPool.push(id),id},window.clearTimeout=function(t){var e;(e=timeoutPool.indexOf(t))>-1&&timeoutPool.splice(e,1),realClearTimeout(t)},xhrPool=[],$(document).ajaxSend(function(t,e){return e.setRequestHeader("X-CSRF-Token",csrfToken),e.setRequestHeader("edsc-echo-env",window.echoEnv),e.id=xhrs++,xhrPool.push(e.id)}).ajaxComplete(function(t,e){var n;return(n=xhrPool.indexOf(e.id))>-1&&xhrPool.splice(n,1),runCallbacks()}),wait=function(t){return setTimeout(function(){return callbacks.push(t)},0)},deferredXHR=function(){var t,e,n;return n=arguments[0],t=2<=arguments.length?__slice.call(arguments,1):[],e=$.Deferred(),isTokenExpired()?isRefreshing?wait(function(){return doXHR.apply(null,[e,n].concat(__slice.call(t)))}):(console.log("Refreshing URS token"),isRefreshing=!0,$.ajax({url:"/refresh_token",method:"get",dataType:"json",success:function(i){return null!=i&&(window.tokenExpiresIn=i.tokenExpiresIn,window.tokenLoadTime=+new Date),isRefreshing=!1,doXHR.apply(null,[e,n].concat(__slice.call(t)))},error:function(){return window.location.href="/login"}})):doXHR.apply(null,[e,n].concat(__slice.call(t))),e},doXHR=function(){var t,e,n,i;if(e=arguments[0],n=arguments[1],t=3<=arguments.length?__slice.call(arguments,2):[],"pending"===e.state())return(i=$[n].apply($,t)).done(function(){return e.resolve()}),i.fail(function(t){return 401===t.status&&$.ajax({url:"/logout",method:"get",dataType:"json",success:function(){return window.location.reload()}}),e.reject()}),e.fail(function(){return i.abort()})},isTokenExpired=function(){var t;return null!=(t=getTokenExpires())&&new Date>t},getTokenExpires=function(){var t,e;return t=window.tokenExpiresIn,e=window.tokenLoadTime,null!=t?e+t:null},{hasPending:hasPending,wait:wait,isTokenExpired:isTokenExpired,getTokenExpires:getTokenExpires,ajax:function(){var t;return t=1<=arguments.length?__slice.call(arguments,0):[],deferredXHR.apply(null,["ajax"].concat(__slice.call(t)))},post:function(){var t;return t=1<=arguments.length?__slice.call(arguments,0):[],deferredXHR.apply(null,["post"].concat(__slice.call(t)))},getJSON:function(){var t;return t=1<=arguments.length?__slice.call(arguments,0):[],deferredXHR.apply(null,["getJSON"].concat(__slice.call(t)))}}}(window,document,this.edsc.config.csrfToken,jQuery)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};this.edsc.util.url=function(t,n,i,r,o,s,a,l,u){var h,c,d,p,f,m,g,v,y,_,b,w,x,S,C,E,M,L,T,k,D,P,O,I,N,A,F;for(m=function(){function t(t,e){this.from=t,this.to=e}return t.prototype.swap=function(t,e,n){var i;if(e!==n)return i=t[e],delete t[e],null!=i?t[n]=i:void 0},t.prototype.compress=function(t){return this.swap(t,this.from,this.to)},t.prototype.inflate=function(t){return this.swap(t,this.to,this.from)},t}(),h=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return e(t,m),t.prototype.compress=function(e){var n;return null!=(n=e[this.from])&&(e[this.from]=n.join("!")),t.__super__.compress.call(this,e)},t.prototype.inflate=function(e){var n;if(t.__super__.inflate.call(this,e),"number"==typeof(n=e[this.from])&&(n=n.toString()),null!=n)return e[this.from]=n.split("!")},t}(),f=function(){function t(t,e,n){this.path=t,this.to=e,this.isArray=n,this.from=this.to}return e(t,h),t.prototype.compress=function(e){var n,i,r,o,s,a;for(n=e,o=0,s=(a=(i=this.path).slice(0,-1)).length;o<s;o++)if(null==(n=n[a[o]]))return;if(r=n[i[i.length-1]],delete n[i[i.length-1]],null!=r&&(e[this.to]=r),this.isArray)return t.__super__.compress.call(this,e)},t.prototype.inflate=function(e){var n,i,r,o,s,a;if(e[this.to]){for(this.isArray&&t.__super__.inflate.call(this,e),i=e,o=0,s=(a=(r=this.path).slice(0,-1)).length;o<s;o++)null==i[n=a[o]]&&(i[n]={}),i=i[n];return i[r[r.length-1]]=e[this.to],delete e[this.to]}},t}(),c=function(){function t(t,e){this.key=t,this.compressor=e}return t.prototype.eachChild=function(t,e){var n,i,r,o,s;if(i=t[this.key],r=this.compressor,null!=i&&Array.isArray(i))for(o=0,s=i.length;o<s;o++)null!=(n=i[o])&&r[e](n);return null},t.prototype.compress=function(t){return this.eachChild(t,"compress")},t.prototype.inflate=function(t){return this.eachChild(t,"inflate")},t}(),d=function(){function t(t){this.key=t}return t.prototype.compress=function(t){var e,n,i,r;if((r=t[this.key])&&r.length>0)return n=r[0].split("-")[1],(e=function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(i.split("-")[0].slice(1));return n}()).push(n),t[this.key]=e.join("!")},t.prototype.inflate=function(t){var e,n,i,r;if(i=t[this.key])return r=i.split("!"),e=r.pop(),t[this.key]=function(){var t,i,o;for(o=[],t=0,i=r.length;t<i;t++)n=r[t],o.push("G"+n+"-"+e);return o}()},t}(),p=function(){function t(t){this.key=t}return t.prototype.compress=function(t){var e,n;if(n=t[this.key],e=[],n&&n.length>0)return n.map(function(t){return t.match(/^[0-9]+$/)?e.push(t):e.push(a(t))}),t[this.key]=e.join("!")},t.prototype.inflate=function(t){var e;return(null!=(e=t[this.key])?e.constructor:void 0)===Number&&(e=e.toString()),t[this.key]=null!=e?e.split("!"):void 0},t}(),_=[new m("placename","qp"),new m("temporal","qt"),new m("free_text","q"),new m("original_keyword","ok"),new m("point","sp"),new m("bounding_box","sb"),new m("line","sl"),new m("line","sg"),new m("all_collections","ac"),new f(["two_d_coordinate_system","name"],"s2n"),new f(["two_d_coordinate_system","coordinates"],"s2c"),new h("features","ff"),new h("data_center_h","fdc"),new h("project_h","fpj"),new h("platform_h","fp"),new h("instrument_h","fi"),new h("processing_level_id_h","fl"),new c("pg",new m("temporal","qt")),new c("pg",new m("day_night_flag","dnf")),new c("pg",new m("browse_only","bo")),new c("pg",new m("online_only","oo")),new c("pg",new m("cloud_cover","cc")),new c("pg",new m("orbit_number","on")),new c("pg",new m("equator_crossing_longitude","ecl")),new c("pg",new m("equator_crossing_date","ecd")),new c("pg",new h("readable_granule_name","id")),new c("pg",new h("readable_granule_name","ur")),new c("pg",new f(["exclude","echo_granule_id"],"x")),new c("pg",new f(["exclude","cwic_granule_id"],"cx")),new c("pg",new d("x")),new c("pg",new p("cx"))],M=[],C=A=0;A<30;C=++A)M.push(new f(["science_keywords_h",C,"topic"],"fst"+C,!1)),M.push(new f(["science_keywords_h",C,"term"],"fsm"+C,!1)),M.push(new f(["science_keywords_h",C,"variable_level_1"],"fs1"+C,!1)),M.push(new f(["science_keywords_h",C,"variable_level_2"],"fs2"+C,!1)),M.push(new f(["science_keywords_h",C,"variable_level_3"],"fs3"+C,!1)),M.push(new f(["science_keywords_h",C,"detailed_variable"],"fsd"+C,!1));return _=_.concat(M),function(){},F=function(t){var e,n,i,r,o;if(t.science_keywords_h){for(i=0,r=(o=t.science_keywords_h).length;i<r;i++)(e=o[i])&&(n||(n=[])).push(e);return t.science_keywords_h=n}},y=function(t){var e,n;for(t=r(!0,{},t),F(t),e=0,n=_.length;e<n;e++)_[e].compress(t);return t},E=function(t){var e,n,i;for(t=r(!0,{},t),F(t),e=n=i=_.length-1;i<=0?n<=0:n>=0;e=i<=0?++n:--n)_[e].inflate(t);return t},T=function(){return i.getState().cleanUrl.replace(/^[^\/]*\/\/[^\/]*/,"").replace(/%5B/g,"[").replace(/%5D/g,"]")},k=function(){var t;return null!=(t=T().split("?")[1])?t:""},I=null,P=null,O=null,S=function(){return O},x=function(e){var n,i;return null==e?"":(e=(e=(e=e.replace(/^\/portal\/[\w]+/,"")).replace(/([?&])portal=[^&]*&?/g,"$1")).replace(/\?$/,""),(n=(null!=(i=t.location.pathname.match(/^\/?portal\/[\w]+/))?i[0]:void 0)||"").length>0&&0!==n.indexOf("/")&&(n="/"+n),(""+n+e).replace(/\/\//g,"/"))},w=function(e,n){if(P!==e)return console.log("Fetching project "+e),P=e,u({method:"get",dataType:"json",url:"/projects/"+e,success:function(r){var o;return n.length>0&&(o="&",-1===r.path.indexOf("?")&&(o="?"),r.path+=o+n),null!=r.new_id&&(P=r.new_id,i.pushState("","","/"+r.path.split("?")[0]+"?projectId="+P)),null!=r.user_id&&-1===r.user_id&&i.pushState("","",r.path),I=r.path,O=r.name,console.log("Fetched project "+e),console.log("Path: "+r.path),console.log("Project Name: "+r.name),$(t).trigger("edsc.pagechange")}})},N=function(t,e,r){var o,s;return null==r&&(r=null),s=null!=P?P:"",I=t,console.log("Saving project "+s),console.log("Path: "+t),console.log("Workspace Name: "+r),o={path:x(t),workspace_name:r},u({method:"post",dataType:"text",url:"/projects?id="+s,data:o,success:function(o){if(console.log("Saved project "+s),console.log("Path: "+t),P=o,i.pushState(e,n.title,x("/"+t.split("?")[0]+"?projectId="+P)),null!=r)return $(n).trigger("edsc.saved")}})},v=function(){var t,e,n,i;return-1!==(n=T()).indexOf("projectId=")?(t=(e=s(n.split("?")[1])).projectId+"",delete e.projectId,null!=I&&P===t?i=I:w(t,o(e))):i=n,null!=i&&(i=i.replace(/^\/#/,"/")),i},g=function(){var t;if(t=v())return t.replace(/^\/portal\/[\w]+/,"")},L=function(t,e,r){if(null==e&&(e=n.title),null==r&&(r=null),null!=g())return t=g().replace(/^[^\?]*/,t),i.pushState(r,e,x(t))},D=function(t,e,r,s){var a,u,h,c,d;if(null==r&&(r=!1),null==s&&(s=null),(u=o(y(e)).replace(/%5B/g,"[").replace(/%5D/g,"]")).length>0&&(u="?"+u),h=/([?&])(m=[^&]*&?)|(tl=[^&]*&?)/g,c=u.replace(h,"$1"),d=("?"+k()).replace(h,"$1"),0===c.length&&"?"===d&&(c="?"),T().split("?")[0]===t&&d===c||$(n).trigger("pageview",[t,e]),t=t.replace(/^\/#/,"/"),a=(t+=u).length>l.urlLimit&&-1===t.indexOf("cmr_env="),!s&&!a||!(t!==I||s&&O!==s))return!(!g()||g()===t)&&(I=t,P=null,r?i.pushState(e,n.title,x(t)):i.replaceState(e,n.title,x(t)),!0);N(t,e,s)},$(t).on("statechange anchorchange",function(){if(g()!==I)return $(t).trigger("edsc.pagechange"),I=g()}),{getProjectName:S,pushPath:L,saveState:D,realQuery:k,cleanPath:g,currentParams:function(){return E(s(b()))},currentQuery:b=function(){var t,e,n,i,r,o,s;return null==(t=null!=(r=v())?r.split("?"):void 0)?"":(e=null!=(o=t[0].match(/^\/portal\/([\w]+)/))?o[1]:void 0,i=null!=(s=t[1])?s:"",e&&(n="portal="+e,i.length>0&&(n="&"+n),i+=n),i)},fullPath:x}}(window,document,History,jQuery.extend,jQuery.param,this.edsc.util.deparam,this.edsc.util.murmurhash3,this.edsc.config,this.edsc.util.xhr.ajax)}.call(this),function(){var t,e,n,i,r,o={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},a=[].slice;this.edsc.util.plugin=(t=document,e=jQuery,n=this.edsc.util.string,i=function(t,n,i,r){return function(o){var s,a,l;return((a=e(this)).is("a")||0===e(o.target).closest("a").length)&&(0===(s=a.closest(i)).length&&null!=(l=a.attr("href"))&&l.length>1&&(s=e(l)),s[t](n,a.attr(r)),o.preventDefault(),o.stopPropagation()),!1}},r=function(r,a){var l,u,h,c,d,p,f,m,g,v;for(c in m=["constructor","destroy"],l=e(t),p="."+(d=n.dasherize(r)),v=[],g=a.prototype)o.call(g,c)&&(g[c],s.call(m,c)>=0||0===c.indexOf("_")?v.push(void 0):(f="."+(u=d+"-"+n.dasherize(c)),h=i(r,c,p,"data-"+u),v.push(l.on("click",f,h))));return v},{create:function(t,n){return n.noClickHandlers||r(t,n),e.fn[t]=function(){var i,r,o,s,l,u;return(i=1<=arguments.length?a.call(arguments,0):[]).length>0&&"string"==typeof i[0]?(l=(u=i)[0],i=2<=u.length?a.call(u,1):[],function(){var n,u,h,c;for(c=[],n=0,u=this.length;n<u;n++)o=this[n],(s=e.data(o,t))?/^debug_/.test(l)?((h=l.split("_"))[0],r=2<=h.length?a.call(h,1):[],c.push(s[r.join("_")])):"destroy"===l?(e.removeData(o,t),"function"==typeof(null!=s?s.destroy:void 0)?c.push(s.destroy()):c.push(void 0)):/^_/.test(l)||"function"!=typeof(null!=s?s[l]:void 0)?(console.error("Could not call "+l+" on "+t+" instance:",o),c.push(null)):c.push(s[l].apply(s,i)):(console.warn(t+" not found on element"),c.push(o));return c}.call(this)[0]):i.length<2?this.each(function(){var r,o;if(o=i[0],null==e.data(this,t))return r=new n(e(this),t,o),e.data(this,t,r)}):(console.error("Bad arguments to "+t+":",i),this)}},Base:function(){function t(t,e,i){this.root=t,this.namespace=e,this._options=i,this.cssScope=n.dasherize(this.namespace)}return t.prototype.destroy=function(){},t.prototype.scope=function(t,e){var n,i,r,o,s;for(null==e&&(e={}),n="",o=0,s=(r=[".","is-"]).length;o<s;o++)i=r[o],0===t.indexOf(i)&&(n+=i,t=t.substring(i.length));return""+n+this.cssScope+"-"+t},t.prototype.scopedEventName=function(t){return this.namespace+"."+t},t}()})}.call(this),function(){this.edsc.util.metrics={createPageView:function(t,e){var n,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x,S,C,E;if("undefined"!=typeof ga&&null!==ga){if(ga("set","dimension1",null!=e.free_text?e.free_text.toLowerCase():null),c=null,null!=e.bounding_box&&(c="Bounding Box"),null!=e.polygon&&(c="Polygon"),null!=e.point&&(c="Point"),ga("set","dimension2",c),d=null,null!=e.temporal&&(d=e.temporal.split(",").length>2?"Recurring Temporal":"Standard Temporal"),ga("set","dimension3",d),i=null,r=null,null!=e.p)for(l=f=0,y=(n=e.p.split("!")).length;f<y;l=++f)(a=n[l]).length>0&&(0===l?i=a:r=a);for(ga("set","dimension4",i),ga("set","dimension5",r),s=[],m=0,_=(o=["category","features","data_center","project","platform","instrument","processing_level_id"]).length;m<_;m++)if(null!=e[h=o[m]])for(g=0,b=(C=e[h]).length;g<b;g++)p=C[g],s.push(h+"/"+p);if(null!=e.science_keywords)for(v=0,w=(u=["topic","term","variable_level_1","variable_level_2","variable_level_3","detailed_variable"]).length;v<w;v++)if(h=u[v],null!=e.science_keywords[0][h])for(S=0,x=(E=e.science_keywords[0][h]).length;S<x;S++)p=E[S],s.push(h+"/"+p);return ga("set","dimension6",s.length>0?s.join(" ")+" ":null),ga("send","pageview",t)}},createDataAccessEvent:function(t,e){var n,i,r,o,s,a;if("undefined"!=typeof ga&&null!==ga){if(ga("set","dimension7",t),null!=e)for(r=0,o=(s=e.accessMethod).length;r<o;r++)n=s[r],ga("set","dimension8",n.method),n.options,i=n.type,(null!=(a=n.subset)?a.parameters:void 0)&&(i="opendap"),"service"===i&&(i="esi"),ga("set","dimension9",i),ga("send","event","Data Access","Completion","Data Access Completion",1);else ga("send","event","Data Access","Initiation","Data Access Initiation",1);return ga("set","dimension7",null),ga("set","dimension8",null)}},createEvent:function(t){var e;if("undefined"!=typeof ga&&null!==ga&&null!=(e=t.currentTarget.title))return ga("send","event","button","click",e)},createTimelineEvent:function(t){if("undefined"!=typeof ga&&null!==ga)return ga("send","event","button","click","Timeline "+t)},createMapEvent:function(t){if("undefined"!=typeof ga&&null!==ga)return ga("send","event","button","click","Map "+t)},createTiming:function(t,e){if("undefined"!=typeof ga&&null!==ga)return ga("send","timing","ajax",t,e)},createMapEdit:function(t,e,n){var i,r,o,s,a,l;if("undefined"!=typeof ga&&null!==ga&&(null!=t?t.length:void 0)===(null!=e?e.length:void 0)){for(i=0,r=a=0,l=t.length;a<l;r=++a)o=t[r],s=e[r],i+=o.distanceTo(s);return ga("send","event","Spatial Edit",n,"",Math.round(i))}}}}.call(this),function(){this.edsc.util.visibility={isElementInViewPort:function(t){var e;return(e=t.getBoundingClientRect()).top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}}}.call(this),function(){var t,e,n,i=[].slice;window.edsc.map.Coordinate=(t=L,e=Math.PI/180,n=180/Math.PI,function(){function r(t,e,n,i,r){this.phi=t,this.theta=e,this.x=n,this.y=i,this.z=r}return r.fromLatLng=function(){var t,n,o,s;return 1===(t=1<=arguments.length?i.call(arguments,0):[]).length?(n=(s=t[0]).lat,o=s.lng):(n=t[0],o=t[1]),r.fromPhiTheta(n*e,o*e)},r.fromPhiTheta=function(t,e){var n,i,o,s;for(n=Math.PI,i=Math.cos,s=Math.sin,o=e;t>=n;)t-=2*n;for(;t<n;)t+=2*n;for(t>n/2&&(t=n-t,e+=n),t<-n/2&&(t=-n-t,e+=n);e>=n;)e-=2*n;for(;e<-n;)e+=2*n;return e===-n&&o>0&&(e=n),Math.abs(t)===n/2&&(e=o),new r(t,e,i(t)*i(e),i(t)*s(e),s(t))},r.fromXYZ=function(t,e,n){var i,o,s;return 0==(i=t*t+e*e+n*n)&&(i=t=1),t*=o=1/Math.sqrt(i),e*=o,n*=o,s=Math.atan2(e,t),new r(Math.asin(n),s,t,e,n)},r.prototype.dot=function(t){
return this.x*t.x+this.y*t.y+this.z*t.z},r.prototype.cross=function(t){var e,n,i;return e=this.y*t.z-this.z*t.y,n=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x,r.fromXYZ(e,n,i)},r.prototype.distanceTo=function(t){return Math.acos(this.dot(t))},r.prototype.toLatLng=function(){var e,i;return e=n*this.phi,i=n*this.theta,null!=t?new t.LatLng(e,i):{lat:e,lng:i}},r.prototype.toString=function(){var t;return"("+(t=this.toLatLng()).lat.toFixed(3)+", "+t.lng.toFixed(3)+")"},r.prototype.toXYZString=function(){return"<"+this.x.toFixed(3)+", "+this.y.toFixed(3)+", "+this.z.toFixed(3)+">"},r}())}.call(this),function(){var t,e,n;(t=window.edsc.map).Arc=(e=t.Coordinate,n=1e-8,function(){function t(t,e){var n;e.theta<t.theta&&(e=(n=[t,e])[0],t=n[1]),Math.abs(e.theta-t.theta)>Math.PI?(this.coordB=t,this.coordA=e):(this.coordA=t,this.coordB=e),this.normal=this.coordA.cross(this.coordB)}return t.prototype.inflection=function(){var t,n,i,r,o;return t=this.normal.toLatLng(),n=-(r=-90+Math.abs(t.lat)),o=t.lng,(i=t.lng+180)>180&&(i-=360),this.coversLongitude(i)?e.fromLatLng(n,i):this.coversLongitude(o)?e.fromLatLng(r,o):null},t.prototype.coversLongitude=function(t){var e,n,i;return e=t*Math.PI/180,i=Math.min(this.coordA.theta,this.coordB.theta),n=Math.max(this.coordA.theta,this.coordB.theta),Math.abs(n-i)<Math.PI?i<e&&e<n:e>n||e<i},t.prototype.antimeridianCrossing=function(){var t,i,r,o,s,a,l;return t=Math.abs,this.coordA.theta<this.coordB.theta?null:t(Math.PI-t(this.coordA.theta))<n||t(Math.PI-t(this.coordB.theta))<n?null:t(this.coordA.theta-this.coordB.theta)%Math.PI<n?null:(r=this.normal.x,this.normal.y,l=this.normal.z,t(s=this.coordA.y)<n&&(s=this.coordB.y),t(s)<n?null:t(l)<n&&t(r)<n?null:(o=0,a=r/s,(i=-l/s)>0&&(i=-i,a=-a),e.fromXYZ(i,o,a)))},t}())}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_;(t=window.edsc.map).geoutil=(e=L,n=t.Coordinate,i=t.Arc,r=this.edsc.config,m=null!=e?function(t,n,i){return e.latLng(t,n,i)}:function(t){return t.constructor===Array?2===t.length?{lat:+t[0],lng:+t[1]}:null:null==t?t:null!=t&&null!=t.lat&&null!=t.lng?t:null},s=1e-8,a=1,u=2,o=Math.PI/180,l=180/Math.PI,y=function(t,e){var i,r,a,l,u,h,c,d,p;return p=Math.sin,a=Math.cos,r=Math.atan2,i=Math.PI,n.fromLatLng(t),n.fromLatLng(t),l=t.lat*o,h=t.lng*o,u=e.lat*o,c=e.lng*o,l>i/2-s?i:l<-i/2+s?2*i:((d=r(p(h-c)*a(u),a(l)*p(u)-p(l)*a(u)*a(h-c))%(2*i))<0&&(d+=2*i),d)},v=function(t,e){var n;return e<t&&(e+=360),180==(n=e-t)?0:n>180?n-360:n},_=function(t){var e,n,i,r,o,a;for(i=0,o=t.length,r=a=0;0<=o?a<o:a>o;r=0<=o?++a:--a)e=t[r],n=t[(r+1)%o],i+=v(e,n);return Math.abs(i)<s&&(i=0),i},p=function(t){var e,n,i,r,o,s;for(r=[],o=0,s=t.length;o<s;o++){for((i=t[o]).constructor===Array?(e=i[0],n=i[1]):(e=i.lat,n=i.lng);n>180;)n-=360;for(;n<-180;)n+=360;r.push(m(e,n))}return r},h=function(t,e){var r;return null!=(r=new i(n.fromLatLng(t),n.fromLatLng(e)).antimeridianCrossing())?r.toLatLng():void 0},{gcInterpolate:f=function(t,e){return function(n,i,r,a,u,h,c){var d,p,f,g,v,y,_,b,w,x,S,C,E;if(n(t.lat)===(C=n(e.lat))&&90===C)return t;if(e.lng<t.lng&&(t=(E=[e,t])[0],e=E[1]),g=t.lat*o,_=t.lng*o,v=e.lat*o,b=e.lng*o,w=(d=u((p=2*i(r(a(u((g-v)/2),2)+h(g)*h(v)*a(u((_-b)/2),2))))/2)/u(p))*(h(g)*h(_)+h(v)*h(b)),x=d*(h(g)*u(_)+h(v)*u(b)),S=d*(u(g)+u(v)),f=l*c(S,r(w*w+x*x)),y=l*c(x,w),isNaN(f)||isNaN(y))return t;for(;y<t.lng-s;)y+=360;for(;y>e.lng+s;)y-=360;return m(f,y)}(Math.abs,Math.asin,Math.sqrt,Math.pow,Math.sin,Math.cos,Math.atan2)},area:c=function(t){var e,n,i,r,s,a,l,u,h,c,d,p,m,g,v,y;if(t.length<3)return 0;for(u=[],h=t.length,r=v=0;0<=h?v<h:v>h;r=0<=h?++v:--v)s=t[r],a=t[(r+1)%h],u.push(s),(Math.abs(s.lat-a.lat)>20||Math.abs(s.lng-a.lng)>20)&&u.push(f(s,a));for(e=Math.PI,i=!1,d=0,h=u.length,r=y=0;0<=h?y<h:y>h;r=0<=h?++y:--y)s=u[r],a=u[(r+1)%h],l=u[(r+2)%h],p=s.lng*o,m=a.lng*o,g=l.lng*o,c=a.lat*o,Math.abs(m-p)>e&&(i=!i,m>p?m-=2*Math.PI:m+=2*Math.PI),Math.abs(g-m)>e&&(i=!i,g>m?g-=2*Math.PI:g+=2*Math.PI),d+=(g-p)*Math.sin(c);return i&&(d=4*Math.PI+d),(n=-d/2)<0&&(n=4*Math.PI+n),n},containsPole:d=function(t){var e,n,i,o,h,c,d,p,f,g,v,b,w,x,S;if(t.length<3)return!1;for(t.push(t[1]),n=0,w=(t=function(){var e,n,i;for(i=[],e=0,n=t.length;e<n;e++)f=t[e],i.push(m(f));return i}()).length,d=S=0;0<=w?S<w:S>w;d=0<=w?++S:--S)g=t[(d-1+w)%w],v=t[d],b=t[(d+1)%w],x=(y(v,g)+Math.PI)%(2*Math.PI),p=y(v,b),c=(y(b,v)+Math.PI)%(2*Math.PI),(i=p-x)>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI),Math.abs(Math.PI-Math.abs(i))<s&&(i=0),(o=c-p)>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI),Math.abs(Math.PI-Math.abs(o))<s&&(o=0),n+=i+o;return t.pop(),(n*=l)<-360+s?a|u:n<s?(e=function(){var e,n,i;for(i=[],e=0,n=t.length;e<n;e++)f=t[e],i.push(f.lng);return i}(),(h=_(e))>0?a:h<0?u:(r.debug&&console.warn("Rotation direction is NONE despite containing a pole"),0)):0},dividePolygon:function(t){var e,n,i,r,o,s,l,c,f,v,y,_,b,w,x,S,C,E,M,L,T,k,D,P,O,I,N,A,F,R,j,z,B,U,H,q,W,G,V,$,Z,J,X;if(E=[],e=[],b=[],t&&t[0]&&t[0].constructor===Array&&"number"!=typeof t[0][0]){for(F=0,B=(J=t.slice(1)).length;F<B;F++)_=J[F],_=p(_),_=g(_),b.push(_);t=t[0]}for(t=p(t),t=g(t),r=0!=((i=d(t))&a),o=0!=(i&u),O=-95,I=95,A=[],D=t.length,w=R=0;0<=D?R<D:R>D;w=0<=D?++R:--R)for(T=t[w],k=t[(w+1)%D],s=h(T,k),A.push(T),f=[],null!=s?(M=s.lat,f=T.lng<k.lng?[[M,-180],[M,180]]:[[M,180],[M,-180]]):180===T.lng&&k.lng<0?f=[[T.lat,-180]]:-180===T.lng&&k.lng>0?f=[[T.lat,180]]:180===k.lng&&T.lng<0?f=[[k.lat,-180]]:-180===k.lng&&T.lng>0&&(f=[[k.lat,180]]),j=0,U=f.length;j<U;j++)M=(c=f[j])[0],P=c[1],A.push(m(M,P)),O=Math.max(M,O),I=Math.min(M,I);if(S=[],n=[],C=[],l=null,(v=t.length<A.length)&&(180!==Math.abs(A[0].lng)||180!==Math.abs(A[A.length-1].lng))){for(;180!==Math.abs(A[0].lng);)A.push(A.shift());A.push(A.shift())}for(w=z=0,H=A.length;z<H;w=++z)if(L=A[w],S.push(L),n.push(L),N=A[(w+1)%A.length],S.length>2&&180===Math.abs(L.lng)&&180===Math.abs(N.lng)){if(e.push(n),n=[],y=!1,r&&L.lat===O)for(y=!0,x=(P=L.lng)<0?90:-90,w=W=0;W<=4;w=++W)S.push(m(90,P+w*x));if(o&&L.lat===I)for(y=!0,x=(P=L.lng)<0?90:-90,w=G=0;G<=4;w=++G)S.push(m(-90,P+w*x));y||(l&&l!==L.lng-N.lng?(E.push(S),S=null!=(X=C.pop())?X:[]):(C.push(S),S=[],l=L.lng-N.lng))}for(n.length>0&&e.push(n),S.length>0&&E.push(S),V=0,q=C.length;V<q;V++)S=C[V],E.push(S);if(r&&o&&!v){for(S=[],w=$=0;$<=4;w=++$)S.push(m(90,90*w-180));for(w=Z=0;Z<=4;w=++Z)S.push(m(-90,180-90*w));E.unshift(S)}return{interiors:E,boundaries:e}},makeCounterclockwise:g=function(t){return c(t)>2*Math.PI&&t.reverse(),t},NORTH_POLE:a,SOUTH_POLE:u})}.call(this),function(){var t,e,n,i,r,o,s,a,l,u;(t=window.edsc.map).mbr=(e=t.geoutil.dividePolygon,n=t.Coordinate,i=t.Arc,o=function(t,e){var n,i,r;return n=(r=t<e?[t,e]:[e,t])[0],(i=r[1])-n<180?i:n},s=function(t,e){return o(t,e)===e?t:e},l=function(t){var e,r,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x,S,C,E,M;for(y=91,g=-91,_=181,v=-181,f=(r=function(){var e,i,r;for(r=[],e=0,i=t.length;e<i;e++)p=t[e],r.push(n.fromLatLng(p));return r}()).length,d=[],l=w=0,S=r.length;w<S;l=++w)e=r[l],d.push(e.toLatLng()),b=r[(l+1)%f],(u=new i(e,b).inflection())&&(c=u.toLatLng(),90!==Math.abs(c.lat)&&d.push(c));for(y=g=(a=d[0]).lat,_=v=a.lng,x=0,C=(E=d.slice(1)).length;x<C;x++)h=(M=E[x]).lat,m=M.lng,y=Math.min(y,h),g=Math.max(g,h),90!==Math.abs(h)?(_=s(_,m),v=o(v,m)):(_=Math.min(_,m),v=Math.max(v,m));return[y,_,g,v]},a=function(t,e,n){var i;for(e+=720;n<e;)n+=360;for(i=e+(n-e)/2;t<i-180;)t+=360;return t<e?e-t:t>n?t-n:0},r=1e-8,{mbr:function(t,n){var i,o,s,a,h,c,d,p;return"bounding_box"===t?(s=n[0],d=n[1],[s.lat,s.lng,d.lat,d.lng]):"point"===t?(o=(p=n[0]).lat,h=p.lng,[o-r,h-r,o+r,h+r]):(i=e(n).interiors,c=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)a=i[t],n.push(l(a));return n}(),u(c))},divideMbr:function(t){var e,n,i,r;return i=t[0],r=t[1],e=t[2],(n=t[3])<r?[[i,-180,e,n],[i,r,e,180]]:r===n?[[i,-180,e,180]]:[t]},mergeMbrs:u=function(t){var e,n,i,r,l,u,h,c,d,p,f,m,g,v,y,_;for(e=t[0],g=t.slice(1),f=e[0],m=e[1],c=e[2],d=e[3],v=0,y=g.length;v<y;v++)n=(_=g[v])[0],r=_[1],i=_[2],u=_[3],f=Math.min(f,n),c=Math.max(c,i),l=a(r,m,d),h=a(u,m,d),p=a(d,r,u),0===l||0===h||0===p?(m=s(m,r),d=o(d,u)):l<h?l<0?m=r:d=u:Math.abs(l-360)<Math.abs(h+360)?m=r:d=u;return[f,m,c,d]}})}.call(this),function(){var t,e;t=ko,e=jQuery,t.observableArray.fn.contains=function(t){return-1!==this.indexOf(t)},t.observableArray.fn.isEmpty=function(){return 0===this().length},t.observableArray.fn.subscribeChange=function(e,n){var i,r,o;return o=null,r=function(t){return o=t.slice(0)},i=function(i){var r,s,a,l,u;for(s=0,a=(l=t.utils.compareArrays(o,i)).length;s<a;s++)u=l[s],e=u.status,r=u.value,"name"===e&&"function"==typeof n&&n(r);return o=null},this.subscribe(r,void 0,"beforeChange"),this.subscribe(i)},t.observableArray.fn.subscribeAdd=function(t){return this.subscribeChange("added",t)},t.observableArray.fn.subscribeRemove=function(t){return this.subscribeChange("deleted",t)},t.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}},t.virtualElements.allowedBindings.stopBinding=!0,t.asyncComputed=function(e,n,i,r){var o,s,a,l,u,h,c;return c=t.observable(e),l=t.observable(!1),a=!0,s=function(){return i.call(r,c.peek(),c,a),a=!0},o=t.computed({read:function(){var t;return t=c.peek(),s(),t},write:c,deferEvaluation:!0}),(h=t.computed({read:function(){return l()||(o.extend({throttle:n}),l(!0)),c()},write:function(t){return l()||l(!0),c(t)},deferEvaluation:!0})).isSetup=l,h.readImmediate=function(){return s(),a=!1},u=h.dispose,h.dispose=function(){return u(),o.dispose()},h},t.bindingHandlers.showModal={init:function(){},update:function(n,i){var r;return r=t.unwrap(i())?"show":"hide",e(n).modal(r)}},t.bindingHandlers.loadDefaultForm={init:function(){},update:function(n,i){var r,o,s,a,l,u,h,c,d,p;if((r=e(n)).data("echoforms")&&(r.echoforms("destroy"),r.off("echoforms:modelchange")),(u=t.unwrap(i())).hasBeenReset=!0,null!=(l=u.method())){for(a=null,c=0,d=(p=u.availableMethods).length;c<d;c++)if((o=p[c]).name===l){a=o;break}return null!=a&&null!=(null!=o?o.form:void 0)?(s=o.form,r.echoforms({form:s,prepopulate:u.prepopulatedFields()}),h=function(){var t;return t=e(this).echoforms("isValid"),u.isValid(t),t?(u.model=e(this).echoforms("serialize"),u.rawModel=e(this).echoforms("serialize",{prune:!1})):(u.model=null,u.rawModel=null),null},r.on("echoforms:modelchange",h),h.call(r)):u.isValid(!0),u.isReadFromDefaults=!0}}},t.bindingHandlers.echoform={init:function(){},update:function(n,i){var r,o,s,a,l,u,h,c,d,p,f,m,g,v;if((r=e(n)).data("echoforms")&&(r.echoforms("destroy"),r.off("echoforms:modelchange")),null!=(u=(c=t.unwrap(i())).method())){for(l=null,f=0,m=(g=c.availableMethods).length;f<m;f++)if((o=g[f]).name===u){l=o;break}if(null!=l&&null!=(null!=o?o.form:void 0)){o.form=o.form.replace("<ecs:email/>","<ecs:email>"+edsc.page.account.email()+"</ecs:email>"),d=a=o.form,null==(h=c.hasBeenReset?c.rawModelInitialValue:c.rawModel)||c.isReadFromDefaults||(null!=(v=/<ecs:SUBAGENT_ID>[\s\S]*<ecs:value>(.*)<\/ecs:value>[\s\S]*<\/ecs:SUBAGENT_ID>/.exec(h))&&v[1],a=a.replace(/(?:<instance>)(?:.|\n)*(?:<\/instance>)/,"<instance>\n"+h+"\n</instance>"));try{r.echoforms({form:a,prepopulate:c.prepopulatedFields()})}catch(y){s=y,console.log("Error caught rendering saved model, retrying:",s),a=d,r.echoforms({form:a,prepopulate:c.prepopulatedFields()})}p=function(){var t;return t=e(this).echoforms("isValid"),c.isValid(t),t?(c.model=c.hasBeenReset?c.modelInitialValue:e(this).echoforms("serialize"),c.rawModel=c.hasBeenReset?c.rawModelInitialValue:e(this).echoforms("serialize",{prune:!1})):(c.model=null,c.rawModel=null),null},r.on("echoforms:modelchange",p),p.call(r)}else c.isValid(!0);c.isReadFromDefaults=!0}return null}},t.bindingHandlers.mapdisplay={init:function(){},update:function(e,n){for(var i,r,o,s,a,l,u;e.firstChild;)e.removeChild(e.firstChild);if(r=t.unwrap(n()))return l=r[0],u=r[1],o=r[2],s=r[3],(a=document.createElement("div")).className="access-mbr",i=2,a.style.top=Math.round(90-o-i)+"px",a.style.left=Math.round(u+180-i)+"px",a.style.height=Math.round(o-l+2*i)+"px",a.style.width=Math.round(s-u+2*i)+"px",e.appendChild(a)}},t.bindingHandlers.truncatedText={update:function(e,n,i){var r,o,s;o=t.utils.unwrapObservable(n()),r=t.utils.unwrapObservable(i().maxLength)||100,s=o.length>r?o.substring(0,r)+"...":o,t.bindingHandlers.text.update(e,function(){return s})}},t.bindingHandlers.descriptionLinks={init:function(n,i,r,o,s){var a,l,u,h,c;for(u=h=0,c=(a=e(e.parseHTML(s.$data.description))).length;h<c;u=++h)"A"===(l=a[u]).nodeName&&l.host!==window.location.host?(e(l).attr("target","_blank"),e(l).addClass("ext"),a[u]=l.outerHTML):"A"===l.nodeName&&l.host===window.location.host?a[u]=e(l.outerHTML).text():a[u]=e(l).text();return t.applyBindingsToNode(n,{html:function(){var t,e,n;for(n=[],t=0,e=a.length;t<e;t++)l=a[t],n.push(l);return n}().join("")},s)}}}.call(this),function(){var t,e=[].slice;this.edsc.models.KnockoutModel=(t=ko,function(){function n(){}return n.prototype.reference=function(){var e;return null==this.refCount&&(this.refCount=t.observable(0)),(e=this.refCount)(e.peek()+1),this},n.prototype.shouldDispose=function(){return!0},n.prototype.dispose=function(){var t,e;if(e=0,null!=(t=this.refCount)&&t(e=t.peek()-1),e<=0&&this.shouldDispose())return this.destroy()},n.prototype.destroy=function(){var t,e,n,i;for(null==this._disposables&&(this._disposables=[]),e=0,n=(i=this._disposables).length;e<n;e++)null!=(t=i[e])&&"function"==typeof t.dispose&&t.dispose();return this._disposables=[]},n.prototype.disposable=function(t){return null==this._disposables&&(this._disposables=[]),this._disposables.push(t),t},n.prototype.computed=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],this.disposable(t.computed.apply(t,n))},n.prototype.asyncComputed=function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],this.disposable(t.asyncComputed.apply(t,n))},n}())}.call(this),function(){var t,e,n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.edsc.models.DetailsModel=(ko,t=this.edsc.models.KnockoutModel,e=this.edsc.util.xhr.ajax,n=jQuery,document,function(){function i(){return i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype._computeGranuleDetails=function(){return this._computeDetails("granule")},i.prototype._computeCollectionDetails=function(){return this._computeDetails("collection")},i.prototype._computeDetails=function(t){var i,r,o,s;if(null!=(i=this.id))return r="/"+t+"s/"+i+".json",o=setInterval((s=this,function(){if(!window.edsc.util.xhr.hasPending())return console.log("Request "+r,s),clearTimeout(o),e({dataType:"json",url:r,retry:function(){return s._computeDetails(t)},success:function(e){var i;if(i=e[t],"collection"===t&&(i.summaryData=s),s.details(i),s.detailsLoaded(!0),n(".long-paragraph").height()<142)return n(".description-toggle").hide()}})}),0)},i}())}.call(this),function(){var t;this.edsc.models.page.setCurrent=(t=jQuery,function(e){return t(document).ready(function(){return ko.applyBindings(e),e.bindingsLoaded(!0)}),this.edsc.models.page.current=this.edsc.page=e})}.call(this),function(){}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v={}.hasOwnProperty,y=function(t,e){function n(){this.constructor=t}for(var i in e)v.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.edsc.models.data.GridCondition=(t=ko,e=this.edsc.models.KnockoutModel,i=function(){function t(t,e,n){this.label=t,this.min=e,this.max=n}return t}(),n=function(){function t(t,e,n,i){this.name=t,this.label=e,this.axis0=n,this.axis1=i}return t}(),p=[["CALIPSO","CALIPSO","orbit",1,75e3,"path",1,233],["MISR","MISR","path",1,233,"block",1,180],["MODIS Tile EASE","MODIS EASE Grid","h",0,18,"v",0,38],["MODIS Tile SIN","MODIS Sinusoidal","h",0,35,"v",0,17],["WELD ALASKA Tile","WELD ALASKA Tile","h",0,16,"v",0,13],["WELD CONUS Tile","WELD CONUS Tile","h",0,32,"v",0,21],["WRS-1","WRS-1 (Landsat 1-3)","path",1,251,"row",1,248],["WRS-2","WRS-2 (Landsat 4+)","path",1,233,"row",1,248]],d=function(){var t,e,d;for(d=[],t=0,e=p.length;t<e;t++)g=p[t],m=g[0],f=g[1],o=g[2],a=g[3],s=g[4],u=g[5],c=g[6],h=g[7],r=new i(o,a,s),l=new i(u,c,h),d.push(new n(m,f,r,l));return d}(),function(){function n(){var e,n,i,r,o,s;this.available=d,this.selected=t.observable(null),this.coordinates=t.observable(null),this.error=this.computed((e=this,function(){var t,n,i,r,o,s,a,l,u,h,c,d,p;if(null!=(n=null!=(p=e.coordinates())?p.trim():void 0)&&n.length>0)for(u=0,c=(i=n.split(/\s+/)).length;u<c;u++){if(2!==(l=(t=i[u]).split(",")).length)return"Coordinate must be two comma-separated numbers: "+t;for(h=0,d=l.length;h<d;h++){if(null==(r=(a=l[h]).match(/^(\d+)(?:-(\d+))?$/)))return"Invalid coordinate: "+a;if(r[0],s=r[1],o=r[2],(s=parseInt(s,10))>(o=parseInt(o,10)))return"Range minimum is greater than its maximum: "+a}}return null})),this.queryCoordinates=this.computed({read:(i=this,function(){var t;return null!=(t=i.coordinates())?t.trim().replace(/,/g,":").replace(/\s+/g,",").replace(/(^|,)(\d+)($|:)/g,"$1$2-$2$3").replace(/(^|:)(\d+)($|,)/g,"$1$2-$2$3"):null}),write:(n=this,function(t){var e;return e=null,null!=t&&(e=t.replace(/,/g," ").replace(/:/g,",").replace(/(\d+)-(\d+)/g,function(t,e,n){return e===n?e:t})),n.coordinates(e)})}),this.queryCondition=this.computed({read:(o=this,function(){var t,e;return(e=o.selected())?(t={name:e.name},o.queryCoordinates()&&!o.error()&&(t.coordinates=o.queryCoordinates()),t):null}),write:(r=this,function(t){var e,n;return m=null!=t?t.name:void 0,n=function(){var t,n,i,r;for(r=[],t=0,n=(i=this.available).length;t<n;t++)(e=i[t]).name===m&&r.push(e);return r}.call(r),r.selected(n[0]),r.queryCoordinates(null!=t?t.coordinates:void 0)})}),this.hint=this.computed((s=this,function(){var t;return null!=(t=s.selected())?"Enter "+t.axis0.label+" and "+t.axis1.label+' coordinates separated by spaces, e.g. "2,3 5,7 8,8"':"Choose a coordinate system"}))}return y(n,e),n.prototype.clear=function(){return window.edsc.page.ui.spatialType.isGrid(!1),this.selected(null),this.coordinates(null)},n}())}.call(this),function(){var t,e;this.edsc.models.data.GranuleAttributes=(t=ko,e=this.edsc.util.date,function(){function n(e){this._definitions=t.observable([]),e&&this.definitions(e),this.queryCondition=t.computed({read:this._readQueryCondition,write:this._writeQueryCondition,owner:this})}return n.prototype.definitions=function(e){var n,i,r,o;for(i=0,r=(o=null!=e?e:[]).length;i<r;i++)null==(n=o[i]).value&&(n.value=t.observable(null)),null==n.error&&(n.error=t.observable(null));return this._definitions(e)},n.prototype.isValid=function(){var t,e,n;for(t=0,e=(n=this._definitions()).length;t<e;t++)if(n[t].error())return!1;return!0},n.prototype._readQueryCondition=function(){var t,e,n,i,r,o,s;for(n=null,r=0,o=(s=null!=(e=this._definitions())?e:[]).length;r<o;r++)t=s[r],(null!=(i=this._toQuery(t))?i.length:void 0)>0&&(null==n&&(n=[]),n.push(i.join(",")));return n},n.prototype._writeQueryCondition=function(t){var e,n,i,r,o,s,a,l,u,h,c,d;if(this._definitions()){if(!t)for(t=[],a=0,u=(c=this._definitions()).length;a<u;a++)(n=c[a]).error(null),n.value(null);for(d=[],r=l=0,h=t.length;l<h;r=++l)e=t[r],e=[],o=t[r].split(","),s=this._unescapeComma(o.slice(2).join(" - ")),e.push(o[0]),e.push(o[1]),e.push(s),i=this._definitions(),d.push(function(){var t,r,o;for(o=[],t=0,r=i.length;t<r;t++)(n=i[t]).name===e[1]?(n.error(null),o.push(n.value(this._fromQuery(n,e)))):o.push(void 0);return o}.call(this));return d}},n.prototype._fromQuery=function(t,e){return e[1]===t.name?4===e.length?[e[2],e[3]].join(" - ").trim():e[2]:null},n.prototype._toQuery=function(t){var e,n,i,r,o,s;return r=[],null!=(o=t.value())&&(o=(""+o).trim()),o&&(r.push(t.type.toLowerCase()),r.push(this._escapeComma(t.name)),"STRING"===t.type?r.push(this._escapeComma(o)):1===(s=o.split(/(?:^|\s)-(?:\s|$)/g)).length?r.push(this._escapeComma(o)):2===s.length?(i=s[0].trim(),n=s[1].trim(),r.push(this._escapeComma(i)),r.push(this._escapeComma(n))):r.push(s)),e=this._errorFor(t,r),t.error(e),e&&(r=null),r},n.prototype._escapeComma=function(t){return t.replace(/,/g,"\\,")},n.prototype._unescapeComma=function(t){return t.replace(/\\,/g,",")},n.prototype._errorFor=function(t,e){var n,i,r,o,s,a;if(i=t.type,!e||-1!==i.indexOf("STRING"))return null;if(e.length>4)return"Ranges must only contain two values";for(n=o=0,s=e.length;o<s;n=++o)if(e[n],n>1){if(r="function"==typeof this[a="_validate"+e[0].toUpperCase()]?this[a](e[n]):void 0){if(r.error)return r.error;e[n]=r.value}if(t.begin&&e[n]<t.begin)return"Values must be greater than "+t.begin;if(t.end&&e[n]>t.end)return"Values must be less than "+t.end}return e[2]&&e[3]&&e[2]>e[3]?"Range minimum must be less than maximum":null},n.prototype._validateINT=function(t){var e,n;return""===t?{value:null,error:null}:(n=+t,(isNaN(n)||Math.round(n)!==n)&&(e="Invalid integer: "+this._unescapeComma(t)),{value:n,error:e})},n.prototype._validateFLOAT=function(t){var e,n;return n=+t,isNaN(n)&&(e="Invalid float: "+this._unescapeComma(t)),{value:n,error:e}},n.prototype._validateDATETIME=function(t,n){var i,r,o;return null==n&&(n="date/time"),r=Date.parse(t),isNaN(r)||(o=e.toISOString(r)),isNaN(r)&&(i="Invalid "+n+": "+this._unescapeComma(t)),{value:o,error:i}},n.prototype._validateTIME=function(t){var e;return t.match(/^\d{2}:\d{2}:\d{2}/)||(e="Invalid time: "+this._unescapeComma(t)),{value:t,error:e}},n.prototype._validateDATE=function(t){var e;return null!=(e=this._validateDATETIME(t,"date")).value&&(e.value=e.value.split("T")[0]),e},n}())}.call(this),function(){var t,e,n,i,r,o,s,a,l={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},h=function(t,e){return function(){return t.apply(e,arguments)}};this.edsc.models.ui.Temporal=(t=ko,e=this.edsc.config,n=this.edsc.util.date,i=this.edsc.util.string,r=this.edsc.models.KnockoutModel,a=(new Date).getUTCFullYear(),s=function(){function e(e,r){var o,s,a,l,u,h,c,d,p;this.defaultYear=e,this.isRecurring=r,this.date=t.observable(null),this._invalidDateString=t.observable(null),this._year=t.observable(this.defaultYear),this.year=this.computed({read:(s=this,function(){var t,e;return null!=(e=null!=(t=s.date())?t.getUTCFullYear():void 0)?e:s._year()}),write:(o=this,function(t){var e;return null==t&&(t=o.defaultYear),null!=(e=o.date.peek())&&((e=new Date(e.getTime())).setUTCFullYear(t),o.date(e)),o._year(t)})}),this.humanDateString=this.computed({read:(l=this,function(){var t,e;return null!=l.date()?(t=n.isoUtcDateTimeString(l.date()),l.isRecurring()&&(t=t.substring(5)),t):null!=(e=l._invalidDateString())?e:""}),write:(a=this,function(t){var e;return(null!=t?t.length:void 0)>0?(a.isRecurring()&&(t=a.year()+"-"+t),e=n.parseIsoUtcString(t),isNaN(e.getTime())?(a.date(null),a.isRecurring()&&(t=t.substring(5)),a._invalidDateString(t)):(a.date(e),a._invalidDateString(null))):(a.date(null),a._invalidDateString(null))})}),this.dayOfYearString=this.computed({read:(h=this,function(){var t;return null!=(t=h.date())?t.getUTCFullYear()+"-"+i.padLeft(h.dayOfYear(),"0",3):""}),write:(u=this,function(t){var e,n,i,r;if(i=/(\d{4})-(\d{3})/.exec(t)){if(r=parseInt(i[1],10),n=parseInt(i[2],10),(e=new Date(Date.UTC(r,0,n))).getUTCFullYear()===r)return u.date(e);u.date(null)}else u.date(null)})}),this.dayOfYear=this.computed((c=this,function(){var t,e,n,i,r;return null!=(t=c.date())?(n=864e5,r=2007,i=Date.UTC(r,0,0),e=Date.UTC(r,t.getUTCMonth(),t.getUTCDate()),Math.floor((e-i)/n)):null})),this.queryDateString=this.computed({read:(p=this,function(){return p.date()&&"Invalid Date"!==p.date().toString()?n.toISOString(p.date()):null}),write:(d=this,function(t){var e;return t?e=new Date(t):(e=null,d.year(d.defaultYear)),d.date(e)})})}return u(e,r),e}(),o=function(){function i(){var e;this.clear=h(this.clear,this),this.isRecurring=t.observable(!1),this.allowRecurring=t.observable(!0),this.start=this.disposable(new s(1960,this.isRecurring)),this.stop=this.disposable(new s(a,this.isRecurring)),this.queryCondition=this.computed(this._computeQueryCondition()),this.ranges=this.computed(this._computeRanges,this,{deferEvaluation:!0}),this.isSet=this.computed(this._computeIsSet,this,{deferEvaluation:!0}),this.years=this.computed(this._computeYears()),this.yearsString=this.computed((e=this,function(){return e.years().join(" - ")}))}return u(i,r),i.prototype.fromJson=function(t){return this.queryCondition(t)},i.prototype.serialize=function(){return this.queryCondition()},i.prototype.clear=function(){return this.queryCondition(null)},i.prototype.copy=function(t){return this.queryCondition(t.queryCondition())},i.prototype.intersect=function(t,e){var n,i,r,o,s,a,l,u;if(0===(s=this.ranges()).length)return[t,e];for(a=0,l=s.length;a<l;a++)if(r=(u=s[a])[0],o=u[1],(n=Math.max(t,r))<(i=Math.min(e,o)))return[new Date(n),new Date(i)];return null},i.prototype._computeIsSet=function(){return null!=this.start.date()||null!=this.stop.date()},i.prototype._computeRanges=function(){return n.computeRanges({startDate:this.start.date(),endDate:this.stop.date(),startYear:this.start.year(),endYear:this.stop.year(),recurring:this.isRecurring()},e.present())},i.prototype._computeYears=function(){return{read:(e=this,function(){return e.isRecurring()?[e.start.year(),e.stop.year()]:[]}),write:(t=this,function(e){return t.start.year(e[0]),t.stop.year(e[1])})};var t,e},i.prototype._computeQueryCondition=function(){return{read:(e=this,function(){var t,n,i;return n=e.start,i=e.stop,null==n.date()&&null==i.date()?null:(t=[n.queryDateString(),i.queryDateString()],e.isRecurring()&&(t=t.concat(n.dayOfYear(),i.dayOfYear())),t.join(","))}),write:(t=this,function(e){var n,i,r,o;return null!=e?(n=(o=e.split(","))[0],r=o[1],i=o[2],o[3],t.isRecurring(null!=i)):(t.start.humanDateString(null),t.stop.humanDateString(null)),t.start.queryDateString(n),t.stop.queryDateString(r)})};var t,e},i}(),function(){function t(){var t,e;this.apply=h(this.apply,this),this.applied=t=this.disposable(new o),this.pending=e=this.disposable(new o),e.isRecurring.subscribe(this.disposable(function(){return e.clear()})),t.queryCondition.subscribe(this.disposable(function(t){return e.queryCondition(t)}))}return u(t,r),t.prototype.apply=function(){return this.applied.copy(this.pending)},t}())}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w={}.hasOwnProperty,x=function(t,e){function n(){this.constructor=t}for(var i in e)w.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},S=function(t,e){return function(){return t.apply(e,arguments)}},C=[].slice;this.edsc.models.data.query=(t=ko,e=$.param,n=this.edsc.models.data.GridCondition,i=this.edsc.models.data.GranuleAttributes,r=this.edsc.models.KnockoutModel,o=this.edsc.models.ui.Temporal,s=this.edsc.util.deparam,a=this.edsc.map.mbr,this.edsc.util.url,l=$.extend,-1!==window.location.href.indexOf("/data/configure")&&null!=(b=window.location.href.match(/[?&]ot=([^&$]+)/))&&(_=decodeURIComponent(b[1])),t.extenders.queryable=function(e,n){return n.value=e,e.params=t.computed(null,n,n),e},g=function(){function e(e){t.isObservable(e)||(e=t.observable(e)),this.name=e}return e.prototype.names=function(){var t;return null!=(t=this.name.validValues)?t:[this.name()]},e.prototype.canWrite=function(){var t;return"string"==typeof(t=this.value())&&(t=t.trim()),null!=t&&(null==t.length||t.length>0)},e.prototype.canReadFrom=function(t){var e,n,i;for(e=0,n=(i=this.names()).length;e<n;e++)if(null!=t[i[e]])return!0;return!1},e.prototype.writeTo=function(t){return t[this.name()]=this.value()},e.prototype.readFrom=function(t){var e,n,i,r,o;for(i=0,r=(o=this.names()).length;i<r;i++)if(null!=(n=t[e=o[i]])){this.name(e),this.value(n);break}return null},e.prototype.read=function(){var t;return t=null,this.canWrite()&&(t={},this.writeTo(t)),t},e.prototype.write=function(t){var e;return this.canReadFrom(t)?this.readFrom(t):this.value(null!=(e=this.defaultValue)?e:null)},e}(),y=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,g),t.prototype.writeTo=function(t){var e,n,i,r;return"point"!==(r=(i=this.value().split(":")).shift())&&"bounding_box"!==r&&"line"!==r&&(r="polygon"),i=function(){var t,r,o,s;for(s=[],t=0,r=i.length;t<r;t++){for(o=i[t].split(","),n=o[0],e=o[1],n=parseFloat(n);n<-180;)n+=360;for(;n>180;)n-=360;e=parseFloat(e),e=Math.min(90,e),e=Math.max(-90,e),s.push(n+","+e)}return s}(),"polygon"===r&&i.push(i[0]),t[r]=i.join(",")},t.prototype.canReadFrom=function(t){return null!=t.point||null!=t.bounding_box||null!=t.line||null!=t.polygon},t.prototype.readFrom=function(t){var e,n,i;return n=function(){var n,i,r,o;for(o=[],n=0,i=(r=["point","bounding_box","line","polygon"]).length;n<i;n++)e=r[n],null!=t[e]&&o.push(e);return o}()[0],i=(i=(i=t[n]).replace(/([^,]*,[^,]*)(,|$)/g,"$1:")).slice(0,-1),"polygon"===n&&(i=i.replace(/:[^:]*$/,"")),this.value(n+":"+i)},t}(),p=function(){function t(e,n){this.placename=n,t.__super__.constructor.call(this,e)}return x(t,g),t.prototype.canReadFrom=function(e){return t.__super__.canReadFrom.call(this,e)||null!=e.placename},t.prototype.readFrom=function(t){return this.value([t[this.name()],t.placename].join(""))},t.prototype.canWrite=function(){return t.__super__.canWrite.call(this)&&this.value()!==this.placename()},t.prototype.writeTo=function(t){var e,n;return e=this.placename(),n=this.value(),null!=e&&e.length>0&&null!=n&&-1!==n.indexOf(e)&&(n=n.replace(e,"")),t[this.name()]=n},t}(),d=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,g),t.prototype.names=function(){return["features","campaign_h","data_center_h","project_h","platform_h","instrument_h","science_keywords_h","processing_level_id_h"]},t.prototype.writeTo=function(t){var n,i,r,o,a,u,h;for(i={},a=0,u=(h=this.value()).length;a<u;a++)(r=(n=h[a]).param).indexOf("science_keywords_h")>-1?i[r]=n.title:(null==i[r]&&(i[r]=[]),i[r].push(n.title));return o=e(i),l(!0,t,s(o))},t.prototype.canReadFrom=function(){return!0},t.prototype.readFrom=function(t){var n,i,r,o,s,a,l,u,h,c,d,p,f;for(l={},u=0,c=(p=this.names()).length;u<c;u++)null!=t[r=p[u]]&&(l[r]=t[r]);if(s=[],(o=e(l)).length>0)for(h=0,d=(n=o.split("&")).length;h<d;h++)i=(f=n[h].split("="))[0],a=f[1],s.push({param:decodeURIComponent(i),title:decodeURIComponent(a.replace(/\+/g," "))});return this.value(s)},t}(),u=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,g),t.prototype.canWrite=function(){return!0===this.value()||"true"===this.value()},t}(),f=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,g),t.prototype.canWrite=function(){return!1===this.value()||"false"===this.value()||"gov.nasa.eosdis"===this.value()},t.prototype.readFrom=function(t){var e,n,i,r;for(n=0,i=(r=this.names()).length;n<i;n++)if(null!=t[e=r[n]]){this.name(e),this.value(!1);break}return null},t.prototype.canReadFrom=function(t){var e,n,i,r;for(n=0,i=(r=this.names()).length;n<i;n++)if(null!=t[e=r[n]])return"tag_key"!==e||"gov.nasa.eosdis";return!0},t.prototype.writeTo=function(t){return t[this.name()]="tag_key"!==this.name()||"gov.nasa.eosdis"},t}(),h=function(){function t(e,n){this.delimiter=null!=n?n:"\n",t.__super__.constructor.call(this,e)}return x(t,g),t.prototype.readFrom=function(t){var e,n,i,r,o;for(i=0,r=(o=this.names()).length;i<r;i++)if(null!=(n=t[e=o[i]])){this.name(e),this.value(n.join(this.delimiter));break}return null},t.prototype.writeTo=function(t){return t[this.name()]=this.value().split(this.delimiter)},t}(),c=function(){function t(e,n){this._type=n,t.__super__.constructor.call(this,e)}return x(t,g),t.prototype.writeTo=function(t){var e;return t[e=this.name()]||(t[e]={}),t[this.name()][this._type]=this.value()},t.prototype.canReadFrom=function(t){var e;return null!=(null!=(e=t[this.name()])?e[this._type]:void 0)},t.prototype.readFrom=function(t){return this.value(t[this.name()][this._type])},t.prototype.write=function(t){return this.canReadFrom(t)?this.readFrom(t):this.value([])},t}(),v=function(){function e(){var e,n;this.min=t.observable(),this.max=t.observable(),this.params=t.computed({read:(n=this,function(){var t,e,i;return e=n.min(),t=n.max(),null==e&&null==t?null:(i={},null!=e&&""!==e&&(i.min=e),null!=t&&""!==t&&(i.max=t),i)}),write:(e=this,function(t){return e.min(null!=t?t.min:void 0),e.max(null!=t?t.max:void 0)}),deferEvaluation:!0})}return e}(),m=function(){function e(t){this.parentQuery=t,this._computeOwnParams=S(this._computeOwnParams,this),this._computeGlobalParams=S(this._computeGlobalParams,this),this._computeParams=S(this._computeParams,this),
this._readParams=S(this._readParams,this),this.clearFilters=S(this.clearFilters,this),this.fromJson=S(this.fromJson,this),this.params=this.computed({read:this._computeParams,write:this._readParams,deferEvaluation:!0}),this.ownParams=this.computed({read:this._computeOwnParams,deferEvaluation:!0}),this.globalParams=this.computed({read:this._computeGlobalParams,deferEvaluation:!0})}return x(e,r),e.prototype.queryComponent=function(e,n,i){return null==n&&(n=null),null==i&&(i={}),null==this._all&&(this._all=[]),null==this._components&&(this._components=[]),null==this._propagated&&(this._propagated=[]),null==this._serialized&&(this._serialized=[]),t.isObservable(n)||(e.defaultValue=n,n=t.observable(n)),n=n.extend({queryable:e}),this._all.push(n),!1!==i.query&&this._components.push(n),i.propagate&&this._propagated.push(n),i.ephemeral||this._serialized.push(n),n},e.prototype._readComponents=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;i<r;i++)n=t[i],o.push(n.params(e));return o},e.prototype.fromJson=function(t){return this._readComponents(this._serialized,t)},e.prototype.clearFilters=function(){return this._readComponents(this._all,this._persistentQuery())},e.prototype._readParams=function(t){return this._readComponents(this._components,t)},e.prototype._persistentQuery=function(){return{}},e.prototype._writeComponents=function(t,e){var n,i,r,o,s,a;for(null==e&&(e=null!=(s=null!=(a=this.parentQuery)?a.globalParams():void 0)?s:{}),i=l({},e),r=0,o=t.length;r<o;r++)n=t[r],l(!0,i,n.params());return _&&(i.temporal=_),i},e.prototype.serialize=function(){return this._writeComponents(this._serialized,{})},e.prototype._computeParams=function(){return this._writeComponents(this._components)},e.prototype._computeGlobalParams=function(){return this._writeComponents(this._propagated)},e.prototype._computeOwnParams=function(){return this._writeComponents(this._components,{})},e}(),{CollectionQuery:function(){function e(i){this._computeScienceKeywordFacets=S(this._computeScienceKeywordFacets,this),this.clearFilters=S(this.clearFilters,this),this.focusedTemporal=t.observable(null),this.focusedInterval=t.observable(null),this.grid=new n,this.temporal=new o,this.testFacets=this.queryComponent(new g("test_facets"),""),this.portal=this.queryComponent(new g("portal"),""),this.placename=this.queryComponent(new g("placename"),"",{query:!1}),this.temporalComponent=this.queryComponent(new g("temporal"),this.temporal.applied.queryCondition,{propagate:!0}),this.spatial=this.queryComponent(new y,"",{propagate:!0}),this.mbr=this.computed({read:this._computeMbr,owner:this,deferEvaluation:!0}),this.gridComponent=this.queryComponent(new g("two_d_coordinate_system"),this.grid.queryCondition,{propagate:!0}),this.facets=this.queryComponent(new d,t.observableArray()),this.scienceKeywordFacets=this.computed({read:this._computeScienceKeywordFacets,deferEvaluation:!0}),this.pageSize=this.queryComponent(new g("page_size"),20,{ephemeral:!0}),this.keywords=this.queryComponent(new p("free_text",this.placename),""),this.originalKeywords=this.queryComponent(new p("original_keyword",this.placename),""),this.hasGranules=this.queryComponent(new f("all_collections"),!0),this.hasNonEOSDIS=this.queryComponent(new f("tag_key"),!0),e.__super__.constructor.call(this,i)}return x(e,m),e.prototype.clearFilters=function(){var t,n,i;return null!=(i=document.getElementById("keywords"))&&(i.value=""),this.focusedTemporal(null),this.focusedInterval(null),this.placename(""),n=this.testFacets(),t=e.__super__.clearFilters.call(this),this.testFacets(n),t},e.prototype._persistentQuery=function(){var t,n;return n=e.__super__._persistentQuery.call(this),(t=this.portal())&&t.length>0&&(n.portal=t),n},e.prototype._computeScienceKeywordFacets=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.facets()).length;e<n;e++)0===(t=i[e]).param.indexOf("sci")&&r.push(t);return r},e.prototype._computeMbr=function(){var t,e,n,i,r,o,s,l;return n=null,(o=this.spatial())&&(s=(l=o.split(":"))[0],r=2<=l.length?C.call(l,1):[],i=function(){var n,i,o;for(o=[],n=0,i=r.length;n<i;n++)e=r[n],t=e.split(",").reverse(),o.push({lat:+t[0],lng:+t[1]});return o}(),n=a.mbr(s,i)),n},e}(),GranuleQuery:function(){function e(n,r,s){this._computeProject=S(this._computeProject,this),this.validateEquatorialCrossingDateRange=S(this.validateEquatorialCrossingDateRange,this),this.validateEquatorialCrossingDateValue=S(this.validateEquatorialCrossingDateValue,this),this.validateEquatorialCrossingLongitudeRange=S(this.validateEquatorialCrossingLongitudeRange,this),this.validateEquatorialCrossingLongitudeValue=S(this.validateEquatorialCrossingLongitudeValue,this),this.validateOrbitNumberRange=S(this.validateOrbitNumberRange,this),this.validateOrbitNumberValue=S(this.validateOrbitNumberValue,this),this.validateCloudCoverRange=S(this.validateCloudCoverRange,this),this.validateCloudCoverValue=S(this.validateCloudCoverValue,this),this._computeIsValid=S(this._computeIsValid,this),this.dayNightFlagOptions=[{name:"Anytime",value:null},{name:"Day only",value:"DAY"},{name:"Night only",value:"NIGHT"},{name:"Both day and night",value:"BOTH"}],this.sortOptions=[{name:"Start Date, Newest first",value:["-start_date"]},{name:"Start Date, Oldest first",value:["start_date"]},{name:"End Date, Newest first",value:["-end_date"]},{name:"End Date, Oldest first",value:["end_date"]}],this.isValid=this.computed({read:this._computeIsValid,deferEvaluation:!0}),this.attributes=new i(s),this.temporal=new o,this.cloudCover=new v,this.orbitNumber=new v,this.equatorialCrossingLongitude=new v,this.equatorialCrossingDate=new v,this.queryComponent(new g("echo_collection_id"),n,{ephemeral:!0}),this.temporalComponent=this.queryComponent(new g("temporal"),this.temporal.applied.queryCondition),this.sortKey=this.queryComponent(new g("sort_key"),["-start_date"],{ephemeral:!0}),this.dayNightFlag=this.queryComponent(new g("day_night_flag"),null),this.browseOnly=this.queryComponent(new u("browse_only"),!1),this.onlineOnly=this.queryComponent(new u("online_only"),!1),this.cloudCoverComponent=this.queryComponent(new g("cloud_cover"),this.cloudCover.params),this.orbitNumberComponent=this.queryComponent(new g("orbit_number"),this.orbitNumber.params),this.equatorialCrossingLongitudeComponent=this.queryComponent(new g("equator_crossing_longitude"),this.equatorialCrossingLongitude.params),this.equatorialCrossingDateComponent=this.queryComponent(new g("equator_crossing_date"),this.equatorialCrossingDate.params),this.granuleIds=this.queryComponent(new h("readable_granule_name",", "),""),this.excludedGranules=this.queryComponent(new c("exclude","echo_granule_id"),t.observableArray()),this.attributeFilters=this.queryComponent(new g("attribute"),this.attributes.queryCondition),this.pageSize=this.queryComponent(new g("page_size"),20,{ephemeral:!0}),this.singleGranuleId=t.observable(null),this.project=this.queryComponent(new g("project"),this._computeProject(r.facets())),e.__super__.constructor.call(this,r)}return x(e,m),e.prototype._computeIsValid=function(){return this.attributes.isValid()&&this.validateCloudCoverValue(this.cloudCover.min())&&this.validateCloudCoverValue(this.cloudCover.max())&&this.validateCloudCoverRange(this.cloudCover.min(),this.cloudCover.max())&&this.validateOrbitNumberValue(this.orbitNumber.min())&&this.validateOrbitNumberValue(this.orbitNumber.max())&&this.validateOrbitNumberRange(this.orbitNumber.min(),this.orbitNumber.max())&&this.validateEquatorialCrossingLongitudeValue(this.equatorialCrossingLongitude.min())&&this.validateEquatorialCrossingLongitudeValue(this.equatorialCrossingLongitude.max())&&this.validateEquatorialCrossingLongitudeRange(this.equatorialCrossingLongitude.min(),this.equatorialCrossingLongitude.max())&&this.validateEquatorialCrossingDateValue(this.equatorialCrossingDate.min())&&this.validateEquatorialCrossingDateValue(this.equatorialCrossingDate.max())&&this.validateEquatorialCrossingDateRange(this.equatorialCrossingDate.min(),this.equatorialCrossingDate.max())},e.prototype.validateCloudCoverValue=function(t){var e;return e=parseFloat(t),isNaN(e)||e>=0&&e<=100},e.prototype.validateCloudCoverRange=function(t,e){return isNaN(parseFloat(t))||isNaN(parseFloat(e))||parseFloat(t)<=parseFloat(e)},e.prototype.validateOrbitNumberValue=function(t){var e;return e=parseInt(t),isNaN(e)||e>=0},e.prototype.validateOrbitNumberRange=function(t,e){return isNaN(parseFloat(t))||isNaN(parseFloat(e))||parseFloat(t)<=parseFloat(e)},e.prototype.validateEquatorialCrossingLongitudeValue=function(t){var e;return e=parseFloat(t),isNaN(e)||e>=-180&&e<=180},e.prototype.validateEquatorialCrossingLongitudeRange=function(t,e){return isNaN(parseFloat(t))||isNaN(parseFloat(e))||parseFloat(t)<=parseFloat(e)},e.prototype.validateEquatorialCrossingDateValue=function(t){var e;return e=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/,t?null!==t.match(e):null!==t},e.prototype.validateEquatorialCrossingDateRange=function(t,e){return!Date.parse(t)||!Date.parse(e)||Date.parse(t)<=Date.parse(e)},e.prototype._computeProject=function(t){var e,n,i,r;for(n="",i=0,r=t.length;i<r;i++)if("project_h[]"===(e=t[i]).param)return e.title;return n},e}(),ExclusionParam:c})}.call(this),function(){var t,e,n,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.edsc.models.data.XhrModel=(t=ko,e=this.edsc.models.KnockoutModel,n=this.edsc.config,i=this.edsc.util.xhr.ajax,r=$.param,function(){function s(e,i){var r;this.path=e,this.query=i,this._load=o(this._load,this),this.loadNextPage=o(this.loadNextPage,this),this.search=o(this.search,this),this.results=this.asyncComputed([],n.xhrRateLimitMs,this._computeSearchResponse,this),this.completedRequestId=0,this.isLoading=t.observable(!1),this.error=t.observable(null),this.isError=t.observable(!1),this.isLoaded=t.observable(!1),this.stale=!0,this.loadTime=t.observable(null),this.currentRequest=null,this.isRelevant=t.observable(!0),this.hits=t.observable(0),this.hasNextPage=t.observable(!0),this.hitsEstimated=t.observable(!1),this.error.subscribe((r=this,function(t){var e,n,i,o,s,a,l;if(r.isError()&&(o="An unexpected error occurred",null!=(i=null!=(a=(s=r.path).match(/([^\/\.]+)(?:\.[^\/]*)?$/))?a[1]:void 0)&&(o="Error retrieving "+(i=i.replace("_"," "))),n=null!=(l=r._translateCMRError(t))?l:"There was a problem completing the request",s.indexOf("/granules/timeline.json")>-1||edsc.banner(s,o,n,{className:"banner-error",immediate:!0,html:!0}),s.indexOf("/granules/timeline.json")>-1))return(e=window.edsc.models.page.current).ui.projectList.showFilters(e.project.focusedProjectCollection().collection)}))}return a(s,e),s.prototype._translateCMRError=function(t){var e;return null!=(e=null!=t?t[0].match(/^The query contained \[(\d+)\] conditions which used a leading wildcard. This is more than the maximum allowed amount of \[\d+\]\.(.*)$/):void 0)?"The query contained "+e[1]/2+" conditions which used a leading wildcard: "+this.query.params().readable_granule_name+". Only 2 conditions that start with a wildcard are allowed."+e[2]:t},s.prototype.search=function(t,e){return null==t&&(t=this.params()),null==e&&(e=null),t.page_num=this.page=1,this._loadAndSet(t,[],e)},s.prototype._decorateNextPage=function(t,e){return e.length>0?(t.page_num=2,null!=t.page_size&&e.length>0?t.page_size=e.length:void 0):t.page_num=1},s.prototype.loadNextPage=function(t,e){var n;if(null==t&&(t=this.params()),null==e&&(e=null),this.hasNextPage()&&!this.isLoading())return n=this.results(),this._decorateNextPage(t,n),this._loadAndSet(t,n,e)},s.prototype.params=function(){return this.query.params()},s.prototype.abort=function(){if(null!=this.currentRequest&&"pending"===this.currentRequest.state())return this.currentRequest.reject()},s.prototype._computeSearchResponse=function(t,e){var n;if(null!=this.query)return(n=this.params()).page_num=this.page=1,this.isRelevant()?this.stale||this.isLoaded.peek()?(this.stale&&(this.results([]),this.hits(0)),this._load(n,t,e)):void this.isLoaded(!0):(this.isLoaded.peek()||(this.stale=!0),void this.isLoaded(!1))},s.prototype._loadAndSet=function(t,e,n){return this._load(t,e,(i=this,function(t){return"function"==typeof n&&n(t),i.results(t)}));var i},s.prototype._shouldLoad=function(t){return this._prevUrl!==t||this.isError.peek()||this.stale},s.prototype._queryFor=function(t){return r(t)},s.prototype._load=function(t,e,n){var r,o,s,a,l,u,h,c,d,p,f;if(s=this._queryFor(t),u=this.path+"?"+s,this._shouldLoad(u))return this._prevUrl=u,this.abort(),this.isLoading(!0),this.isError(!1),a=this.completedRequestId+1,console.log("Request ("+a+"): "+u),l=new Date,r=null,"post"===(o=null!=(h=this.method)?h:"get")&&(u=this.path,r=s),this.currentRequest=i({method:o,dataType:"json",url:u,data:r,retry:(f=this,function(){return f._load(t,e,n)}),success:(p=this,function(i,r,o){var s,h,c,d,f;return p.stale=!1,p.currentRequest=null,p.isLoaded(!0),p.error(null),console.log("Complete ("+a+"): "+u),c=p._toResults(i,e,t),p.hitsEstimated(!1),s=null!=(f=null!=c?c.length:void 0)?f:0,h=p._responseHits(o,i),p.hasNextPage(p._responseHasNextPage(o,i,c)),p.hits(Math.max(h,s)),d=((new Date-l)/1e3).toFixed(1),p.loadTime(d),$(document).trigger("timingevent",[u.split("?")[0],1e3*d]),"function"==typeof n?n(c):void 0}),complete:(d=this,function(){return d.completedRequestId=a,d.currentRequest=null,d.isLoading(!1)}),error:(c=this,function(t,e,n){return c.isError(!0),console.log("Fail ("+a+") ["+n+"]: "+u),c._onFailure(t)})},null)},s.prototype._responseHasNextPage=function(t,e,n){var i,r;return i=this._responseHits(t,e),e.page_size&&e.page_num?e.page_size*e.page_num<i:(null!=(r=null!=n?n.length:void 0)?r:0)<i},s.prototype._responseHits=function(t,e){var n,i,r;return parseInt(null!=(n=null!=(i=t.getResponseHeader("cmr-hits"))?i:null!=(r=e.feed)?r.totalResults:void 0)?n:"0",10)},s.prototype._onFailure=function(t){var e,n;if(403===t.status&&edsc.banner(null,"Session has ended","Please sign in"),!(t.status>=500||408===t.status||0===t.status)&&null!=(e=null!=(n=t.responseJSON)?n.errors:void 0))return this.error(e)},s}())}.call(this),function(){var t,e,n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.edsc.models.data.Granule=(t=ko,e=this.edsc.models.DetailsModel,n=$.extend,i=this.edsc.config.browseScalerUrl,this.edsc.util.xhr.ajax,function(){function r(e){n(this,e),this.details=this.asyncComputed({},100,this._computeGranuleDetails,this),this.detailsLoaded=t.observable(!1),this.browseError=t.observable(!1),this.dataLinks=t.observableArray([]),this.download_now_urls()}return o(r,e),r.prototype.edsc_browse_url=function(t,e){return null==t&&(t=170),null==e&&(e=t),i+"/browse_images/granules/"+this.id+"?h="+e+"&w="+t},r.prototype.edsc_full_browse_url=function(){var t,e,n,i;for(e=0,n=(i=this.links).length;e<n;e++)if(-1!==(t=i[e]).rel.indexOf("browse"))return t.href;return null},r.prototype.download_now_urls=function(){var t,e,n,i,r,o,s,a,l,u,h,c;if(n=[],t=[],null!=this.links&&this.links.length>0){for(i=0,s=(u=this.links).length;i<s;i++)-1!==(e=u[i]).rel.indexOf("/data#")&&-1!==e.href.indexOf("http")&&!0!==e.inherited&&n.push(e);for(r=0,a=(h=this.links).length;r<a;r++)-1!==(e=h[r]).rel.indexOf("/data#")&&-1!==e.href.indexOf("http")&&!0!==e.inherited&&t.push(e.href.substr(e.href.lastIndexOf("/")+1).replace(".html",""));for(o=0,l=(c=this.links).length;o<l;o++)-1!==(e=c[o]).rel.indexOf("/data#")&&-1!==e.href.indexOf("ftp://")&&-1===t.indexOf(e.href.substr(e.href.lastIndexOf("/")+1))&&!0!==e.inherited&&n.push(e)}return this.dataLinks(n)},r.prototype.onThumbError=function(){return this.browseError(!0)},r.prototype.getTemporal=function(){var t,e;return t=this._normalizeTime(this.time_end),(e=this._normalizeTime(this.time_start))===t?[e,null]:null==t?[e,null]:null==e?[null,t]:[e,t]},r.prototype._normalizeTime=function(t){return null==t?null:t.replace(/([0-9-]+)T([0-9:]+)\.0+Z/,"$1 $2")},r.prototype.equals=function(t){return t.id===this.id},r.prototype.displayName=function(){return null!=this.producer_granule_id?this.producer_granule_id:this.title},r.prototype.getFileName=function(t){return t.substring(t.lastIndexOf("/")+1)},r}())}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.edsc.models.data.SpatialEntry=(t=ko,e=this.edsc.models.KnockoutModel,function(){function i(e){this._loadMap=n(this._loadMap,this),this._loadMap(),this.coordinates=t.computed({read:this._readCoordinates,write:this._writeCoordinates,owner:this,deferEvaluation:!0}),this.swPoint=t.computed({read:this._readSwPoint,write:this._writeSwPoint,owner:this,deferEvaluation:!0}),this.nePoint=t.computed({read:this._readNePoint,write:this._writeNePoint,owner:this,deferEvaluation:!0}),this.querySpatial=e,this.spatialName=t.computed({read:this._computeSpatialName,owner:this}),this.point=t.computed({read:this._readPoint,write:this._writePoint,owner:this,deferEvaluation:!0}),this.error=t.observable("")}return r(i,e),i.prototype.clearError=function(){return this.error(""),this.coordinates(null)},i.prototype._validateCoordinate=function(t){var e,n,i,r;return i="",!t||this.spatialName()&&this.spatialName()!==this._toReadableName(null!=(r=this.querySpatial())?r.split(":")[0]:void 0)?(this.error(""),""):t.trim().match(/^-?\d+(\.\d+)?,\s*-?\d+(\.\d+)?$/)?(e=t.split(/,\s*/)[0],n=t.split(/,\s*/)[1],(e<-90||e>90)&&(i+="Lat ["+e+"] must be between -90 and 90.\n"),(n<-180||n>180)&&(i+="Lon ["+n+"] must be between -180 and 180.\n"),this.error(i),i):(i+="Invalid coordinates: "+t+". Please enter a point using 'lat,lon' format.\n",this.error(i),i)},i.prototype._loadMap=function(){var t,e;if("complete"===document.readyState)return this._map=$("#map"),null!=(t=this._map.data("map"))&&t.map.on("spatialtoolchange",(e=this,function(){return e.error("")})),this._map=this._map[0];setTimeout(this._loadMap,0)},i.prototype._computeSpatialName=function(){var t;if((null!=(t=this.querySpatial())?t.length:void 0)>0)return this._toReadableName(this.querySpatial().split(":")[0])},i.prototype._toReadableName=function(t){return"point"===t?"Point":"bounding_box"===t?"Bounding Box":null},i.prototype._readCoordinates=function(){var e;return"Point"===this.spatialName()?this._reverseLonLat("function"==typeof this.querySpatial?this.querySpatial().split(":")[1]:void 0):"Bounding Box"===this.spatialName()?(e=this._getPointsFromRectQuery(),this.coordinates=t.observableArray(e),e):void 0},i.prototype._getPointsFromRectQuery=function(){var t,e,n;return(e="function"==typeof this.querySpatial?this.querySpatial().split(":"):void 0).shift(),n=e[0],t=e[1],[this._reverseLonLat(n),this._reverseLonLat(t)]},i.prototype._setCoordinatesFromQuery=function(t){if(null===this.coordinates())return this.querySpatial()?this.coordinates(t):null},i.prototype._writeCoordinates=function(t){return null===t||""===t?this.querySpatial(null):"string"==typeof t?this.querySpatial("point:"+this._reverseLonLat(t)):t[0]||t[1]?this.querySpatial("bounding_box:"+this._reverseLonLat(t[0])+":"+this._reverseLonLat(t[1])):null},i.prototype._readPoint=function(){var t;if("Point"===("function"==typeof this.spatialName?this.spatialName():void 0))return t=this._reverseLonLat("function"==typeof this.querySpatial?this.querySpatial().split(":")[1]:void 0),this.coordinates(t),t},i.prototype._writePoint=function(t){if(this._cancelDrawing(),!(this._validateCoordinate(t).length>0))return null===t||""===t?this.querySpatial(null):this.querySpatial("point:"+this._reverseLonLat(t))},i.prototype._readSwPoint=function(){var t;if("Bounding Box"===("function"==typeof this.spatialName?this.spatialName():void 0))return t=this._getPointsFromRectQuery(),this._setCoordinatesFromQuery(t),t[0]},i.prototype._writeSwPoint=function(e){var n;if(!(this._validateCoordinate(e).length>0))return e?(null!=this.coordinates()&&"string"!=typeof this.coordinates()||(this.coordinates=t.observableArray([])),this.coordinates()[0]=e):this.coordinates(null),2===(null!=(n=this.coordinates())?n.length:void 0)?this.querySpatial("bounding_box:"+this._reverseLonLat(this.coordinates()[0])+":"+this._reverseLonLat(this.coordinates()[1])):void 0},i.prototype._readNePoint=function(){var t;if("Bounding Box"===("function"==typeof this.spatialName?this.spatialName():void 0))return t=this._getPointsFromRectQuery(),this._setCoordinatesFromQuery(t),t[1]},i.prototype._writeNePoint=function(e){var n;if(this._cancelDrawing(),!(this._validateCoordinate(e).length>0))return e?(null!=this.coordinates()&&"string"!=typeof this.coordinates()||(this.coordinates=t.observableArray([])),this.coordinates()[1]=e):null!=this.coordinates()&&"string"!=typeof this.coordinates()||this.coordinates(null),2===(null!=(n=this.coordinates())?n.length:void 0)?this.querySpatial("bounding_box:"+this._reverseLonLat(this.coordinates()[0])+":"+this._reverseLonLat(this.coordinates()[1])):void 0},i.prototype._reverseLonLat=function(t){var e,n;return e=(n=t.split(/,\s*/))[0],n[1]+","+e},i.prototype._cancelDrawing=function(){var t,e,n;return t=null!=(n=this._map)?n.querySelectorAll('.leaflet-draw-section a[title="Cancel drawing"]')[0]:void 0,(e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),null!=t?t.dispatchEvent(e):void 0},i}())}.call(this),function(){var t,e,n,i,r,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=this.edsc.models.data,this.edsc.models,t.Granules=(e=ko,n=jQuery.param,i=t.XhrModel,r=t.Granule,o=$.extend,s=this.edsc.util.date,function(){function t(n,i){var r,o;this.parentQuery=i,this.params=a(this.params,this),this.clearExclusions=a(this.clearExclusions,this),this.undoExclude=a(this.undoExclude,this),this.method="post",t.__super__.constructor.call(this,"/granules.json",n),this.temporal=n.temporal,this._resultsComputed=!1,r=this.parentQuery.focusedTemporal(),this.computed((o=this,function(){var t;return(t=o.parentQuery.focusedTemporal())!==r&&o.isLoaded()&&o.results.readImmediate(),r=t})),this.excludedGranulesList=e.observableArray()}return u(t,i),t.prototype._toResults=function(t,e,n){var i,o,s;return i=t.feed.entry||[],s=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)o=i[t],n.push(new r(o));return n}(),n.page_num>1?e.concat(s):s},t.prototype._shouldLoad=function(){return!0},t.prototype._queryFor=function(e){return t.__super__._queryFor.call(this,e).replace(/attribute%5B\d+%5D/g,"attribute%5B%5D")},t.prototype._computeSearchResponse=function(t,e,i){var r,o,s;if(null==i&&(i=!0),(null!=(s=this.query)?s.isValid():void 0)&&(r=this.params(),o=n(r),r.page_num=this.page=1,i&&this._prevQuery!==o))return this.excludedGranulesList([]),this._prevQuery=o,"no-data"===r.temporal?(this.results([]),void this.hits(0)):(this._resultsComputed&&this.results([]),this._resultsComputed=!0,this.isLoaded(!1),this._load(r,t,e))},t.prototype.exclude=function(t){var e,i,r;if(i=(r=this.results()).indexOf(t),r.splice(i,1),this.results(r),this.hits(this.hits()-1),e=n(this.params()),this.excludedGranulesList.push({index:i,granule:t}),this.query.excludedGranules.push(t.id),this._prevQuery===e)return this._prevQuery=n(this.params())},t.prototype.undoExclude=function(){var t,e,i,r,o,s,a,l;return s=(a=this.excludedGranulesList.pop()).index,r=a.granule,o=this.results(),0===s?(o.unshift(r),l=o):(e=o.splice(0,s),t=o.splice(s-1),l=e.concat(r,t)),this.results(l),this.hits(this.hits()+1),i=n(this.params()),this.query.excludedGranules.pop(),this._prevQuery===i&&(this._prevQuery=n(this.params())),r},t.prototype.clearExclusions=function(){return this.excludedGranulesList([]),this.query.excludedGranules([])},t.prototype.params=function(){var t,e,n,i,r,a;return r=this.parentQuery.globalParams(),i=o({},r,this.query.params()),null!=(e=this.parentQuery.focusedTemporal())&&(n=this.query.temporal.applied,t=this.parentQuery.temporal.applied,n.isSet()&&(t=n),e=t.intersect.apply(t,e),i.temporal=null!=e?function(){var t,n,i;for(i=[],t=0,n=e.length;t<n;t++)a=e[t],i.push(s.toISOString(a));return i}().join(","):"no-data"),i},t}())}.call(this),function(){var t,e,n,i,r,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};this.edsc.models.data.ServiceOptions=(t=ko,e=this.edsc,n=this.edsc.models.KnockoutModel,i=$.extend,o=function(){function e(e){var n,r;this.config=e,this.parameters=function(){var e,r,o,s;for(s=[],e=0,r=(o=this.config.parameters).length;e<r;e++)n=o[e],s.push(i({selected:t.observable(!0)},n));return s}.call(this),this.formats=this.config.formats,this.formatName=t.observable(this.formats[0].name),this.format=t.computed((r=this,function(){var t,e,n,i,o;for(e=r.formatName(),n=0,i=(o=r.formats).length;n<i;n++)if((t=o[n]).name===e)return t;return null})),this.subsetToSpatial=t.observable(!0)}return e.prototype.serialize=function(){var t,e,n;return e={format:this.formatName()},(null!=(n=this.format())?n.canSubset:void 0)&&(this.subsetToSpatial()&&(e.spatial=this.config.spatial),e.parameters=function(){var e,n,i,r;for(r=[],e=0,n=(i=this.parameters).length;e<n;e++)(t=i[e]).selected()&&r.push(t.id);return r}.call(this)),e},e.prototype.fromJson=function(){return this},e}(),r=function(){function n(e,n){var i,r;this.availableMethods=n,this.showSpinner=s(this.showSpinner,this),this.method=t.observable(e),this.isValid=t.observable(!0),this.loadForm=t.observable(!1),this.loadingForm=t.computed((i=this,function(){var t;return i.loadForm()&&(t=setTimeout(function(){return document.getElementsByClassName("access-form")[0].children.length>0?(i.loadForm(!1),clearTimeout(t)):i.loadForm(!0)},0),i.loadForm()),!1})),this.subsetOptions=t.observable(null),this.prepopulatedFields=t.computed(this._computePrepopulatedFields,this,{deferEvaluation:!0}),this.options=t.computed((r=this,function(){var t,e,n,i,s,a;if(e=r.method(),n=null,r.availableMethods)for(i=0,s=(a=r.availableMethods).length;i<s;i++)if((t=a[i]).name===e){n=t;break}return(null!=n?n.subset:void 0)?r.subsetOptions(new o(n)):r.subsetOptions(null),n}))}return n.prototype.showSpinner=function(e,n){var i,r,o,s,a,l,u;for(i=null,s=0,a=(l=this.availableMethods).length;s<a;s++)if((o=l[s]).name===e.name){i=o;break}return null!=(r=$("#"+$("#"+n.target.id).attr("form")))&&"function"==typeof r.empty&&r.empty(),"service"===i.type||"order"===i.type?("service"===i.type&&this.loadForm(!0),setTimeout((u=this,function(){return t.applyBindingsToNode(r,{echoform:u}),u.loadForm(!1)}),0)):(t.cleanNode(r),this.loadForm(!1)),!0},n.prototype._computePrepopulatedFields=function(){var t,n,i;return n={},(t=null!=(i=e.page.query)?i.mbr():void 0)&&(n.BBOX_SOUTH=t[0],n.BBOX_WEST=t[1],n.BBOX_NORTH=t[2],n.BBOX_EAST=t[3]),n},n.prototype.serialize=function(){var t,e,n,i,r,o,s;for(n={method:e=this.method(),model:this.model,rawModel:this.rawModel},i=0,r=(o=this.availableMethods).length;i<r;i++)if((t=o[i]).name===e){n.type=t.type,n.id=t.id;break}return n.subset=null!=(s=this.subsetOptions())?s.serialize():void 0,n},n.prototype.fromJson=function(e,n){var i,r,o,s;return null==n&&(n=0),this.method(e.method),this.model=e.model,this.modelInitialValue=e.model,this.rawModel=e.rawModel,this.rawModelInitialValue=e.rawModel,this.hasBeenReset=!1,this.type=e.type,"service"!==e.type&&"order"!==e.type||(r=null,i=setInterval((s=this,function(){var o;if((null!=(o=document.getElementsByClassName("access-form"))?o.length:void 0)>0)return clearTimeout(i),setTimeout(function(){var i,a,l,u,h;for(i=!1,h=[],l=0,u=o.length;l<u;l++)a=(r=o[l]).id.match(/access-form-(.*)-(\d+)/),i||a[1]!==e.collection_id||parseInt(a[2],10)!==n||(i=!0,"service"===e.type&&s.loadForm(!0),$.when(t.applyBindingsToNode(r,{echoform:s})).done(function(){return $(".echoforms-element-select").each(function(){var t;this.id.indexOf("projectselect")>=0&&(t=$(this).val(),$(this).val("&").change().val(t).change())})})),h.push(s.loadForm(!1));return h},0)}),0)),this.orderId=e.order_id,this.orderStatus=e.order_status,this.errorCode=e.error_code,this.errorMessage=e.error_message,this.droppedGranules=e.dropped_granules,e.subset&&null!=(o=this.subsetOptions())&&o.fromJson(e.subset),this.serviceOptions=e.service_options,this},n}(),function(){function e(e){var n;this.granuleAccessOptions=e,this.removeAccessMethod=s(this.removeAccessMethod,this),this.addAccessMethod=s(this.addAccessMethod,this),this.accessMethod=t.observableArray(),this.isLoaded=this.computed({read:(n=this,function(){var t,e,i;return e=n.granuleAccessOptions(),n._methods=t=e.methods,(i=null!=t)&&n._onAccessOptionsLoad(e),i}),deferEvaluation:!0}),this.canAddAccessMethod=t.observable(!1),this.readyToDownload=this.computed(this._computeIsReadyToDownload,this,{deferEvaluation:!0})}return l(e,n),e.prototype._onAccessOptionsLoad=function(t){var e,n,i,r,o,s,a,l,u,h,c,d,p;for(n=t.methods,a=0,h=(o=this.accessMethod.peek()).length;a<h;a++)(r=o[a]).availableMethods=n;if(s=[],i=null!=(p=t.defaults)?p.accessMethod:void 0){for(l=0,c=i.length;l<c;l++)for(r=i[l],u=0,d=n.length;u<d;u++)e=n[u],r.method===e.name&&(r.collection_id=e.collection_id,s.push(r));this.fromJson({accessMethod:s})}return 0===o.length&&n.length>0&&0===s.length&&this.addAccessMethod(),this.canAddAccessMethod(n.length>1||1===n.length&&"download"!==n[0].type)},e.prototype._computeIsReadyToDownload=function(){var t,e,n,i,r,o,s;if(!this.isLoaded())return!1;if(0===(null!=(r=this.granuleAccessOptions().methods)?r.length:void 0))return!0;for(e=!1,n=0,i=(o=this.accessMethod()).length;n<i;n++)t=o[n],1===(null!=(s=this.granuleAccessOptions().methods)?s.length:void 0)&&t.method(t.availableMethods[0].name),!t.isValid()&&t.loadForm()||null==t.method()||(e=!0);return e},e.prototype.addAccessMethod=function(){return this.accessMethod.push(new r(null,this.granuleAccessOptions().methods))},e.prototype.removeAccessMethod=function(t){return this.accessMethod.remove(t)},e.prototype.serialize=function(){var t;return{accessMethod:function(){var e,n,i,r;for(r=[],e=0,n=(i=this.accessMethod()).length;e<n;e++)t=i[e],r.push(t.serialize());return r}.call(this)}},e.prototype.fromJson=function(t){var e,n,i,o,s,a;for(this.accessMethod.removeAll(),e=o=0,s=(a=t.accessMethod).length;o<s;e=++o)n=a[e],(i=new r(null,this._methods)).fromJson(n,e),this.accessMethod.push(i);return this},e}())}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h,c=function(t,e){return function(){return t.apply(e,arguments)}},d={}.hasOwnProperty,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=this.edsc.models.data).Collection=(e=ko,n=this.edsc.models.DetailsModel,i=this.edsc.config.browseScalerUrl,r=this.edsc.config.thumbnailWidth,t.Granules,t.query.GranuleQuery,t.ServiceOptions,o=jQuery.param,jQuery.extend,this.edsc.util.xhr.ajax,s=this.edsc.util.date,a=this.edsc.config,l=e.observableArray(),u=Math.random(),h=function(t){return t.reference(),l.push(t),t},function(){function t(t,n,i){if(this.query=n,this._setObservable=c(this._setObservable,this),this._visibilityChange=c(this._visibilityChange,this),i!==u)throw"Collections should not be constructed directly";var r,s,a,l;this.granuleCount=e.observable(0),this.hasAtomData=e.observable(!1),this.orbitFriendly=e.observable(!1),this.details=this.asyncComputed({},100,this._computeCollectionDetails,this),this.detailsLoaded=e.observable(!1),this.gibs=e.observable(null),this.gibsLayers=e.computed(function(){var t;return t=[],this.gibs()&&(this.gibs()[0].antarctic&&t.push("Antarctic"),this.gibs()[0].arctic&&t.push("Arctic"),this.gibs()[0].geo&&t.push("Geographic")),0===t.length&&t.push("None"),t.join(", ")},this),this.spatial=this.computed(this._computeSpatial,this,{deferEvaluation:!0}),this.timeRange=this.computed(this._computeTimeRange,this,{deferEvaluation:!0}),this.granuleDescription=this.computed(this._computeGranuleDescription,this,{deferEvaluation:!0}),this.granuleDatasource=e.observable(null),this._renderers=[],this._pendingRenderActions=[],this.osddUrl=this.computed(this._computeOsddUrl,this,{deferEvaluation:!0}),this.cwic=this.computed(function(){return"cwic"===this.granuleDatasourceName()},this,{deferEvaluation:!0}),
this.granuleIds=this.computed({read:(s=this,function(){return s.granuleQuery.granuleIds().replace(/\s\n/g,", ")}),write:(r=this,function(t){return r.granuleQuery.granuleIds(t.split(/[,\s\n]\s*/g).join(", "))}),deferEvaluation:!0}),this.visible=e.observable(!1),this.disposable(this.visible.subscribe(this._visibilityChange)),this.fromJson(t),this.spatial_constraint=this.computed((a=this,function(){return null!=a.points?"point:"+a.points[0].split(/\s+/).reverse().join(","):null})),this.echoGranulesUrl=this.computed({read:(l=this,function(){var t,e,n;if("cmr"===l.granuleDatasourceName()&&l.granuleDatasource())return(e=(n=function(t){var e,i;if(null===t||"object"!=typeof t)return t;for(e in i=new t.constructor,t)i[e]=n(t[e]);return i})(l.granuleDatasource().toQueryParams())).datasource&&delete e.datasource,t=o(e),l.details().granule_url+"?"+t}),deferEvaluation:!0}),this.availableFilters=this.computed(this._computeAvailableFilters,this,{deferEvaluation:!0}),this.isMaxOrderSizeReached=this.computed(this._computeMaxOrderSize,this,{deferEvaluation:!0})}return p(t,n),t.awaitDatasources=function(t,e){var n,i,r,o,s,a;for(i=t.length,n=function(){if(0==--i)return e(t)},a=[],o=0,s=t.length;o<s;o++)r=t[o],a.push(r.granuleDatasourceAsync(n));return a},t.findOrCreate=function(e,n){var i,r,o,s,a;for(r=e.id,o=0,s=(a=l()).length;o<s;o++)if((i=a[o]).id===r)return(null!=e.short_name&&!i.hasAtomData()||e.granule_count!==i.granule_count)&&i.fromJson(e),i.reference();return h(new t(e,n,u))},t.visible=e.computed({read:function(){var t,e,n,i,r;for(r=[],e=0,n=(i=l()).length;e<n;e++)(t=i[e]).visible()&&r.push(t);return r}}),t.prototype._computeMaxOrderSize=function(){var t,e;return t=0,this.granuleDatasource()&&(t=this.granuleDatasource().data().hits()),e=-1,this.tags()&&this.tags()["edsc.limited_collections"]&&(e=this.tags()["edsc.limited_collections"].data.limit),-1!==e&&t>e},t.prototype._computeAvailableFilters=function(){var t,e,n,i,r,o;for(t={},this.orbitFriendly()&&(t.orbit_calculated_spatial_domains=!0),n=0,i=(r=this.cmrGranulesModel.results()).length;n<i&&(null==(e=r[n]).day_night_flag||"DAY"!==(o=e.day_night_flag.toUpperCase())&&"NIGHT"!==o&&"BOTH"!==o||(t.day_night_flag=!0),null!=e.cloud_cover&&(t.cloud_cover=!0),null!=e.orbit_calculated_spatial_domains&&(t.orbit_calculated_spatial_domains=!0),null!=e.orbit_calculated_spatial_domains&&this.orbitFriendly(!0),!(t.day_night_flag&&t.cloud_cover&&t.orbit_calculated_spatial_domains));n++);return t},t.prototype._computeTimeRange=function(){var t;return this.hasAtomData()&&(t=s.timeSpanToIsoDate(this.time_start,this.time_end)),t||"Unknown"},t.prototype._computeSpatial=function(){var t,e,n;return null!=(t=null!=(e=null!=(n=this._spatialString("Bounding Rectangles",this.boxes))?n:this._spatialString("Points",this.points))?e:this._spatialString("Polygons",this.polygons))?t:this._spatialString("Lines",this.lines)},t.prototype._spatialString=function(t,e){var n;return e?(n=e.length>1?" ...":"",t+": "+e[0]+n):null},t.prototype._computeGranuleDescription=function(){var t,e,n;return t=null,this.hasAtomData()?null!=(e=null!=(n=this.granuleDatasource())?n.granuleDescription():void 0)?e:"Collection only":t},t.prototype._computeOsddUrl=function(){var t,e,n;return(t=null!=(e=this.osdd_url())?e:null!=(n=this.details())?n.osdd_url:void 0)&&(t+=(-1===t.indexOf("?")?"?":"&")+"clientId="+a.cmrClientId),t},t.prototype.thumbnail=function(){var t,e,n,o,s;if(e=this.browseable_granule,null!=this.links)for(n=0,o=(s=this.links).length;n<o;n++)s[n].rel.indexOf("browse#")>-1&&(t=this.id);return null!=t?i+"/browse_images/datasets/"+t+"?h="+r+"&w="+r:null!=e?i+"/browse_images/granules/"+e+"?h="+r+"&w="+r:i+"/image-unavailable.svg"},t.prototype.granuleFiltersApplied=function(){var t;return null!=(t=this.granuleDatasource())?t.hasQueryConfig():void 0},t.prototype.shouldDispose=function(){var t;return(t=!this.granuleFiltersApplied())&&l.remove(this),t},t.prototype.granuleDatasourceName=function(){return this.getValueForTag("datasource")||(this.has_granules?"cmr":null)},t.prototype.granuleRendererNames=function(){var t;return(t=this.getValueForTag("renderers"))?t.constructor===Array?t:t.split(","):this.has_granules?["cmr"]:[]},t.prototype._visibilityChange=function(t){var e;return e=t?"startSearchView":"endSearchView",this.notifyRenderers(e)},t.prototype.destroy=function(){return this._unloadDatasource(),this._unloadRenderers(),t.__super__.destroy.call(this)},t.prototype.notifyRenderers=function(t){var e,n,i,r,o;if(this._loadRenderers(),this._loading)return this._pendingRenderActions.push(t);for(o=[],n=0,i=(r=this._renderers).length;n<i;n++)e=r[n],o.push("function"==typeof e[t]?e[t]():void 0);return o},t.prototype._loadRenderers=function(){var t,e,n,i,r,o,s,a,l,u,h;if((e=(n=this.granuleRendererNames()).join(",")).length>0&&e!==this._currentRenderers){for(this._loading=!0,this._currentRenderers=e,this._unloadRenderers(),t=n.length,h=this,r=function(t,e){var n,i,r,o,s,a;for(i=new t(e,h),h._renderers.push(i),a=[],r=0,o=(s=h._pendingRenderActions).length;r<o;r++)n=s[r],a.push("function"==typeof i[n]?i[n]():void 0);return a},u=this,i=function(){if(0==(t-=1))return u._loading=!1,u._pendingRenderActions=[]},l=[],s=0,a=n.length;s<a;s++)o=n[s],l.push(edscplugin.load("renderer."+o,r,i));return l}},t.prototype._unloadRenderers=function(){var t,e,n;for(t=0,e=(n=this._renderers).length;t<e;t++)n[t].destroy();return this._renderers=[]},t.prototype._loadDatasource=function(){var t,e,n,i,r;if((t=this.granuleDatasourceName())&&this._currentName!==t)return this._currentName=t,this._unloadDatasource(),r=this,n=function(e,n){var i;return i=new e(n,r),r._currentName=t,r._unloadDatasource(),r.granuleDatasource(r.disposable(i))},i=this,e=function(){var t,e,n;if(i._datasourceListeners){for(t=0,e=(n=i._datasourceListeners).length;t<e;t++)(0,n[t])(i.granuleDatasource());return i._datasourceListeners=null}},edscplugin.load("datasource."+t,n,e)},t.prototype._unloadDatasource=function(){if(this.granuleDatasource())return this.granuleDatasource().destroy(),this.granuleDatasource(null)},t.prototype.granuleDatasourceAsync=function(t){return!this.canFocus()||this.granuleDatasource()?t(this.granuleDatasource()):(null==this._datasourceListeners&&(this._datasourceListeners=[]),this._datasourceListeners.push(t))},t.prototype.getValueForTag=function(t){var e,n,i,r,o,s,l;if(!(r=this.tags())||r.constructor!==Array)return t=a.cmrTagNamespace+"."+t,null!=r&&null!=(l=r[t])?l.data:void 0;for(e=(n=a.cmrTagNamespace+"."+t+".").length,o=0,s=r.length;o<s;o++)if((i=r[o]).constructor===Array&&(i=i.join(".")),i.substr(0,e)===n)return i.substr(e)},t.prototype.canFocus=function(){return this.hasAtomData()&&null!=this.granuleDatasourceName()},t.prototype.org=function(){var t;return(null!=(t=this.organizations)?t.length:void 0)>0?this.organizations[0]:this.archive_center},t.prototype.metadata_url=function(t,e){return window.open(this.details()[e.target.attributes["data-metadata-type"].value.toLowerCase()+"_url"],"_blank").focus()},t.prototype.fromJson=function(t){var n,i,r;for(n in this.json=t,null!=t.short_name?this.short_name=e.observable(t.short_name):this.short_name=e.observable("N/A"),this.hasAtomData(null!=t.short_name),this._setObservable("opendap",t),this._setObservable("opendap_url",t),this._setObservable("modaps",t),this._setObservable("osdd_url",t),this._setObservable("tags",t),this.gibs(this.getValueForTag("extra.gibs")),this.nrt="NEAR_REAL_TIME"===t.collection_data_type,this.granuleCount(t.granule_count),t)d.call(t,n)&&(i=t[n],e.isObservable(this[n])||(this[n]=i));if(this._loadDatasource(),null!=(r=this.granuleDatasource())&&"function"==typeof r.updateFromCollectionData&&r.updateFromCollectionData(t),this.granuleDatasourceName()&&"cmr"!==this.granuleDatasourceName())return this.has_granules=this.canFocus()},t.prototype._setObservable=function(t,n){var i;return null==this[t]&&(this[t]=e.observable(void 0)),this[t](null!=(i=n[t])?i:this[t]())},t.prototype.has_feature=function(t){return this.getValueForTag("features."+t)},t}())}.call(this),function(){var t,e,n,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}};this.edsc.models.data.CollectionFacets=(t=ko,window.edsc.models.page.current,i=["features=[^&]+","science_keywords_h\\[\\d*\\]\\[category\\]=[^&]+","science_keywords_h\\[\\d*\\]\\[topic\\]=[^&]+","science_keywords_h\\[\\d*\\]\\[term\\]=[^&]+","science_keywords_h\\[\\d*\\]\\[variable_level_1\\]=[^&]+","science_keywords_h\\[\\d*\\]\\[variable_level_2\\]=[^&]+","science_keywords_h\\[\\d*\\]\\[variable_level_3\\]=[^&]+","science_keywords_h\\[\\d*\\]\\[detailed_variable\\]=[^&]+","platform_h\\[\\]=[^&]+","instrument_h\\[\\]=[^&]+","data_center_h\\[\\]=[^&]+","project_h\\[\\]=[^&]+","processing_level_id_h\\[\\]=[^&]+"],r={features:"Features",science_keywords_h:"Keywords",platform_h:"Platforms",instrument_h:"Instruments",data_center_h:"Organizations",project_h:"Projects",processing_level_id_h:"Processing levels"},e=function(){function e(e,n){this.parent=e,this._scienceKeywordFacet=o(this._scienceKeywordFacet,this),this._hierarchyIndex=o(this._hierarchyIndex,this),this.isVar3=o(this.isVar3,this),this.isVar2=o(this.isVar2,this),this.isVar1=o(this.isVar1,this),this.isTerm=o(this.isTerm,this),this.isTopic=o(this.isTopic,this),this.isAncestor=o(this.isAncestor,this),this.isFeature=o(this.isFeature,this),this._linksToParam=o(this._linksToParam,this),this.title=n.title,this.type=n.type,this.hasChildren=t.observable(n.has_children),this.termFacet=t.observable(!1),this.var1Facet=t.observable(!1),this.var2Facet=t.observable(!1),this.var3Facet=t.observable(!1),this.links=n.links,this.children=n.children,this.isSelected=t.observable(n.applied),null==this.isChecked&&(this.isChecked=t.observable(n.applied)),this.count=t.observable(n.count),this.param=this._linksToParam()}return e.prototype._linksToParam=function(){var t,e,n,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b;if(u=[],"Features"===this.parent.title?u.push("features"):null!=this.links.apply&&(s=this.links.apply.replace(/%5B/g,"[").replace(/%5D/g,"]")),!s&&"Keywords"===this.parent.title){for(h=window.edsc.models.page.current.query,t=h.params().science_keywords_h,n=p=0,g=t.length;p<g;n=++p)t[n],Object.keys(t[n]).forEach(function(e){return function(i){if(t[n][i]===e.title)return u.push("science_keywords_h["+n+"]["+i+"]")}}(this));if(u.length>0)return u}for(f=0,v=i.length;f<v;f++)if(e=i[f],c=new RegExp(e,"g"),null!=s?s.match(c):void 0)for(m=0,y=(_=s.match(c)).length;m<y;m++)for(o in a=_[m],r)l=(b=a.split("="))[0],d=b[1],l.indexOf(o)>-1&&d===encodeURIComponent(this.title).replace(/%20/g,"+").replace(/\(/g,"%28").replace(/\)/g,"%29")&&u.push(a.split("=")[0]);return u},e.prototype.isFeature=function(){return"Features"===this.parent.title},e.prototype.isAncestor=function(){return!this.isFeature()&&this.isSelected()&&this.hasChildren()},e.prototype.isTopic=function(){return!this.isFeature()&&2===this._hierarchyIndex()&&this._scienceKeywordFacet()},e.prototype.isTerm=function(){var t;return!!this.termFacet()||(t=!this.isFeature()&&3===this._hierarchyIndex()&&this._scienceKeywordFacet(),this.termFacet(t),t)},e.prototype.isVar1=function(){var t;return!!this.var1Facet()||(t=!this.isFeature()&&4===this._hierarchyIndex()&&this._scienceKeywordFacet(),this.var1Facet(t),t)},e.prototype.isVar2=function(){var t;return!!this.var2Facet()||(t=!this.isFeature()&&5===this._hierarchyIndex()&&this._scienceKeywordFacet(),this.var2Facet(t),t)},e.prototype.isVar3=function(){var t;return!!this.var3Facet()||(t=!this.isFeature()&&6===this._hierarchyIndex()&&this._scienceKeywordFacet(),this.var3Facet(t),t)},e.prototype._hierarchyIndex=function(){var t,e,n,r,o;for(t=r=0,o=i.length;r<o;t=++r)if(e=i[t].split("=")[0],n=new RegExp(e,"g"),this.param.length>0&&this.param[0].match(n))return t;return-1},e.prototype._scienceKeywordFacet=function(){return this.param[0].indexOf("science_keywords_h")>-1},e.prototype.equals=function(t){return t&&t.title===this.title&&t.param===this.param},e}(),n=function(){function n(e,n){var i,r,s,a;this.queryModel=e,this.toggleList=o(this.toggleList,this),this._loadSelectedValues=o(this._loadSelectedValues,this),this.setValues=o(this.setValues,this),this.title=n.title,this.class_name=t.computed((s=this,function(){return s.title.toLowerCase().replace(" ","-")})),this.param=n.param,i=this._expandCategory(n),this.children=t.observable(i),this.selectedValues=t.computed(this._loadSelectedValues),r=this.selectedValues().length>0||"Features"===n.title,this.opened=t.observable(r),this.closed=t.computed((a=this,function(){return!a.opened()}))}return n.prototype._expandCategory=function(t){var n,i,r,o,s,a,l,u,h,c,d;for(i=[],a=0,u=(c=t.children).length;a<u;a++)s=c[a],"Features"===t.title?((r=this.queryModel.facets())&&r.length>0&&r.find(function(t){return s.title===t.title})&&(s.applied=!0),i.push(new e(this,s))):"Keywords"===t.title?s.applied&&(this._expandKeywords(i,s),(o=t.children.indexOf(s))>-1&&(t.children[o]=null)):i.push(new e(this,s));if("Keywords"===t.title)for(l=0,h=(d=t.children).length;l<h;l++)null!=(n=d[l])&&n.count>0&&i.push(new e(this,n));return i},n.prototype._expandKeywords=function(t,n){var i,r,o,s,a;if(n.applied&&(t.push(new e(this,n)),null!=n.children)){for(a=[],r=0,o=(s=n.children).length;r<o;r++)(i=s[r]).applied?a.push(this._expandKeywords(t,i)):a.push(t.push(new e(this,i)));return a}},n.prototype._findAncestors=function(t,e){var n,i,r,o,s,a,l;if(e.applied&&"filter"===e.type&&(null!=(o=e.links.remove)?o.length:void 0)>0&&t.push(e),e.children){for(l=[],i=0,r=(s=e.children).length;i<r;i++)(n=s[i]).applied&&(null!=(a=n.links.remove)?a.length:void 0)>0?l.push(this._findAncestors(t,n)):l.push(void 0);return l}},n.prototype.setValues=function(t){var e,n,i,r,o,s,a,l,u,h,c;for(r=this._expandCategory(t),n={},a=0,u=(c=this.children()).length;a<u;a++)n[(e=c[a]).title]=e;for(s=[],l=0,h=r.length;l<h;l++)o=n[(i=r[l]).title],i.equals(o)?(o.count(i.count),s.push(o)):s.push(i);return this.children(s)},n.prototype._loadSelectedValues=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.children()).length;e<n;e++)(t=i[e]).isSelected()&&r.push(t);return r},n.prototype.toggleList=function(){return this.opened(!this.opened())},n}(),function(){function e(e){this.toggleFacet=o(this.toggleFacet,this),this.addFacet=o(this.addFacet,this),this.removeFacet=o(this.removeFacet,this),this.query=e,this.isRelevant=t.observable(!1),this.appliedFacets=t.computed(this._computeAppliedFacets,this,{deferEvaluation:!0}),this.results=t.observable([])}return e.prototype._computeAppliedFacets=function(){var t,e,n,i,r;for(r=[],e=0,n=(i=this.results()).length;e<n;e++)(t=i[e]).selectedValues().length>0&&r.push(t);return r},e.prototype.update=function(e){var i,r,o,s,a,l,u,h,c,d;for(r=this.results.peek(),h=[],u=c=0,d=e.length;c<d;u=++c)i=e[u],(a=t.utils.arrayFirst(r,function(t){return t.title===i.title}))?(a.setValues(i),h[u]=a):h[u]=new n(this.query,i);for(s=h.length,l=0;l<s;)o=h[l],(a=t.utils.arrayFirst(e,function(t){return t.title===o.title}))||h.splice(h.indexOf(o),1),s=h.length,l++;return this.results(h),h},e.prototype._findAncestors=function(t,e){var n,i,r,o,s;if(e._hierarchyIndex()>2&&e._hierarchyIndex()<7){for(s=[],i=0,r=(o=e.parent.children()).length;i<r;i++)(n=o[i]).isSelected()?e._hierarchyIndex()-n._hierarchyIndex()==1&&null!=n.children?s.push(function(){var i,r,o,s;for(s=[],i=0,r=(o=n.children).length;i<r;i++)o[i].title===e.title?s.push(t.push(n)):s.push(void 0);return s}()):e._hierarchyIndex()-n._hierarchyIndex()>1?s.push(this._findAncestors(t,n)):s.push(void 0):s.push(void 0);return s}},e.prototype.removeFacet=function(t){return this._removeSingleFacet(t),this._removeHierarchicalFacets(t)},e.prototype._removeSingleFacet=function(t){var e,n,i,r,o;for(n=-1,i=0,r=(o=this.query.facets()).length;i<r;i++)if((e=o[i]).title===t.title){n=parseInt(e.param.split(/(?:\]?\[|\]$)/)[1]),e.param.indexOf(!1)&&(n=NaN);break}return isNaN(n)?this.query.facets.remove(function(e){return e.title===t.title}):this.query.facets.remove(function(t){return parseInt(t.param.split(/(?:\]?\[|\]$)/)[1])>=n})},e.prototype._removeHierarchicalFacets=function(t){var e,n,i,r,o,s,a,l,u,h,c,d;if(t.children){for(n=!1,a=0,u=(c=t.children).length;a<u;a++)(e=c[a]).applied&&(n=!0,o=e.title,this.query.facets.remove(function(t){return t.title===o}),this._removeHierarchicalFacets(e));if(this.query.facets.remove(function(e){if(!n)return e.title===t.title}),(i=this.query.params()).science_keywords_h){for(l=0,h=(d=i.science_keywords_h).length;l<h;l++)(r=d[l])&&(s||(s=[])).push(r);return i.science_keywords_h=s}}},e.prototype.addFacet=function(t){var e,n,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w;for(null==this.query.facets()&&this.query.facets([]),u=0,p=(_=t.param).length;u<p;u++){if(a=_[u],n=[],this._findAncestors(n,t),n.length>0&&!(null!=n?n[0].isTopic():void 0))for(h=0,f=(b=t.parent.children()).length;h<f;h++)if((l=b[h]).isTopic()&&null!=l.children){for(c=0,m=(w=l.children).length;c<m;c++)if(w[c].title===n[0].title){n.unshift(l);break}break}for(d=0,g=n.length;d<g;d++){for(e=n[d],r=[],this._findAncestors(r,e),y=0,v=r.length;y<v;y++)i=r[y],o=t.param[0].match(/science_keywords_h\[(\d+)\]\[.+\]/)[1],s=i.param[0].replace(/science_keywords_h\[\d+\]\[(.+)\]/g,"science_keywords_h["+o+"][$1]"),this.query.facets.push({title:i.title,param:s});o=t.param[0].match(/science_keywords_h\[(\d+)\]\[.+\]/)[1],s=e.param[0].replace(/science_keywords_h\[\d+\]\[(.+)\]/g,"science_keywords_h["+o+"][$1]"),this.query.facets.push({title:e.title,param:s})}this.query.facets.push({title:t.title,param:a})}return this.query.facets()},e.prototype.toggleFacet=function(t){return t.isSelected()?(t.isChecked(!1),this.removeFacet(t)):(t.isChecked(!0),this.addFacet(t)),!0},e}())}.call(this),function(){var t,e,n,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=this.edsc.models.data).Collections=(ko,e=$.extend,n=t.XhrModel,i=t.Collection,r=t.CollectionFacets,function(){function t(e){this.toggleVisibleCollection=o(this.toggleVisibleCollection,this),t.__super__.constructor.call(this,"/collections.json",e),this.facets=new r(e)}return a(t,n),t.forIds=function(e,n,r){var o,s,a,l,u,h;return a=function(){var t,r,o;for(o=[],t=0,r=e.length;t<r;t++)l=e[t],o.push(i.findOrCreate({id:l},n));return o}(),u=function(){var t,e,n;for(n=[],t=0,e=a.length;t<e;t++)(s=a[t]).hasAtomData()||n.push(s.id);return n}(),o=function(){return i.awaitDatasources(a,r)},u.length>0?(h={echo_collection_id:u},null!=n.params().all_collections&&(h.all_collections=n.params().all_collections),new t(n).search(h,function(t){var e,n;for(e=0,n=t.length;e<n;e++)t[e].dispose();return o()})):o(),null},t.prototype.params=function(){return e({include_facets:"v2"},t.__super__.params.call(this))},t.prototype._decorateNextPage=function(t){return this.page++,this.page>1&&delete t.include_facets,t.page_size=20,t.page_num=this.page},t.prototype._toResults=function(t,e,n){var r,o,s,a,l,u;if(a=this.query,r=t.feed.entry,s=function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)o=r[t],n.push(i.findOrCreate(o,a));return n}(),n.page_num>1)return e.concat(s);for(l=0,u=e.length;l<u;l++)e[l].dispose();return this.facets.update(t.feed.facets.children||[]),s},t.prototype.toggleVisibleCollection=function(t){return t.visible(!t.visible())},t}())}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h,c,d,p=function(t,e){return function(){return t.apply(e,arguments)}},f={}.hasOwnProperty;(t=this.edsc.models.data).Project=(e=ko,n=document,i=jQuery,$.extend,r=$.param,o=this.edsc.util.deparam,this.edsc.util.xhr.ajax,s=this.edsc.util.url,t.query.CollectionQuery,a=t.Collections,l=t.ServiceOptions,u=t.Collection,c=function(){function t(t){this._pool=t.concat()}return t.prototype.use=function(t){return this._remove(t),this._pool.push(t),t},t.prototype.next=function(){return this.use(this._pool[0])},t.prototype.has=function(t){return-1!==this._pool.indexOf(t)},t.prototype.unuse=function(t){return this._remove(t),this._pool.unshift(t),t},t.prototype._remove=function(t){var e;if(-1!==(e=this._pool.indexOf(t)))return this._pool.splice(e,1)},t}(),d=new c(["#3498DB","#E67E22","#2ECC71","#E74C3C","#9B59B6"]),h=function(){function t(t,n){var i;this.collection=t,this.meta=null!=n?n:{},this.collection.reference(),null==(i=this.meta).color&&(i.color=d.next()),this.granuleAccessOptions=e.asyncComputed({},100,this._loadGranuleAccessOptions,this),this.serviceOptions=new l(this.granuleAccessOptions),this.isResetable=e.computed(this._computeIsResetable,this,{deferEvaluation:!0})}return t.prototype._computeIsResetable=function(){var t,e,n;if(null!=this.granuleAccessOptions().defaults)for(t=0,e=(n=this.granuleAccessOptions().defaults.accessMethod).length;t<e;t++)if(n[t].collection_id===this.collection.id)return!0;return!1},t.prototype.dispose=function(){return d.has(this.meta.color)&&d.unuse(this.meta.color),this.collection.dispose(),this.serviceOptions.dispose(),this.granuleAccessOptions.dispose()},t.prototype._loadGranuleAccessOptions=function(){var t,e,r,o,s;if(t=this.collection.granuleDatasource())return console.log("Loading granule access options for "+this.collection.id),i(n).trigger("dataaccessevent",[this.collection.id]),o=this,r=function(t){return console.log("Finished loading access options for "+o.collection.id),o.granuleAccessOptions(t)},s=this,e=function(){return s._loadGranuleAccessOptions},t.loadAccessOptions(r,e);this.granuleAccessOptions({hits:0,methods:[]})},t.prototype.fromJson=function(t){return this.serviceOptions.fromJson(t.serviceOptions)},t.prototype.serialize=function(){var t,e,o,s,a,l,u,h,c,d,p,f,m;for(a=this.serviceOptions.serialize(),i(n).trigger("dataaccessevent",[this.collection.id,a]),o=[],l=0,h=(d=this.granuleAccessOptions().methods).length;l<h;l++)for(s=d[l],u=0,c=(p=a.accessMethod).length;u<c;u++)t=p[u],e={},null!==s.id&&void 0!==s.id&&t.id!==s.id||t.type!==s.type||(null!=s.id?e.id=s.id:e.id=t.type,e.form_hash=s.form_hash,o.push(e));return{id:this.collection.id,params:r(null!=(f=null!=(m=this.collection.granuleDatasource())?m.toQueryParams():void 0)?f:this.collection.query.globalParams()),serviceOptions:a,form_hashes:o}},t}(),function(){function t(t){this.query=t,this.isSearchingGranules=p(this.isSearchingGranules,this),this.hasCollection=p(this.hasCollection,this),this.removeCollection=p(this.removeCollection,this),this._collectionIds=e.observableArray(),this._collectionsById={},this.id=e.observable(null),this.collections=e.computed({read:this.getCollections,write:this.setCollections,owner:this}),this.focusedProjectCollection=e.observable(null),this.focus=e.computed({read:this._readFocus,write:this._writeFocus,owner:this}),this.searchGranulesCollection=e.observable(null),this.accessCollections=e.computed({read:this._computeAccessCollections,owner:this,deferEvaluation:!0}),this.allReadyToDownload=e.computed(this._computeAllReadyToDownload,this,{deferEvaluation:!0}),this.visibleCollections=e.computed({read:this._computeVisibleCollections,owner:this,deferEvaluation:!0}),this.serialized=e.computed({read:this._toQuery,write:this._fromQuery,owner:this,deferEvaluation:!0}),this._pending=e.observable(null)}return t.prototype._computeAllReadyToDownload=function(){var t,e,n;for(t=0,e=(n=this.accessCollections()).length;t<e;t++)if(!n[t].serviceOptions.readyToDownload())return!1;return!0},t.prototype._computeAccessCollections=function(){var t,e,n,i,r,o;if(t=this.focusedProjectCollection())return[t];for(o=[],n=0,i=(r=this._collectionIds()).length;n<i;n++)e=r[n],o.push(this._collectionsById[e]);return o},t.prototype._readFocus=function(){var t;return null!=(t=this.focusedProjectCollection())?t.collection:void 0},t.prototype._writeFocus=function(t){var e,n,i;if((null!=(e=(n=this.focusedProjectCollection)())?e.collection:void 0)!==t)return null!=e&&e.dispose(),null!=t&&(i=new h(t)),n(i)},t.prototype.getCollections=function(){var t,e,n,i,r,o;for(o=[],e=0,n=(i=this._collectionIds()).length;e<n;e++)t=i[e],o.push(null!=(r=this._collectionsById[t])?r.collection:void 0);return o},t.prototype.exceedCollectionLimit=function(){var t,e,n;for(t=0,e=(n=this.getCollections()).length;t<e;t++)if(n[t].isMaxOrderSizeReached())return!0;return!1},t.prototype.setCollections=function(t){var e,n,i,r,o,s,a,l;for(e=[],n={},r=s=0,a=t.length;s<a;r=++s)o=(i=t[r]).id,e.push(o),n[o]=null!=(l=this._collectionsById[o])?l:new h(i);return this._collectionsById=n,this._collectionIds(e),null},t.prototype._computeVisibleCollections=function(){var t,e,n,i,r,o;for(e=function(){var e,n,i,r;for(r=[],e=0,n=(i=this.collections()).length;e<n;e++)(t=i[e]).visible()&&r.push(t);return r}.call(this),(n=this.focus())&&n.visible()&&-1===e.indexOf(n)&&e.push(n),i=0,r=(o=u.visible()).length;i<r;i++)t=o[i],-1===e.indexOf(t)&&e.push(t);return e},t.prototype.colorForCollection=function(t){return this.hasCollection(t)?this._collectionsById[t.id].meta.color:null},t.prototype.isEmpty=function(){return this._collectionIds.isEmpty()},t.prototype.addCollection=function(t){var e,n;return e=t.id,null==(n=this._collectionsById)[e]&&(n[e]=new h(t)),this._collectionIds.remove(e),this._collectionIds.push(e),null},t.prototype.removeCollection=function(t){var e,n;return e=t.id,null!=(n=this._collectionsById[e])&&n.dispose(),delete this._collectionsById[e],this._collectionIds.remove(e),null},t.prototype.hasCollection=function(t){return-1!==this._collectionIds.indexOf(t.id)},t.prototype.isSearchingGranules=function(t){return this.searchGranulesCollection()===t},t.prototype.fromJson=function(t){var e,n,i,r,s;if(e=null,null!=t.collections)for(e={},i=0,r=(s=t.collections).length;i<r;i++)e[(n=s[i]).id]=n;return this._pendingAccess=e,this.serialized(o(t.query))},t.prototype.serialize=function(t){var e;return null==t&&(t=this.collections),t=function(){var t,n,i,r;for(r=[],t=0,n=(i=this.accessCollections()).length;t<n;t++)e=i[t],r.push(e.serialize());return r}.call(this),{query:r(this.serialized()),collections:t,source:s.realQuery()}},t.prototype.getProjectCollection=function(t){var e;return(null!=(e=this.focusedProjectCollection())?e.collection.id:void 0)===t?e:this._collectionsById[t]},t.prototype._toQuery=function(){var t,e,n,r,o,s,a,l,u,h,c,d,p,m,g,v,y;if(null!=this._pending())return this._pending();if(c=i.extend({},this.query.serialize()),e=[this.focus()].concat(this.collections()),s=function(){var t,n,i,o;for(o=[],t=0,n=e.length;t<n;t++)r=e[t],o.push(null!=(i=null!=r?r.id:void 0)?i:"");return o}(),e.length>1||e[0]){for(u=[{}],c.p=s.join("!"),d=1,this.focus()&&!this.hasCollection(this.focus())&&(d=0),o=p=0,g=(y=e.slice(d)).length;p<g;o=++p)if(null!=(n=(t=y[o]).granuleDatasource()))for(l in h=n.toBookmarkParams(),0===Object.keys(h).length&&(u[o+d]={}),o+d!==0&&t.visible()&&(h.v="t"),h)if(f.call(h,l)){h[l],u[o+d]=h;break}for(a=m=0,v=u.length;m<v;a=++m)void 0===u[a]&&(u[a]={});u.length>0&&(c.pg=u)}return c},t.prototype._fromQuery=function(t){var e,n,i,r,o,s,l,u,h;if(this.query.fromJson(t),!(e=t.p))return this.collections([]);if(t.sgd,e!==this._collectionIds().join("!")){if(n=e.split("!"),(i=!!n[0])||n.shift(),this._pending(t),null==t.pg&&(t.pg=[]),null==(s=t.pg)[0]&&(s[0]={}),i)for(r=l=0,u=n.length;l<u;r=++l)o=n[r],r>0&&o===n[0]&&(t.pg[0]=t.pg[r]);return a.forIds(n,this.query,(h=this,function(e){var n,o,s,a,l,u,c,d,p;for(h._pending(null),s=null!=(d=h._pendingAccess)?d:{},o=0,i||(o=1),a=null!=(p=t.pg)?p:[],r=u=0,c=e.length;u<c;r=++u)n=e[r],null!=(l=a[r+o])&&null!=n.granuleDatasource()&&(n.granuleDatasource().fromBookmarkParams(l,t),"t"===l.v&&n.visible(!0)),0===r&&i?h.focus(n):h.addCollection(n),n.dispose(),s[n.id]&&h.getProjectCollection(n.id).fromJson(s[n.id]);return h._pendingAccess=null}))}},t}())}.call(this),function(){var t,e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}};this.edsc.models.data.Preferences=(t=ko,e=window,n=this.edsc.util.xhr.getJSON,i=this.edsc.util.xhr.post,function(){function o(){this.serialize=r(this.serialize,this),this.fromJson=r(this.fromJson,this),this.showTour=t.observable(!0),this.doNotShowTourAgain=t.observable("false"),this.isLoaded=t.observable(!1),this.load()}return o.prototype.load=function(){var t,i,r;return i=new $.Deferred,this.ready=i,t=e.edscprefs,e.edscprefs=null,null!=t?(this.fromJson(t),this.isLoaded(!0)):n("/users/site_preferences",(r=this,function(t){return console.log("Loaded site preferences, "+JSON.stringify(t)),r.fromJson(t),r.isLoaded(!0),i.resolve()})),null},o.prototype.onload=function(e){var n,i;return t.computed({read:(i=this,function(){return i.isLoaded()}),disposeWhen:(n=this,function(){var t;return(t=n.isLoaded())&&e(n),t})}),null},o.prototype.save=function(){var t;return t=this.serialize(),console.log("Saving site preferences, "+JSON.stringify(t)),i("/users/site_preferences",{site_preferences:t}),null},o.prototype.fromJson=function(t){if(null!=t)return this.showTour("false"!==t.show_tour),this.doNotShowTourAgain(t.doNotShowTourAgain)},o.prototype.serialize=function(){var t;return{show_tour:this.showTour(),doNotShowTourAgain:null!=(t=this.doNotShowTourAgain())?t.toString():void 0}},o}())}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};this.edsc.models.ui.SpatialType=(t=ko,e=jQuery,function(){function i(e){this.query=e,this._computeDisplaySpatialName=n(this._computeDisplaySpatialName,this),this.selectGrid=n(this.selectGrid,this),this.selectShapefile=n(this.selectShapefile,this),this.selectPolygon=n(this.selectPolygon,this),this.selectRectangle=n(this.selectRectangle,this),this.selectPoint=n(this.selectPoint,this),this.selectNone=n(this.selectNone,this),this.clearManualEntry=n(this.clearManualEntry,this),this.icon=t.observable("fa-crop"),this.name=t.observable("Spatial"),this.isGrid=t.observable(!1),this.displaySpatial=t.computed({read:this._computeDisplaySpatialName,owner:this,deferEvaluation:!0}),this.querySpatial=t.computed({read:this._computeQuerySpatial,owner:this,deferEvaluation:!0}),this.mapControlTop=t.computed({read:this._computeMapControlPosition,owner:this}),this.manualEntryVisible=t.observable(!1)}return i.prototype.clearManualEntry=function(){return this.manualEntryVisible(!1)},i.prototype.selectNone=function(){return this.name("Spatial"),this.icon("fa-crop"),this.isGrid(!1),"Point"===this.displaySpatial()||"Rectangle"===this.displaySpatial()?this.manualEntryVisible(!0):this.manualEntryVisible(!1)},i.prototype.selectPoint=function(){return this.name("Point"),this.icon("fa-map-marker"),this.isGrid(!1),this.manualEntryVisible(!0),e(".filter-stack").show()},i.prototype.selectRectangle=function(){return this.name("Rectangle"),this.icon("edsc-icon-rect-open"),this.isGrid(!1),this.manualEntryVisible(!0),e(".filter-stack").show()},i.prototype.selectPolygon=function(){return this.name("Polygon"),this.icon("edsc-icon-poly-open"),this.isGrid(!1),this.manualEntryVisible(!1),e(".filter-stack").show()},i.prototype.selectShapefile=function(){return this.name("Shape File"),this.icon("fa-file-o"),this.isGrid(!1),this.manualEntryVisible(!1)},i.prototype.selectGrid=function(){return this.isGrid(!0)},i.prototype._toReadableName=function(t){return"point"===t?"Point":"bounding_box"===t?"Rectangle":null},i.prototype._computeDisplaySpatialName=function(){var t,n;if(t=this._toReadableName(null!=(n=this.query.spatial())?n.split(":")[0]:void 0),"Spatial"===this.name()){if(t&&this.name()!==t&&this.displaySpatial()!==t&&this.name()!==this.displaySpatial())return e("#manual-coord-entry-container").find(".error")?this.displaySpatial():t;if((null!=t?t.length:void 0)>0)return this.manualEntryVisible(!0),t;if(this.displaySpatial())return this.displaySpatial()}return this.name()},i.prototype._computeQuerySpatial=function(){var t;return null!=(t=this.query.spatial())?t.split(":")[0]:void 0},i.prototype._computeMapControlPosition=function(){var t;return"Point"===(t=this.displaySpatial())?"90px":"Rectangle"===t?"178px":void 0},i}())}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};this.edsc.models.ui.GranulesList=(t=jQuery,e=this.edsc.config,function(){function i(e){var i,r;this.collection=e,this.clearGranuleIds=n(this.clearGranuleIds,this),this.hideGranuleDetails=n(this.hideGranuleDetails,this),this.showGranuleDetails=n(this.showGranuleDetails,this),this.clearExclusions=n(this.clearExclusions,this),this._onRemoveStickyGranule=n(this._onRemoveStickyGranule,this),this.undoExcludeGranule=n(this.undoExcludeGranule,this),this.removeGranule=n(this.removeGranule,this),this.toggleStickyFocus=n(this.toggleStickyFocus,this),this.isStickied=n(this.isStickied,this),this.onGranuleMouseout=n(this.onGranuleMouseout,this),this.onGranuleMouseover=n(this.onGranuleMouseover,this),
this.finishLoad=n(this.finishLoad,this),this._onKeyDown=n(this._onKeyDown,this),this._onStickyGranule=n(this._onStickyGranule,this),this._onFocusGranule=n(this._onFocusGranule,this),this.scrolled=n(this.scrolled,this),this._constructWithDom=n(this._constructWithDom,this),this.collection.reference(),this._wasVisible=this.collection.visible(),this.collection.visible(!0),this.granules=ko.computed((i=this,function(){var t;return null!=(t=i.collection.granuleDatasource())?t.data():void 0})),this._hasFocus=ko.observable(!1),this.focused=ko.observable(null),this.stickied=ko.observable(null),this.loadingBrowse=ko.observable(!1),this.serialized=ko.computed({read:this._readSerialized,write:this._writeSerialized,owner:this,deferEvaluation:!0}),this._pendingSticky=ko.observable(null),this._setStickyComputed=ko.computed({read:this._setSticky,owner:this}),this._hasSelected=ko.observable(!1),this.selected=ko.observable(null),this.fixOverlayHeight=ko.computed((r=this,function(){var e;if(null!=(e=r.selected())&&"function"==typeof e.detailsLoaded?e.detailsLoaded():void 0)return t(".master-overlay").masterOverlay("contentHeightChanged")})),this._constructWithDom()}return i.prototype._constructWithDom=function(){var e,n,i,r,o;if(null!=(i=(n=t("#map")).data("map")))return this._map=i.map,this._map.on("edsc.focusgranule",this._onFocusGranule),this._map.on("edsc.stickygranule",this._onStickyGranule),this._map.on("edsc.excludestickygranule",this._onRemoveStickyGranule),(e=t("#granule-list")).on("keydown",this._onKeyDown),n.on("keydown",this._onKeyDown),e.on("focusout",(r=this,function(){return r._hasFocus(!1)})),e.on("focusin",(o=this,function(){return setTimeout(function(){return o._hasFocus(!0)},500)})),t(document).on("click","a.direct-download",function(){var e;return e={accessMethod:[{method:"Single Granule Download",type:"single_granule"}]},t(document).trigger("dataaccessevent",[this.collection,e])}),this._setupSwipeEvents(e),i.focusCollection(this.collection);setTimeout(this._constructWithDom,0)},i.prototype.dispose=function(){return t("#map").data("map").focusCollection(null),this._map.off("edsc.focusgranule",this._onFocusGranule),this._map.off("edsc.stickygranule",this._onStickyGranule),this._map.off("edsc.excludestickygranule",this._onRemoveStickyGranule),this.collection.visible(this._wasVisible),this.collection.dispose(),this._setStickyComputed.dispose(),this.stickied(null)},i.prototype._setupSwipeEvents=function(n){var i,r,o;return r=0,o=0,i=this,n.on("touchstart",".panel-list-item",function(t){var e,n,i;if(1===(null!=(i=(e=t.originalEvent).touches)?i.length:void 0))return n=e.touches[0],r=n.clientX,o=n.clientY}),n.on("touchmove",".panel-list-item",function(e){var n,i,s,a;if(1===(null!=(a=(i=e.originalEvent).touches)?a.length:void 0))return s=i.touches[0],(n=r-s.clientX)>Math.abs(s.clientY-o)?(e.preventDefault(),t(this).css({transform:"translateX("+-n+"px)"})):void 0}),n.on("touchend",".panel-list-item",function(n){var s,a,l,u,h,c;if(0===(null!=(h=(l=n.originalEvent).touches)?h.length:void 0)&&1===(null!=(c=l.changedTouches)?c.length:void 0))return u=l.changedTouches[0],(s=r-u.clientX)>Math.abs(u.clientY-o)?(r=0,o=0,3*s>this.clientWidth?(t(this).css({transform:"translateX(-1000px)"}),a=ko.dataFor(this),setTimeout(function(){return i.removeGranule(a)},e.defaultAnimationDurationMs)):t(this).css({transform:""})):void 0})},i.prototype.scrolled=function(t,e){var n;if((n=e.target).scrollTop>n.scrollHeight-n.offsetHeight-40)return this.granules().loadNextPage()},i.prototype._setSticky=function(){var t,e,n,i,r;if(this.stickied())this._pendingSticky(null);else if(e=this._pendingSticky())for(n=0,i=(r=this.granules().results()).length;n<i;n++)if((t=r[n]).id===e)return this._pendingSticky(null),setTimeout(function(e){return function(){return e._map.fire("edsc.stickygranule",{granule:t})}}(this),0),void(this._hasSelected()&&(this.selected(t),this.selected().details()))},i.prototype._readSerialized=function(){var t,e;return null!=(t=this._pendingSticky())?t:null!=(e=this.stickied())?e.id:void 0},i.prototype._writeSerialized=function(t){var e,n;if(t!==(null!=(e=this._pendingSticky.peek())?e:null!=(n=this.stickied.peek())?n.id:void 0))return this.stickied(null),this._pendingSticky(t)},i.prototype._onFocusGranule=function(t){return this.focused(t.granule)},i.prototype._onStickyGranule=function(e){var n,i,r,o,s,a,l;if(t(".panel-list-selected"),this.stickied(e.granule),this.loadingBrowse(null!=e.granule),null!=e.granule&&(n=(l=(i=t("#granule-list .master-overlay-content.panel-list")).offset().top)+i.height()-175,(a=(s=t(".panel-list-selected")).offset().top)>n?r=n:a<l&&(r=l+50),!1!==e.scroll&&null!=r))return o=t(s).offset().top+t(i).scrollTop()-parseInt(r),t(i).animate({scrollTop:o},edsc.config.defaultAnimationDurationMs,"swing")},i.prototype._onKeyDown=function(t){var e,n,i,r,o,s,a,l;if("granule-ids"===t.target.id)return!0;if(l=this.stickied(),s=38===(a=t.keyCode),r=40===a,o=-1!==[8,46,88].indexOf(a),(s||r||o)&&t.preventDefault(),l){if(-1===(i=(n=this.granules().results()).indexOf(l)))return;if(s||r){if(s&&0===i||r&&i===n.length-1)return;s&&(e=n[i-1]),r&&(e=n[i+1]),this._map.fire("edsc.stickygranule",{granule:e}),t.stopPropagation()}if(o)return this.removeGranule(n[i])}},i.prototype.finishLoad=function(){return this.loadingBrowse(!1)},i.prototype.onGranuleMouseover=function(t){if(!(e.allowTouch&&L.Browser.touch||t===this.focused()))return this._map.fire("edsc.focusgranule",{granule:t})},i.prototype.onGranuleMouseout=function(t){if(!(e.allowTouch&&L.Browser.touch||t!==this.focused()))return this._map.fire("edsc.focusgranule",{granule:null})},i.prototype.isStickied=function(t){return t===this.stickied()},i.prototype.toggleStickyFocus=function(e,n){var i;if(!(i=this.isStickied(e))||this._hasFocus())return t(null!=n?n.target:void 0).closest("a").length>0||(i&&(e=null),t(n.target).closest(".panel-list-item").toggleClass("panel-list-selected",!i),this._map.fire("edsc.stickygranule",{granule:e}))},i.prototype.canRemoveGranules=function(){var t;return null!=(t=this.collection.granuleDatasource())?t.hasCapability("excludeGranules"):void 0},i.prototype.removeGranule=function(t){var e,n,i;if(this.canRemoveGranules())return null==(i=(e=this.granules().results())[(n=e.indexOf(t))+1])&&(i=e[n-1]),t===this.focused()&&this._map.fire("edsc.focusgranule",{granule:i}),t===this.stickied()&&this._map.fire("edsc.stickygranule",{scroll:!1,granule:null!=i?i:null}),this.granules().exclude(t),this.scrolled(null,{target:document.getElementById("granules-scroll")})},i.prototype.undoExcludeGranule=function(){var t;if(t=this.granules().undoExclude(),this.focused()&&this._map.fire("edsc.focusgranule",{granule:t}),this.stickied())return this._map.fire("edsc.stickygranule",{scroll:!1,granule:null!=t?t:null})},i.prototype._onRemoveStickyGranule=function(t){return this.removeGranule(this.stickied(),t)},i.prototype.clearExclusions=function(){return this.granules().clearExclusions()},i.prototype.showGranuleDetails=function(t,e){if(null==e&&(e=null),this._map.fire("edsc.stickygranule",{granule:t}),this.selected()!==t)return this.selected(t)},i.prototype.hideGranuleDetails=function(t){if(null==t&&(t=null),this.selected())return this._unselectTimeout=setTimeout((n=this,function(){return n.selected(null)}),e.defaultAnimationDurationMs);var n},i.prototype.state=function(t){return this._hasSelected(t)},i.prototype.clearGranuleIds=function(){return this.granules().query.granuleIds("")},i}())}.call(this),function(){var t,e,n,i,r,o,s,a=function(t,e){return function(){return t.apply(e,arguments)}};e=this.edsc.models.ui,t=this.edsc.models.data,e.CollectionsList=(n=jQuery,i=document,r=this.edsc.config,t.Collections,o=e.GranulesList,this.edscplugin,s=this.edsc.util.xhr.ajax,function(){function e(t,e,i){var r;this.query=t,this.collections=e,this.project=i,this.unfocusCollection=a(this.unfocusCollection,this),this.toggleQueryCollectionSpatial=a(this.toggleQueryCollectionSpatial,this),this.canQueryCollectionSpatial=a(this.canQueryCollectionSpatial,this),this.focusCollection=a(this.focusCollection,this),this.hideCollectionDetails=a(this.hideCollectionDetails,this),this.showCollectionDetails=a(this.showCollectionDetails,this),this.scrolled=a(this.scrolled,this),this.pendingSerialized=ko.observable(null),this._hasFocus=ko.observable(!1),this._focusedList=null,this.focused=ko.computed({read:this._readFocused,write:this._writeFocused,owner:this}),this._hasSelected=ko.observable(!1),this.selected=ko.computed({read:this._readSelected,write:this._writeSelected,owner:this}),this.fixOverlayHeight=ko.computed((r=this,function(){var t,e;if(null!=(t=r.selected())&&"function"==typeof t.detailsLoaded?t.detailsLoaded():void 0)return null!=(e=n(".master-overlay"))?e.masterOverlay("contentHeightChanged"):void 0})),this.serialized=ko.computed({read:this._readSerialized,write:this._writeSerialized,owner:this,deferEvaluation:!0}),this.resetScrollOnUpdate()}return e.prototype.resetScrollOnUpdate=function(){var t,e;return t=-1,ko.computed((e=this,function(){var n,r;if(!(n=e.collections).isLoading()&&t!==n.completedRequestId&&1===n.page)return t=n.completedRequestId,null!=(r=i.getElementById("collection-scroll-pane"))?r.scrollTop=0:void 0}))},e.prototype.toggleBrowseImage=function(){return event.stopPropagation(),n("#toggleBrowseImageButton").html().indexOf("fa-close")>=0?n("#toggleBrowseImageButton").html('<span class="fa-stack open-browse"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-plus fa-stack-1x fa-inverse"></i></span>'):n("#toggleBrowseImageButton").html('<span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-close fa-stack-1x fa-inverse"></i></span>'),n("#browseImageDiv").toggle("fast")},e.prototype.escapePortal=function(){var t;return t=window.location.href.replace(/\/portal\/[\w]+/,""),window.location.href=t},e.prototype.scrolled=function(t,e){var n;if(n=e.target,this.collections.isRelevant()&&n.scrollTop>n.scrollHeight-n.offsetHeight-40)return this.collections.loadNextPage(this.query.params())},e.prototype.showCollectionDetails=function(t,e){if(null==e&&(e=null),this.selected()!==t)return this.selected(t)},e.prototype.hideCollectionDetails=function(t){if(null==t&&(t=null),null!=this.selected())return this._unselectTimeout=setTimeout((e=this,function(){return e.selected(null)}),r.defaultAnimationDurationMs);var e},e.prototype.toggleButtonGroup=function(t,e){return n(e.currentTarget).parent().find(".dropdown").toggle()},e.prototype.focusCollection=function(e,i){var r,a,l,u,h;return null==i&&(i=null),u=this.query.params(),r=this.collections.results().map(function(t){return t.id}),l=this.collections.results().indexOf(e),a=function(){var t,n,i,r,o,s;switch(null!=(t=u.original_keyword)?t.toLowerCase():void 0){case null!=(n=e.dataset_id)?n.toLowerCase():void 0:case null!=(i=e.id)?i.toLowerCase():void 0:case null!=(r=e.short_name())?r.toLowerCase():void 0:case(null!=(o=e.short_name())?o.toLowerCase():void 0)+"_"+e.version_id.toLowerCase():case(null!=(s=e.short_name())?s.toLowerCase():void 0)+" "+e.version_id.toLowerCase():return!0;default:return!1}}(),t={query:u,collections:r,selected_index:l,selected_collection:e.id,exact_match:a},n(null!=i?i.target:void 0).closest("a").length>0||!!e.canFocus()&&(null!=(h=this.focused())?h.collection.id:void 0)!==e.id&&(s({data:t,dataType:"json",url:"/collections/collection_relevancy",method:"post",success:function(t){return console.log(t)}}),this.focused(new o(e)),!0)},e.prototype.canQueryCollectionSpatial=function(t){var e,n;return n=this.query.spatial(),null!=(e=t.spatial_constraint())&&(!n||n===e)},e.prototype.toggleQueryCollectionSpatial=function(t){var e,i;return(e=t.spatial_constraint())===this.query.spatial()?e="":null!=t.points&&(i=t.points[0].split(/\s+/),n("#map").data("map").map.fitBounds([i,i])),this.query.spatial(e),!1},e.prototype.unfocusCollection=function(){if(null!=this.focused())return this._unfocusTimeout=setTimeout((t=this,function(){return t.focused(null)}),r.defaultAnimationDurationMs);var t},e.prototype._readFocused=function(){var t,e;return e=this._focusedList,t=this.project.focus(),this._hasFocus()&&null!=t?(null!=e?e.collection:void 0)!==t&&(null!=e&&e.dispose(),clearTimeout(this._unfocusTimeout),this._focusedList=new o(t),this._focusedList.serialized(this.pendingSerialized.peek()),this.pendingSerialized(null)):(null!=e&&e.dispose(),this._focusedList=null),this._focusedList},e.prototype._writeFocused=function(t){var e,n;if(this._hasFocus(null!=t),null!=(n=this._focusedList)&&n.dispose(),this._focusedList=t,clearTimeout(this._unfocusTimeout),(e=null!=t?t.collection:void 0)||!this._hasSelected())return this.project.focus(e)},e.prototype._readSelected=function(){var t;if(this._hasSelected())return clearTimeout(this._unselectTimeout),null!=(t=this.project.focus())&&t.details(),t},e.prototype._writeSelected=function(t){return clearTimeout(this._unselectTimeout),(this.project.focus.peek()!==t&&t||!this._hasFocus())&&this.project.focus(t),this._hasSelected(null!=t)},e.prototype._readSerialized=function(){var t,e,n,i;return t={},null!=(e=null!=(n=this.pendingSerialized())?n:null!=(i=this.focused())?i.serialized():void 0)&&(t.g=e),t},e.prototype._writeSerialized=function(t){var e;return e=t.g,this.focused()?this.focused().serialized(e):this.pendingSerialized(e)},e.prototype.state=function(t,e){return this._hasFocus(t),this._hasSelected(e)},e}())}.call(this),function(){var t,e,n,i,r,o,s,a,l=function(t,e){return function(){return t.apply(e,arguments)}};this.edsc.models.ui.ProjectList=(t=ko,e=window,n=document,i=this.edsc.util.url,this.edsc.util.xhr,r=this.edsc.util.date,o=jQuery,this.edsc.util.xhr.wait,s=this.edsc.util.xhr.ajax,a=function(t){var e,n,i,r;return i=o(t),n=o('<li class="sortable-placeholder"/>'),r=null,e=null,i.on("dragstart.sortable","> *",function(t){var n;return(n=t.originalEvent.dataTransfer).effectAllowed="move",n.setData("Text","dummy"),e=o(this),r=e.index()}),i.on("dragend.sortable","> *",function(){var t,o;return e.show(),n.detach(),(o=r)!==(t=e.index())&&i.trigger("sortupdate",{startIndex:o,endIndex:t}),e=null}),i.on("drop.sortable","> *",function(t){return t.stopPropagation(),n.after(e),!1}),i.on("dragover.sortable dragenter.sortable","> *",function(t){return t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="move",e.hide().appendTo(i),n.index()<o(this).index()?o(this).after(n):o(this).before(n),!1})},function(){function u(e,i){this.project=e,this.collectionResults=i,this._computeAllCollectionsVisible=l(this._computeAllCollectionsVisible,this),this.toggleViewAllCollections=l(this.toggleViewAllCollections,this),this.hideFilters=l(this.hideFilters,this),this.applyFilters=l(this.applyFilters,this),this.showFilters=l(this.showFilters,this),this.toggleCollection=l(this.toggleCollection,this),this.chooseOverride=l(this.chooseOverride,this),this.chooseTemporal=l(this.chooseTemporal,this),this.loginAndDownloadProject=l(this.loginAndDownloadProject,this),this.loginAndDownloadGranule=l(this.loginAndDownloadGranule,this),this.loginAndDownloadCollection=l(this.loginAndDownloadCollection,this),this.awaitingStatus=l(this.awaitingStatus,this),this._launchDownload=l(this._launchDownload,this),this._onReady=l(this._onReady,this),this._syncHitsCounts=l(this._syncHitsCounts,this),this.visible=t.observable(!1),this.needsTemporalChoice=t.observable(!1),this.collectionLinks=t.computed(this._computeCollectionLinks,this,{deferEvaluation:!0}),this.collectionsToDownload=t.computed(this._computeCollectionsToDownload,this,{deferEvaluation:!0}),this.collectionOnly=t.computed(this._computeCollectionOnly,this,{deferEvaluation:!0}),this.submittedOrders=t.computed(this._computeSubmittedOrders,this,{deferEvaluation:!0}),this.submittedServiceOrders=t.computed(this._computeSubmittedServiceOrders,this,{deferEvaluation:!0}),this.pollProjectUpdates=t.computed(this._computeProjectUpdates,this,{deferEvaluation:!0}),this.pollingIntervalId=t.observable(null),this.allCollectionsVisible=t.computed(this._computeAllCollectionsVisible,this,{deferEvaluation:!0}),t.computed(this._syncHitsCounts,this),o(n).ready(this._onReady)}return u.prototype._syncHitsCounts=function(){var t,e,n,i,r,o,s,a,l,u;if(null!=this.collectionResults&&null!=this.collectionResults.loadTime()){for(u=[],n=0,r=(s=this.project.collections()).length;n<r;n++){for(t=s[n],e=!1,i=0,o=(a=this.collectionResults.results()).length;i<o;i++)if(a[i].id===t.id){e=!0;break}e?u.push(void 0):u.push(null!=(l=t.granuleDatasource())?l.data():void 0)}return u}},u.prototype._onReady=function(){return a("#project-collections-list"),o("#project-collections-list").on("sortupdate",(t=this,function(e,n){var i,r,o,s;return n.item,s=n.startIndex,o=n.endIndex,i=(r=t.project.collections().concat()).splice(s,1)[0],r.splice(o,0,i),t.project.collections(r)}));var t},u.prototype._launchDownload=function(t){return this.project.focus(t),this.configureProject()},u.prototype.awaitingStatus=function(){return 0===this.collectionsToDownload().length&&0===this.collectionOnly().length&&0===this.submittedOrders().length&&0===this.submittedServiceOrders().length&&0===this.collectionLinks().length},u.prototype.loginAndDownloadCollection=function(t){var e,n,i;return o("#delayOk").on("click",(i=this,function(){return i._launchDownload(t)})),e=!1,t.tags()&&t.tags()["edsc.collection_alerts"]&&(e=t.tags()["edsc.collection_alerts"].data.limit),e&&t.granuleCount()>e?((n=t.tags()["edsc.collection_alerts"].data.message)&&n.length>0?o("#delayOptionalMessage").text("Message from data provider: "+n):o("#delayOptionalMessage").text(""),o("#delayWarningModal").modal("show")):this._launchDownload(t)},u.prototype.loginAndDownloadGranule=function(t,e){return this.project.focus(t),this.configureProject(e.id)},u.prototype.loginAndDownloadProject=function(){return this.configureProject()},u.prototype.configureProject=function(t){return null==t&&(t=null),this._sortOutTemporalMalarkey(function(n){var r,o,s;return s=null!=t?"&sgd="+encodeURIComponent(t):"",r="&back="+encodeURIComponent(i.fullPath(i.cleanPath().split("?")[0])),o="/data/configure?"+i.realQuery()+s+n+r,e.location.href=i.fullPath(o)})},u.prototype._sortOutTemporalMalarkey=function(t){var e,n,o;return o=i.currentQuery(),(e=this.project.query.focusedTemporal())?(n="&ot="+encodeURIComponent([r.toISOString(e[0]),r.toISOString(e[1])].join(",")),o.match(/[\?\&\[]qt\]?=/)?this.needsTemporalChoice({callback:t,focusedStr:n}):t(n)):t("")},u.prototype.chooseTemporal=function(){var t;return t=this.needsTemporalChoice().callback,this.needsTemporalChoice(!1),t("")},u.prototype.chooseOverride=function(){var t,e,n;return t=(n=this.needsTemporalChoice()).callback,e=n.focusedStr,this.needsTemporalChoice(!1),t(e)},u.prototype.toggleCollection=function(t){var e;return(e=this.project).hasCollection(t)?e.removeCollection(t):e.addCollection(t)},u.prototype._computeCollectionLinks=function(){var t,e,n,i,r,o,s,a,l,u,h,c,d;for(e=[],o=0,a=(u=this.project.accessCollections()).length;o<a;o++){for(r=(t=u[o].collection).dataset_id,i=[],s=0,l=(c=null!=(h=t.links)?h:[]).length;s<l;s++)-1!==(n=c[s]).rel.indexOf("metadata#")&&i.push({title:null!=(d=n.title)?d:n.href,href:n.href});i.length>0&&e.push({dataset_id:r,links:i})}return e},u.prototype._computeCollectionsToDownload=function(){var t,e,n,i,r,o,s,a,l,u,h,c,d,p;if(e=[],null==(n=this.project.id()))return e;for(s=0,l=(h=this.project.accessCollections()).length;s<l;s++)for((t=(r=h[s]).collection).browseable_granule,t.id,o=t.dataset_id,a=0,u=(c=r.serviceOptions.accessMethod()).length;a<u;a++)"download"===(i=c[a]).type&&e.push({title:o,links:null!=(d=t.granuleDatasource())?d.downloadLinks(n):void 0,order_status:null!=(p=i.orderStatus)?p.toLowerCase().replace(/_/g," "):void 0,error_code:i.errorCode,error_message:i.errorMessage});return e},u.prototype._computeSubmittedOrders=function(){var t,e,n,r,o,s,a,l,u,h,c,d,p,f,m;for(a=[],o=this.project.id(),u=0,c=(p=this.project.accessCollections()).length;u<c;u++)for(n=(e=(l=p[u]).collection).id,r=null!=e.browseable_granule,h=0,d=(f=l.serviceOptions.accessMethod()).length;h<d;h++)"order"===(s=f[h]).type&&(this.pollProjectUpdates(),t=-1!==["SUBMITTING","QUOTED","NOT_VALIDATED","QUOTED_WITH_EXCEPTIONS","VALIDATED"].indexOf(s.orderStatus),a.push({dataset_id:e.dataset_id,order_id:s.orderId,order_status:null!=(m=s.orderStatus)?m.toLowerCase().replace(/_/g," "):void 0,cancel_link:t?i.fullPath("/data/remove?order_id="+s.orderId):void 0,is_in_progress:"creating"===s.orderStatus||0===s.orderStatus.indexOf("PROCESSING")||t,dropped_granules:s.droppedGranules,downloadBrowseUrl:r&&i.fullPath("/granules/download.html?browse=true&project="+o+"&collection="+n),method_name:s.method(),error_code:s.errorCode,error_message:s.errorMessage}));return a},u.prototype._computeProjectUpdates=function(){var t,n,i,r,o,a,l,u;for(i=!1,a=0,l=(r=this.submittedOrders().concat(this.submittedServiceOrders())).length;a<l;a++)if((n=r[a]).is_in_progress||"creating"===n.order_status){i=!0;break}return t=this.pollingIntervalId.peek(),!i&&t?(clearInterval(t),this.pollingIntervalId(null)):i&&!t?(o=e.location.href+".json",console.log("Loading project data for "+this.project.id()),t=setInterval((u=this,function(){return s({dataType:"json",url:o,success:function(t){return console.log("Finished loading project data for "+u.project.id()),u.project.fromJson(t)},complete:function(){return i=!1}})}),5e3),this.pollingIntervalId(t)):void 0},u.prototype._computeSubmittedServiceOrders=function(){var t,e,n,r,o,s,a,l,u,h,c,d,p,f;for(l=[],r=this.project.id(),u=0,c=(p=this.project.accessCollections()).length;u<c;u++)for(e=(t=(a=p[u]).collection).id,n=null!=t.browseable_granule,h=0,d=(f=a.serviceOptions.accessMethod()).length;h<d;h++)"service"===(o=f[h]).type&&(this.pollProjectUpdates(),s=(o.serviceOptions.number_processed/o.serviceOptions.total_number*100).toFixed(0),l.push({dataset_id:t.dataset_id,order_id:o.orderId,order_status:o.orderStatus,is_in_progress:"creating"!==o.orderStatus&&"failed"!==o.orderStatus&&"complete"!==o.orderStatus,download_urls:o.serviceOptions.download_urls,number_processed:o.serviceOptions.number_processed,total_number:o.serviceOptions.total_number,percent_done:s,percent_done_str:s+"%",downloadBrowseUrl:n&&i.fullPath("/granules/download.html?browse=true&project="+r+"&collection="+e),error_code:o.errorCode,error_message:o.errorMessage}));return l},u.prototype._computeCollectionOnly=function(){var t,e,n,i,r;for(e=[],n=0,i=(r=this.project.accessCollections()).length;n<i;n++)0===(t=r[n]).serviceOptions.accessMethod().length&&e.push(t);return e},u.prototype.showFilters=function(t){var e;if(e=t.granuleDatasource().data().temporal,this.project.searchGranulesCollection(t))return o(".granule-temporal-filter").temporalSelectors({uiModel:e,modelPath:"(project.searchGranulesCollection() ? project.searchGranulesCollection().granuleDatasource().data().temporal.pending : null)",prefix:"granule"})},u.prototype.applyFilters=function(){return o(".master-overlay-content .temporal-submit").click(),this.hideFilters()},u.prototype.hideFilters=function(){return o(".master-overlay").addClass("is-master-overlay-secondary-hidden"),this.project.searchGranulesCollection(null)},u.prototype.toggleViewAllCollections=function(){var t,e,n,i,r,o;for(e=!this.allCollectionsVisible(),o=[],n=0,i=(r=this.project.collections()).length;n<i;n++)t=r[n],o.push(t.visible(e));return o},u.prototype._computeAllCollectionsVisible=function(){var t,e,n,i;for(t=!0,e=0,n=(i=this.project.collections()).length;e<n;e++)i[e].visible()||(t=!1);return t},u.prototype.showRelatedUrls=function(){return o("#related-urls-modal").modal("show")},u.prototype.hideRelatedUrls=function(){return o("#related-urls-modal").modal("hide")},u}())}.call(this),function(){var t,e,n,i,r,o,s,a,l,u=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d=[].slice;this.edsc.models.ui.GranuleTimeline=(t=ko,e=this.edsc.models.KnockoutModel,n=this.edsc.models.data.XhrModel,i=this.edsc.models.data.Granules,r=$.extend,o=this.edsc.config,s=this.edsc.util.date,a=function(){function t(e,n,i){var r;this.collection=e,this.range=n,this.color=i,this._computeSearchResponse=u(this._computeSearchResponse,this),this._computeParams=u(this._computeParams,this),this.method="post",t.__super__.constructor.call(this,"/granules/timeline.json",this),this.prevParams={},this.params=this.computed(this._computeParams),$("#timeline").on("rowtemporalchange.timeline",(r=this,function(t,e,n,i){var o;if(e===r.collection.id)return null!=(o=r.collection.granuleDatasource())&&"function"==typeof o.setTemporal?o.setTemporal({startDate:n,endDate:i,recurring:!1}):void 0})),this.results.peek()}return c(t,n),t.prototype.refreshData=function(t,e,n){if(!this.isLoading.peek())return $("#timeline").timeline("data",this.collection.id,{start:t,end:e,resolution:n,intervals:this.results.peek(),color:this.color})},t.prototype._computeParams=function(){var t,e,n,i,o,a,l,u,h,c,d,p;return a=(h=this.range())[0],e=h[1],n=h[2],u={start_date:s.toISOString(a),end_date:s.toISOString(e),interval:n},o=null,(l=null!=(c=this.collection.granuleDatasource())&&"function"==typeof c.getTemporal?c.getTemporal():void 0)&&(o=s.computeRanges(l)),(null!=(d=(t=$("#timeline")).timeline("getRowTemporal",this.collection.id))?d.toString():void 0)!==(null!=o?o.toString():void 0)&&t.timeline("setRowTemporal",this.collection.id,o),delete(i=r({},null!=(p=this.collection.granuleDatasource())?p.toTimelineQueryParams():void 0,u)).temporal,delete i.page_num,delete i.page_size,delete i.sort_key,i},t.prototype._queryFor=function(t){return i.prototype._queryFor(t)},t.prototype._computeSearchResponse=function(t,e){var n,i,r,o,s,a,l,u,c,p;if(null!=(c=this.collection.granuleDatasource())&&"function"==typeof c.cmrQuery?c.cmrQuery().isValid():void 0){for(o=this.params(),s=this.prevParams,n=!1,a=!1,l=0,u=(r=function(){var t;for(i in t=[],o)h.call(o,i)&&(o[i],t.push(i));return t}().concat(function(){var t;for(i in t=[],s)h.call(s,i)&&(s[i],t.push(i));return t}())).length;l<u;l++)if(i=r[l],o[i]!==s[i]&&(n=!0,"start_date"!==i&&"end_date"!==i&&"interval"!==i)){a=!0;break}return this.prevParams=o,a&&(p=$("#timeline")).timeline.apply(p,["loadstart",this.collection.id].concat(d.call(this.range()))),n?this._load(o,t,e):void 0}},t.prototype._toResults=function(t){var e,n,i,r,o,s,a;return n=null!=(o=null!=(s=t[0])?s.intervals:void 0)?o:[],r=(a=this.range())[0],e=a[1],i=a[2],$("#timeline").timeline("data",this.collection.id,{start:r,end:e,resolution:i,intervals:n,color:this.color}),n},t}(),l=function(){function n(e,n,i){var r,s,a,l,h,c,d;this.collection=e,this.range=n,this.color=i,this._computeParams=u(this._computeParams,this),this.refreshData=u(this.refreshData,this),this.params=this.computed(this._computeParams),r=$("#timeline"),a=[],(this.collection.time_start||this.collection.time_end)&&(l=null!=(h=this.collection.time_start)?h:0,s=null!=(c=this.collection.time_end)?c:o.present(),a.push([new Date(l).getTime()/1e3,new Date(s).getTime()/1e3])),this.intervals=a,this.results=t.observable(a),setTimeout(this.refreshData,0),r.on("rowtemporalchange.timeline",(d=this,function(t,e,n,i){var r;if(e===d.collection.id)return null!=(r=d.collection.granuleDatasource())&&"function"==typeof r.setTemporal?r.setTemporal({startDate:n,endDate:i,recurring:!1}):void 0}))}return c(n,e),n.prototype.refreshData=function(){return $("#timeline").timeline("data",this.collection.id,{intervals:this.intervals,color:this.color,indeterminate:!0})},n.prototype._computeParams=function(){var t,e,n,i,r;if((n=null!=(i=this.collection.granuleDatasource())&&"function"==typeof i.getTemporal?i.getTemporal():void 0)&&(e=s.computeRanges(n)),(null!=(r=(t=$("#timeline")).timeline("getRowTemporal",this.collection.id))?r.toString():void 0)!==(null!=e?e.toString():void 0))return t.timeline("setRowTemporal",this.collection.id,e)},n}(),function(){function n(e,n){var i,r,o,s,a;this.collectionsList=e,this.projectList=n,this._computeCollections=u(this._computeCollections,this),this._computeTemporal=u(this._computeTemporal,this),this._collectionsToTimelines={},this._constructed=t.observable(!1),this._pending=null,this.serialized=this.computed({read:this._readSerialized,write:this._writeSerialized,owner:this,deferEvaluation:!0}),this.range=t.observable(null),(i=$("#timeline")).on("rangechange.timeline",(r=this,function(){var t;return arguments[0],t=2<=arguments.length?d.call(arguments,1):[],r.range(t)})),i.on("heightchange.timeline",function(){return $(".master-overlay").masterOverlay().masterOverlay("contentHeightChanged")}),i.on("temporalchange.timeline",(o=this,function(t,e,n){var i;return(i=o.collectionsList.query.temporal.applied).isRecurring(!1),i.start.date(e),i.stop.date(n)})),i.on("focusset.timeline",(s=this,function(t,e,n,i){var r,o;return(r=s.collectionsList.query).focusedInterval(i),r.focusedTemporal(function(){var t,i,r,s;for(s=[],t=0,i=(r=[e,n]).length;t<i;t++)o=r[t],s.push(new Date(o));return s}())})),i.on("focusremove.timeline",(a=this,function(){var t;return(t=a.collectionsList.query).focusedInterval(null),t.focusedTemporal(null)})),this.range(null),this.collections=this.computed(this._computeCollections)}return c(n,e),n.prototype._readSerialized=function(){var t,e,n,i,r,s,a;return this._constructed()?null!=this.collections()&&0===this.collections().length?null:(this.range(),n=this.collectionsList.query,r=$("#timeline").data("timeline"),t=Math.round(r.center()/1e3),s=r.zoom(),n.focusedTemporal()&&(i=(a=n.focusedTemporal())[0],e=a[1],i=Math.floor(i/1e3),e=Math.floor(e/1e3)),i||e||r.end!==o.present()&&r.end!==this._lastDate?[t,s,i,e].join("!"):null):this._pending},n.prototype._writeSerialized=function(t){var e,n,i,r,o,s,a;return null!=(o=$("#timeline").data("timeline"))?(t&&(this.collectionsList.query,e=(a=t.split("!"))[0],s=a[1],i=a[2],n=a[3],o.center(1e3*parseInt(e,10)),o.zoom(parseInt(s,10)),r=[],i&&n&&(r=[new Date(1e3*parseInt(i,10)),new Date(1e3*parseInt(n,10))]),o.focus.apply(o,r)),this._constructed(!0),this._pending=null):this._pending=t},n.prototype.clear=function(){return $("#timeline").timeline("focus")},n.prototype._computeTemporal=function(){var t,e,n;if(e=this.collectionsList.query.temporal.applied.ranges(),(null!=(n=(t=$("#timeline")).timeline("getTemporal"))?n.toString():void 0)!==(null!=e?e.toString():void 0))return t.timeline("setTemporal",e)},n.prototype._computeCollections=function(){var t,e,n,i,r,s,u,c,d,p,f,m,g,v,y,_,b,w,x,S,C,E,M,L,T,k,D,P,O,I,N;if(x=this.range,f=this.collectionsList.focused(),S=[],null!=f?S=[f.collection]:this.projectList.visible()&&(S=this.projectList.project.collections()),S=(S=function(){var t,e,n;for(n=[],t=0,e=S.length;t<e;t++)(s=S[t]).has_granules&&n.push(s);return n}()).slice(0,3),null==(t=$("#timeline")).data("timeline")){if(!(S.length>0))return;t.timeline({animate:o.defaultAnimationDurationMs>0,end:o.present()}),this.serialized(this._pending),this.computed(this._computeTemporal)}for(t.timeline("rows",S),u=this._collectionsToTimelines,b={},y=Number.MIN_VALUE,p=Number.MAX_VALUE,_=!1,L=0,k=S.length;L<k;L++)s=S[L],_=_||null==u[s.id],null!=s.time_end&&(y=Math.max(y,new Date(s.time_end).getTime()),p=Math.min(p,new Date(s.time_start).getTime()));for(C=(P=this.range.peek())[0],d=P[1],null!=S[0]&&(i=null!=(O=S[0].query.temporal.applied)?O.stop:void 0,e=null!=(I=S[0].query.temporal.applied)?I.start:void 0,M=t.timeline("startTime"),E=t.timeline("endTime"),_&&(null!=e.date()&&null!=i.date()?(n=new Date(e.date()).getTime(),r=new Date(i.date()).getTime(),this._lastDate=y=n+.5*(r-n)+.5*(E-M),t.timeline("panToTime",y)):null!=e.date()?(n=new Date(e.date()).getTime(),this._lastDate=y=n+(E-M),t.timeline("panToTime",y)):null!=i.date()&&(this._lastDate=y=new Date(i.date()).getTime(),t.timeline("panToTime",y)))),_&&(y>Number.MIN_VALUE&&y<C||p<Number.MAX_VALUE&&p>d)&&(this._lastDate=y,t.timeline("panToTime",y)),w=this.projectList.project,T=0,D=S.length;T<D;T++)u[m=(s=S[T]).id]?(b[m]=u[m],delete u[m]):(c=(null!=(N=s.granuleDatasource())?N.hasCapability("timeline"):void 0)?new a(s,x,w.colorForCollection(s)):new l(s,x,w.colorForCollection(s)),b[m]=c);for(g in u)h.call(u,g)&&u[g].dispose();for(v in this._collectionsToTimelines=b,b)h.call(b,v)&&(c=b[v]).refreshData.apply(c,x());return S},n}())}.call(this),function(){var t,e,n,i,r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};this.edsc.models.ui.StateManager=(t=window,e=document,n=$.extend,i=this.edsc.config,r=this.edsc.util.url,o=this.edsc.util.xhr,function(){function a(e){var n;this.page=e,this._onReady=s(this._onReady,this),this.loadFromUrlImmediate=s(this.loadFromUrlImmediate,this),
this.loadFromUrl=s(this.loadFromUrl,this),this.overlayState=ko.observable(null),this.isDomLoaded=ko.observable(!1),this.path=ko.computed({read:this._readPath,write:this._writePath,deferEvaluation:!0,owner:this}),this.historyChanged=!1,this.loaded=!1,this.preservedParams={cmr_env:null,portal:null,tour:null,test_facets:null},this.lastKeywords=null,$(t).on("edsc.save_workspace",(n=this,function(){return r.saveState(n.path(),n.serialize(),!n.historyChanged,n.page.workspaceNameField()),n.page.workspaceName(n.page.workspaceNameField()),$(".save-dropdown").removeClass("open")}))}return a.prototype.monitor=function(){return setTimeout((n=this,function(){return n.loadFromUrl(),$(e).ready(n._onReady),$(t).on("edsc.pagechange",n.loadFromUrl)}),0);var n},a.prototype.serialize=function(){var t,e,i,r,o,s,a,l;for(t in s=(e=this.page).ui,i={},e.labs()&&(i.labs=e.labs()),l=this.preservedParams)null!=(a=l[t])&&(i[t]=a);return i=n(i,e.project.serialized(),s.collectionsList.serialized()),this.isDomLoaded()?(r=this.page.map.serialized(),o=this.page.ui.granuleTimeline.serialized()):(r=this._mapParams,o=this._timelineParams),r&&(i.m=r),o&&(i.tl=o),i},a.prototype.load=function(t){var e,n,r,o,s;for(e in r=(n=this.page).ui,n.map?(n.map.serialized(t.m),r.collectionsList.serialized(t)):(this._mapParams=t.m,this._dsListParams={g:t.g}),r.granuleTimeline?null!=(o=r.granuleTimeline)&&o.serialized(t.tl):this._timelineParams=t.tl,n.labs(t.labs),s=this.preservedParams)s[e],this.preservedParams[e]=t[e];if(n.project.serialized(t),!this.loaded)return this.loaded=!0,ko.computed(this._persistStateInUrl,this).extend({throttle:i.xhrRateLimitMs})},a.prototype.loadFromUrl=function(){return o.wait(this.loadFromUrlImmediate)},a.prototype.loadFromUrlImmediate=function(){var t,e,n;if(t=r.cleanPath())return e=(n=t.split("?"))[0],n[1],this.path(e),this.page.workspaceName(r.getProjectName()),this.page.workspaceNameField(r.getProjectName()),this.load(r.currentParams())},a.prototype._onReady=function(){var t,e,n;return t=$(".master-overlay"),this.overlay=t.data("master-overlay"),null==this.overlayState()&&this.overlayState(this.overlay.state()),t.on("edsc.olstatechange",(e=this,function(){return e.overlayState(e.overlay.state())})),ko.computed((n=this,function(){return n.overlay.state(n.overlayState())})),this._mapParams&&this.page.map.serialized(this._mapParams),this._timelineParams&&this.page.ui.granuleTimeline.serialized(this._timelineParams),null!=this._dsListParams&&this.page.ui.collectionsList.serialized(this._dsListParams),this.isDomLoaded(!0)},a.prototype._onPathChange=function(t){var e,n;for(n=t.split("/"),e=null;!e&&n.length>0;)e=n.pop();return this.page.ui.projectList.visible("project"===e),this._toggleWithTimeout("facets",this.page.collections.facets.isRelevant,"search"===e||"collection-details"===e),this._toggleWithTimeout("collections",this.page.collections.isRelevant,"collections"===e||"search"===e)},a.prototype._readPath=function(){var t,e;return e=this.overlayState(),t=this._pathForState(e),this._onPathChange(t),t},a.prototype._pathForState=function(t){var e,n,i;return null==t?null!=(n=null!=(i=r.cleanPath())?i.split("?")[0]:void 0)?n:"/":(e="/search",t.parent&&"collection-details"!==t.current?e:t.visible?"collection-results"===t.current?e+"/collections":(-1!==t.children.indexOf("project-overview")&&(e+="/project"),"project-overview"===t.current?e:(-1!==t.children.indexOf("granule-list")&&(e+="/granules"),"granule-list"===t.current?e:"collection-details"===t.current?e+"/collection-details":"granule-details"===t.current?e+"/granule-details":(console.error("Unrecognized overlay state: "+JSON.stringify(t)),e))):e+"/map")},a.prototype._writePath=function(t){var e,n,i,r,o,s,a,l,u,h,c;if(0===t.indexOf("/search"))return u=null!=(c=this.overlayState.peek())?c:{visible:!0,parent:!0,secondary:!1,manualShowParent:!0,children:null,current:"collection-results"},e=["collection-results"],r=(o=t.slice(1).split("/")).shift(),r=o.shift(),u.visible="map"!==r,u.parent=!r,("collections"===r||u.parent)&&(u.current="collection-results"),"project"===r&&(e.push("project-overview"),u.current="project-overview",r=o.shift()),n=!1,i=!1,a=!1,l=!1,o.unshift(r),-1!==o.indexOf("granules")&&(e.push("granule-list"),n=!0,a=!0,u.current="granule-list"),-1!==o.indexOf("granule-details")&&(l=!0,u.current="granule-details"),e.push("granule-details"),-1!==o.indexOf("collection-details")&&(i=!0,u.current="collection-details",e.pop()),e.push("collection-details"),u.children=e,(s=this.page.ui.collectionsList).state(n,i),a&&(h=s.focused.subscribe(function(t){if(null!=t)return s.focused().state(l),h.dispose()})),this.overlayState(u)},a.prototype._toggleWithTimeout=function(t,e,n){var r;if(r=e.peek(),null==this._timeouts&&(this._timeouts={}),clearTimeout(this._timeouts[t]),r!==n)return n||null==r?e(n):this._timeouts[t]=setTimeout(function(){return e(!1)},i.defaultAnimationDurationMs)},a.prototype._isValid=function(t,e){return-1!==t.indexOf("/granule-details")&&e.g,!!(-1===t.indexOf("/granules")||e.p&&0!==e.p.indexOf("!"))},a.prototype._persistStateInUrl=function(){var t,e,n,i;if(t=this.path(),i=this.serialize(),e=this.lastKeywords,this.lastKeywords=this._textQuery(i),n=!1,"/search"!==t&&"/search/collections"!==t&&null!=e&&""!==this.lastKeywords&&e!==this.lastKeywords&&(this._sendToCollectionList(),t=this.path(),i=this.serialize(),n=!0),this._isValid(t,i)&&(r.saveState(t,i,!this.historyChanged,this.page.workspaceNameField.peek())&&(this.historyChanged=!0),n||"/search/collection-details"===t||"/search/granules"===t||"/search/project"===t))return this.page.collections.isRelevant(!0)},a.prototype._textQuery=function(t){return(t.free_text||"")+(t.placename||"")+(t.q||"")},a.prototype._sendToCollectionList=function(){var t,e,n;return t=(e=this.page.ui).collectionsList,e.projectList.hideFilters(),t.hideCollectionDetails(),null!=(n=t.focused())&&n.hideGranuleDetails(),t.unfocusCollection(),this.overlay.level(0)},a}())}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.edsc.models.ui.Feedback=(this.edsc.util.url,this.edsc.util.xhr.ajax,function(){function e(){this.submitError=t(this.submitError,this),this.showFeedback=t(this.showFeedback,this)}return e.prototype.showFeedback=function(t){return"General"===t?feedback.showForm():feedback.showForm({subject:"[Metadata]["+t+"]"}),!1},e.prototype.submitError=function(t,e){return feedback.showForm({subject:"Earthdata Search error report "+e,details:"\nFill in details above this line. Please try to be as specific as possible.\n--------------------\n\n["+t+"]["+e+"]"})},e}())}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x;t=this.edsc.models.data,this.edsc.models.ui,this.edsc.models.page,this.edsc.help=(e=jQuery,n=this.edsc.config,i=this.edsc.util.xhr.wait,this.edsc.page,r=t.Preferences,o=this.edsc.util.url,w={tour_end:{title:"Tour Ended",element:"#main-toolbar h1 a",placement:"bottom",content:'Your tour has ended.  At any point you may restart it by visiting the home page and clicking on the "Take a Tour" link.'}},b=[{title:"Search",content:'<p>Use Earthdata Search\'s natural language processing-enabled search tool to quickly narrow down to relevant collections.  An example search phrase could be <em>Land Surface Temperature over Texas last month</em>. Results will be displayed in the collection panel below.</p> <p>You can also add filters to refine your search:</p> <ul> <li><i class="fa fa-fw fa-clock-o"></i> Pick a temporal range from a calendar</li> <li><i class="fa fa-fw fa-crop"></i> Manually set spatial boundaries</li> <li><i class="fa fa-fw fa-eraser"></i> Clear all of your filters</li> </ul>',element:"#keywords",placement:"bottom",showNext:!0},{title:"Search Results",content:'<p>Search results will be shown in the Matching Collections panel below. Each result will have summary information along with relevant badges to allow you to quickly scan your search results to find the right collection. The panel can be resized by clicking and dragging the bar above the <em>Matching Collections</em> tab.</p> <p>Collection options include:</p> <ul> <li><i class="fa fa-fw fa-info-circle"></i> View more information about a collection</li> <li><i class="fa fa-fw fa-plus"></i> Add collections to your project to compare</li> </ul> <p>Click anywhere on a collection to view granules available for download</p>',element:"#collection-results-list",placement:"top",showNext:!0},{title:"Facets",content:'<p>Refine your search further with available facets, such as: <div class="tour-list"> <ul class="bullet-list"> <li>Features - has map imagery, is near-real-time, or is subsettable</li> <li>Keywords - science terms describing collections</li> <li>Platforms - satellite, aircraft, etc. hosting Instruments</li> <li>Instruments - devices that make measurements</li> <li>Organizations - responsible for archiving and/or producing data</li> <li>Projects - mission or science project</li> <li>Processing Levels - raw, geophysical variables, grid, or model</li> </ul> </div> </p>',element:"#master-overlay-parent",placement:"right",showNext:!0,top:null},{title:"Map Tools",content:'<p>Use these map tools to configure and position the map as well as enable certain spatial tools. <table><tr> <td> <ul class="icon-list"> <li class="leaflet-draw-list"><i class="leaflet-draw-edit-remove"></i> Delete a layer</li> <li class="leaflet-draw-list"><i class="leaflet-draw-edit-edit"></i> Edit a layer</li> <li class="leaflet-draw-list"><i class="leaflet-draw-draw-marker"></i> Spatial coordinate search </li> <li class="leaflet-draw-list"><i class="leaflet-draw-draw-rectangle"></i> Bounding box search</li> <li class="leaflet-draw-list"><i class="leaflet-draw-draw-polygon"></i> Polygon search</li> </ul> </td> <td> <ul class="icon-list"> <li class="projection-draw-list"><i class="projection-draw-arctic"></i> North Polar projection</li> <li class="projection-draw-list"><i class="projection-draw-geographic"></i> Geographic projection</li> <li class="projection-draw-list"><i class="projection-draw-antarctic"></i> South Polar projection</li> <li class="zoom-draw-list"><i class="fa fa-fw fa-plus"></i> Zoom in </li> <li class="zoom-draw-list"><i class="fa fa-fw fa-home"></i> Reset zoom </li> <li class="zoom-draw-list"><i class="fa fa-fw fa-minus"></i> Zoom out </li> <li><i class="map-layers"></i> Map layers</li></ul> </td> </tr></table> </p>',placement:"top",element:".projection-switcher-arctic",showNext:!0},{title:"Toolbar",content:'<p>This is the end of the tour. Using this toolbar, you can: <div class="tour-list"> <ul> <li class="toolbar-draw-list"><i class="fa fa-bullhorn"></i> Provide feedback</li> <li class="toolbar-draw-list"><i class="fa fa-lock"></i> Login to Earthdata for more user tools</li> </ul> </div> </p> <p>When logged in, you can also: <div class="tour-list"> <ul class="bullet-list"> <li> Save your current project</li> <li> View profile information, recent downloads, saved projects, or show this tour again</li> </ul> </div> </p>',element:".user-info",placement:"bottom"}],l={placement:"auto left",html:!0,wait:!0,trigger:"manual",template:"<div class='popover tour'> <div class='arrow'></div> <h3 class='popover-title'></h3> <div class='popover-content'></div> <div class='popover-navigation'> <div class='btn-group'> <button class='button-small secondary' data-role='prev'><i class='fa fa-arrow-circle-left'></i> Prev</button> <button class='button-small' data-role='next'>Next <i class='fa fa-arrow-circle-right'></i></button> </div> <button class='button-small pull-left' data-role='end'>End Tour</button> <label class='pull-left'> <input data-role='toggleHideTour' class='toggleHideTour' type='checkbox' /> <small>Do not show again</small> </label> </div> </div>",container:"body"},f=[],v={},c=0,d=null,a=null,x=!1,u=!1,_=function(){return u=!u,e("input:checkbox.toggleHideTour").prop("checked",u)},h=function(){var t;if(null!=f[c])return"function"==typeof(t=f[c]).cleanup&&t.cleanup(d,a),e(f[c].element).popover("destroy"),e(".popover-advance").removeClass("popover-advance")},a=function(){return e("#sitetourModal").modal("hide"),h(),f=[],c=0,x=!1},p=function(){if(c>0)return h(),c--,m()},d=function(){return c<f.length-1?(h(),c++,m()):a()},g=function(){var t,n,i,r,o;if(e(".popover-advance").removeClass("popover-advance"),(t=e(f[c].element)).length>1&&(console.error("Too many elements matched selector "+f[c].element+".  Showing the first.",t),t=t.first()),t.popover(f[c]),t.attr("data-original-title",""),t.popover("show"),t.popover({html:!0}),v[f[c].key]=!0,f[c].advanceHook||e(null!=(o=f[c].target)?o:t).addClass("popover-advance"),"function"==typeof(i=f[c]).advanceHook&&i.advanceHook(d,a),"function"==typeof(r=f[c]).closeHook&&r.closeHook(a),e("input:checkbox.toggleHideTour").prop("checked",u),null!=t.data("bs.popover"))return(n=t.data("bs.popover").$tip).toggleClass("is-popover-single",1===f.length),x?(0===c&&n.find("[data-role=prev]").hide(),c<f.length-1&&n.find("[data-role=end]").addClass("secondary"),n.find("[data-role=next]").toggle(f[c].showNext)):(n.find("[data-role=end]").text("Close"),n.find("[data-role=prev]").toggle(0!==c),n.find("[data-role=next]").toggle(c!==f.length-1))},m=function(){return f[c].wait?i(g):f[c].waitOnAnimate?setTimeout(function(){return i(g)},n.defaultAnimationDurationMs+200):g()},e(document).on("click",".popover [data-role=prev]",p),e(document).on("click",".popover [data-role=next], .popover-advance",d),e(document).on("click",".popover [data-role=toggleHideTour]",_),e(document).on("click",".popover [data-role=end]",function(){var t;return x?((t=new r).showTour(!1),t.doNotShowTourAgain(u.toString()),t.save(),a(),s("tour_end")):a()}),e(document).on("click",".show-tour",function(t){if(!window.edscportal)return t.preventDefault(),y()}),e(window).on("statechange",function(){var t,n;return e('[id^="show-tour-"]').toggle("/search"===(t=null!=(n=o.cleanPath())?n.split("?")[0]:void 0)||"/"===t||""===t)}),e(document).on("ready",function(){var t,n;return e('[id^="show-tour-"]').toggle("/search"===(t=null!=(n=o.cleanPath())?n.split("?")[0]:void 0)||"/"===t||""===t)}),{add:s=function(t,n){var i,r;if(null==n&&(n={}),!x){for(n=e.extend({},l,w[t],n,{key:t}),i=0,r=f.length;i<r;i++)if(f[i].key===t)return;if(!n.once||!v[t])return f.push(n),m()}},remove:function(t){var e,n;return(null!=(n=f[0])?n.key:void 0)===t?d():f=function(){var n,i,r;for(r=[],n=0,i=f.length;n<i;n++)(e=f[n]).key!==t&&r.push(e);return r}()},current:function(){return x?nil:f[c]},next:d,prev:p,close:a,startTour:y=function(){var t,n,i,r,o;for(a(),x=!0,t=r=0,o=b.length;r<o;t=++r)i=b[t],n=e.extend({},l,i,{key:"tour_"+t}),f.push(n);return m()}})}.call(this),function(){var t,e,n,i,r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};e=this.edsc.models.ui,t=this.edsc.models.data,e.SiteTour=(n=ko,i=this.edsc.help,r=t.Preferences,o=this.edsc.util.url,function(){function t(){var t,e;this.toggleHideTour=s(this.toggleHideTour,this),this.startTour=s(this.startTour,this),this.preferences=new r,this.safePath=n.observable("/search"===(t=null!=(e=o.cleanPath())?e.split("?")[0]:void 0)||"/"===t||""===t)}return t.prototype.startTour=function(){return i.startTour()},t.prototype.toggleHideTour=function(){var t;return t="on"===$("#toggleHideTour:checked").val(),this.preferences.doNotShowTourAgain(null!=t?t.toString():void 0),this.preferences.save(),!0},t}())}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};e=this.edsc.models.ui,t=this.edsc.models.data,e.ReverbRetirement=(ko,n=this.edsc.util.xhr.ajax,this.edsc.models.data.config,function(){function e(){this.stayWithEDSC=i(this.stayWithEDSC,this),this.referrerIsReverb=i(this.referrerIsReverb,this)}return e.prototype.referrerIsReverb=function(){var t;return console.log("Checking referrer: "+document.referrer),console.log("Checking referrer against ENV value: "+edsc.config.reverb_url),(t=!!document.referrer&&document.referrer.match(/:\/\/(.[^/]+)/)[1])===(!!edsc.config.reverb_url&&edsc.config.reverb_url.match(/:\/\/(.[^/]+)/)[1])&&t},e.prototype.returnToReverb=function(e,i){var r;return r=$(i.target.parentElement).hasClass("modal-footer")?"modal link":"toolbar link",Cookies.set("ReadyForReverbRetirement","false",{expires:120}),t.type="reverb_redirect",t.data="back_to_reverb",t.other_data="{source: '"+r+"'}",n({data:JSON.parse(JSON.stringify(t)),dataType:"json",url:"/metrics",method:"post",success:function(t){return console.log(t)}}),!0},e.prototype.stayWithEDSC=function(){return Cookies.set("ReadyForReverbRetirement","true",{expires:120}),t.type="reverb_redirect",t.data="stay_in_edsc",t.other_data=null,n({data:JSON.parse(JSON.stringify(t)),dataType:"json",url:"/metrics",method:"post",success:function(t){return console.log(t)}}),$("#reverbRetirementModal").modal("hide")},e}())}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x,S,C,E=function(t,e){return function(){return t.apply(e,arguments)}};t=(e=this.edsc.models).data,i=e.ui,(n=e.page).SearchPage=(r=ko,o=n.setCurrent,s=t.query.CollectionQuery,a=t.Collections,l=t.Project,u=t.SpatialEntry,h=i.SpatialType,c=i.CollectionsList,d=i.ProjectList,p=i.GranuleTimeline,f=t.Preferences,m=i.Feedback,g=i.SiteTour,v=i.ReverbRetirement,this.edsc.util.url,y=i.StateManager,b=null,S=new f,C=new g,w=function(){if(C.safePath()&&("false"===S.doNotShowTourAgain()||-1!==window.location.href.indexOf("?tour=true")))return $("#sitetourModal").modal("show")},$(document).ready(function(){if(b.map=new window.edsc.map.Map(document.getElementById("map"),"geo"),b.ui.granuleTimeline=new p(b.ui.collectionsList,b.ui.projectList),$(".master-overlay").masterOverlay(),$(".launch-variable-modal").click(function(){return $("#variablesModal").modal("show")}),$(".launch-customize-modal").click(function(){return $("#customizeDataModal").modal("show")}),(new v).referrerIsReverb()&&"true"!==Cookies.get("ReadyForReverbRetirement")&&$("#reverbRetirementModal").modal("show"),!window.edscportal)return S.ready.done(function(){return w()})}),_=function(){function t(){this.showProject=E(this.showProject,this),this.totalFilters=E(this.totalFilters,this),this.toggleFilterStack=E(this.toggleFilterStack,this),this.showParent=E(this.showParent,this),this.hideParent=E(this.hideParent,this),this._computeSpatialError=E(this._computeSpatialError,this),this.clearSpatial=E(this.clearSpatial,this),this.clearFilters=E(this.clearFilters,this),this._updateFocusRenderState=E(this._updateFocusRenderState,this),this.query=new s,this.collections=new a(this.query),this.project=new l(this.query),this.preferences=new f,this.spatialEntry=new u(this.query.spatial),this.ui={spatialType:new h(this.query),collectionsList:new c(this.query,this.collections,this.project),projectList:new d(this.project,this.collections),feedback:new m,sitetour:new g,reverbRetirement:new v},this.bindingsLoaded=r.observable(!1),this.labs=r.observable(!1),this.spatialError=r.computed(this._computeSpatialError),this.collections.isRelevant(!1),this.workspaceName=r.observable(null),this.workspaceNameField=r.observable(null),this.project.focus.subscribe(this._updateFocusRenderState),new y(this).monitor()}return t.prototype._updateFocusRenderState=function(t){if(this._focus&&this._focus.notifyRenderers("endSearchFocus"),this._focus=t,this._focus)return this._focus.notifyRenderers("startSearchFocus")},t.prototype.clearFilters=function(){if($("#temporal-dropdown.open").removeClass("open"),this.query.clearFilters(),this.ui.spatialType.selectNone(),this.ui.spatialType.clearManualEntry(),this.spatialEntry.clearError(),this.toggleFilterStack(),this.project.focusedProjectCollection())return this.project.focusedProjectCollection().collection.granuleDatasource().clearFilters()},t.prototype.clearSpatial=function(){return this.ui.spatialType.clearManualEntry(),this.spatialEntry.clearError(),this.query.spatial(null)},t.prototype.pluralize=function(t,e,n){return t+" "+(1===t?e:n)},t.prototype._computeSpatialError=function(){var t,e,n,i;if(null!=(e=this.collections.error()))for(n=0,i=e.length;n<i;n++)if(null!=(t=e[n])&&(-1!==t.indexOf("polygon")||-1!==t.indexOf("box")||-1!==t.indexOf("point")))return t;return null},t.prototype.hideParent=function(){return $(".master-overlay").masterOverlay("manualHideParent")},t.prototype.showParent=function(){return $(".master-overlay").masterOverlay("manualShowParent")},t.prototype.toggleFilterStack=function(){return $(".filter-stack").toggle()},t.prototype.totalFilters=function(){var t;return t=this.query.spatial()&&this.query.spatial().length?1:0,t+=this.query.temporalComponent()?1:0,t+=this.ui.spatialType.isGrid()||this.query.grid.selected()?1:0},t.prototype.showProject=function(){return $("#view-project").click()},t}(),(x=window.location.pathname).indexOf("portal")>=0&&"search"!==x.slice(-6)&&"/"!==x.slice(-1)&&window.location.replace(x+"/search"+window.location.search),o(b=new _),_)}.call(this),function(){var t,e,n;t=jQuery,e=function(){function e(t,e,n){this.urlPattern=t,this.selector=e,this.button=n,this.count=0}return e.prototype.matchesRequest=function(t){return-1!==t.url.search(this.urlPattern)},e.prototype.add=function(){return this.count++,t(this.selector).addClass("busy"),t(this.button).prop("disabled",!0)},e.prototype.remove=function(){if(this.count=Math.max(this.count-1,0),0===this.count)return t(this.selector).removeClass("busy"),t(this.button).prop("disabled",!1)},e}(),n=[new e(/\bcollections.json\b.+\bpage_num=1\b/,"#collection-results .panel-list-meta, #collection-results .master-overlay-info.master-overlay-when-min"),new e(/\bcollections.json\b.+\bpage_num=([2-9]\d*|\d{2,})\b/,".master-overlay-main .panel-list-load-more"),new e("/collection_facets.json",".master-overlay-parent .panel-list-meta"),new e("/collections/","#collection-details .loading"),new e("/granules/","#granule-details .loading"),new e("/granules.json","#granule-list .panel-list-load-more"),new e("/timeline.json",".timeline-tools"),new e("/data/options",".data-access-next"),new e("/update_notification_pref",".access-submit")],t(document).ajaxSend(function(t,e,i){var r,o,s,a;for(a=[],o=0,s=n.length;o<s;o++)(r=n[o]).matchesRequest(i)&&a.push(r.add());return a}),t(document).ajaxComplete(function(t,e,i){var r,o,s,a;for(a=[],o=0,s=n.length;o<s;o++)(r=n[o]).matchesRequest(i)&&a.push(r.remove());return a})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.edsc.Legend=function(){function e(){this._mouseout=t(this._mouseout,this),this._mousemove=t(this._mousemove,this),this._build()}return e.prototype.appendTo=function(t){return t.appendChild(this.container),this.refresh()},e.prototype.remove=function(){var t;return null!=(t=this.container.parentNode)?t.removeChild(this.container):void 0},e.prototype.setData=function(t,e){return console.log("Set legend data: "+t+" -> "+JSON.stringify(e)),this.scale=e.scale,this.label.innerText=t,this.refresh()},e.prototype.refresh=function(){var t,e,n,i,r,o,s,a,l,u,h,c,d;if(u=this.scale,this.container.style.display=null!=u?"":"none",null!=u){for(t=this.bar,a=u.labels,i=u.colors,l=a.length,this.minLabel.innerText=a[0],this.maxLabel.innerText=a[l-1],s=t.height,o=t.getContext("2d"),e=t.width/l,r=Math.ceil(e),h=0,c=0,d=i.length;c<d;c++)n=i[c],o.fillStyle=this._hexToRgba(n),o.fillRect(Math.floor(h),0,r,s),h+=e;return null}console.log("No legend scale")},e.prototype._build=function(){var t,e,n,i,r;return n=function(t,e,n){var i;return(i=document.createElement(e)).className=n,null!=t&&t.appendChild(i),i},this.container=e=n(null,"div","legend"),e.style.display="none",this.label=n(e,"span","legend-name"),this.bar=t=n(e,"canvas","legend-bar"),r=n(e,"div","legend-labels"),this.minLabel=n(r,"span","legend-label legend-label-min"),this.maxLabel=n(r,"span","legend-label legend-label-max"),this.focus=i=n(r,"div","legend-focus"),this.focusColor=n(i,"span","legend-focus-color"),this.focusLabel=n(i,"span","legend-label legend-focus-label"),this.focus.style.display="none",t.addEventListener("mousemove",this._mousemove,!1),t.addEventListener("mouseout",this._mouseout,!1),null},e.prototype._mousemove=function(t){var e,n,i,r,o,s,a;return this.focus.style.display="",s=t.offsetX,r=(a=this.scale).labels,n=a.colors,o=r.length,e=this.bar.clientWidth/o,i=Math.max(Math.min(Math.floor(s/e),o-1),0),this.focusLabel.innerText=r[i],this.focusColor.style.backgroundColor=this._hexToRgba(n[i])},e.prototype._mouseout=function(){return this.focus.style.display="none"},e.prototype._hexToRgba=function(t){var e,n,i,r;return"#"===t[0]&&(t=t.substring(1)),r=t.substring(0,2),i=t.substring(2,4),n=t.substring(4,6),0===(e=t.substring(6,8)).length&&(e="ff"),"rgba("+parseInt(r,16)+", "+parseInt(i,16)+", "+parseInt(n,16)+", "+parseInt(e,16)+")"},e}()}.call(this),function(){var t,e,n,i,r,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=document,e=window,n=jQuery,i=this.edsc.config,r=this.edsc.util.plugin,edsc.models.page,o=function(r){function o(t,i,r){null==r&&(r={}),this.contentHeightChanged=s(this.contentHeightChanged,this),o.__super__.constructor.call(this,t,i,r),n(e).on("load resize",this.contentHeightChanged),this._minimized=!1,this._manualShowParent=!0}return l(o,r),o.prototype.destroy=function(){return o.__super__.destroy.call(this),n(e).off("load resize",this.contentHeightChanged)},o.prototype.show=function(){return this.toggle(!0)},o.prototype.hide=function(){return this.toggle(!1)},o.prototype.toggle=function(t,e){if(null==t&&(t=this.root.hasClass("is-hidden")),null==e&&(e=!0),this.root.trigger("edsc.overlaychange"),this.root.toggleClass("is-hidden",!t),e)return this._triggerStateChange()},o.prototype.minimize=function(){return this._minimized=!0,this._updateMinMaxState(),this.contentHeightChanged(),this._triggerStateChange()},o.prototype.maximize=function(){var t;return this._updateMinMaxState(),this.contentHeightChanged(),t=this._minimized,this._minimized=!1,t&&this._triggerStateChange(),n("#map .leaflet-top.leaflet-right")[0].style.top="49%"},o.prototype.manualShowParent=function(){return this._manualShowParent=!0},o.prototype.manualHideParent=function(){return this._manualShowParent=!1},o.prototype.showParent=function(){return this.toggleParent(!0)},o.prototype.hideParent=function(){return this.toggleParent(!1)},o.prototype.showSecondary=function(){return this.toggleSecondary(!0)},o.prototype.hideSecondary=function(){return this.toggleSecondary(!1)},o.prototype._updateMinMaxState=function(){var t;return t=this._minimized&&!this.current().is(this.scope(".no-min")),this.root.toggleClass(this.scope("is-minimized-desired"),this._minimized).toggleClass(this.scope("is-minimized"),t).toggleClass(this.scope("is-maximized"),!t)},o.prototype._hideNodes=function(t){var n,r;if(r=this,n=function(){return t.hide(),t.filter(r.scope("plugin")).remove(),r._triggerStateChange()},t.size()>0)return this._levelTimeout=e.setTimeout(n,i.defaultAnimationDurationMs)},o.prototype.pluginPushMaster=function(t){return n(t).addClass(this.scope("plugin")).addClass(this.scope("hide-self")),this.current().after(t),this.forward(title)},o.prototype.pluginPopMaster=function(){return this.back()},o.prototype.hideLevel=function(t){var n,r;return r=this,n=function(){return r.children().eq(t).hide(),r._triggerStateChange()},this._levelTimeout=e.setTimeout(n,i.defaultAnimationDurationMs)},o.prototype.showNext=function(){return clearTimeout(this._levelTimeout),this.current().next().show()},o.prototype.toggleParent=function(t,e){if(null==t&&(t=this.root.hasClass(this.scope("is-parent-hidden"))),null==e&&(e=!0),n("body").toggleClass(this.scope("no-facet"),!t),this.root.toggleClass(this.scope("is-parent-hidden"),!t),this.contentHeightChanged(),e)return this._triggerStateChange()},o.prototype.toggleSecondary=function(t,e){if(null==t&&(t=this.root.hasClass(this.scope("is-secondary-hidden"))),null==e&&(e=!0),this.root.toggleClass(this.scope("is-secondary-hidden"),!t),this.contentHeightChanged(),e)return this._triggerStateChange()},o.prototype._triggerStateChange=function(){return this.root.trigger("edsc.olstatechange")},o.prototype.forward=function(){return this.level(Math.min(this.level()+1,this.children().length))},o.prototype.back=function(){return this.level(Math.max(this.level()-1,0))},o.prototype.children=function(){return this._content().children(":visible")},o.prototype.current=function(){return this.children().eq(this.level())},o.prototype._setBreadcrumbs=function(){var t;if(null!=(t=this.children().eq(Math.max(this.level()-1,0)).data(this.scope("title"))))return this.current().find(this.scope(".breadcrumb")).text("Back to "+t)},o.prototype.level=function(t,e){var n,i;return null==t&&(t=null),null==e&&(e=!0),null==t?parseInt(this._content().attr("data-level"),10):(t=parseInt(t,10),(n=this.level())!==t&&(t<n&&(i=this.children().filter(":gt("+Math.max(t,0)+")").filter(this.scope(".hide-self")),this._hideNodes(i)),this._content().attr("data-level",t),this._updateMinMaxState()),this._setBreadcrumbs(),this.contentHeightChanged(),e?this._triggerStateChange():void 0)},o.prototype.state=function(t){var e,i,r,o,s,a,l;if(null!=t){for(this.toggle(t.visible,!1),this.toggleParent(t.parent,!1),this.toggleSecondary(t.secondary,!1),null!=t.minimized&&(t.minimized?this.minimize():this.maximize()),r=t.children,s=0,a=(l=this._content().children()).length;s<a;s++)i=l[s],o=(e=n(i)).attr("id"),e.toggle(-1!==r.indexOf(o));return this.level(r.indexOf(t.current),!1)}return r=function(){var t,e,r,o;for(o=[],t=0,e=(r=this.children()).length;t<e;t++)i=r[t],o.push(n(i).attr("id"));return o}.call(this),{minimized:this._minimized,visible:!this.root.hasClass("is-hidden"),parent:"collection-results"===r[this.level()]&&this._manualShowParent,manualShowParent:this._manualShowParent,secondary:!this.root.hasClass(this.scope("is-secondary-hidden")),children:r,current:r[this.level()]}},o.prototype._content=function(){return this.root.find(this.scope(".main-content"))},o.prototype.contentHeightChanged=function(){return this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout((i=this,function(){var r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x,S,C,E;for(d=n(".main-content"),c=Math.max(t.documentElement.clientHeight,e.innerHeight||0)-d.position().top-n("body > footer").outerHeight(),d.height(c),_=0,w=(S=i.root.find(i.scope(".content"))).length;_<w;_++)a=S[_],(r=n(a)).height(c-r.position().top-parseInt(null!=(C=r.data(i.scope("pad")))?C:20,13));for(g=i.root.find(".master-overlay-main").height(),b=0,x=(E=n(".master-overlay-main").find("section")).length;b<x;b++)v=E[b],n(v).height(g);return y=n(".master-overlay-main"),n("#map .leaflet-top.leaflet-right")[0].style.top=96-(n("#map").height()-y.position().top)/n("#map").height()*100+"%",(o=n("#collection-details")).is(":visible")&&(p=o.height()-o.find(".master-overlay-nav").outerHeight()-o.find("header").outerHeight(),o.find(i.scope(".content")).height(p)),p=(m=n("#project-overview")).height()-m.find(".master-overlay-nav").outerHeight()-m.find("header").outerHeight(),m.find(i.scope(".content")).height(p),p=(s=n("#collection-results")).height()-s.find("header").outerHeight()-s.find(".master-overlay-info").outerHeight(),s.find(i.scope(".content")).height(p),(h=n("#granule-list")).is(":visible")&&(p=h.height()-h.find(".master-overlay-nav").outerHeight()-h.find(".master-overlay-info").outerHeight()-h.find("header").outerHeight(),h.find(i.scope(".content")).height(p)),(u=n("#granule-search")).offset().left<=e.innerWidth&&(f=e.innerWidth-u.width(),u.parents(i.scope(".secondary")).offset({top:u.parents(i.scope(".secondary-content")).offset().top,left:f})),(l=n("#granule-details")).is(":visible")&&(p=l.height()-l.find(".master-overlay-nav").outerHeight()-l.find(".master-overlay-info").outerHeight()-l.find("header").outerHeight()-n("#granule-details-nav").outerHeight(),l.find(i.scope(".content")).height(p)),null}),0);var i},o}(r.Base),n(t),r.create("masterOverlay",o),n(t).ajaxComplete(function(t,e,i){if(-1!==i.url.indexOf("/granules.json"))return n(".master-overlay").masterOverlay("contentHeightChanged")})}.call(this),function(){$(document).on("keypress","#keywords",function(t){if(13===t.which)return $(this).blur(),t.preventDefault()})}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h=[].slice;this.edsc.banner=(t=this.edsc.config,this.edsc.util.date,e=jQuery,i=[],n=null,u='<div class="banner banner-hidden"> <a class="banner-close" href="#" title="close"><i class="fa fa-times-circle"></i></a> <h1 class="banner-title"></h1> <p class="banner-text"></p> </div>',r=function(i,r,s,a){var l;if(null==a&&(a={}),!n)return n=e(u),
null!=a.className&&n.addClass(a.className),null!=r&&n.find(".banner-title").text(r),l=n.find(".banner-text"),a.html?l.html(s):l.text(s),n.data("banner.key",i),e("body").after(n),setTimeout(function(){return n.removeClass("banner-hidden"),e("#main-toolbar").animate({paddingTop:0,marginTop:n.outerHeight()+22},{duration:t.defaultAnimationDurationMs}),setTimeout(function(){var t;return null!=(t=e(".master-overlay"))&&"function"==typeof t.masterOverlay?t.masterOverlay("contentHeightChanged"):void 0},1.05*t.defaultAnimationDurationMs)},0),n.on("click",".banner-close",o)},l=function(){var t,e;return(null!=(e=(t=1<=arguments.length?h.call(arguments,0):[])[3])?e:{}).immediate?(null!=n&&n.remove(),n=null,i.unshift(t)):i.push(t),r.apply(null,t)},s=function(){return null!=n&&n.remove(),n=null,i.length>0?r.apply(null,i[0]):(e("#main-toolbar").animate({paddingTop:"25px",marginTop:0},{duration:t.defaultAnimationDurationMs}),setTimeout(function(){var t;return null!=(t=e(".master-overlay"))&&"function"==typeof t.masterOverlay?t.masterOverlay("contentHeightChanged"):void 0},1.05*t.defaultAnimationDurationMs))},a=function(t){var e;if(i=function(){var n,r,o;for(o=[],n=0,r=i.length;n<r;n++)(e=i[n])[0]!==t&&o.push(e);return o}(),(null!=n?n.data("banner.key"):void 0)===t)return s()},o=function(){if(null!=n)return i.shift(),s()},e(document).ajaxSend(function(t,e,n){return a(n.url.split("?")[0])}),e(document).on("click",".banner-ajax-retry",function(){var t;return i.length>0&&(t=i[0][3].retry),"function"==typeof t?t():void 0}),e(document).ajaxError(function(t,e,n){var i,r,o,s,a,u,h,c,d;if(null!=e.status&&(e.status>=500||408===e.status||0===e.status)&&"abort"!==e.statusText)return s="An unexpected error occurred",null!=(r=null!=(u=(a=n.url.split("?")[0]).match(/([^\/\.]+)(?:\.[^\/]*)?$/))?u[1]:void 0)&&(s="Error retrieving "+(r=r.replace("_"," "))),i=null!=(h=null!=(c=e.responseJSON)&&null!=(d=c.errors)?d.error:void 0)?h:"There was a problem completing the request",null!=(o=n.retry)&&(i+=' <a class="banner-ajax-retry" href="#">Retry</a>'),l(a,s,i,{className:"banner-error",immediate:!0,html:!0,retry:o})}),l)}.call(this),function(){var t,e,n,i,r,o;t=L,e=$.extend,n=this.edsc.models.data.Collection,i=this.edsc.models.data.Granule,o=function(e){var n,i,r,o,s;for(e instanceof Array&&(e=e[0]),r=(n=e.split(" ")).length-1,s=[],i=o=0;o<r;i=o+=2)s.push(new t.LatLng(n[i],n[i+1]));return s},r={getPoints:function(){var t;return null==this._points&&null!=this.points&&(t=[],this._points=t.concat.apply(t,this.points.map(o))),this._points},getPolygons:function(){var t,e;return null==this._polygons&&null!=this.polygons&&(this._polygons=function(){var n,i,r,s;for(s=[],n=0,i=(r=this.polygons).length;n<i;n++)t=r[n],s.push(function(){var n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(o(e));return r}());return s}.call(this)),this._polygons},getLines:function(){return null==this._lines&&null!=this.lines&&(this._lines=this.lines.map(o)),this._lines},getRectangles:function(){var e,n,i,r,s,a,l,u,h;if(null==this._rects&&null!=this.boxes){for(r=[],s=0,l=(h=this.boxes.map(o)).length;s<l;s++)for(a=0,u=(n=(i=h[s])[0].lng>i[1].lng?[[i[0],t.latLng(i[1].lat,180)],[t.latLng(i[0].lat,-180),i[1]]]:[i]).length;a<u;a++)e=n[a],r.push([t.latLng(e[0].lat,e[0].lng),t.latLng(e[0].lat,e[1].lng),t.latLng(e[1].lat,e[1].lng),t.latLng(e[1].lat,e[0].lng),t.latLng(e[0].lat,e[0].lng)]);this._rects=r}return this._rects},getMbr:function(){var e,n,i,r,o;if(!(i=this.getPoints()&&[this.getPoints()]||this.getRectangles()||this.getLines()||this.getPolygons()))return null;for(n=new t.LatLngBounds,r=0,o=i.length;r<o;r++)e=i[r],n.extend(e);return n},isCartesian:function(){return"CARTESIAN"===this.coordinate_system},buildLayer:function(e){var n,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x,S,C,E,M;for(r=t.featureGroup(),c=0,m=(b=null!=(_=this.getPoints())?_:[]).length;c<m;c++)s=b[c],r.addLayer(t.circleMarker(s,e));for(i=this.isCartesian(),d=0,g=(x=null!=(w=this.getPolygons())?w:[]).length;d<g;d++)a=x[d],i?(l=t.polygon(a,e))._interpolationFn="cartesian":l=t.sphericalPolygon(a,e),r.addLayer(l),(n=t.latLngBounds(a)).getNorth()-n.getSouth()<.5&&n.getWest()-n.getEast()<.5&&r.addLayer(t.marker(n.getCenter()));for(p=0,v=(C=null!=(S=this.getLines())?S:[]).length;p<v;p++)o=C[p],l=t.polyline(o,e),i&&(l._interpolationFn="cartesian"),r.addLayer(l);for(f=0,y=(M=null!=(E=this.getRectangles())?E:[]).length;f<y;f++)u=M[f],(h=t.polygon(u,e))._interpolationFn="cartesian",r.addLayer(h),(n=t.latLngBounds(u)).getNorth()-n.getSouth()<.5&&n.getWest()-n.getEast()<.5&&r.addLayer(t.marker(n.getCenter()));return r}},e(n.prototype,r),e(i.prototype,r)}.call(this),function(){var t,e,n,i,r,o,s,a;window.edsc.map.L.Proj=(t=L,e=proj4,a=512,n=[-(i=4194304),-i,i,i],r=8192,o=t.Class.extend({includes:t.CRS,initialize:function(e,n,i,r){return this.code=e,this.bounds=n,this.baseResolution=i,this.projection=r,this.origin=[this.bounds[0],this.bounds[3]],this.transformation=new t.Transformation(1,-this.origin[0],-1,this.origin[1])},scale:function(t){return Math.pow(2,t)/this.baseResolution},getSize:function(e){var n,i,r;return r=this.scale(e),n=this.bounds,i=a/r,t.point((n[2]-n[0])*r,Math.ceil((n[3]-n[1])/i)*i*r)}}),s=t.Class.extend({initialize:function(t){return this._proj4=e(t)},project:function(e){var n;return n=this._proj4.forward([e.lng,e.lat]),t.point(n[0],n[1])},unproject:function(e,n){var i;return i=this._proj4.inverse([e.x,e.y]),t.latLng(i[1],i[0],n)}}),{epsg4326:new o("EPSG:4326",[-180,-90,180,90],360/(a+128),t.Projection.LonLat),epsg3413:new o("EPSG:3413",n,r,new s("+proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs")),epsg3031:new o("EPSG:3031",n,r,new s("+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs")),epsg3408:{projection:new s("+proj=laea +lat_0=90 +lon_0=0 +x_0=0 +y_0=0 +a=6371228 +b=6371228 +units=m +no_defs")},epsg3409:{projection:new s("+proj=laea +lat_0=-90 +lon_0=0 +x_0=0 +y_0=0 +a=6371228 +b=6371228 +units=m +no_defs")}})}.call(this),function(){var t,e,n,i,r,o,s,a;this.edsc.map.L.interpolation=(t=L,e=window.edsc.map.geoutil.gcInterpolate,n=this.edsc.config,i=function(e,n){return t.latLng((e.lat+n.lat)/2,(e.lng+n.lng)/2)},r=function(t,n){return e(t,n)},o=function(e,i,r,o,s){var a,l,u,h,c,d,p,f,m,g,v,y,_;if(null==o&&(o=1),null==s&&(s=10),0===e.length)return[];for(e=e.concat(),_=function(){var t,n,r;for(r=[],t=0,n=e.length;t<n;t++)d=e[t],r.push(i(d));return r}(),h=[e.shift()],c=[_.shift()],l=0,u=0,m=!1;e.length>0;)p=h[h.length-1],v=c[c.length-1],f=e[0],y=_[0],d=r(p,f),g=i(d),a=Math.max(l,u)+1,t.LineUtil.pointToSegmentDistance(g,v,y)<o||a>=s?(a>=s&&(m=!0),h.push(d,e.shift()),c.push(g,_.shift()),l=u,u=Math.max(0,u-2)):(e.unshift(d),_.unshift(g),u+=1);return m&&n.debug&&console.log("Max interpolation depth reached."),c},a=function(e,n,s,a,l,u){var h,c;return null==s&&(s=[]),null==a&&(a="geodetic"),null==l&&(l=1),null==u&&(u=10),"geodetic"===a&&(a=r),"cartesian"===a&&(a=i),{boundary:o(n,c=function(n){var i,r;return i=1e7,90===n.lat&&(n=t.latLng(89.999,n.lng)),(r=e.latLngToLayerPoint.call(e,n)).x=Math.max(Math.min(r.x,i),-i),r.y=Math.max(Math.min(r.y,i),-i),r},a,l,u),holes:function(){var t,e,n,i;for(i=[],t=0,e=(n=null!=s?s:[]).length;t<e;t++)h=n[t],i.push(o(h,c,a,l,u));return i}()}},s=function(){var t;return t=a(this._map,this._latlngs,this._holes,this._interpolationFn),this._originalPoints=t.boundary,this._holePoints=t.holes},t.Polyline.prototype.projectLatlngs=s,t.Polygon.prototype.projectLatlngs=s,t.Polyline.prototype._interpolationFn=r,t.Rectangle.prototype._interpolationFn=i,{projectPath:a})}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};window.edsc.map.L.ProjectionSwitchingLayer=(t=L,function(){function n(n){null==n&&(n={}),this._onProjectionChange=e(this._onProjectionChange,this),this.options=t.extend({},this.defaultOptions,n)}return n.prototype.defaultOptions={},n.prototype.onAdd=function(t){return this._map=t,this.updateOptions(),t.on("projectionchange",this._onProjectionChange)},n.prototype.onRemove=function(t){var e;return this._map=null,null!=(e=this.layer)&&e.onRemove(t),this.layer=null,t.off("projectionchange",this._onProjectionChange)},n.prototype.setZIndex=function(t){var e;return this.zIndex=t,null!=(e=this.layer)?e.setZIndex(this.zIndex):void 0},n.prototype.validForProjection=function(t){return!1!==this.options[t]},n.prototype._onProjectionChange=function(){return this.updateOptions()},n.prototype.updateOptions=function(e){var n,i,r,o;if(null==e&&(e={}),i=this._map,null!=this.layer&&(this.layer.onRemove(i),this.layer.off("tileerror"),this.layer=null),r=i.projection,this.validForProjection(r))return e=t.extend({},this[r+"Options"],e),null!=(n=this.layer=this._buildLayerWithOptions(e))?(n.setZIndex(null!=(o=this.zIndex)?o:0),n.addTo(i),n.on("tileerror",function(t){if(!t.tile.src.match(/&retry=(\d+)$/))return t.tile.src+="&retry=1"})):void 0},n.prototype.arcticOptions={noWrap:!0,continuousWorld:!0},n.prototype.antarcticOptions={noWrap:!0,continuousWorld:!0},n.prototype.geoOptions={noWrap:!0,continuousWorld:!1},n.prototype._buildLayerWithOptions=function(){return console.error("Implement _buildLayerWithOptions",this)},n}())}.call(this),function(){var t,e,n,i,r,o,s,a,l=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty,h=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=this.edsc.map.L).GibsTileLayer=(e=L,n=t.ProjectionSwitchingLayer,i=this.edsc.config.gibsUrl,r=window.edsc.util.date,o=this.edsc.config,s=n.prototype,(a=new Date(o.present())).setDate(a.getDate()-1),function(){function t(){return this._onTimeChange=l(this._onTimeChange,this),t.__super__.constructor.apply(this,arguments)}return h(t,n),t.prototype.defaultOptions={format:"jpeg",tileSize:512,extra:""},t.prototype.arcticOptions=e.extend({},s.arcticOptions,{projection:"EPSG3413",lprojection:"epsg3413",endpoint:"arctic"}),t.prototype.antarcticOptions=e.extend({},s.antarcticOptions,{projection:"EPSG3031",lprojection:"epsg3031",endpoint:"antarctic"}),t.prototype.geoOptions=e.extend({},s.geoOptions,{projection:"EPSG4326",lprojection:"epsg4326",endpoint:"geo"}),t.prototype.onAdd=function(e){var n;return this.options.syncTime&&(this.options.time=r.isoUtcDateString(null!=(n=e.time)?n:a)),t.__super__.onAdd.call(this,e),e.on("edsc.timechange",this._onTimeChange)},t.prototype.onRemove=function(e){return t.__super__.onRemove.call(this,e),e.off("edsc.timechange",this._onTimeChange)},t.prototype._onTimeChange=function(t){var e,n;if(this.options.syncTime)return e=null!=(n=t.time)?n:a,this.updateOptions({time:r.isoUtcDateString(e)})},t.prototype._toTileLayerOptions=function(t){var n,i;return n=this.options,e.extend(n,t),i=n.time,n.timeparam=null!=i?"TIME="+i+"&":"",n},t.prototype.url=function(){return i},t.prototype._buildLayerWithOptions=function(t){return new e.TileLayer(this.url(),this._toTileLayerOptions(t))},t}())}.call(this),function(){var t;window.edsc.map.L.ProjectionSwitcher=((t=L).DomUtil,t.Control.extend({options:{position:"topright"},initialize:function(e){return null==e&&(e={}),t.Control.prototype.initialize.call(this,e)},onAdd:function(t){var e,n,i,r;return this.map=t,n=$('<div class="projection-switcher leaflet-bar"> <a href="#arctic" class="projection-switcher-arctic" title="North Polar Stereographic"></a> <a href="#geo" class="leaflet-disabled projection-switcher-geo" title="Geographic (Equirectangular)"></a> <a href="#antarctic" class="projection-switcher-antarctic" title="South Polar Stereographic"></a> </div>'),this.$root=n,e=$(t.getContainer()),i=e.data("map"),r=this,n.find("a").on("click dblclick",function(t){var e;return t.preventDefault(),t.stopPropagation(),e=this.href.split("#")[1],i.setProjection(e)}),t.on("projectionchange",function(t){return r.setProjection(t.projection)}),n[0]},onRemove:function(){},setProjection:function(t){var e;return this.$root,(e=this.$root.children("[href=\\#"+t+"]")).siblings().removeClass("leaflet-disabled"),e.addClass("leaflet-disabled")}}))}.call(this),function(){var t,e,n,i,r,o;t=L,e=t.Tooltip.prototype.updateContent,t.Tooltip.prototype.updateContent=function(t){return this._content=t,this._point&&(t={text:t.text+"<br>"+this._point,subtext:t.subtext}),e.call(this,t)},n=t.Tooltip.prototype.updatePosition,t.Tooltip.prototype.updatePosition=function(t){return this._point="("+t.lat.toFixed(5)+", "+t.lng.toFixed(5)+")",null!=this._content&&this.updateContent(this._content),n.call(this,t)},r=function(t){if(!(t.length<2))return t[t.length-1],t[t.length-2],null},i=function(){return null},t.Draw.Polygon.prototype._onClick=function(e){var n,i;if(i=e.target.getLatLng(),null==(n=r(this._poly.getLatLngs().concat(i))))return t.Draw.Polyline.prototype._onClick.call(this,e);this._showErrorTooltip(n)},t.Draw.Polygon.prototype._finishShape=function(){var e;if(null==(e=i(this._poly.getLatLngs())))return t.Draw.Polyline.prototype._finishShape.call(this);this._showErrorTooltip(e)},t.Draw.Polygon.prototype._showErrorTooltip=function(e){return null==e&&(e=t.drawLocal.draw.handlers.polyline.error),this.options.drawError.message=e,t.Draw.Polyline.prototype._showErrorTooltip.call(this)},o=function(t){return Math.abs(t.getEast()-t.getWest())>=360?"Bounds cannot span more than 360 degrees latitude":null},t.Draw.Rectangle.prototype._onMouseUp=function(){var e;if(null==this._shape||null==(e=o(this._shape.getBounds())))return t.Draw.SimpleShape.prototype._onMouseUp.call(this);this._showErrorTooltip(e)},t.Draw.Rectangle.prototype._showErrorTooltip=function(t){return this._errorShown=!0,this._tooltip.showAsError().updateContent({text:t}),this._shape.setStyle({color:"#b00b00"}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(this._hideErrorTooltip.bind(this),2500)},t.Draw.Rectangle.prototype._hideErrorTooltip=function(){return this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent({text:this._endLabelText}),this._shape.setStyle({color:this.options.shapeOptions.color})},t.Draw.Rectangle.prototype._clearHideErrorTimeout=function(){if(this._hideErrorTimeout)return clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null},t.Draw.Rectangle.prototype.removeHooks=function(){return this._clearHideErrorTimeout(),t.Draw.SimpleShape.prototype.removeHooks.call(this)}}.call(this),function(){var t,e,n,i;(t=edsc.map).L.sphericalPolygon=(e=L,n=t.geoutil,t.Arc,t.Coordinate,this.edsc.config,e.SphericalPolygon=e.Polygon.extend({includes:[e.LayerGroup.prototype,e.FeatureGroup.prototype],options:{fill:!0},initialize:function(t,n){return this._layers={},this._options=e.extend({},this.options,n),this.setLatLngs(t)},setLatLngs:function(t){var i,r,o,s,a,l,u,h,c,d;for(s=[],t[0]&&Array.isArray(t[0])&&t[0].length>2&&(s=t.slice(1),t=t[0]),t=function(){var n,i,r;for(r=[],n=0,i=t.length;n<i;n++)l=t[n],r.push(e.latLng(l));return r}(),this._latlngs=t.concat(),t.length>2&&!this.drawing&&(Math.abs(t[0].lng)===(c=Math.abs(t[t.length-1].lng))&&180===c?t.push(t[t.length-1]):t.push(t[0])),i=(d=n.dividePolygon(t)).boundaries,a=d.interiors,u=0,h=s.length;u<h;u++)o=s[u],r=n.dividePolygon(o),a=(i=i.concat(r.boundaries)).concat(r.interiors);return this._boundaries?(this._interiors.setLatLngs(a),this._boundaries.setLatLngs(i)):(this._interiors=e.polygon(a,e.extend({},this._options,{stroke:!1})),this._boundaries=e.multiPolyline(i,e.extend({},this._options,{fill:!1})),this.addLayer(this._interiors),this.addLayer(this._boundaries))},getLatLngs:function(){return n.makeCounterclockwise(this._latlngs.concat())},newLatLngIntersects:function(){return!1},setOptions:function(t){return this._options=this.options=e.extend({},this._options,t),e.setOptions(this._interiors,e.extend({},this._options,{stroke:!1})),e.setOptions(this._boundaries,e.extend({},this._options,{fill:!1})),this.redraw()},setStyle:function(t){return this.options.previousOptions&&(this.options.previousOptions=this._options),this._interiors.setStyle(e.extend({},t,{stroke:!1})),this._boundaries.setStyle(e.extend({},t,{fill:!1}))},redraw:function(){return this.setLatLngs(this._latlngs)}}),e.sphericalPolygon=function(t,n){return new e.SphericalPolygon(t,n)},i=e.EditToolbar.Delete.prototype._removeLayer,e.EditToolbar.Delete.prototype._removeLayer=function(t){var e;return(null!=(e=t.target)?e._boundaries:void 0)&&(t.layer=t.target),i.call(this,t)},e.Draw.Polygon=e.Draw.Polygon.extend({Poly:e.SphericalPolygon,addHooks:function(){if(e.Draw.Polyline.prototype.addHooks.call(this),this._map)return this._poly=new e.SphericalPolygon([],this.options.shapeOptions),this._poly.drawing=!0},removeHooks:function(){return this._poly.drawing=!1,e.Draw.Polyline.prototype.removeHooks.call(this)}}),e.Edit.Poly=e.Edit.Poly.extend({_getMiddleLatLng:function(t,e){return n.gcInterpolate(t.getLatLng(),e.getLatLng())}}),{})}.call(this),function(){var t,e;window.edsc.map,t=L,(e=function(e,n,i){var r,o,s,a,l,u,h;return this.proj=i,o=i.project(e),s=i.project(n),a=Math.min(o.x,s.x),l=Math.max(o.x,s.x),u=Math.min(o.y,s.y),h=Math.max(o.y,s.y),this._points=function(){var e,n,i,o;for(o=[],e=0,n=(i=[[a,u],[a,h],[l,h],[l,u]]).length;e<n;e++)r=i[e],o.push(t.point(r));return o}(),this._southWest=t.latLng(i.unproject(this._points[0])),this._northWest=t.latLng(i.unproject(this._points[1])),this._northEast=t.latLng(i.unproject(this._points[2])),this._southEast=t.latLng(i.unproject(this._points[3])),this}).prototype=t.extend({},t.LatLngBounds.prototype,{getCenter:function(){var e,n,i;return n=((e=this._points)[0].x+e[1].x+e[2].x+e[3].x)/4,i=(e[1].y+e[2].y+e[2].y+e[3].y)/4,this.proj.unproject(t.point(n,i))},getLatLngs:function(){return[this._southWest,this._northWest,this._northEast,this._southEast]},getNorthWest:function(){return this._northWest},getSouthEast:function(){return this._southEast}}),t.PolarRectangle=t.SphericalPolygon.extend({initialize:function(e,n,i){return this.proj=i,t.SphericalPolygon.prototype.initialize.call(this,e,n)},setBounds:function(t){return this._bounds=new e(t.getNorthEast(),t.getSouthWest(),this.proj),this.setLatLngs(this._bounds.getLatLngs())},getBounds:function(){var t;return this._bounds?this._bounds:4===(null!=(t=this._latlngs)?t.length:void 0)?this._bounds=new e(this._latlngs[0],this._latlngs[2],this.proj):(console.warn("Unable to get polar rectangle bounds:",this),null)}}),t.polarRectangle=function(e,n,i){return new t.PolarRectangle(e,n,i)}}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h,c,d,p;t=window.edsc.map.L,L.DrawToolbar=(e=L,n=t.Proj,d=function(t,e){var n,i,r,o;return 1===(null!=(o=e.touches)?o.length:void 0)?(r=e.touches[0],n=t.mouseEventToContainerPoint(r),i=t.mouseEventToLayerPoint(r),{latlng:t.layerPointToLatLng(i),layerPoint:i,containerPoint:n,originalEvent:e}):null},a=e.Draw.SimpleShape.prototype,s=e.Draw.Rectangle.prototype,o=e.Draw.Polyline.prototype,s.addHooks=function(){if(a.addHooks.call(this),this._map)return e.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this),e.DomEvent.on(this._map._container,"touchmove",this._onTouchMove,this),e.DomEvent.on(this._map._container,"touchend",this._onTouchEnd,this)},s.removeHooks=function(){if(a.removeHooks.call(this),this._map)return e.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this),e.DomEvent.off(this._map._container,"touchmove",this._onTouchMove,this),e.DomEvent.off(this._map._container,"touchend",this._onTouchEnd,this)},s._onTouchStart=function(t){var e;if(e=d(this._map,t))return this._onMouseDown(e)},s._onTouchMove=function(t){var e;if(e=d(this._map,t))return this._onMouseMove(e)},s._onTouchEnd=function(t){var e;if(0===(null!=(e=t.touches)?e.length:void 0))return this._onMouseUp()},h=o.addHooks,c=o.removeHooks,o.addHooks=function(){return h.call(this),e.extend(this._mouseMarker._icon.style,{marginLeft:"-5000px",marginTop:"-5000px",width:"10000px",height:"10000px",backgroundColor:"#f00"}),e.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},o.removeHooks=function(){return c.call(this),e.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},o._onTouchStart=function(t){var e;if(e=d(this._map,t))return this._onMouseMove(e)},e.Browser.touch&&(p=new e.Point(30,30),e.setOptions(e.Edit.Poly.prototype.options.icon,{iconSize:p}),e.setOptions(e.Edit.SimpleShape.prototype.options.moveIcon,{iconSize:p}),e.setOptions(e.Edit.SimpleShape.prototype.options.resizeIcon,{iconSize:p}),e.setOptions(e.Draw.Polyline.prototype.options.icon,{iconSize:p}),u=e.Toolbar.prototype._showActionsToolbar,e.Toolbar.prototype._showActionsToolbar=function(){var t;return u.call(this),t=this._activeMode.buttonIndex,this._actionsContainer.style.top=30*t+3+"px"}),i=e.Draw.Rectangle.extend({initialize:function(t,n,i,r){return this.proj=i,e.Draw.Rectangle.prototype.initialize.call(this,t,n),this.type=r+"-rectangle"},_drawShape:function(t){var n;return n=this._startLatLng,null!=this._shape?this._shape.setBounds(e.latLngBounds(n,t)):(this._shape=new e.PolarRectangle([],this.options.shapeOptions,this.proj),this._shape.setBounds(e.latLngBounds(n,t)),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var t;return t=new e.PolarRectangle(this._shape.getLatLngs(),this.options.shapeOptions,this.proj),e.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,t)}}),r=e.Edit.Rectangle.extend({_createMoveMarker:function(){return this._moveMarker={setLatLng:function(){},off:function(){return this}}}}),e.PolarRectangle.addInitHook(function(){var t,e;if((t=null!=(e=this.editing)?e.enabled():void 0)&&this.editing.disable(),this.editing=new r(this),t)return this.editing.enable()}),e.DrawToolbar,l=e.DrawToolbar.prototype,e.DrawToolbar.extend({addToolbar:function(t){var r,o,s,a,u,h,c,d;for(h=l.addToolbar.call(this,t),u="leaflet-draw-draw",this._initModeHandler(new i(t,this.options.rectangle,n.epsg3413.projection,"arctic"),this._toolbarContainer,++this._lastButtonIndex,u+"-rectangle projection-only-arctic "+u,e.drawLocal.draw.toolbar.buttons.rectangle),this._initModeHandler(new i(t,this.options.rectangle,n.epsg3031.projection,"antarctic"),this._toolbarContainer,++this._lastButtonIndex,u+"-rectangle projection-only-antarctic "+u,e.drawLocal.draw.toolbar.buttons.rectangle),r=c=0,d=(a=["marker","rectangle","arctic-rectangle","antarctic-rectangle","polygon"]).length;c<d;r=++c)s=a[r],(o=this._modes[s]).buttonIndex=r,o.button.parentNode.appendChild(o.button),"rectangle"===s&&(o.button.className+=" projection-only-geo");return h},_handlerActivated:function(t){var e,n;return n=this._modes[t.handler],e=$(n.button),n.buttonIndex=e.prevAll("a:visible").size(),this._lastButtonIndex=e.parent().children("a:visible").size()-1,l._handlerActivated.call(this,t)}}))}.call(this),function(){var t,e,n,i,r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};this.edsc.map.L.ShapefileLayer=(t=L,e=Dropzone,n=this.edsc.config,i=n.maxPolygonSize,o=t.FeatureGroup.prototype._propagateEvent,t.FeatureGroup.prototype._propagateEvent=function(t){var e;return t.chain=null!=(e=t.chain)?e:[],t.chain.push(t.target),o.call(this,t)},e.autoDiscover=!1,r={url:"/convert",headers:{"X-CSRF-Token":n.csrfToken},paramName:"upload",clickable:".geojson-dropzone-link",createImageThumbnails:!1,acceptedFiles:".zip,.kml,.kmz,.json,.geojson,.rss,.georss,.xml",fallback:function(){return $(".select-shapefile").parent().hide()},parallelUploads:1,uploadMultiple:!1,addRemoveLinks:!0},function(){function n(e){null==e&&(e={}),this._clickLayer=s(this._clickLayer,this),this._displayError=s(this._displayError,this),this._geoJsonResponse=s(this._geoJsonResponse,this),this._removeFile=s(this._removeFile,this),this.options={selection:t.extend({},this.defaultOptions.selection,e.selection)}}return n.prototype.defaultOptions={selection:t.Draw.Polygon.prototype.options.shapeOptions},n.prototype.onAdd=function(n){var i,o;return this.map=n,i=n.getContainer(),(o=new e(i,r)).on("success",this._geoJsonResponse),o.on("removedfile",this._removeFile),o.on("error",this._displayError),this._dropzone=o,t.DomUtil.addClass(i,"dropzone"),this._isAdded=!0},n.prototype.onRemove=function(){return this.remove(),this.map=null,this._jsonLayer=null,this._isAdded=!1},n.prototype.activate=function(t){if(null==t&&(t=!0),this._isActive=!0,this.show(),t)return this.showHelp()},n.prototype.deactivate=function(){return this._isActive=!1,this.hide(),this.hideHelp()},n.prototype.showHelp=function(){return t.DomUtil.addClass(this.map.getContainer(),"is-geojson-help-visible")},n.prototype.hideHelp=function(){return t.DomUtil.removeClass(this.map.getContainer(),"is-geojson-help-visible")},n.prototype.isActive=function(){return this._isActive},n.prototype.hide=function(){return $(".dz-preview").hide(),null!=this._jsonLayer&&this._isAdded&&this.map.removeLayer(this._jsonLayer),this._isAdded=!1},n.prototype.show=function(){if($(".dz-preview").show(),null==this._jsonLayer||this._isAdded||this.map.addLayer(this._jsonLayer),null!=this._jsonLayer)return this._isAdded=!0},n.prototype.remove=function(){if(null!=this._file)return this._dropzone.removeFile(this._file)},n.prototype._removeFile=function(){return null!=this._jsonLayer&&this.map.removeLayer(this._jsonLayer),this.map.fire("shapefile:stop"),this._file=null},n.prototype._geoJsonResponse=function(e,n){var i,r,o,s,a;return this.isActive()||this.activate(!1),this.hideHelp(),this.remove(),(r=new t.Icon.Default).options.className="geojson-icon",(o=new t.geoJson(n,{className:"geojson-svg",onEachFeature:function(t,e){var n,i,o,s,a,l;if((n=function(t){var e,n;if(null!=(null!=(e=t.options)?e.icon:void 0))return null!=(n=t.options)?n.icon=r:void 0})(e),null!=e.getLayers){for(l=[],o=0,s=(a=e.getLayers()).length;o<s;o++)i=a[o],l.push(n(i));return l}}})).on("click",this._clickLayer),this._file=e,this._jsonLayer=o,this.map.addLayer(o),this.map.fire("shapefile:start"),this.map.fitBounds(o.getBounds()),(i=o.getLayers()).length>1?null!=(a=(s=i[Math.floor(i.length/2)])._container)?a:s._icon:1===i.length?this._setConstraint(i[0]):void 0},n.prototype._displayError=function(t){var e,n,i;if(t.name.match(".*shp"))return n="To use an ESRI Shapefile, please upload a zip file that includes its .shp, .shx, and .dbf files.",(e=document.createElement("div")).appendChild(document.createTextNode(n)),e.className+="edsc-dz-error",(i=t.previewElement).getElementsByClassName("dz-details")[0].appendChild(e),i.removeChild(i.querySelector(".dz-error-message"))},n.prototype._clickLayer=function(t){return this._setConstraint(t.chain[0])},n.prototype._setConstraint=function(e){var n,i,r,o,s;if(null!=e.getLatLngs?(s=e.getLatLngs(),n=this._simplifyPoints(s),i=t.sphericalPolygon(n,this.options.selection),r="polygon"):null!=e.getLatLng&&(i=t.marker(e.getLatLng()),r="marker"),null!=i)return(o=this.map).fire("draw:drawstart"),o.fire("draw:created",{target:o,layer:i,layerType:r}),o.fire("draw:drawstop")},n.prototype._simplifyPoints=function(e){var n,r,o,s,a,l,u,h,c;if(e.length>i){for(r=this.map,s=function(){var t,i,o;for(o=[],t=0,i=e.length;t<i;t++)n=e[t],o.push(r.latLngToLayerPoint(n));return o}(),u=1,l=s;l.length>i;)l=t.LineUtil.simplify(s,u++);console.log("size "+e.length+" => "+l.length),e=function(){var t,e,n;for(n=[],t=0,e=l.length;t<e;t++)o=l[t],n.push(r.layerPointToLatLng(o));return n}()}for(l=[],a=e[e.length-1],h=0,c=e.length;h<c;h++)(n=e[h]).equals(a)||l.push(n),a=n;return l},n}())}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h,c,d,p={}.hasOwnProperty,f=[].slice,m=function(t,e){return function(){return t.apply(e,arguments)}},g=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};(t=this.edsc.map.L).GranuleLayer=(e=L,n=jQuery,i=t.GibsTileLayer,r=t.interpolation.projectPath,o=this.edsc.map.geoutil.dividePolygon,s=this.edsc.util.string.capitalize,a=this.edsc.util.array,l=this.edsc.config,h=1,d=function(t){var e,n,i,r,o,s,l;for(i=0,r=0,o=(s=a.pairs(t)).length;r<o;r++)e=(l=s[r])[0],i+=((n=l[1]).x-e.x)*(n.y+e.y);return i>0},c=function(t,e){var n,i,r,o,s,a,l,u,h,c;if(e=(h=e).path,o=h.poly,n=h.line,r=h.point,null!=o||null!=n){if(null==o&&(o=n),o.length<2)return;for(t.moveTo(o[0].x,o[0].y),l=0,u=(c=o.slice(1)).length;l<u;l++)i=c[l],t.lineTo(i.x,i.y);null==n&&t.closePath()}else null!=r&&(s=r.x,a=r.y,t.moveTo(s+10,a),t.arc(s,a,10,0,2*Math.PI,"undefined"==typeof isCounterclockwise||null===isCounterclockwise||isCounterclockwise));return null},u=e.TileLayer.extend({options:{async:!0},initialize:function(t,n,i){return this.multiOptions=i,e.TileLayer.prototype.initialize.call(this,t,n),this.originalOptions=this.options},setResults:function(t){return this._results=t,this.redraw()},redraw:function(){var t,e,n,i;if(this._map)for(this._reset({hard:!0}),this._update(),e=0,n=(i=this._tiles).length;e<n;e++)t=i[e],this._redrawTile(t);return this},_redrawTile:function(t){var e;return e=t._tilePoint,this.drawTile(t,this._getBackTile(e),e,this._map._zoom)},_createTile:function(){var t;return(t=e.DomUtil.create("canvas","leaflet-tile")).width=t.height=this._getTileSize(),t.onselectstart=t.onmousemove=e.Util.falseFn,t},_reset:function(t){if(this._backTiles={},this._tilesToLoad,e.TileLayer.prototype._reset.call(this,t),this._tilesToLoad>0)return this.fire("load")},_getBackTile:function(t){var e,n;return e=t.x+":"+t.y,null==this._backTiles&&(this._backTiles={}),null==(n=this._backTiles)[e]&&(n[e]=this._createTile()),this._backTiles[e]},_loadTile:function(t,e){if(t._layer=this,this._adjustTilePoint(e),t._tilePoint=e,this._redrawTile(t),!this.options.async)return this.tileDrawn()},_addIntersections:function(t,n,i,o,s){var a,l,u,h;if(null==n)return null;for(u=0,h=n.length;u<h;u++)l=n[u],e.latLngBounds(l).intersects(i)&&((a={})[o]=r(this._map,l,[],s,2,5).boundary,t.push(a));return null},_granulePathsOverlappingTile:function(t,e){var n,i,r,s,a,l,u,h,c,d,p,f,m,g,v,y;for(a=[],this._map,this._intersects,i=t.isCartesian()?"cartesian":"geodetic",u=0,d=(g=null!=(m=t.getPolygons())?m:[]).length;u<d;u++){if(s=g[u],t.isCartesian())this._addIntersections(a,s,e,"poly",i);else for(Array.isArray(s[0])||(s=[s]),h=0,p=s.length;h<p;h++)l=s[h],n=o(l).interiors,this._addIntersections(a,n,e,"poly",i);if(t.orbit)break}for(this._addIntersections(a,t.getRectangles(),e,"poly","cartesian"),this._addIntersections(a,t.getLines(),e,"line",i),c=0,f=(y=null!=(v=t.getPoints())?v:[]).length;c<f;c++)r=y[c],e.contains(r)&&a.push({point:this._map.latLngToLayerPoint(r)});return a},granuleAt:function(t){var e,n,i,r,o,s,a,l,u;return r=this._map.getPixelOrigin(),l=this._getTileSize(),a=t.add(r).divideBy(l).floor(),e=this._getBackTile(a),s=t.subtract(this._getTilePos(a)),o=null,255===(n=e.getContext("2d").getImageData(s.x,s.y,1,1).data)[3]&&(i=(n[0]<<16)+(n[1]<<8)+n[2],o=null!=(u=this._results)?u[i]:void 0),o},_matches:function(t,e){var n,i,r,o,s,a,l,u;for(s in o=[">=","<="],e)if(p.call(e,s)){if(a=e[s],n=t[s].split("T")[0],a&&!n)return!1;for(i=null,l=0,u=o.length;l<u;l++)if(r=o[l],0===a.indexOf(r)){i=r,a=a.substring(r.length);break}if(">="===i&&n<a)return!1;if("<="===i&&n>a)return!1;if(!i&&a!==n)return!1}return!0},getTileUrl:function(t,n){var i,r,o,s,a,u,h,c,d;if(!this.multiOptions)return null;for(i=null!=(c=n.time_start)?c.substring(0,10):void 0,r=!1,u=0,h=(d=this.multiOptions).length;u<h;u++)if(a=d[u],this._matches(n,a.match)){s=a.resolution,"geo"===this._map.projection&&a.geo?(r=!0,o=a.geo_resolution):"arctic"===this._map.projection&&a.arctic?(r=!0,o=a.arctic_resolution):"antarctic"===this._map.projection&&a.antarctic&&(r=!0,o=a.antarctic_resolution),null==o&&(o=s),a.resolution=o,this.options=e.extend({},this.originalOptions,a);break}return r?this.options.granule?(this._originalUrl=this._originalUrl||this._url,this._url=l.gibsGranuleUrl||this._originalUrl,i=n.time_start,this.options.time_start=n.time_start.replace(/\.\d{3}Z$/,"Z"),e.TileLayer.prototype.getTileUrl.call(this,t)):(this._url=this._originalUrl||this._url,r?e.TileLayer.prototype.getTileUrl.call(this,t)+"&time="+i:void 0):void 0},drawTile:function(t,n,i){var r,o,s,a,u,h,c,p,f,m,g,v,y,_,b,w,x,S,C,E,M,L;if(null!=this._results&&this._results.length>0){for(c=this._map.layerPointToLatLng.bind(this._map),w=this._getTileSize(),p=(f=this._getTilePos(i)).add([w,0]),_=f.add([w,w]),b=f.add([0,w]),d((r={poly:[f,p,_,b]}).poly)||r.poly.reverse(),o=(o=new e.latLngBounds(r.poly.map(c))).pad(.1),v=[],y=[],a=S=0,E=(L=this._results).length;S<E;a=++S)if(s=L[a],(m=this._granulePathsOverlappingTile(s,o)).length>0){for(x=this.getTileUrl(i,s),h=C=0,M=m.length;C<M;h=++C)(g=m[h]).index=a,g.url=x,g.granule=s,null!=g.poly&&0===h===d(g.poly)&&g.poly.reverse();y.push(m),v=v.concat(m)}var T,k,D,P,O;return T=this,u=function(){return T.tileDrawn(t)},
setTimeout((k=this,function(){return k._drawOutlines(t,v,f)}),0),setTimeout((D=this,function(){return D._drawClippedPaths(t,r,y,f,u)}),0),setTimeout((P=this,function(){return P._drawClippedImagery(t,r,v,f,i)}),0),setTimeout((O=this,function(){return O._drawFullBackTile(n,r,y.concat().reverse(),f)}),0),v.length>0&&l.debug&&console.log(v.length+" Overlapping Granules [("+o.getNorth()+", "+o.getWest()+"), ("+o.getSouth()+", "+o.getEast()+")]"),null}},_drawOutlines:function(t,e,n){var i,r,o,s;for((i=t.getContext("2d")).save(),i.translate(-n.x,-n.y),i.strokeStyle="rgba(128, 128, 128, .2)",o=0,s=e.length;o<s;o++)r=e[o],i.beginPath(),c(i,r),i.stroke();return i.restore(),null},_drawClippedPaths:function(t,e,n,i,r){var o,s,a,l,u,h,d,p,m,g;for((o=t.getContext("2d")).save(),o.translate(-i.x,-i.y),o.strokeStyle=this.options.color,h=0,p=n.length;h<p;h++){for(l=(u=n[h])[0],a=2<=u.length?f.call(u,1):[],o.beginPath(),c(o,l),d=0,m=a.length;d<m;d++)s=a[d],c(o,{poly:s.poly.concat().reverse()});o.stroke(),c(o,e),(null!=(g=l.line)?g.length:void 0)>0||o.clip()}return o.restore(),"function"==typeof r&&r(),null},_loadImage:function(t,e,n){var i,r;return null==n&&(n=0),null!=t?((i=new Image).onload=function(){return e(this),document.body.removeChild(i)},i.onerror=(r=this,function(){return n<h?r._loadImage(t,e,n+1):(console.error("Failed to load tile after "+h+" tries: "+t),e(null))}),i.setAttribute("style","display: none;"),document.body.appendChild(i),i.src=t):e(null)},_drawClippedImage:function(t,e,n,i,r,o){var s,a,l,u,h;if(null!=r){for(t.save(),t.beginPath(),a=0,u=n.length;a<u;a++)s=n[a],c(t,s);t.clip(),t.globalCompositeOperation="destination-over",t.drawImage(r,i.x,i.y,o,o),t.restore()}for(l=0,h=n.length;l<h;l++)s=n[l],t.beginPath(),c(t,s),c(t,e),t.clip();return null},_drawClippedImagery:function(t,e,n,i,r,o){var s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w;if(null!=this._url&&0!==n.length){for((s=t.getContext("2d")).save(),s.translate(-i.x,-i.y),m=null,a=[],c=[],v=0,_=n.length;v<_;v++)(h=n[v]).url!==m?(a.length>0&&c.push({url:m,urlPaths:a}),a=[h],m=h.url):a.push(h);for(a.length>0&&c.push({url:m,urlPaths:a}),d=[],u=0,f=t.width,p=this,g=function(t,n,r){return p._loadImage(r,function(r){for(d[t]=function(){return p._drawClippedImage(s,e,n,i,r,f)};null!=d[u];)d[u](),d[u]=null,u++;if(u===c.length)return s.restore(),"function"==typeof o?o():void 0})},l=y=0,b=c.length;y<b;l=++y)m=(w=c[l]).url,g(l,w.urlPaths,m);return null}"function"==typeof o&&o()},_drawFullBackTile:function(t,e,n,i){var r,o,s,a,l,u,h,d,p;for((r=t.getContext("2d")).save(),r.translate(-i.x,-i.y),u=0,d=n.length;u<d;u++){for(a=(l=n[u])[0],s=2<=l.length?f.call(l,1):[],r.strokeStyle=r.fillStyle="#"+(a.index+16777216).toString(16).substr(-6),r.beginPath(),c(r,a),h=0,p=s.length;h<p;h++)o=s[h],c(r,o);null!=a.line?(r.lineWidth=4,r.stroke()):r.fill()}return r.restore(),null},tileDrawn:function(t){return this._tileOnLoad.call(t)}}),function(){function t(e,n,i){var r;this.collection=e,this.multiOptions=i,this._onEdscStickygranule=m(this._onEdscStickygranule,this),this._onEdscFocusgranule=m(this._onEdscFocusgranule,this),this._onClick=m(this._onClick,this),this._onEdscMousemove=m(this._onEdscMousemove,this),this._onEdscMouseout=m(this._onEdscMouseout,this),this._onEdscFocuscollection=m(this._onEdscFocuscollection,this),this.collection.granuleDatasource()?this.granules=this.collection.granuleDatasource().data():this._datasourceSubscription=this.collection.granuleDatasource.subscribe(this._subscribe),this._hasGibs=(null!=(r=this.multiOptions)?r.length:void 0)>0,this.color=null!=n?n:"#25c85b",t.__super__.constructor.call(this,{})}return g(t,i),t.prototype.onAdd=function(e){var n,i,r,o;return t.__super__.onAdd.call(this,e),this.layer._container.setAttribute("id","granule-vis-"+this.collection.id),this._handle(e,"on","edsc.focuscollection"),this.setFocus((null!=(n=e.focusedCollection)?n.id:void 0)===this.collection.id),this._resultsSubscription=null!=(i=this.granules)&&null!=(r=i.results)?r.subscribe(this._loadResults.bind(this)):void 0,this._loadResults(null!=(o=this.granules)?o.results():void 0),this._added=!0},t.prototype.onRemove=function(e){var n;return t.__super__.onRemove.call(this,e),this._added=!1,this.setFocus(!1,e),this._handle(e,"off","edsc.focuscollection"),null!=(n=this._resultsSubscription)&&n.dispose(),this._results=null},t.prototype._subscribe=function(){var t,e,n,i,r;if(console.warn("sub",this.collection.granuleDatasource()),this.collection.granuleDatasource()&&this._added&&!this._resultsSubscription)return t=this.collection.granuleDatasource(),this.granules=t.data(),this._resultsSubscription=null!=(e=this.granules)&&null!=(n=e.results)?n.subscribe(this._loadResults.bind(this)):void 0,this._loadResults(null!=(i=this.granules)?i.results():void 0),null!=(r=this._datasourceSubscription)?r.dispose():void 0},t.prototype.url=function(){if(this._hasGibs)return t.__super__.url.call(this)},t.prototype.setFocus=function(t,e){var n,i,r;if(null==e&&(e=this._map),this._isFocused!==t)return this._isFocused=t,n=["edsc.mousemove","edsc.mouseout","click","edsc.focusgranule","edsc.stickygranule"],t?this._handle.apply(this,[e,"on"].concat(f.call(n))):(this._handle.apply(this,[e,"off"].concat(f.call(n))),null!=(i=this._granuleFocusLayer)&&i.onRemove(e),this._granuleFocusLayer=null,null!=(r=this._granuleStickyLayer)&&r.onRemove(e),this._granuleStickyLayer=null)},t.prototype._handle=function(){var t,e,n,i,r,o,a,l;for(i=arguments[0],r=arguments[1],l=[],o=0,a=(e=3<=arguments.length?f.call(arguments,2):[]).length;o<a;o++)n="_on"+(t=e[o]).split(".").map(s).join(""),l.push(i[r](t,this[n]));return l},t.prototype._onEdscFocuscollection=function(t){var e;return this.setFocus((null!=(e=t.collection)?e.id:void 0)===this.collection.id)},t.prototype._onEdscMouseout=function(){if(null!=this._granule)return this._map.fire("edsc.focusgranule",{granule:null})},t.prototype._onEdscMousemove=function(t){var e,n;if(e=null!=(n=this.layer)?n.granuleAt(t.layerPoint):void 0,this._granule!==e)return this._map.fire("edsc.focusgranule",{granule:e})},t.prototype._onClick=function(t){var e,i;return n(t.originalEvent.target).closest("a").hasClass("panel-list-remove")?this._map.fire("edsc.excludestickygranule"):0===n(t.originalEvent.target).closest("a").length?(e=null!=(i=this.layer)?i.granuleAt(t.layerPoint):void 0,this._stickied===e&&(e=null),this._map.fire("edsc.focusgranule",{granule:e}),this._map.fire("edsc.stickygranule",{granule:e})):void 0},t.prototype._onEdscFocusgranule=function(t){var e,n,i;return this._granule=e=t.granule,null!=(n=this._granuleFocusLayer)&&n.onRemove(this._map),this._granuleFocusLayer=this._focusLayer(e,!1),null!=(i=this._granuleFocusLayer)?i.onAdd(this._map):void 0},t.prototype._onEdscStickygranule=function(t){var e,n,i,r;if(n=t.granule,this._stickied!==n)return this._stickied=n,null!=(i=this.layer)&&(i.stickyId=null!=n?n.id:void 0),null!=(r=this._granuleStickyLayer)&&r.onRemove(this._map),this._granuleStickyLayer=this._stickyLayer(n,!0),null!=this._granuleStickyLayer&&(this._granuleStickyLayer.onAdd(this._map),"geo"===this.layer.options.endpoint&&null!=this._granuleFocusLayer&&(null!=(e=this._granuleFocusLayer.getBounds())?e.isValid():void 0)&&!this._map.getBounds().contains(e)&&this._map.fitBounds(e.pad(.2)).panTo(e.getCenter())),this._loadResults(this._results)},t.prototype._buildLayerWithOptions=function(t){var n,i,r,o;return delete(t=e.extend({},t)).time,r=this.url(),n=new u(r,e.extend(this._toTileLayerOptions(t),{color:this.color}),this.multiOptions),null==(i=this._map).loadingLayers&&(i.loadingLayers=0),n.on("loading",function(){return i.loadingLayers++}),n.on("load",function(){return i.loadingLayers--}),n.setResults(this._reorderedResults(this._results)),n.stickyId=null!=(o=this._stickied)?o.id:void 0,n},t.prototype._reorderedResults=function(t){var e,n,i;return null!=this._stickied&&(-1===(e=(t=t.concat()).indexOf(this._stickied))?(this._stickied=null,null!=(n=this.layer)&&(n.stickyId=null),null!=(i=this._granuleStickyLayer)&&i.onRemove(this._map),this._granuleStickyLayer=null):(t.splice(e,1),t.unshift(this._stickied))),t},t.prototype._loadResults=function(t){var e;return this._results=t,null!=(e=this.layer)?e.setResults(this._reorderedResults(t)):void 0},t.prototype._granuleLayer=function(t,e){return t.buildLayer(e)},t.prototype._focusLayer=function(t){return null==t?null:t.buildLayer({clickable:!1,color:this.color,fillColor:this.color,opacity:1})},t.prototype._stickyLayer=function(t){var n,i,r,o,s,a,l,u;return null==t?null:(o=t.buildLayer({fillOpacity:0,clickable:!1,color:this.color,fillColor:this.color,opacity:1}),(a=t.getTemporal())[0]&&a[1]?l="<p>"+a[0]+"</p><p>"+a[1]+"</p>":a[0]?l="<p>"+a[0]+"</p>":a[1]&&(l="<p>"+a[1]+"</p>"),n="",(null!=(u=this.collection.granuleDatasource())?u.hasCapability("excludeGranules"):void 0)&&(n='<a class="panel-list-remove" href="#" title="Remove granule"><span class="fa-stack"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-times fa-stack-1x fa-inverse"></i></span></a>'),r=e.divIcon({className:"granule-spatial-label",html:'<span class="granule-spatial-label-temporal">'+l+"</span>"+n}),s=e.marker([0,0],{clickable:!1,icon:r}),null!=(null!=(i=o.getLayers()[0])?i._interiors:void 0)&&(i=i._interiors),null!=i&&i.on("add",function(){var t,n,i,r,a;return a=this._map,null==(n="function"==typeof this.getLatLng?this.getLatLng():void 0)&&(r=this.getLatLngs(),Array.isArray(r[0])&&(r=r[0]),t=e.bounds(function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)i=r[t],n.push(a.latLngToLayerPoint(i));return n}()),n=a.layerPointToLatLng(t.getCenter())),s.setLatLng(n),o.addLayer(s)}),o)},t}())}.call(this),function(){var t,e;window.edsc.map.L.ZoomHome=(t=L,e=window.edsc.models.page.current,t.DomUtil,t.Control.Zoom.extend({options:{position:"topright",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out",zoomHomeText:'<i class="fa fa-home" style="line-height:1.65;"></i>',zoomHomeTitle:"Zoom home"},onAdd:function(e){var n,i,r,o;return n=t.Control.Zoom.prototype.onAdd.call(this,e),r=this.options,i=this._createButton(r.zoomHomeText,r.zoomHomeTitle,"leaflet-control-zoom-home",n,(o=this,function(t){return o._zoomHome(t)})),n.insertBefore(i,this._zoomOutButton),n},_zoomHome:function(){var n,i,r,o,s,a;if((null!=(o=e.query.spatial())?o.length:void 0)>0){for((r=o.split(":")).shift(),n=new t.LatLngBounds,s=0,a=r.length;s<a;s++)i=r[s],n.extend(i.split(",").reverse());return this._map.fitBounds(n)}return"geo"===this._map.projection?this._map.setView([0,0],2):"arctic"===this._map.projection?this._map.setView([90,0],0):this._map.setView([-90,0],0)}}))}.call(this),function(){var t,e,n;(t=this.edsc.map).LayerBuilder=(e=t.L.GibsTileLayer,n={blue_marble:{name:"Blue Marble",product:"BlueMarble_ShadedRelief_Bathymetry",resolution:"500m",format:"jpeg",maxNativeZoom:7},MODIS_Terra_CorrectedReflectance_TrueColor:{name:"Corrected Reflectance (True Color)",product:"MODIS_Terra_CorrectedReflectance_TrueColor",resolution:"250m",format:"jpeg",maxNativeZoom:7,syncTime:!0},land_water_map:{name:"Land / Water Map *",product:"OSM_Land_Water_Map",resolution:"250m",format:"png",maxNativeZoom:7},coastlines:{name:"Coastlines *",product:"Coastlines",resolution:"250m",format:"png",maxNativeZoom:7},borders:{name:"Borders and Roads *",product:"Reference_Features",resolution:"250m",format:"png",maxNativeZoom:7},labels:{name:'Place Labels *<span class="map-attribution">* &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors</span>',product:"Reference_Labels",resolution:"250m",format:"png",maxNativeZoom:7}},{layerForProduct:function(t){return null!=n[t]?new e(n[t]):console.error("Unable to find product: "+t)}})}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h,c=function(t,e){return function(){return t.apply(e,arguments)}},d=[].slice;(t=this.edsc.map).SpatialSelection=(e=window,n=document,i=toastr,r=L,o=t.L.ShapefileLayer,s=t.L.Proj,a=this.edsc.util.visibility,l=this.edsc.models.page.current,r.drawLocal.draw.handlers.simpleshape.tooltip.end="Release to finish drawing",r.drawLocal.draw.toolbar.buttons.polygon="Search by spatial polygon",r.drawLocal.draw.toolbar.buttons.rectangle="Search by spatial rectangle",r.drawLocal.draw.toolbar.buttons.marker="Search by spatial coordinate",h="#00ffff",u="#990000",function(){function t(){this._onSpatialErrorChange=c(this._onSpatialErrorChange,this),this._onSpatialChange=c(this._onSpatialChange,this),this._onDrawDeleted=c(this._onDrawDeleted,this),this._onDrawEdited=c(this._onDrawEdited,this),this._onDrawCreated=c(this._onDrawCreated,this),this._onEditEnd=c(this._onEditEnd,this),this._onEditStart=c(this._onEditStart,this),this._onDrawStop=c(this._onDrawStop,this),this._onDrawStart=c(this._onDrawStart,this),this._onToolChange=c(this._onToolChange,this)}return t.prototype.addTo=function(t){var e,n,i,s,a,c,d,p,f,m,g,v,y,_,b,w,x;for(this.map=t,(n=this._drawnItems=new r.FeatureGroup).addTo(t),this._colorOptions=e={color:h,dashArray:null,pointerEvents:"stroke",fillOpacity:0},this._errorOptions=i={color:u,dashArray:null},(this._drawControl=new r.Control.Draw({draw:{polygon:{drawError:i,shapeOptions:e},rectangle:{drawError:i,shapeOptions:e},polyline:!1,circle:!1},edit:{selectedPathOptions:{opacity:.6,dashArray:"10, 10"},featureGroup:n},position:"topright"})).addTo(t),s=l.query.spatial,this._querySubscription=s.subscribe(this._onSpatialChange),this._spatialErrorSubscription=l.spatialError.subscribe(this._onSpatialErrorChange),this._onSpatialChange(s()),this._onSpatialErrorChange(l.spatialError()),t.on("draw:drawstart",this._onDrawStart),t.on("draw:drawstop",this._onDrawStop),t.on("draw:editstart",this._onEditStart),t.on("draw:editstop",this._onEditEnd),t.on("draw:created",this._onDrawCreated),t.on("draw:edited",this._onDrawEdited),t.on("draw:deleted",this._onDrawDeleted),a=l.ui.spatialType,c=0,m=(_=this._getToolLinksForName("Rectangle")).length;c<m;c++)_[c].addEventListener("click",a.selectRectangle);for(d=0,g=(b=this._getToolLinksForName("Polygon")).length;d<g;d++)b[d].addEventListener("click",a.selectPolygon);for(p=0,v=(w=this._getToolLinksForName("Point")).length;p<v;p++)w[p].addEventListener("click",a.selectPoint);for(f=0,y=(x=this._getToolLinksForName("Cancel")).length;f<y;f++)x[f].addEventListener("click",a.selectNone);return this._toolSubscription=a.name.subscribe(this._onToolChange),this._onToolChange(a.name()),this._shapefileLayer=new o({selection:this._colorOptions}),t.addLayer(this._shapefileLayer)},t.prototype.onRemove=function(t){var e,n,i,r,o,s,a,u,h,c,d,p,f,m,g;for(this.map=null,this._shapefileLayer.removeFrom(t),this._drawnItems.removeFrom(t),this._drawControl.removeFrom(t),this._querySubscription.dispose(),this._toolSubscription.dispose(),this._spatialErrorSubscription.dispose(),t.off("draw:drawstart",this._onDrawStart),t.off("draw:drawstop",this._onDrawStop),t.off("draw:editstart",this._onEditStart),t.off("draw:editstop",this._onEditEnd),t.off("draw:created",this._onDrawCreated),t.off("draw:edited",this._onDrawEdited),t.off("draw:deleted",this._onDrawDeleted),n=l.ui.spatialType,i=0,a=(d=this._getToolLinksForName("Rectangle")).length;i<a;i++)(e=d[i]).removeEventListener("click",n.selectRectangle);for(r=0,u=(p=this._getToolLinksForName("Polygon")).length;r<u;r++)(e=p[r]).removeEventListener("click",n.selectPolygon);for(o=0,h=(f=this._getToolLinksForName("Point")).length;o<h;o++)(e=f[o]).removeEventListener("click",n.selectPoint);for(g=[],s=0,c=(m=this._getToolLinksForName("Cancel")).length;s<c;s++)e=m[s],g.push(e.removeEventListener("click",n.selectNone));return g},t.prototype._getToolLinksForName=function(t){var e,n;if(null==(e=null!=(n=this.map)?n.getContainer():void 0))return[];switch(t){case"Rectangle":return e.getElementsByClassName("leaflet-draw-draw-rectangle");case"Polygon":return e.getElementsByClassName("leaflet-draw-draw-polygon");case"Point":return e.getElementsByClassName("leaflet-draw-draw-marker");default:return e.querySelectorAll('.leaflet-draw-section a[title="Cancel drawing"]')}},t.prototype._onToolChange=function(t){var i,r,o;if(this._currentTool!==t)return this._currentTool=t,"Shape File"===t?this._shapefileLayer.activate():(null!=(o=this._shapefileLayer)?o.isActive():void 0)&&("Spatial"===t?this._shapefileLayer.hideHelp():this._shapefileLayer.deactivate()),r=$(this._getToolLinksForName(t)).filter(":visible")[0],(i=n.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,e,1,0,0,0,0,!1,!1,!1,!1,0,null),null!=r&&r.dispatchEvent(i),"Spatial"!==t&&this.map.fire("spatialtoolchange",{name:t}),l.ui.spatialType.name(t)},t.prototype._onDrawStart=function(){return this._oldLayer=this._layer,this._oldLayerIsShapefile=this._shapefileLayer.isActive(),this._removeSpatial()},t.prototype._onDrawStop=function(){if(l.ui.spatialType.selectNone(),this._oldLayerIsShapefile&&this._shapefileLayer.activate(!1),null!=this._oldLayer)return this._layer=this._oldLayer,this._oldLayer=null,this._drawnItems.addLayer(this._layer)},t.prototype._onEditStart=function(){var t,e;return this._preEditBounds=this._boundsToPoints(this._layer),null!=(t=this._layer)&&null!=(e=t._path)&&"function"==typeof e.setAttribute?e.setAttribute("pointer-events","all"):void 0},t.prototype._onEditEnd=function(){var t,e;return null!=(t=this._layer)&&null!=(e=t._path)&&"function"==typeof e.setAttribute?e.setAttribute("pointer-events","stroke"):void 0},t.prototype._onDrawCreated=function(t){return this._addLayer(t.target,t.layer,t.layerType)},t.prototype._onDrawEdited=function(t){var e,n;return e=this.map,n=this._boundsToPoints(this._layer),e.fire("spatialedit",{preBounds:this._preEditBounds,postBounds:n,spatial:this._layer.type}),l.ui.spatialType.selectNone(),this._addLayer(t.target)},t.prototype._boundsToPoints=function(t){var e,n;return e="marker"===t.type?[t.getLatLng()]:t.getLatLngs(),function(){var t,i,r;for(r=[],t=0,i=e.length;t<i;t++)n=e[t],r.push(this.map.latLngToLayerPoint(n));return r}.call(this)},t.prototype._addLayer=function(t,e,n){return null==e&&(e=this._layer),null==n&&(n=this._layer.type),this._oldLayer=null,this._oldLayerIsShapefile=!1,this._layer=e,this._layer.type=n,this._drawnItems.addLayer(e),this._saveSpatialParams(e,n)},t.prototype._onDrawDeleted=function(){return l.ui.spatialType.selectNone(),this._removeSpatial(),l.query.spatial("")},t.prototype._onSpatialChange=function(t){return null==t||0===t.length?this._removeSpatial():this._loadSpatialParams(t)},t.prototype._onSpatialErrorChange=function(t){var e,n;if(null!=t){if(null!=this._layer)return i.options={timeOut:1e4},i.error(t,"Spatial Query Error"),"function"==typeof(e=this._layer).setStyle?e.setStyle(this._errorOptions):void 0}else if(null!=this._layer)return"function"==typeof(n=this._layer).setStyle?n.setStyle(this._colorOptions):void 0},t.prototype._renderSpatial=function(){},t.prototype._removeSpatial=function(){if(this._spatial=null,this._layer)return this._layer&&this._drawnItems.removeLayer(this._layer),this._layer=null},t.prototype._renderMarker=function(t){var e,i,o,s,l,u;return(i=this._layer=new r.Marker(t[0],{icon:r.Draw.Marker.prototype.options.icon})).type="marker",this._drawnItems.addLayer(i),o=null!=(u=n.getElementsByClassName("master-overlay-main"))?u[0]:void 0,e=n.getElementById("master-overlay-parent"),l=0-(a.isElementInViewPort(e)?e.offsetWidth:0)/2,s=(null!=o?o.offsetHeight:void 0)/4,this.map.panTo(i.getLatLng()).panBy([l,s])},t.prototype._renderRectangle=function(t){var e,i,o,s,l,u,h,c;return t[0].lng>t[1].lng&&(t[1].lng+=360),e=function(t,e,n){n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return Object(r)===r?r:i}(r.LatLngBounds,t,function(){}),u=r.extend({},r.Draw.Rectangle.prototype.options.shapeOptions,this._colorOptions),(h=this._layer=new r.Rectangle(e,u)).type="rectangle",this._drawnItems.addLayer(h),o=null!=(c=n.getElementsByClassName("master-overlay-main"))?c[0]:void 0,i=n.getElementById("master-overlay-parent"),l=0-(a.isElementInViewPort(i)?i.offsetWidth:0)/2,s=(null!=o?o.offsetHeight:void 0)/4,this.map.panTo(r.latLngBounds(h.getLatLngs()).getCenter()).panBy([l,s])},t.prototype._renderPolygon=function(t){var e,n;return e=r.extend({},r.Draw.Polygon.prototype.options.shapeOptions,this._colorOptions),(n=this._layer=new r.SphericalPolygon(t,e)).type="polygon",this._drawnItems.addLayer(n)},t.prototype._renderPolarRectangle=function(t,e,n){var i,o;return i=r.extend({},r.Draw.Polygon.prototype.options.shapeOptions,this._colorOptions),(o=this._layer=new r.PolarRectangle(t,i,e)).type=n,this._drawnItems.addLayer(o)},t.prototype._saveSpatialParams=function(t,e){var n,i,r,o;return"marker"===e&&(e="point"),"rectangle"===e&&(e="bounding_box"),r=function(){switch(e){case"point":return[t.getLatLng()];case"bounding_box":return[t.getLatLngs()[0],t.getLatLngs()[2]];case"polygon":case"arctic-rectangle":case"antarctic-rectangle":return t.getLatLngs();default:return console.error("Unrecognized shape: "+e)}}(),o=function(){var t,e,i;for(i=[],t=0,e=r.length;t<e;t++)n=r[t],i.push(n.lng+","+n.lat);return i}().join(":"),i=e+":"+o,this._spatial=i,l.query.spatial(i)},t.prototype._loadSpatialParams=function(t){var e,n,i,o,a;if(t!==this._spatial)switch(this._removeSpatial(),this._spatial=t,o=(a=t.split(":"))[0],i=2<=a.length?d.call(a,1):[],n=function(){var t,n,o;for(o=[],t=0,n=i.length;t<n;t++)e=i[t],o.push(r.latLng(e.split(",").reverse()));return o}(),this._oldLayer=null,o){case"point":return this._renderMarker(n);case"bounding_box":return this._renderRectangle(n);case"polygon":return this._renderPolygon(n);case"arctic-rectangle":return this._renderPolarRectangle(n,s.epsg3413.projection,o);case"antarctic-rectangle":return this._renderPolarRectangle(n,s.epsg3031.projection,o);default:return console.error("Cannot render spatial type "+o)}},t}())}.call(this),function(){var t,e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty;(t=this.edsc.map).GranuleVisualizationsLayer=(e=L,this.edsc.util.date,$.extend,n=t.L.GranuleLayer,i=this.edsc.page.project,function(){function t(){this.setVisibleCollections=r(this.setVisibleCollections,this),this._onVisibleCollectionsChange=r(this._onVisibleCollectionsChange,this),this._collectionIdsToLayers={}}return t.prototype.onAdd=function(t){return this._map=t,t.on("edsc.visiblecollectionschange",this._onVisibleCollectionsChange)},t.prototype.onRemove=function(t){return this._map=t,t.off("edsc.visiblecollectionschange",this._onVisibleCollectionsChange)},t.prototype._onVisibleCollectionsChange=function(t){return this.setVisibleCollections(t.collections)},t.prototype.setVisibleCollections=function(t){var r,s,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x,S,C,E,M,L;for(g=this._map,l=this._collectionIdsToLayers,y={},r=6,w=16,C=0,E=t.length;C<E;C++)h=(a=t[C]).id,S="jpeg"===(null!=(b=a.gibs())?b[0].format:void 0)?Math.min(r++,9):Math.min(w++,19),null!=l[h]?p=l[h]:(u=i.colorForCollection(a),p=new n(a,u,b),g.addLayer(p),(null!=(M=a.boxes)?M.length:void 0)>0&&(c=(L=a.boxes[0].split(" ").map(function(t){return parseFloat(t)}))[0],f=L[1],d=L[2],m=L[3],x=e.latLng(c,f),_=e.latLng(d,m),(s=e.latLngBounds(x,_)).getNorth()-s.getSouth()<.5&&s.getWest()-s.getEast()<.5&&(v=e.featureGroup().addLayer(e.marker(s.getCenter())),g.addLayer(v),y[h+"-marker"]=v))),p.setZIndex(S),y[h]=p;for(h in l)o.call(l,h)&&(p=l[h],null==y[h]&&(g.removeLayer(p),null!=y[h+"-marker"]&&g.removeLayer(y[h+"-marker"])));return this._collectionIdsToLayers=y,null},t}())}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};this.edsc.map.MouseEventsLayer=(L,t=jQuery,e=this.edsc.config,n=10,function(){function r(){this._onMouseOut=i(this._onMouseOut,this),this._onMouseMove=i(this._onMouseMove,this),this.disable=i(this.disable,this),this.enable=i(this.enable,this),this._hoverTimer=null,this._hoverPoint=null,this._disabled=0}return r.prototype.onAdd=function(t){return this._map=t,t.on("mousemove",this._onMouseMove),t.on("mouseout",this._onMouseOut),t.on("draw:drawstart draw:editstart draw:deletestart shapefile:start",this.disable),t.on("draw:drawstop draw:editstop draw:deletestop shapefile:stop",this.enable)},r.prototype.onRemove=function(t){return this._clearHoverTimeout(),this._map=null,t.off("mousemove",this._onMouseMove),t.off("mouseout",this._onMouseOut),t.off("draw:drawstart draw:editstart draw:deletestart shapefile:start",this.disable),t.off("draw:drawstop draw:editstop draw:deletestop shapefile:stop",this.enable)},r.prototype.enable=function(){return this._disabled-=1},r.prototype.disable=function(t){return this._disabled+=1,this._onMouseOut(t)},r.prototype._onMouseMove=function(e){var i,r,o;if(0===this._disabled)return o=e.containerPoint,r=this._hoverPoint,i=Math.abs,t(e.originalEvent.target).closest(".leaflet-control-container, .geojson-help, .leaflet-popup-pane").length>0?(this._clearHoverTimeout(),this._map.fire("edsc.mouseout",e)):(this._map.fire("edsc.mousemove",e),null==r||i(o.x-r.x)+i(o.y-r.y)>n?(this._hoverPoint=o,this._setHoverTimeout(e)):void 0)},r.prototype._onMouseOut=function(t){return this._map.fire("edsc.mouseout",t),this._hoverPoint=null,this._clearHoverTimeout()},r.prototype._clearHoverTimeout=function(){return clearTimeout(this._hoverTimer)},r.prototype._setHoverTimeout=function(t){var n,i;return this._clearHoverTimeout(),this._isHovering&&this._map.fire("edsc.hoverout",t),this._isHovering=!1,i=this,n=function(){return i._isHovering=!0,i._map.fire("edsc.hover",t)},this._hoverTimer=setTimeout(n,e.hoverTimeoutMs)},r}())}.call(this),function(){var t,e,n,i,r,o,s,a,l,u,h,c,d,p,f,m,g,v,y=[].slice,_={}.hasOwnProperty;(t=this.edsc.map).Map=(e=window,n=document,i=L,r=ko,o=t.L.Proj,s=t.L.ProjectionSwitcher,a=t.LayerBuilder,l=t.SpatialSelection,u=t.GranuleVisualizationsLayer,h=t.MouseEventsLayer,c=t.L.ZoomHome,d=this.edsc.Legend,p=this.edsc.page,f=this.edsc.util.xhr.ajax,m=this.edsc.config,i.Map.include({fitBounds:function(t,e){var n,r,o,s,a,l,u,h;return null==e&&(e={}),e.animate=m.animateMap,t=null!=(u="function"==typeof t.getBounds?t.getBounds():void 0)?u:i.latLngBounds(t),s=i.point(e.paddingTopLeft||e.padding||[0,0]),o=i.point(e.paddingBottomRight||e.padding||[0,0]),l=this.getBoundsZoom(t,!1,s.add(o)),a=this.project(t.getSouthWest(),l),r=this.project(t.getNorthEast(),l),n=this.unproject(a.add(r).divideBy(2),l),l=Math.min(null!=(h=e.maxZoom)?h:Infinity,l),this.setView(n,l,e)},setZoom:function(t,e){var n,i;return t=this._limitZoom(t),this._loaded?this.getZoom()===t?this:(i=this.project(this.getCenter(),t),n=this.unproject(i,t),this.setView(n,t,{zoom:e})):(this._zoom=this._limitZoom(t),this)}}),i.Icon.Default.imagePath="/images/leaflet-0.7",g=i.Control.extend({setData:function(t,e){return this.legend.setData(t,e)},onAdd:function(){return this.legend=new d,this.legend.container}}),v=function(){function t(t,e){var o;null==e&&(e="geo"),$(t).data("map",this),this.layers=[],(o=this.map=new i.Map(t,{zoomControl:!1,attributionControl:!1})).loadingLayers=0,o.addControl(i.control.scale({position:"topright"})),this._buildLayerSwitcher(),o.addLayer(new u),o.addLayer(new h),o.addControl(new c),o.addControl(new s),o.addControl(new l),this.legendControl=new g({position:"topleft"}),o.addControl(this.legendControl),this.setProjection(e),this.setBaseMap("Blue Marble"),this.setOverlays([n[0],n[2]]),this.time=r.computed(this._computeTime,this),o.fire("edsc.visiblecollectionschange",{collections:p.project.visibleCollections()}),this._granuleVisualizationSubscription=p.project.visibleCollections.subscribe(function(t){return o.fire("edsc.visiblecollectionschange",{collections:t})}),this._setupStatePersistence()}var e,n;return e=["Blue Marble","Corrected Reflectance (True Color)","Land / Water Map *"],n=["Borders and Roads *","Coastlines *",'Place Labels *<span class="map-attribution">* &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors</span>'],t.prototype.destroy=function(){return this.map.remove(),this.time.dispose(),this._granuleVisualizationSubscription.dispose()},t.prototype._setupStatePersistence=function(){var t,o,s;return this.serialized=o=r.observable(null),(t=this.map).on("moveend baselayerchange overlayadd overlayremove",function(i){var r,s,a,l,u,h,c,d,p;return r=Math.abs(e.indexOf(this._baseMap)),null==(h=function(){var t,e,i,r;for(r=[],t=0,e=(i=this._overlays).length;t<e;t++)l=i[t],r.push(n.indexOf(l));return r}.call(this))&&(h=[]),"baselayerchange"===i.type&&(r=Math.abs(e.indexOf(i.name))),"overlayadd"===i.type&&(s=n.indexOf(i.name))>-1&&h.push(s),"overlayremove"===i.type&&(s=n.indexOf(i.name),h.splice(h.indexOf(s),1)),a=(p=t.getCenter()).lat,u=p.lng,d=t.getZoom(),c=Math.abs(["arctic","geo","antarctic"].indexOf(this.projection)),o([a,u,d,c,r,h.join(",")].join("!"))}),o.subscribe((s=this,function(r){var o,a,l,u,h,c,d,p,f,m,g,v,y,_,b,w,x;if(null!=r&&r.length>0){for(h=(b=r.split("!"))[0],c=b[1],v=b[2],g=b[3],o=b[4],m=b[5],null!=o&&""!==o||(o="0"),null==m&&(m=""),s.setProjection(["arctic","geo","antarctic"][null!=g?g:1]),s.setBaseMap(e[null!=(w=parseInt(o))?w:0]),f=[],y=0,_=(x=m.split(",")).length;y<_;y++)u=x[y],(l=parseInt(u))>-1&&f.push(n[l]);if(s.setOverlays(f),d=t.getCenter(),p=t.getZoom(),a=i.latLng(h,c),(v=parseInt(v,10))!==p||t.latLngToLayerPoint(d).distanceTo(t.latLngToLayerPoint(a))>10)return t.setView(i.latLng(h,c),parseInt(v,10))}}))},t.prototype.focusCollection=function(t){return this._addLegend(t),this.map.focusedCollection=t,this.map.fire("edsc.focuscollection",{collection:t})},t.prototype._addLegend=function(t){var e,n,i,r,o,s,a,l,u;for(this.legendControl.setData(null,{}),e=null!=(s=null!=t?t.gibs():void 0)?s:[],n=null,r=0,o=e.length;r<o;r++)if(!(null!=(a=(m=e[r]).match)?a.sit:void 0)){n=m.product;break}if(null!=n)return i="/colormaps/"+n+".json",console.log("Request "+i),f({dataType:"json",url:i,retry:(u=this,function(){return u._addLegend(t)}),success:(l=this,function(t){return console.log("Adding legend: "+n),l.legendControl.setData(n,t)})}),null},t.prototype._computeTime=function(){var t,e,n;if(n=null,(n=null!=(t=(e=p.query).focusedTemporal())?new Date(t[1]-1):e.temporal.applied.stop.date())!==this.map.time)return this.map.time=n,this.map.fire("edsc.timechange",{time:n})},t.prototype._createLayerMap=function(){var t,e,n,i,r,o;for(n=1<=arguments.length?y.call(arguments,0):[],e=a.layerForProduct,i={},r=0,o=n.length;r<o;r++)i[(t=e(n[r])).options.name]=t;return i},t.prototype._buildLayerSwitcher=function(){var t,e,n,r;for(e in t=this._baseMaps=this._createLayerMap("blue_marble","MODIS_Terra_CorrectedReflectance_TrueColor","land_water_map"),r=this._overlayMaps=this._createLayerMap("borders","coastlines","labels"),t)if(_.call(t,e)){n=t[e],this.map.addLayer(n);break}return this._layerControl=i.control.layers(t,r),this.map.addControl(this._layerControl)},t.prototype._rebuildLayers=function(){var t,e,n,r,o,s,a,l,u,h,c,d,p;for(e in r=this._layerControl,o=!0,s=this.projection,l=this._baseMaps)_.call(l,e)&&(a=(n=l[e]).validForProjection(s),t=null!=r._layers[i.stamp(n)],o&&(o=!a||!(null!=(u=n.layer)?u._map:void 0)),a&&!t&&(r.addBaseLayer(n,e),n.setZIndex(0)),!a&&t&&(r.removeLayer(n),null!=(null!=(h=n.layer)?h._map:void 0)&&(o=!0),this.map.removeLayer(n)));if(o)for(e in c=this._baseMaps)if(_.call(c,e)&&(n=c[e]).validForProjection(s)){this.map.addLayer(n);break}for(e in p=[],d=this._overlayMaps)_.call(d,e)&&(a=(n=d[e]).validForProjection(s),t=null!=r._layers[i.stamp(n)],a&&!t&&(r.addOverlay(n,e),n.setZIndex(10)),!a&&t?p.push(r.removeLayer(n)):p.push(void 0));return p},t.prototype.addLayer=function(t){return this.map.addLayer(t)},t.prototype.removeLayer=function(t){return this.map.removeLayer(t)},t.prototype.projectionOptions={arctic:{crs:o.epsg3413,minZoom:0,maxZoom:4,zoom:0,continuousWorld:!0,noWrap:!0,worldCopyJump:!1,center:[90,0]},antarctic:{crs:o.epsg3031,minZoom:0,maxZoom:4,zoom:0,continuousWorld:!0,noWrap:!0,worldCopyJump:!1,center:[-90,0]},geo:{crs:o.epsg4326,minZoom:0,maxZoom:7,zoom:2,continuousWorld:!1,noWrap:!0,worldCopyJump:!0,center:[0,0]}},t.prototype.setProjection=function(t){var e,n;if(e=this.map,this.projection!==t)return $(e._container).removeClass("projection-"+this.projection),$(e._container).addClass("projection-"+t),this.projection=e.projection=t,n=this.projectionOptions[t],i.setOptions(e,n),e.fire("projectionchange",{projection:t,map:e}),e.setView(i.latLng(n.center),n.zoom,{reset:!0}),this._rebuildLayers()},t.prototype.setBaseMap=function(t){var e,n,i,r,o;if((i=this.map)._baseMap!==t){for(r=0,o=(n=this._baseMaps).length;r<o;r++)e=n[r],i.hasLayer(n[e])&&i.removeLayer(n[e]);return i.fire("basemapchange",{name:t}),i.addLayer(n[t]),i._baseMap=t,this._rebuildLayers()}},t.prototype.setOverlays=function(t){var e,n,i,r,o,s,a,l,u,h,c;for(e=s=0,u=t.length;s<u;e=++s)void 0===t[e]&&t.splice(e,1);for(i=this.map,a=0,h=(o=this._overlayMaps).length;a<h;a++)n=o[a],i.hasLayer(o[n])&&i.removeLayer(o[n]);for(l=0,
c=t.length;l<c;l++)r=t[l],i.addLayer(o[r]);return i.fire("overlayschange",{overlays:t}),i._overlays=t,this._rebuildLayers()},t}(),$.fn.mapClick=function(){return this.each(function(t,i){var r;return(r=n.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(r)})},v)}.call(this),function(){var t,e,n,i;this.edsc.map.ImageMap=(window,t=L,e=this.edsc.page,n=function(e){return{project:function(n){return new t.Point(n.lng*e,n.lat*e)},unproject:function(n){return new t.LatLng(n.y/e,n.x/e)},bounds:t.bounds([-180*e,-90*e],[180*e,90*e])}},i=function(e){return t.extend({},t.CRS.Simple,{projection:n(e)})},function(){function n(){}return n.prototype.loadImageMap=function(){var n,r;return this.map=n=t.map("image-map",{minZoom:0,maxZoom:0,zoom:0,center:[0,0],crs:i(1),zoomControl:!1,attributionControl:!1}),n.dragging.disable(),n.touchZoom.disable(),n.doubleClickZoom.disable(),n.scrollWheelZoom.disable(),n.tap&&n.tap.disable(),r="/assets/plate_carree_earth_scaled-ace61a998d7e2d12b5234326af6376de.png",t.imageOverlay(r,[[-90,-180],[90,180]]).addTo(n),e.ui.collectionsList.selected().buildLayer({color:"#54F7A3",fillOpacity:.4,weight:1}).addTo(n),n},n}())}.call(this),function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function r(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function o(t){return function(){return this[t].apply(this,arguments)}}function s(e,n){function i(t,e){return e.toLowerCase()}var r=t(e).data(),o={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])");for(var a in n=new RegExp("^"+n.toLowerCase()),r)n.test(a)&&(o[a.replace(s,i)]=r[a]);return o}function a(e){var n={};if(g[e]||(e=e.split("-")[0],g[e])){var i=g[e];return t.each(m,function(t,e){e in i&&(n[e]=i[e])}),n}}var l,u=(l={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;n<i;n++)if(this[n].valueOf()===e)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new u;return t.replace(this),t}},function(){var e=[];return e.push.apply(e,arguments),t.extend(e,l),e}),h=function(e,n){this._process_options(n),this.dates=new u,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(v.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};h.prototype={constructor:h,_process_options:function(r){this._o=t.extend({},this._o,r);var o=this.o=t.extend({},this._o),s=o.language;switch(g[s]||(s=s.split("-")[0],g[s]||(s=f.language)),o.language=s,o.startView){case 2:case"decade":o.startView=2;break;case 1:case"year":o.startView=1;break;default:o.startView=0}switch(o.minViewMode){case 1:case"months":o.minViewMode=1;break;case 2:case"years":o.minViewMode=2;break;default:o.minViewMode=0}o.startView=Math.max(o.startView,o.minViewMode),!0!==o.multidate&&(o.multidate=Number(o.multidate)||!1,!1!==o.multidate&&(o.multidate=Math.max(0,o.multidate))),o.multidateSeparator=String(o.multidateSeparator),o.weekStart%=7,o.weekEnd=(o.weekStart+6)%7;var a=v.parseFormat(o.format);if(o.startDate!==-Infinity&&(o.startDate?o.startDate instanceof Date?o.startDate=this._local_to_utc(this._zero_time(o.startDate)):o.startDate=v.parseDate(o.startDate,a,o.language):o.startDate=-Infinity),o.endDate!==Infinity&&(o.endDate?o.endDate instanceof Date?o.endDate=this._local_to_utc(this._zero_time(o.endDate)):o.endDate=v.parseDate(o.endDate,a,o.language):o.endDate=Infinity),o.daysOfWeekDisabled=o.daysOfWeekDisabled||[],t.isArray(o.daysOfWeekDisabled)||(o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/)),o.daysOfWeekDisabled=t.map(o.daysOfWeekDisabled,function(t){return parseInt(t,10)}),o.datesDisabled=o.datesDisabled||[],!t.isArray(o.datesDisabled)){var l=[];l.push(v.parseDate(o.datesDisabled,a,o.language)),o.datesDisabled=l}o.datesDisabled=t.map(o.datesDisabled,function(t){return v.parseDate(t,a,o.language)});var u=String(o.orientation).toLowerCase().split(/\s+/g),h=o.orientation.toLowerCase();if(u=t.grep(u,function(t){return/^auto|left|right|top|bottom$/.test(t)}),o.orientation={x:"auto",y:"auto"},h&&"auto"!==h)if(1===u.length)switch(u[0]){case"top":case"bottom":o.orientation.y=u[0];break;case"left":case"right":o.orientation.x=u[0]}else h=t.grep(u,function(t){return/^left|right$/.test(t)}),o.orientation.x=h[0]||"auto",h=t.grep(u,function(t){return/^top|bottom$/.test(t)}),o.orientation.y=h[0]||"auto";else;if(o.defaultViewDate){var c=o.defaultViewDate.year||(new Date).getFullYear(),d=o.defaultViewDate.month||0,p=o.defaultViewDate.day||1;o.defaultViewDate=n(c,d,p)}else o.defaultViewDate=i();o.showOnFocus=o.showOnFocus===e||o.showOnFocus},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(i=e,r=t[o][1]):3===t[o].length&&(i=t[o][1],r=t[o][2]),n.on(r,i)},_unapplyEvents:function(t){for(var n,i,r,o=0;o<t.length;o++)n=t[o][0],2===t[o].length?(r=e,i=t[o][1]):3===t[o].length&&(r=t[o][1],i=t[o][2]),n.off(i,r)},_buildEvents:function(){var e={keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this)};!0===this.o.showOnFocus&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),e],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),r=this._utc_to_local(i);this.element.trigger({type:e,date:r,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return v.formatDate(n,e,this.o.language)},this)})},show:function(){if(!this.element.attr("readonly")||!1!==this.o.enableOnReadonly)return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return void 0!==t?new Date(t):null},clearDates:function(){var t;this.isInput?t=this.element:this.component&&(t=this.element.find("input")),t&&t.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:o("setDates"),setUTCDate:o("setUTCDates"),setValue:function(){var t=this.getFormattedDate();return this.isInput?this.element.val(t).change():this.component&&this.element.find("input").val(t).change(),this},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return v.formatDate(t,n,i)}).join(this.o.multidateSeparator)},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows(),this},setDatesDisabled:function(t){this._process_options({datesDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,r=t(this.o.container).width(),o=t(this.o.container).height(),s=t(this.o.container).scrollTop(),a=t(this.o.container).offset(),l=[];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!==e&&0!==e&&l.push(parseInt(e))});var u=Math.max.apply(Math,l)+10,h=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=h.left-a.left,f=h.top-a.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(p-=e-d)):h.left<0?(this.picker.addClass("datepicker-orient-left"),p-=h.left-i):p+e>r?(this.picker.addClass("datepicker-orient-right"),p=h.left+d-e):this.picker.addClass("datepicker-orient-left");var m,g,v=this.o.orientation.y;if("auto"===v&&(m=-s+f-n,g=s+o-(f+c+n),v=Math.max(m,g)===g?"top":"bottom"),this.picker.addClass("datepicker-orient-"+v),"top"===v?f+=c:f-=n+parseInt(this.picker.css("padding-top")),this.o.rtl){var y=r-(p+d);this.picker.css({top:f,right:y,zIndex:u})}else this.picker.css({top:f,left:p,zIndex:u});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),n=[],i=!1;return arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)},this)),i=!0):(n=(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val())&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy(function(t){return v.parseDate(t,this.o.format,this.o.language)},this)),n=t.grep(n,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),i?this.setValue():n.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill(),this},fillDow:function(){var t=this.o.weekStart,e="<tr>";this.o.calendarWeeks&&(this.picker.find(".datepicker-days thead tr:first-child .datepicker-switch").attr("colspan",function(t,e){return parseInt(e)+1}),e+='<th class="cw">&#160;</th>');for(;t<this.o.weekStart+7;)e+='<th class="dow">'+g[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+g[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var n=[],i=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),s=new Date;return e.getUTCFullYear()<i||e.getUTCFullYear()===i&&e.getUTCMonth()<o?n.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()===i&&e.getUTCMonth()>o)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===s.getFullYear()&&e.getUTCMonth()===s.getMonth()&&e.getUTCDate()===s.getDate()&&n.push("today"),-1!==this.dates.contains(e)&&n.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&n.push("disabled"),this.o.datesDisabled.length>0&&t.grep(this.o.datesDisabled,function(t){return r(e,t)}).length>0&&n.push("disabled","disabled-date"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&n.push("selected")),n},fill:function(){var i,r=new Date(this.viewDate),o=r.getUTCFullYear(),s=r.getUTCMonth(),a=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,l=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,u=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,h=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,c=g[this.o.language].today||g.en.today||"",d=g[this.o.language].clear||g.en.clear||"";if(!isNaN(o)&&!isNaN(s)){this.picker.find(".datepicker-days thead .datepicker-switch").text(g[this.o.language].months[s]+" "+o),this.picker.find("tfoot .today").text(c).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot .clear").text(d).toggle(!1!==this.o.clearBtn),this.updateNavArrows(),this.fillMonths();var p=n(o,s-1,28),f=v.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(f),p.setUTCDate(f-(p.getUTCDay()-this.o.weekStart+7)%7);var m=new Date(p);m.setUTCDate(m.getUTCDate()+42),m=m.valueOf();for(var y,_=[];p.valueOf()<m;){if(p.getUTCDay()===this.o.weekStart&&(_.push("<tr>"),this.o.calendarWeeks)){var b=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),w=new Date(Number(b)+(11-b.getUTCDay())%7*864e5),x=new Date(Number(x=n(w.getUTCFullYear(),0,1))+(11-x.getUTCDay())%7*864e5),S=(w-x)/864e5/7+1;_.push('<td class="cw">'+S+"</td>")}if((y=this.getClassNames(p)).push("day"),this.o.beforeShowDay!==t.noop){var C=this.o.beforeShowDay(this._utc_to_local(p));C===e?C={}:"boolean"==typeof C?C={enabled:C}:"string"==typeof C&&(C={classes:C}),!1===C.enabled&&y.push("disabled"),C.classes&&(y=y.concat(C.classes.split(/\s+/))),C.tooltip&&(i=C.tooltip)}y=t.unique(y),_.push('<td class="'+y.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+p.getUTCDate()+"</td>"),i=null,p.getUTCDay()===this.o.weekEnd&&_.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(_.join(""));var E=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");if(t.each(this.dates,function(t,e){e.getUTCFullYear()===o&&E.eq(e.getUTCMonth()).addClass("active")}),(o<a||o>u)&&E.addClass("disabled"),o===a&&E.slice(0,l).addClass("disabled"),o===u&&E.slice(h+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var M=this;t.each(E,function(e,n){if(!t(n).hasClass("disabled")){var i=new Date(o,e,1);!1===M.o.beforeShowMonth(i)&&t(n).addClass("disabled")}})}_="",o=10*parseInt(o/10,10);var L=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var T,k=t.map(this.dates,function(t){return t.getUTCFullYear()}),D=-1;D<11;D++)T=["year"],-1===D?T.push("old"):10===D&&T.push("new"),-1!==t.inArray(o,k)&&T.push("active"),(o<a||o>u)&&T.push("disabled"),_+='<span class="'+T.join(" ")+'">'+o+"</span>",o+=1;L.html(_)}},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&e<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&e>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&e<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&e>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(e){e.preventDefault();var i,r,o,s=t(e.target).closest("span, td, th");if(1===s.length)switch(s[0].nodeName.toLowerCase()){case"th":switch(s[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var a=v.modes[this.viewMode].navStep*("prev"===s[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=n(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var u="linked"===this.o.todayBtn?null:"view";this._setDate(l,u);break;case"clear":this.clearDates()}break;case"span":s.hasClass("disabled")||(this.viewDate.setUTCDate(1),s.hasClass("month")?(o=1,r=s.parent().find("span").index(s),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(r),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(n(i,r,o))):(o=1,r=0,i=parseInt(s.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(i,r,o))),this.showMode(-1),this.fill());break;case"td":s.hasClass("day")&&!s.hasClass("disabled")&&(o=parseInt(s.text(),10)||1,i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),s.hasClass("old")?0===r?(r=11,i-=1):r-=1:s.hasClass("new")&&(11===r?(r=0,i+=1):r+=1),this._setDate(n(i,r,o)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):!1===this.o.multidate?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){var n;e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate"),this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveMonth:function(t,n){if(!t)return e;if(!n)return t;var i,r,o=new Date(t.valueOf()),s=o.getUTCDate(),a=o.getUTCMonth(),l=Math.abs(n);if(n=n>0?1:-1,1===l)r=-1===n?function(){return o.getUTCMonth()===a}:function(){return o.getUTCMonth()!==i},i=a+n,o.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var u=0;u<l;u++)o=this.moveMonth(o,n);i=o.getUTCMonth(),o.setUTCDate(s),r=function(){return i!==o.getUTCMonth()}}for(;r();)o.setUTCDate(--s),o.setUTCMonth(i);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":visible")){var e,n,r,o,s=!1,a=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37===t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),e),r=this.moveYear(a,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),e),r=this.moveMonth(a,e),this._trigger("changeMonth",this.viewDate)):((n=new Date(this.dates.get(-1)||i())).setUTCDate(n.getUTCDate()+e),(r=new Date(a)).setUTCDate(a.getUTCDate()+e)),this.dateWithinRange(r)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),t.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38===t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),e),r=this.moveYear(a,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),e),r=this.moveMonth(a,e),this._trigger("changeMonth",this.viewDate)):((n=new Date(this.dates.get(-1)||i())).setUTCDate(n.getUTCDate()+7*e),(r=new Date(a)).setUTCDate(a.getUTCDate()+7*e)),this.dateWithinRange(r)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),t.preventDefault());break;case 32:break;case 13:a=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(a),s=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),"function"==typeof t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(s)this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.isInput?o=this.element:this.component&&(o=this.element.find("input")),o&&o.change()}else 27===t.keyCode&&this.show()},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.children("div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var c=function(e,n){this.element=t(e),this.inputs=t.map(n.inputs,function(t){return t.jquery?t[0]:t}),delete n.inputs,p.call(t(this.inputs),n).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,n){n.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var n=t(e.target).data("datepicker").getUTCDate(),i=t.inArray(e.target,this.inputs),r=i-1,o=i+1,s=this.inputs.length;if(-1!==i){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(n)}),n<this.dates[r])for(;r>=0&&n<this.dates[r];)this.pickers[r--].setUTCDate(n);else if(n>this.dates[o])for(;o<s&&n>this.dates[o];)this.pickers[o++].setUTCDate(n);this.updateDates(),delete this.updating}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var d=t.fn.datepicker,p=function(n){var i,r=Array.apply(null,arguments);return r.shift(),this.each(function(){var o=t(this),l=o.data("datepicker"),u="object"==typeof n&&n;if(!l){var d=s(this,"date"),p=a(t.extend({},f,d,u).language),m=t.extend({},f,p,d,u);if(o.hasClass("input-daterange")||m.inputs){var g={inputs:m.inputs||o.find("input").toArray()};o.data("datepicker",l=new c(this,t.extend(m,g)))}else o.data("datepicker",l=new h(this,m))}if("string"==typeof n&&"function"==typeof l[n]&&(i=l[n].apply(l,r))!==e)return!1}),i!==e?i:this};t.fn.datepicker=p;var f=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,container:"body"},m=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=h;var g=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},v={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,v.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(i,r,o){function s(){var t=this.slice(0,d[u].length),e=d[u].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(!i)return e;if(i instanceof Date)return i;"string"==typeof r&&(r=v.parseFormat(r));var a,l,u,c=/([\-+]\d+)([dmwy])/,d=i.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,u=0;u<d.length;u++)switch(a=c.exec(d[u]),l=parseInt(a[1]),a[2]){case"d":i.setUTCDate(i.getUTCDate()+l);break;case"m":i=h.prototype.moveMonth.call(h.prototype,i,l);break;case"w":i.setUTCDate(i.getUTCDate()+7*l);break;case"y":i=h.prototype.moveYear.call(h.prototype,i,l)}return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}d=i&&i.match(this.nonpunctuation)||[],i=new Date;var p,f,m={},y=["yyyy","yy","M","MM","m","mm","d","dd"],_={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};_.M=_.MM=_.mm=_.m,_.dd=_.d,i=n(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var b=r.parts.slice();if(d.length!==b.length&&(b=t(b).filter(function(e,n){return-1!==t.inArray(n,y)}).toArray()),d.length===b.length){var w,x,S;for(u=0,w=b.length;u<w;u++){if(p=parseInt(d[u],10),a=b[u],isNaN(p))switch(a){case"MM":f=t(g[o].months).filter(s),p=t.inArray(f[0],g[o].months)+1;break;case"M":f=t(g[o].monthsShort).filter(s),p=t.inArray(f[0],g[o].monthsShort)+1}m[a]=p}for(u=0;u<y.length;u++)(S=y[u])in m&&!isNaN(m[S])&&(x=new Date(i),_[S](x,m[S]),isNaN(x)||(i=x))}return i},formatDate:function(e,n,i){if(!e)return"";"string"==typeof n&&(n=v.parseFormat(n));var r={d:e.getUTCDate(),D:g[i].daysShort[e.getUTCDay()],DD:g[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:g[i].monthsShort[e.getUTCMonth()],MM:g[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,e=[];for(var o=t.extend([],n.separators),s=0,a=n.parts.length;s<=a;s++)o.length&&e.push(o.shift()),e.push(r[n.parts[s]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">&#171;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&#187;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=v,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=d,this},t.fn.datepicker.version="1.4.0",t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),p.call(n,"show"))}),t(function(){p.call(t('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(){var t,e,n,i,r,o,s,a;t=document,e=jQuery,n=this.edsc.util.date,i=this.edsc.page.query.temporal,this.edsc.util.plugin,this.edsc.page,o=new Date,Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),r=(new Date).getUTCFullYear(),a=function(t){var e,i,r,o,s,a,l;if(s=t.find(".temporal-start:visible"),e=t.find(".temporal-stop:visible"),l=s.val(),r=e.val(),s.hasClass("temporal-recurring-picker")&&(l.length>0&&(l="2000-"+l),r.length>0&&(r="2000-"+r)),a=n.parseIsoUtcString(l),i=n.parseIsoUtcString(r),(o=t.find(".tab-pane:visible .temporal-error")).hide(),"Invalid Date"===(null!=a?a.toString():void 0)||"Invalid Date"===(null!=i?i.toString():void 0)?(o.show(),o.text("Invalid date")):o.hide(),!o.is(":visible")&&s&&e)return o.show(),s.hasClass("temporal-recurring-start")?""===l^""===r?o.text("Start and End dates must both be selected"):l>r?o.text("Start must be no later than End"):o.hide():""===l||""===r||l<=r?o.hide():o.text("Start must be no later than End")},s=null,e.fn.temporalSelectors=function(t){var n,i,o,l,u,h;return o=this,l=t.uiModel,t.modelPath,t.prefix,o.data("temporal-selectors")&&console.error("Temporal selectors double initialization"),o.data("temporal-selectors",!0),o.find(".temporal-range-picker").datepicker({startDate:"1960-01-01",endDate:new Date,startView:2,todayBtn:"linked",clearBtn:!0,autoclose:!0,todayHighlight:!0,forceParse:!1,keyboardNavigation:!1}),e("#equatorial-crossing-date-min").datepicker({format:"yyyy-mm-ddT00:00:00",startDate:"1960-01-01",endDate:new Date,startView:2,todayBtn:"linked",clearBtn:!0,autoclose:!0,todayHighlight:!0,forceParse:!1,keyboardNavigation:!1}),e("#equatorial-crossing-date-max").datepicker({format:"yyyy-mm-ddT23:59:59",startDate:"1960-01-01",endDate:new Date,startView:2,todayBtn:"linked",clearBtn:!0,autoclose:!0,todayHighlight:!0,forceParse:!1,keyboardNavigation:!1}),o.find(".temporal-recurring-picker").datepicker({startDate:"01-01",endDate:"12-31",startView:1,todayBtn:"linked",clearBtn:!0,autoclose:!0,todayHighlight:!0,forceParse:!1,keyboardNavigation:!1}).on("show",function(){return e(this).data("datepicker").picker.addClass("datepicker-temporal-recurring")}),n=Object.getPrototypeOf(e(".temporal").data("datepicker")),null==s&&(i=n.fill,n.fill=function(){var t,e;if(i.call(this),this.element.hasClass("temporal-recurring-picker"))return t=(e=this.picker.find(".datepicker-days thead .datepicker-switch")).text(),e.text(t.replace(/\d{4}\s*$/,""))}),o.find(".temporal-recurring-year-range").slider({
min:1960,max:r,value:[1960,r],tooltip:"hide"}).on("slide",function(t){return l.pending.years(t.value)}),l.pending.years.subscribe(function(t){return o.find(".temporal-recurring-year-range").slider("setValue",t)}),o.find(".temporal-recurring-year-range").slider("setValue",l.pending.years()),u=function(){return!!o.find("#temporal-date-range .temporal-error").is(":hidden")&&l.apply()},h=function(){return!!o.find("#temporal-recurring .temporal-error").is(":hidden")&&l.apply()},o.find(".temporal-submit, .temporal-clear").on("click",function(){var t;if((t=e(this).parent().siblings(".tab-pane:visible")).is(".temporal-date-range")){if(u())return e(this).parents(".dropdown").removeClass("open")}else if(t.is(".temporal-recurring")&&h())return e(this).parents(".dropdown").removeClass("open")}),o.find(".temporal").on("paste change focusout",function(){return a(o)})},e(t).on("click",".clear-filters.button",function(){return a(e(".collection-temporal-filter"))}),e(t).on("click",".granule-filters-clear",function(){return a(e(".granule-temporal-filter"))}),e(t).on("click",".temporal-filter .temporal-clear",function(){return a(e(this).closest(".temporal-filter")),e(".temporal-range-start").datepicker("update"),e(".temporal-range-stop").datepicker("update")}),e(t).ready(function(){return e("#spatial-dropdown").on("click",function(){return e("#temporal-dropdown.open").removeClass("open")}),e(".temporal-filter").on("click",function(t){t.stopPropagation()}),e(".dropdown.keep-open").on("shown.bs.dropdown",function(){return this.closable=!1}),e(".dropdown.keep-open").on("click",function(){return this.closable=!0}),e(".dropdown.keep-open").on("hide.bs.dropdown",function(){return this.closable}),e(".collection-temporal-filter").temporalSelectors({uiModel:i,modelPath:"query.temporal.pending",prefix:"collection"}),e(".temporal").keydown(function(t){if(t.keyCode>=48||32===t.keyCode)return e(this).data("datepicker").hide()})})}.call(this),function(t){var e=function(e,n){this.element=t(e),this.picker=t('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div><div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element),this.id=this.element.data("slider-id")||n.id,this.id&&(this.picker[0].id=this.id),"undefined"!=typeof Modernizr&&Modernizr.touch&&(this.touchCapable=!0);var i=this.element.data("slider-tooltip")||n.tooltip;switch(this.tooltip=this.picker.find(".tooltip"),this.tooltipInner=this.tooltip.find("div.tooltip-inner"),this.orientation=this.element.data("slider-orientation")||n.orientation,this.orientation){case"vertical":this.picker.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight",this.tooltip.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",this.element.outerWidth()),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth",this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px"}switch(this.min=this.element.data("slider-min")||n.min,this.max=this.element.data("slider-max")||n.max,this.step=this.element.data("slider-step")||n.step,this.value=this.element.data("slider-value")||n.value,this.value[1]&&(this.range=!0),this.selection=this.element.data("slider-selection")||n.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style,this.element.data("slider-handle")||n.handle){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"==this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff],this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=n.formater,this.layout(),this.touchCapable?this.picker.on({touchstart:t.proxy(this.mousedown,this)}):this.picker.on({mousedown:t.proxy(this.mousedown,this)}),"show"===i?this.picker.on({mouseenter:t.proxy(this.showTooltip,this),mouseleave:t.proxy(this.hideTooltip,this)}):this.tooltip.addClass("hide")};e.prototype={constructor:e,over:!1,inDrag:!1,showTooltip:function(){this.tooltip.addClass("in"),this.over=!0},hideTooltip:function(){!1===this.inDrag&&this.tooltip.removeClass("in"),this.over=!1},layout:function(){this.handle1Stype[this.stylePos]=this.percentage[0]+"%",this.handle2Stype[this.stylePos]=this.percentage[1]+"%","vertical"==this.orientation?(this.selectionElStyle.top=Math.min(this.percentage[0],this.percentage[1])+"%",this.selectionElStyle.height=Math.abs(this.percentage[0]-this.percentage[1])+"%"):(this.selectionElStyle.left=Math.min(this.percentage[0],this.percentage[1])+"%",this.selectionElStyle.width=Math.abs(this.percentage[0]-this.percentage[1])+"%"),this.range?(this.tooltipInner.text(this.formater(this.value[0])+" : "+this.formater(this.value[1])),this.tooltip[0].style[this.stylePos]=this.size*(this.percentage[0]+(this.percentage[1]-this.percentage[0])/2)/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"):(this.tooltipInner.text(this.formater(this.value[0])),this.tooltip[0].style[this.stylePos]=this.size*this.percentage[0]/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px")},mousedown:function(e){this.touchCapable&&"touchstart"===e.type&&(e=e.originalEvent),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var n=this.getPercentage(e);if(this.range){var i=Math.abs(this.percentage[0]-n),r=Math.abs(this.percentage[1]-n);this.dragged=i<r?0:1}else this.dragged=0;this.percentage[this.dragged]=n,this.layout(),this.touchCapable?t(document).on({touchmove:t.proxy(this.mousemove,this),touchend:t.proxy(this.mouseup,this)}):t(document).on({mousemove:t.proxy(this.mousemove,this),mouseup:t.proxy(this.mouseup,this)}),this.inDrag=!0;var o=this.calculateValue();return this.element.trigger({type:"slideStart",value:o}).trigger({type:"slide",value:o}),!1},mousemove:function(t){this.touchCapable&&"touchmove"===t.type&&(t=t.originalEvent);var e=this.getPercentage(t);this.range&&(0===this.dragged&&this.percentage[1]<e?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>e&&(this.percentage[1]=this.percentage[0],this.dragged=0)),this.percentage[this.dragged]=e,this.layout();var n=this.calculateValue();return this.element.trigger({type:"slide",value:n}).data("value",n).prop("value",n),!1},mouseup:function(){this.touchCapable?t(document).off({touchmove:this.mousemove,touchend:this.mouseup}):t(document).off({mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1,0==this.over&&this.hideTooltip(),this.element;var e=this.calculateValue();return this.element.trigger({type:"slideStop",value:e}).data("value",e).prop("value",e),!1},calculateValue:function(){var t;return this.range?(t=[this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step],this.value=t):(t=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.value=[t,this.value[1]]),t},getPercentage:function(t){this.touchCapable&&(t=t.touches[0]);var e=100*(t[this.mousePos]-this.offset[this.stylePos])/this.size;return e=Math.round(e/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,e))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(t){this.value=t,this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),"after"==this.selection?this.value[1]=this.max:this.value[1]=this.min),this.diff=this.max-this.min,this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff],this.layout()}},t.fn.slider=function(n,i){return this.each(function(){var r=t(this),o=r.data("slider"),s="object"==typeof n&&n;o||r.data("slider",o=new e(this,t.extend({},t.fn.slider.defaults,s))),"string"==typeof n&&o[n](i)})},t.fn.slider.defaults={min:0,max:10,step:1,orientation:"horizontal",value:5,selection:"before",tooltip:"show",handle:"round",formater:function(t){return t}},t.fn.slider.Constructor=e}(window.jQuery),function(){var t,e,n,i,r,o;t=jQuery,e=window.edsc.models.page.current,n=this.edsc.util.xhr.ajax,i=this.edsc.util.xhr.hasPending,o=null,r=null,t(document).ready(function(){var s,a,l,u,h,c,d;return s=t(".nlp-parsing"),h=null,u=700,s.on("input paste cut",function(){return clearTimeout(h),h=setTimeout(d,u)}),s.on("keydown",function(t){if(clearTimeout(h),13===t.which)return d(t),r=!0}),t("body").on("click","label",function(){return o=!1,r=!0,!0}),t("body").on("click","a",function(){return o=!1,r=!0,!0}),t("body").on("blur","#keywords",function(){return r=!0}),d=function(){var t,i;return o=!(!o||!r)&&s.val()!==e.query.originalKeywords()&&""!==s.val()&&""!==e.query.originalKeywords(),t=e.query.originalKeywords(),i=s.val(),e.query.originalKeywords(i),n({dataType:"json",url:"/extract_filters?q="+i+"&rerun="+o+"&previous_q="+t,success:function(t){return c(t)}}),o=!0,r=!1},c=function(n){var i,r,o,s,a;if(i=n.edscSpatial,r=n.edscTemporal,o=n.keyword,e.query.keywords(o),null!=i&&e.query.spatial(i.query),null!=r&&e.query.temporal.applied.queryCondition(r.query),i)return i.query,s=[i.bbox.swPoint.latitude,i.bbox.swPoint.longitude],a=[i.bbox.nePoint.latitude,i.bbox.nePoint.longitude],t("#map").data("map").map.fitBounds([s,a])},l=function(t){if(e.query.spatial()!==t)return null!=t?t:""},(a=function(){var n;return n=setInterval(function(){var r,o,s;if(!i())return clearTimeout(n),o=(r=t("#keywords")).val(),""===(s=e.query.originalKeywords()||e.query.keywords())||null===s?(e.query.originalKeywords(o),e.query.keywords(o)):r.val(s)},0)})(),l(e.query.spatial()),e.query.originalKeywords.subscribe(a),e.query.spatial.subscribe(l)})}.call(this),function(){var t;t=jQuery,this.edsc.util.url,t(document).ready(function(){var e;return e=!1,t(".landing-hidden").toggle(!e),t(".landing-visible").toggle(e),t(".landing-toolbar-container").show(),t(".landing-secondary-toolbar-container").show()})}.call(this),function(){var t;(t=jQuery)(document).on("hide.bs.dropdown",function(e){if(t(e.target).hasClass("dropdown-persistent"))return e.preventDefault()}),t(document).on("click","div.temporal-filter, input.temporal-start, input.temporal-stop, input.workspace-name",function(t){return t.stopPropagation()}),t(document).on("click","div.datepicker, span.month, th.next, th.prev, th.switch, span.year",function(t){return t.stopPropagation()})}.call(this),function(){var t,e,n,i,r;t=document,e=window,n=jQuery,i=this.edsc.config,r=this.edsc.util.metrics,n(t).on("click","a[data-pulse]",function(){return n(n(this).attr("data-pulse")).animate({color:"#00ffff"}).animate({color:"inherit"})}),n(t).on("click",'tr a[title="remove"]',function(){return n(this).closest("tr").remove()}),n(t).on("click",'tr a[title="Remove Project"]',function(){if(n(this).closest("tr").remove(),0===n("tbody tr").length)return n(".data-access-content").html("<p>No saved projects</p>")}),n(t).on("click","a, button",function(t){return r.createEvent(t)}),n(t).on("click",'a[href="#"]',function(t){return t.preventDefault()}),n(t).on("edsc.saved",function(){var t;return(t=n(".save-success")).show(),setTimeout(function(){return t.fadeOut()},i.defaultAnimationDurationMs)}),n(t).on("focusin.focushack","*[tabIndex]",function(){return n(this).addClass("has-focus")}),n(t).on("focusout.focushack","*[tabIndex]",function(){return n(this).removeClass("has-focus")}),n(t).ready(function(){return n(t.body).tooltip({selector:'[data-tooltip="true"]'})}),n(t).on("click","a.sign-in",function(){return this.setAttribute("href","/login?next_point="+encodeURIComponent(e.location.href))}),n(t).on("pageview",function(t,e,n){return r.createPageView(e,n)}),n(t).on("timingevent",function(t,e,n){return r.createTiming(e,n)}),n(t).on("dataaccessevent",function(t,e,n){return null==n&&(n=null),r.createDataAccessEvent(e,n)}),n(t).on("click",".description-toggle",function(t){return t.preventDefault(),n(".long-paragraph").toggleClass("expanded"),n(".description-toggle").find("i").toggleClass("fa-chevron-down"),n(".description-toggle").find("i").toggleClass("fa-chevron-up")}),n(t).ready(function(){var t,e,i,o;return null!=(t=null!=(o=n("#map").data("map"))?o.map:void 0)&&(t.on("projectionchange",function(t){return r.createMapEvent("Set Projection: "+t.projection)}),t.on("basemapchange",function(t){return r.createMapEvent("Set Base Map: "+t.name)}),t.on("overlayschange",function(t){var e,n,i;if(i=t.overlays,(n=function(){var t,n,r;for(r=[],t=0,n=i.length;t<n;t++)e=i[t],r.push(e.split("*")[0]);return r}()).length>0)return r.createMapEvent("Set Overlays: "+n.join(", "))}),t.on("spatialtoolchange",function(t){return r.createMapEvent("Spatial: "+t.name)}),t.on("edsc.stickygranule",function(){return r.createMapEvent("Selected Granule")}),t.on("shapefile:start",function(){return r.createMapEvent("Added Shapefile")}),t.on("spatialedit",function(t){return r.createMapEdit(t.preBounds,t.postBounds,t.spatial)})),(i=n("#timeline")).on("buttonzoom",function(){return r.createTimelineEvent("Button Zoom")}),i.on("arrowpan",function(){return r.createTimelineEvent("Left/Right Arrow Pan")}),i.on("clicklabel",function(){return r.createTimelineEvent("Click Label")}),i.on("createdtemporal",function(){return r.createTimelineEvent("Created Temporal")}),i.on("scrollzoom",function(){return r.createTimelineEvent("Scroll Zoom")}),e=null,i.on("scrollpan",function(){return clearTimeout(e),e=setTimeout(function(){return r.createTimelineEvent("Scroll Pan")},200)}),i.on("draggingpan",function(){return r.createTimelineEvent("Dragging Pan")})})}.call(this),function(){var t;(t=jQuery)(document).on("click","a.search-granules-multiple",function(){var e;return(e=t(this).parents(".granule-id-search")).removeClass("search-single"),e.addClass("search-multiple")}),t(document).on("click","a.search-granules-one",function(){var e;return(e=t(this).parents(".granule-id-search")).addClass("search-single"),e.removeClass("search-multiple")})}.call(this),function(){var t;(t=jQuery)(document).on("click",".share-project",function(){var e,n,i;return n=t(this).parents("tr").find("a.project-url").attr("href"),i=location.protocol+"//"+location.host+n,e={placement:"top",template:"<div class='popover share-popover'> <div class='arrow'></div> <div class='popover-title'>Share Project</div> <div class='popover-content'></div> <div class='popover-navigation'> <button class='button-small button-outline' data-role='end'>Close</button> </div> </div>",html:!0,content:'<p>Share your project by copying the URL below and sending it to others.</p> <p><input readonly="readonly" type="text" id="share-url" value='+i+" /></p>"},t(this).popover(e),t(this).popover("show"),t("#share-url").select()}),t(document).on("click",".share-popover [data-role=end]",function(){return t(this).closest(".share-popover").siblings(".share-project").popover("destroy"),t(".share-project").attr("title","Share Project")})}.call(this),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),function(t){"use strict";function e(e){e&&3===e.which||(t(r).remove(),t(o).each(function(){var i=t(this),r=n(i),o={relatedTarget:this};r.hasClass("open")&&(r.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function n(e){var n=e.attr("data-target");n||(n=(n=e.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof e&&i[e].call(n)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.4",s.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var o=n(r),s=o.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(o.trigger(i=t.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},s.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var r=n(i),s=r.hasClass("open");if(!s&&27!=e.which||s&&27==e.which)return 27==e.which&&r.find(o).trigger("focus"),i.trigger("click");var a=" li:not(.disabled):visible a",l=r.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var u=l.index(e.target);38==e.which&&u>0&&u--,40==e.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',s.prototype.keydown)}(jQuery),function(t){"use strict";function e(e,i){return this.each(function(){var r=t(this),o=r.data("bs.modal"),s=t.extend({},n.DEFAULTS,r.data(),"object"==typeof e&&e);o||r.data("bs.modal",o=new n(this,s)),"string"==typeof e?o[e](i):s.show&&o.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,r=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&r;if(this.$backdrop=t('<div class="modal-backdrop '+r+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),r=i.attr("href"),o=t(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},o.data(),i.data());i.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(o,s,this)})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),o="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||i.data("bs.tooltip",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n&&n.$tip&&n.$tip.is(":visible"))n.hoverState="in";else{if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)}},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var r=this,o=this.tip(),s=this.getUID(this.type);this.setContent(),o.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&o.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(a);u&&(a=a.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var h=this.getPosition(),c=o[0].offsetWidth,d=o[0].offsetHeight;if(u){var p=a,f=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(f);a="bottom"==a&&h.bottom+d>m.bottom?"top":"top"==a&&h.top-d<m.top?"bottom":"right"==a&&h.right+c>m.width?"left":"left"==a&&h.left-c<m.left?"right":a,o.removeClass(p).addClass(a)}var g=this.getCalculatedOffset(a,h,c,d);this.applyPlacement(g,a);var v=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top=e.top+s,e.left=e.left+a,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=o&&(e.top=e.top+o-u);var h=this.getViewportAdjustedDelta(n,e,l,u);h.left?e.left+=h.left:e.top+=h.top;var c=/top|bottom/.test(n),d=c?2*h.left-r+l:2*h.top-o+u,p=c?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(d,i[0][p],c)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=r.hoverState&&o.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),e&&e()}var r=this,o=t(this.$tip),s=t.Event("hide.bs."+this.type);if(this.$element.trigger(s),!s.isDefaultPrevented())return o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){var n=(e=e||this.$element)[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=i?{top:0,left:0}:e.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,s,a,o)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,l=e.top+o-s.scroll+i;a<s.top?r.top=s.top-a:l>s.top+s.height&&(r.top=s.top+s.height-l)}else{var u=e.left-o,h=e.left+o+n;u<s.left?r.left=s.left-u:h>s.width&&(r.left=s.left+s.width-h)}return r},n.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},n.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),function(t){"use strict"
;function e(e){return this.each(function(){var i=t(this),r=i.data("bs.popover"),o="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||i.data("bs.popover",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof e&&r[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),e.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){var a=t(i);this.activate(e.closest("li"),n),this.activate(a,a.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(e,i,r){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var s=i.find("> .active"),a=r&&t.support.transition&&(s.length&&s.hasClass("fade")||!!i.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),s.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var r=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery);